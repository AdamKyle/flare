import{d as Br,i as Rt,a as Ra,j as t,R as c,f as u,T as Be,b as H,A as g,D as ee,C as Fe,I as Ce,c as $,S as je,e as z,L as D,r as o,g as Nt,h as oa,k as mn,l as la,W as rt,m as B,n as de,p as Ht,P as He,o as Pt,q as ft,s as Ye,t as Gr,u as kt,O as Ur,v as pn,w as Hr,x as ci,U as _n,y as Kr,z as ca,B as ce,E as Y,F as zr,G as Wr,H as Ka,J as Yr,K as Qr,M as Vr,N as da,Q as Xr,V as Jr,X as Zr,Y as za,Z as _e,_ as eo,$ as to,a0 as so,a1 as ao,a2 as io,a3 as no,a4 as ro,a5 as oo}from"./calendar-DMOIlyV4.js";import"./popper-CvwSYPO-.js";function Lt(a){return Br(a)}function lo(){return function(a){Rt()(a),Ra.registerSingleton(a)}}const co=(a,e)=>{switch(a){case"required_level":return"Level your character to";case"required_game_map_id":return"Get Access to";case"required_quest_id":return"Complete the quest";case"required_quest_item_id":return"Get Quest Item";case"secondary_quest_item_id":return"Get Secondary Quest Item";case"required_kingdom_building_id":return"Get Kingdom Building: "+e.kingdom_building_name+" to level";case"required_skill":return t.jsxs("span",{children:["Get Skill:"," ",ja(e.skill_name,"required_skill",e)," ","to level"]});case"required_skill_type":return`Get Skill Type: ${e.skill_type_name} to level`;case"required_secondary_skill":return t.jsxs("span",{children:["Get Secondary Skill:"," ",ja(e.secondary_skill_name,"required_secondary_skill",e)," ","to level"]});case"skill_type_name":return`Get Skill Type: ${e.skill_type_name} to level`;case"required_faction_id":return`Get Faction ${e.faction_name} to level`;case"required_mercenary_level":return`Purchase and get Mercenary: ${e.mercenary_name} to level`;case"required_secondary_mercenary_level":return`Purchase and get Secondary Mercenary: ${e.secondary_mercenary_name} to level`;case"required_class_specials_equipped":return"Equip # of Class Specials";case"required_class_rank_level":return"Level Your Current Class Rank To Level:";case"required_kingdoms":return"Required Kingdom #";case"required_kingdom_level":return"Required Buildings Level (Combined)";case"required_kingdom_units":return"Required Units Amount (Combined)";case"required_passive_skill":return t.jsxs("span",{children:["Get Passive Skill:"," ",ja(e.passive_name,"required_passive_skill",e)," ","to level"]});case"required_stats":return"Get all stats to";case"required_str":return"Get STR to";case"required_dex":return"Get DEX to";case"required_agi":return"Get AGI to";case"required_dur":return"Get DUR to";case"required_int":return"Get INT to";case"required_chr":return"Get CHR to";case"required_focus":return"Get Focus to";case"required_specialty_type":return"Purchase a piece of";case"required_holy_stacks":return"Applied Holy Oil Amount";case"required_gold":return"Obtain Gold amount";case"required_gold_dust":return"Obtain Gold Dust amount";case"required_shards":return"Obtain Shards amount";case"required_copper_coins":return"Obtain Copper coins amount";case"required_gold_bars":return"Create Gold Bars amount";case"required_to_be_on_game_map_name":return"Physically be on Plane";case"required_event_goal_participation":return"Kill # of Event Creatures";case"required_fame_level":return"Increase your fame with an NPC to";default:return null}},ja=(a,e,s)=>{switch(e){case"required_skill":return t.jsxs("a",{href:"/information/skill/"+s.required_skill,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});case"required_secondary_skill":return t.jsxs("a",{href:"/information/skill/"+s.required_secondary_skill,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});case"required_passive_skill":return t.jsxs("a",{href:"/information/passive-skill/"+s.required_passive_skill,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});default:return a}},ho=a=>{switch(a){case"required_quest_id":return"quest_name";case"required_game_map_id":return"game_map_name";case"required_quest_item_id":return"quest_item_name";case"secondary_quest_item_id":return"secondary_quest_item_name";case"required_skill":return"required_skill_level";case"required_secondary_skill":return"required_secondary_skill_level";case"required_skill_type":return"required_skill_type_level";case"required_faction_id":return"required_faction_level";case"required_mercenary_type":return"required_mercenary_level";case"required_secondary_mercenary_type":return"required_secondary_mercenary_level";case"required_passive_skill":return"required_passive_level";case"required_kingdom_building_id":return"required_kingdom_building_level";case"required_to_be_on_game_map_name":return"required_to_be_on_game_map_name";default:return a}},uo=(a,e,s)=>{switch(e){case"required_quest_id":return t.jsxs("a",{href:"/information/quests/"+s.required_quest_id,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});case"required_game_map_id":return t.jsxs("a",{href:"/information/map/"+s.required_game_map_id,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});case"required_quest_item_id":return t.jsxs("a",{href:"/items/"+s.required_quest_item_id,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});case"secondary_quest_item_id":return t.jsxs("a",{href:"/items/"+s.secondary_quest_item_id,target:"_blank",children:[a," ",t.jsx("i",{className:"fas fa-external-link-alt"})]});default:return a}};class mo extends c.Component{constructor(e){super(e)}render(){return t.jsxs("li",{className:"text-orange-600 dark:text-orange-400",children:[this.props.isFinished?t.jsx("i",{className:"fas fa-check text-green-700 dark:text-green-500 mr-2"}):null,this.props.label,": ",this.props.requirement]})}}const po=()=>["xp_reward","gold_reward","gold_dust_reward","shards_reward"];class _o extends c.Component{constructor(e){super(e)}render(){return t.jsxs("li",{className:"text-green-600 dark:text-green-400",children:[this.props.label,": ",u(this.props.value)]})}}class go extends c.Component{constructor(e){super(e),this.tabs=[{key:"story",name:"Story"},{key:"information",name:"Information"},{key:"desktop-instructions",name:"Desktop Instructions"}],this.props.is_small&&(this.tabs.pop(),this.tabs.push({key:"mobile-instructions",name:"Mobile Instructions"}))}render(){return t.jsxs(Be,{tabs:this.tabs,children:[t.jsx(H,{children:t.jsx("div",{className:"border-1 rounded-sm p-3 bg-slate-300 dark:bg-slate-700 max-h-[250px] overflow-x-auto mb-4",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.intro_text}})})},"story"),t.jsx(H,{children:t.jsx("div",{className:"border-1 rounded-sm p-3 bg-slate-300 dark:bg-slate-700 max-h-[250px] overflow-x-auto mb-4 guide-quest-instructions",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.instructions}})})},"information"),this.props.is_small?t.jsx(H,{children:t.jsx("div",{className:"border-1 rounded-sm p-3 bg-slate-300 dark:bg-slate-700 max-h-[250px] overflow-x-auto mb-4 guide-quest-instructions",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.mobile_instructions}})})},"mobile-instructions"):t.jsx(H,{children:t.jsx("div",{className:"border-1 rounded-sm p-3 bg-slate-300 dark:bg-slate-700 max-h-[250px] overflow-x-auto mb-4 guide-quest-instructions",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.desktop_instructions}})})},"desktop-instructions")]})}}class fo extends c.Component{constructor(e){super(e),this.state={loading:!0,error_message:null,success_message:null,quest_data:null,can_hand_in:!1,is_handing_in:!1,completed_requirements:[]}}componentDidMount(){new g().setRoute("character/guide-quest/"+this.props.user_id).doAjaxCall("get",e=>{this.setState({loading:!1,quest_data:e.data.quest,can_hand_in:e.data.can_hand_in,completed_requirements:e.data.completed_requirements})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message,is_handing_in:!1})}})}buildTitle(){return this.state.loading?"One moment ...":this.state.quest_data===null?"Guide Quest":this.state.quest_data.name}closeMessage(){this.setState({success_message:null,error_message:null})}handInQuest(){this.setState({is_handing_in:!0},()=>{new g().setRoute("guide-quests/hand-in/"+this.props.user_id+"/"+this.state.quest_data.id).doAjaxCall("post",e=>{this.setState({is_handing_in:!1,quest_data:e.data.quest,can_hand_in:e.data.can_hand_in,success_message:e.data.message,completed_requirements:e.data.completed_requirements})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message,is_handing_in:!1})}})})}fetchRequiredKeys(){return Object.keys(this.state.quest_data).filter(e=>(e.startsWith("required_")||e.startsWith("secondary_"))&&this.state.quest_data[e]!==null)}buildRequirementsList(){const e=[];return this.fetchRequiredKeys().forEach(s=>{let i=co(s,this.state.quest_data);if(i!==null){const n=ho(s),r=this.state.quest_data[n],l=this.state.completed_requirements,p=l.includes(s)||l.includes(n);e.push(t.jsx(mo,{label:i,isFinished:p,requirement:uo(r,s,this.state.quest_data)},s))}}),e}buildRewardsItems(){const e=[];return po().forEach(s=>{if(this.state.quest_data[s]!==null){const i=s.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ");e.push(t.jsx(_o,{label:i,value:this.state.quest_data[s]}))}}),e}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.buildTitle(),secondary_actions:{secondary_button_label:"Hand in",secondary_button_disabled:!this.state.can_hand_in,handle_action:this.handInQuest.bind(this)},medium_modal:this.state.quest_data!==null,primary_button_disabled:this.state.action_loading,children:this.state.loading&&this.state.quest_data===null?t.jsx("div",{className:"p-5 mb-2",children:t.jsx(Fe,{})}):this.state.quest_data===null?t.jsx("div",{className:"my-4 text-orange-500 dark:text-orange-300",children:t.jsx("p",{children:"You have completed all the current Guide Quests. When new features are released there will be more Guide Quests for you to walk you through new features!"})}):t.jsxs("div",{className:"overflow-y-auto max-h-[450px] lg:max-h-none lg:overflow-visible",children:[t.jsx(Ce,{additional_css:$("my-4",{hidden:this.state.quest_data.only_during_event===null&&this.state.quest_data.unlock_at_level===null}),children:t.jsx("p",{children:'These types of Guide Quests only pop up during special events or when new features are unlocked at specific levels. You can continue your regular guide quests once you finish this one and any "child" quests that might folow after it.'})}),this.state.success_message!==null?t.jsx(je,{close_alert:this.closeMessage.bind(this),children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{close_alert:this.closeMessage.bind(this),children:this.state.error_message}):null,t.jsx("div",{className:"mt-2",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"mb-2",children:"Required to complete"}),t.jsx("ul",{className:"my-4 list-disc ml-[18px]",children:this.buildRequirementsList()})]}),t.jsx("div",{className:"block md:hidden border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"mb-2",children:"Rewards"}),t.jsx("ul",{className:"list-disc ml-[18px]",children:this.buildRewardsItems()})]})]})}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),this.state.quest_data.faction_points_per_kill!==null?t.jsxs("p",{className:"text-blue-700 dark:text-blue-400",children:["You have been given an additional"," ",this.state.quest_data.faction_points_per_kill," ","Faction Points per kill for this quest."]}):null,t.jsx(go,{intro_text:this.state.quest_data.intro_text,instructions:this.state.quest_data.instructions,desktop_instructions:this.state.quest_data.desktop_instructions,mobile_instructions:this.state.quest_data.mobile_instructions,is_small:this.props.view_port<1600}),t.jsx("p",{className:"mt-4 mb-4",children:"The Hand in button will become available when you meet the requirements. Unless exploration is running."}),this.state.is_handing_in?t.jsx(D,{}):null]})})}}const qt=a=>{a.setState({view_port:window.innerWidth||document.documentElement.clientWidth},()=>{window.addEventListener("resize",()=>{a.setState({view_port:window.innerWidth||document.documentElement.clientWidth})})})};var xo={};class bo extends c.Component{constructor(e){super(e),this.state={is_modal_open:!1,show_button:!0,view_port:0},this.guideQuestButton=Echo.private("guide-quest-button-"+this.props.user_id)}componentDidMount(){this.setState({view_port:window.innerWidth},()=>{qt(this)});const e=this;setTimeout(function(){e.props.force_open_modal&&e.setState({is_modal_open:!0})},xo.APP_ENV==="production"?3500:500),this.guideQuestButton.listen("Game.GuideQuests.Events.RemoveGuideQuestButton",s=>{this.setState({show_button:!1})})}manageGuideQuestModal(){this.setState({is_modal_open:!this.state.is_modal_open})}render(){return this.state.show_button?t.jsxs(o.Fragment,{children:[t.jsx(Nt,{button_label:"Guide Quests",on_click:this.manageGuideQuestModal.bind(this),additional_css:"mr-4"}),this.state.is_modal_open?t.jsx(fo,{is_open:this.state.is_modal_open,manage_modal:this.manageGuideQuestModal.bind(this),user_id:this.props.user_id,view_port:this.state.view_port}):null]}):null}}const di=document.getElementById("guide-button");if(di!==null){const a=document.head.querySelector('meta[name="player"]'),e={userId:a===null?0:parseInt(a.content)},s=document.querySelector("#guide-button"),i=s==null?void 0:s.getAttribute("data-open-modal");let n=!1;typeof i<"u"&&i==="true"&&(n=!0),oa(di).render(t.jsx(bo,{user_id:e.userId,force_open_modal:n}))}var gn={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.targetFrameTime=Ft.snowfallBaseStyle=void 0;var yo={pointerEvents:"none",backgroundColor:"transparent",position:"absolute",top:0,left:0,width:"100%",height:"100%"};Ft.snowfallBaseStyle=yo;var jo=1e3/60;Ft.targetFrameTime=jo;var jt={},vo=typeof Element<"u",ko=typeof Map=="function",wo=typeof Set=="function",So=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function $s(a,e){if(a===e)return!0;if(a&&e&&typeof a=="object"&&typeof e=="object"){if(a.constructor!==e.constructor)return!1;var s,i,n;if(Array.isArray(a)){if(s=a.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!$s(a[i],e[i]))return!1;return!0}var r;if(ko&&a instanceof Map&&e instanceof Map){if(a.size!==e.size)return!1;for(r=a.entries();!(i=r.next()).done;)if(!e.has(i.value[0]))return!1;for(r=a.entries();!(i=r.next()).done;)if(!$s(i.value[1],e.get(i.value[0])))return!1;return!0}if(wo&&a instanceof Set&&e instanceof Set){if(a.size!==e.size)return!1;for(r=a.entries();!(i=r.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(So&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(e)){if(s=a.length,s!=e.length)return!1;for(i=s;i--!==0;)if(a[i]!==e[i])return!1;return!0}if(a.constructor===RegExp)return a.source===e.source&&a.flags===e.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof e.valueOf=="function")return a.valueOf()===e.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof e.toString=="function")return a.toString()===e.toString();if(n=Object.keys(a),s=n.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[i]))return!1;if(vo&&a instanceof Element)return!1;for(i=s;i--!==0;)if(!((n[i]==="_owner"||n[i]==="__v"||n[i]==="__o")&&a.$$typeof)&&!$s(a[n[i]],e[n[i]]))return!1;return!0}return a!==a&&e!==e}var fn=function(e,s){try{return $s(e,s)}catch(i){if((i.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw i}},Wa={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.getSize=Po;$t.lerp=No;$t.random=Co;$t.randomElement=To;function Co(a,e){var s=Math.random()*(e-a+1)+a;return!Number.isInteger(a)||!Number.isInteger(e)?s:Math.floor(s)}function No(a,e,s){return(1-s)*a+s*e}function Po(a){return a?{height:a.offsetHeight,width:a.offsetWidth}:{height:0,width:0}}function To(a){var e=Math.floor(Math.random()*a.length);return a[e]}(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultConfig=a.default=void 0;var e=i(fn),s=$t;function i(k){return k&&k.__esModule?k:{default:k}}function n(k,C){var v=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);C&&(P=P.filter(function(I){return Object.getOwnPropertyDescriptor(k,I).enumerable})),v.push.apply(v,P)}return v}function r(k){for(var C=1;C<arguments.length;C++){var v=arguments[C]!=null?arguments[C]:{};C%2?n(Object(v),!0).forEach(function(P){N(k,P,v[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(P){Object.defineProperty(k,P,Object.getOwnPropertyDescriptor(v,P))})}return k}function l(k){return _(k)||y(k)||m(k)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(k,C){if(k){if(typeof k=="string")return b(k,C);var v=Object.prototype.toString.call(k).slice(8,-1);if(v==="Object"&&k.constructor&&(v=k.constructor.name),v==="Map"||v==="Set")return Array.from(k);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return b(k,C)}}function y(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}function _(k){if(Array.isArray(k))return b(k)}function b(k,C){(C==null||C>k.length)&&(C=k.length);for(var v=0,P=new Array(C);v<C;v++)P[v]=k[v];return P}function T(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")}function j(k,C){for(var v=0;v<C.length;v++){var P=C[v];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}}function w(k,C,v){return C&&j(k.prototype,C),v&&j(k,v),Object.defineProperty(k,"prototype",{writable:!1}),k}function N(k,C,v){return C in k?Object.defineProperty(k,C,{value:v,enumerable:!0,configurable:!0,writable:!0}):k[C]=v,k}var A={color:"#dee4fd",radius:[.5,3],speed:[1,3],wind:[-.5,2],changeFrequency:200,rotationSpeed:[-1,1]};a.defaultConfig=A;var E=function(){function k(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};T(this,k),N(this,"config",void 0),N(this,"params",void 0),N(this,"framesSinceLastUpdate",void 0),N(this,"image",void 0),this.updateConfig(v);var P=this.config,I=P.radius,U=P.wind,he=P.speed,re=P.rotationSpeed;this.params={x:(0,s.random)(0,C.offsetWidth),y:(0,s.random)(-C.offsetHeight,0),rotation:(0,s.random)(0,360),radius:s.random.apply(void 0,l(I)),speed:s.random.apply(void 0,l(he)),wind:s.random.apply(void 0,l(U)),rotationSpeed:s.random.apply(void 0,l(re)),nextSpeed:s.random.apply(void 0,l(U)),nextWind:s.random.apply(void 0,l(he)),nextRotationSpeed:s.random.apply(void 0,l(re))},this.framesSinceLastUpdate=0}return w(k,[{key:"selectImage",value:function(){this.config.images&&this.config.images.length>0?this.image=(0,s.randomElement)(this.config.images):this.image=void 0}},{key:"updateConfig",value:function(v){var P=this.config;this.config=r(r({},A),v),this.config.changeFrequency=(0,s.random)(this.config.changeFrequency,this.config.changeFrequency*1.5),this.params&&!(0,e.default)(this.config.radius,P==null?void 0:P.radius)&&(this.params.radius=s.random.apply(void 0,l(this.config.radius))),(0,e.default)(this.config.images,P==null?void 0:P.images)||this.selectImage()}},{key:"updateTargetParams",value:function(){this.params.nextSpeed=s.random.apply(void 0,l(this.config.speed)),this.params.nextWind=s.random.apply(void 0,l(this.config.wind)),this.image&&(this.params.nextRotationSpeed=s.random.apply(void 0,l(this.config.rotationSpeed)))}},{key:"update",value:function(v){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,I=this.params,U=I.x,he=I.y,re=I.rotation,Ne=I.rotationSpeed,me=I.nextRotationSpeed,J=I.wind,ve=I.speed,xe=I.nextWind,Se=I.nextSpeed,be=I.radius;this.params.x=(U+J*P)%(v.offsetWidth+be*2),this.params.x>v.offsetWidth+be&&(this.params.x=-be),this.params.y=(he+ve*P)%(v.offsetHeight+be*2),this.params.y>v.offsetHeight+be&&(this.params.y=-be),this.image&&(this.params.rotation=(re+Ne)%360),this.params.speed=(0,s.lerp)(ve,Se,.01),this.params.wind=(0,s.lerp)(J,xe,.01),this.params.rotationSpeed=(0,s.lerp)(Ne,me,.01),this.framesSinceLastUpdate++>this.config.changeFrequency&&(this.updateTargetParams(),this.framesSinceLastUpdate=0)}},{key:"getImageOffscreenCanvas",value:function(v,P){var I;if(v instanceof HTMLImageElement&&v.loading)return v;var U=k.offscreenCanvases.get(v);if(U||(U={},k.offscreenCanvases.set(v,U)),!(P in U)){var he,re=document.createElement("canvas");re.width=P,re.height=P,(he=re.getContext("2d"))===null||he===void 0||he.drawImage(v,0,0,P,P),U[P]=re}return(I=U[P])!==null&&I!==void 0?I:v}},{key:"draw",value:function(v){if(this.image){v.setTransform(1,0,0,1,this.params.x,this.params.y);var P=Math.ceil(this.params.radius);v.rotate(this.params.rotation*Math.PI/180),v.drawImage(this.getImageOffscreenCanvas(this.image,P),-Math.ceil(P/2),-Math.ceil(P/2),P,P)}else v.beginPath(),v.arc(this.params.x,this.params.y,this.params.radius,0,2*Math.PI),v.fillStyle=this.config.color,v.closePath(),v.fill()}}]),k}();N(E,"offscreenCanvases",new WeakMap);var q=E;a.default=q})(Wa);Object.defineProperty(jt,"__esModule",{value:!0});jt.useComponentSize=void 0;jt.useDeepCompareEffect=yn;jt.useDeepMemo=Ho;jt.useSnowflakes=jt.useSnowfallStyle=void 0;var bt=o,Ao=xn(fn),Ro=xn(Wa),qo=Ft,hi=$t;function xn(a){return a&&a.__esModule?a:{default:a}}function ui(a,e){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,i)}return s}function mi(a){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ui(Object(s),!0).forEach(function(i){Do(a,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ui(Object(s)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(s,i))})}return a}function Do(a,e,s){return e in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}function pi(a){return Mo(a)||Io(a)||bn(a)||Eo()}function Eo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Io(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Mo(a){if(Array.isArray(a))return qa(a)}function Ya(a,e){return Lo(a)||Oo(a,e)||bn(a,e)||Fo()}function Fo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(a,e){if(a){if(typeof a=="string")return qa(a,e);var s=Object.prototype.toString.call(a).slice(8,-1);if(s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set")return Array.from(a);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return qa(a,e)}}function qa(a,e){(e==null||e>a.length)&&(e=a.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=a[s];return i}function Oo(a,e){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var i=[],n=!0,r=!1,l,p;try{for(s=s.call(a);!(n=(l=s.next()).done)&&(i.push(l.value),!(e&&i.length===e));n=!0);}catch(m){r=!0,p=m}finally{try{!n&&s.return!=null&&s.return()}finally{if(r)throw p}}return i}}function Lo(a){if(Array.isArray(a))return a}var $o=function(e,s,i){if(!e.current)return[];for(var n=[],r=0;r<s;r++)n.push(new Ro.default(e.current,i));return n},Bo=function(e,s,i){var n=(0,bt.useState)([]),r=Ya(n,2),l=r[0],p=r[1];return(0,bt.useEffect)(function(){p(function(m){var y=s-m.length;return y>0?[].concat(pi(m),pi($o(e,y,i))):y<0?m.slice(0,s):m})},[s,e,i]),(0,bt.useEffect)(function(){p(function(m){return m.map(function(y){return y.updateConfig(i),y})})},[i]),l};jt.useSnowflakes=Bo;var Go=function(e){var s=(0,bt.useState)((0,hi.getSize)(e.current)),i=Ya(s,2),n=i[0],r=i[1],l=(0,bt.useCallback)(function(){e.current&&r((0,hi.getSize)(e.current))},[e]);return(0,bt.useLayoutEffect)(function(){var p=window,m=p.ResizeObserver;if(e.current)if(l(),typeof m=="function"){var y=new m(l);return y.observe(e.current),function(){return y.disconnect()}}else return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}},[e,l]),n};jt.useComponentSize=Go;var Uo=function(e){var s=(0,bt.useMemo)(function(){return mi(mi({},qo.snowfallBaseStyle),e||{})},[e]);return s};jt.useSnowfallStyle=Uo;function yn(a,e){var s=(0,bt.useRef)(e);return(0,Ao.default)(e,s.current)||(s.current=e),(0,bt.useEffect)(a,s.current)}function Ho(a){var e=(0,bt.useState)(a),s=Ya(e,2),i=s[0],n=s[1];return yn(function(){return n(a)},[a]),i}(function(a){function e(_){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},e(_)}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=p(o),i=Ft,n=jt,r=Wa;function l(_){if(typeof WeakMap!="function")return null;var b=new WeakMap,T=new WeakMap;return(l=function(w){return w?T:b})(_)}function p(_,b){if(!b&&_&&_.__esModule)return _;if(_===null||e(_)!=="object"&&typeof _!="function")return{default:_};var T=l(b);if(T&&T.has(_))return T.get(_);var j={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in _)if(N!=="default"&&Object.prototype.hasOwnProperty.call(_,N)){var A=w?Object.getOwnPropertyDescriptor(_,N):null;A&&(A.get||A.set)?Object.defineProperty(j,N,A):j[N]=_[N]}return j.default=_,T&&T.set(_,j),j}var m=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=b.color,j=T===void 0?r.defaultConfig.color:T,w=b.changeFrequency,N=w===void 0?r.defaultConfig.changeFrequency:w,A=b.radius,E=A===void 0?r.defaultConfig.radius:A,q=b.speed,k=q===void 0?r.defaultConfig.speed:q,C=b.wind,v=C===void 0?r.defaultConfig.wind:C,P=b.rotationSpeed,I=P===void 0?r.defaultConfig.rotationSpeed:P,U=b.snowflakeCount,he=U===void 0?150:U,re=b.images,Ne=b.style,me=(0,n.useSnowfallStyle)(Ne),J=(0,s.useRef)(null),ve=(0,n.useComponentSize)(J),xe=(0,s.useRef)(0),Se=(0,s.useRef)(Date.now()),be=(0,n.useDeepMemo)({color:j,changeFrequency:N,radius:E,speed:k,wind:v,rotationSpeed:I,images:re}),qe=(0,n.useSnowflakes)(J,he,be),Je=(0,s.useCallback)(function(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,O=J.current;if(O){qe.forEach(function(L){return L.update(O,Qe)});var F=O.getContext("2d");F&&(F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,O.offsetWidth,O.offsetHeight),qe.forEach(function(L){return L.draw(F)}))}},[qe]),Ke=(0,s.useCallback)(function(){var Qe=Date.now(),O=Date.now()-Se.current;Se.current=Qe;var F=O/i.targetFrameTime;Je(F),xe.current=requestAnimationFrame(Ke)},[Je]);return(0,s.useEffect)(function(){return Ke(),function(){return cancelAnimationFrame(xe.current)}},[Ke]),s.default.createElement("canvas",{ref:J,height:ve.height,width:ve.width,style:me,"data-testid":"SnowfallCanvas"})},y=m;a.default=y})(gn);const Ko=mn(gn),_i=(a,e,s)=>a<288?0:a>288?-200:e,gi=(a,e,s)=>a<=368?0:a>368?s>=1920?0:s<=1600?-50:0:e,zo=(a,e,s)=>{const{x:i,y:n}=a,r=Math.sign(a.y),l=Math.sign(a.x);let p=e,m=s;return r===-1?p+=Math.abs(r):p=0,l===-1?m+=Math.abs(l):m=0,{map_position:{x:i,y:n},bottom_bounds:p,right_bounds:m}},Wo=a=>a.props.view_port<=1600&&a.props.view_port<1920?-50:0;class va extends c.Component{constructor(e){super(e)}openLocationInformation(e){this.props.openLocationDetails(parseInt(e.target.getAttribute("data-location-id")))}render(){return t.jsx("button",{"data-location-id":this.props.location.id,className:this.props.pin_class,style:{top:this.props.location.y,left:this.props.location.x},onClick:this.openLocationInformation.bind(this)},this.props.location.id)}}const vt=(a,e,s,i)=>{if(typeof s>"u"||typeof i>"u")return{can_afford:!0,distance:0,cost:0,time_out:0};const n=Yo(a,e,s),r=Math.round(n/60),l=r*1e3;let p=!0;return(i==null||l>la(i.gold))&&(p=!1),{can_afford:p,distance:n,cost:l,time_out:r}},Yo=(a,e,s)=>{const i=Math.pow(a-s.x,2),n=Math.pow(e-s.y,2);let r=i+n;return r=Math.sqrt(r),isNaN(r)?0:Math.round(r)};class rs extends c.Component{constructor(e){super(e)}render(){return this.props.character===null?null:t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.title,children:t.jsx("div",{className:$({"max-h-[450px] overflow-x-auto":typeof this.props.no_scrolling>"u"}),children:this.props.children})})}}class jn extends c.Component{constructor(e){super(e)}render(){return t.jsxs(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:"Speical Locations",children:[t.jsxs("p",{className:"my-2",children:["This is a special location which contains the same monsters you have been fighting but they are much stronger here. Players will want to have ",t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["Devouring Darkness and Light ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ",t.jsxs("a",{href:"/information/quest-items",target:"_blank",children:["Quest items ",t.jsx("i",{className:"fas fa-external-link-alt"})," "]}),"Which you can get from completing various: ",t.jsxs("a",{href:"/information/quests",target:"_blank",children:["Quests ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," with in the game."]}),t.jsxs("p",{children:["These places offer specific quest items that drop. You cannot explore here to have them drop for you. You must manually fight the monsters. You will want your looting skill raised as high as you can as we only use a max of 45% of the skill, even if the skill bonus is 100%. You can read more about special locations and see their drops by reading: ",t.jsxs("a",{href:"/information/special-locations",target:"_blank",children:["Special Locations ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"."]})]})}}let vn=class extends c.Component{constructor(e){super(e),this.state={open_help_dialogue:!1}}manageHelpDialogue(){this.setState({open_help_dialogue:!this.state.open_help_dialogue})}isSpecialLocation(){return this.props.location.increase_enemy_percentage_by!==null}renderSpecialType(){return this.props.location.type_name==="Gold Mines"?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"Gold Mines!"}),t.jsx(rt,{additional_css:"my-4 font-bold",children:"Exploration cannot be used here if you want the below rewards. You must manually fight."}),t.jsx("p",{className:"my-4",children:"Welcome to the Gold Mines, a special mid game location to help players start farming currencies for end game gear while they continue their questing to unlock more of the game and work further towards the true power of their character! Come now child, death awaits!"}),t.jsxs("ul",{className:"list-disc",children:[t.jsx("li",{className:"ml-4",children:"Characters can get 1-10,000 Gold from fighting monsters. This can be increased to 20,000 if an event is triggered at this area."}),t.jsx("li",{className:"ml-4",children:"Characters can get 1-500 Gold Dust from fighting monsters. This can be increased to 1,000 if an event is triggered at this area."}),t.jsx("li",{className:"ml-4",children:"Characters can get 1-500 Shards from fighting monsters. This can be increased to 1,000 if an event is triggered at this area."}),t.jsxs("li",{className:"ml-4",children:["There is a 1/1,000,000 (+15% Looting) chance to get a random ",t.jsxs("a",{href:"/information/random-enchants",target:"_blank",children:["Medium Unique ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," from Monsters half way down the list of more. This can be reduced to 1/500,000 (+30% Looting) chance if an event is triggered at this area."]}),t.jsx("li",{className:"ml-4",children:'There is a 1/1,000,000 chance to trigger an event while fighting here to reduce the chances and increase the currencies (the above "if an event is triggered") for 1 hour at this location only.'})]})]}):this.props.location.type_name==="The Old Church"?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"The Old Church!"}),t.jsx(rt,{additional_css:"my-4 font-bold",children:"Exploration cannot be used here if you want the below rewards. You must manually fight."}),t.jsx(Ce,{additional_css:"my-4 font-bold",children:"The below only applies to those who poses the Christmas Tree Light Bulb Quest item from completing a quest chain that starts with: Thousands of Years Ago ... and ends with: The doors to The Old Church."}),t.jsx("p",{className:"my-4",children:"Welcome to the The Old Church, a special mid game location to help players start farming currencies for end game gear while they continue their questing to unlock more of the game and work further towards the true power of their character! Come now child, death awaits!"}),t.jsxs("ul",{className:"list-disc",children:[t.jsx("li",{className:"ml-4",children:"Characters can get 1-20,000 Gold from fighting monsters. This can be increased to 40,000 if an event is triggered at this area."}),t.jsx("li",{className:"ml-4",children:"Characters can get 1-1000 Gold Dust from fighting monsters. This can be increased to 2,000 if an event is triggered at this area."}),t.jsx("li",{className:"ml-4",children:"Characters can get 1-1000 Shards from fighting monsters. This can be increased to 2,000 if an event is triggered at this area."}),t.jsxs("li",{className:"ml-4",children:["There is a 1/1,000,000 (+15% Looting) chance to get a random ",t.jsxs("a",{href:"/information/random-enchants",target:"_blank",children:["Medium Unique ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," from Monsters half way down the list of more. This can be reduced to 1/500,000 (+30% Looting) chance if an event is triggered at this area."]}),t.jsx("li",{className:"ml-4",children:'There is a 1/1,000,000 chance to trigger an event while fighting here to reduce the chances and increase the currencies (the above "if an event is triggered") for 1 hour at this location only.'})]})]}):this.props.location.type_name==="Purgatory Dungeons"?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"Purgatory Dungeons!"}),t.jsxs("p",{className:"my-4",children:["You have entered into the Purgatory Dungeons. You ",t.jsx("strong",{children:"can explore here"}),". This is the only place known to drop ",t.jsxs("a",{href:"/information/mythical-items",target:"_blank",children:["Mythic Items ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),", aside from Celestial Kings who spawn after ",t.jsxs("a",{href:"/information/monthly-pvp-event",target:"_blank",children:["Monthly PVP ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]}):this.props.location.type_name==="Purgatory Smiths House"?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"Purgatory Smith House!"}),t.jsx(rt,{children:"Exploration cannot be used here if you want the below rewards. You must use manually fight."}),t.jsx("p",{className:"mb-4",children:"In this location, a few things will happen for those who have access:"}),t.jsxs("ul",{className:"list-disc",children:[t.jsx("li",{className:"ml-4",children:"Characters can get 1-1000 Gold Dust from fighting monsters. This can be increased to 5,000 if an event is triggered at this area."}),t.jsx("li",{className:"ml-4",children:"Characters can get 1-1000 Shards from fighting monsters. This can be increased to 5,000 if an event is triggered at this area."}),t.jsxs("li",{className:"ml-4",children:["Characters can get 1-1000 Copper Coins",t.jsx("sup",{children:"*"})," from fighting monsters. This can be increased to 5,000 if an event is triggered at this area."]}),t.jsxs("li",{className:"ml-4",children:["There is a 1/1,000,000 chance to get a Purgatory Chain ",t.jsxs("a",{href:"/information/random-enchants",target:"_blank",children:["Legendary Unique ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," from Monsters half way down the list of more. This can be reduced to 1/500,000 chance if an event is triggered at this area."]}),t.jsxs("li",{className:"ml-4",children:["There is a 1/10,000,000 chance to get a Purgatory Chain ",t.jsxs("a",{href:"/information/mythical-items",target:"_blank",children:["Mythic Items ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," from the last monster in the list. This can be reduced to 1/5,000,000 chance if an event is triggered at this area."]}),t.jsx("li",{className:"ml-4",children:'There is a 1/1,000,000 chance to trigger an event while fighting here to reduce the chances and increase the currencies (the above "if an event is triggered") for 1 hour at this location only.'})]}),t.jsxs("p",{className:"mt-4 mb-4 italic",children:[t.jsx("sup",{children:"*"})," Provided characters have the required quest item to obtain copper coins."]})]}):null}renderRaidDetails(){if(this.props.location.is_corrupted)return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"Corrupted"}),t.jsx("p",{className:"my-4",children:"This location has been corrupted by evil forces! There happens to be a raid going on here, the monsters of this location are exceptionaly hard, how ever quest items that you would get for visiting the place, if applicable, will still drop."}),this.props.location.has_raid_boss?t.jsx("p",{className:"my-4 font-bold",children:"The raid boss lives here! He will be the first monster in the list!"}):null,t.jsx("p",{className:"my-4 italic text-sm",children:"It is recomended that players have top tier gear, have reincarnated (at max level) at least twice and have gear with sockets and Gems attached. All players are welcome to participate in the raid, regardless of gear or level, but the more prepared the better chances you have."})]})}render(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-3",children:this.props.location.description}),this.renderRaidDetails(),this.isSpecialLocation()?t.jsxs("div",{className:"max-h-[350px] lg:max-h-auto overflow-y-scroll",children:[t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("h4",{children:"Special Location Details"}),t.jsx("div",{children:t.jsxs("button",{type:"button",onClick:this.manageHelpDialogue.bind(this),className:"text-blue-500 dark:text-blue-300 ml-2",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]}),t.jsx("p",{className:"mb-4",children:"Places like this can increase the enemies stats and resistances as well as skills. It is essential that players craft appropriate resistance and stat reduction gear to survive harder creatures here."}),t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Increase Core Stats By: "}),t.jsx("dd",{children:u(this.props.location.increases_enemy_stats_by)}),t.jsx("dt",{children:"Increase Percentage Based Values By: "}),t.jsxs("dd",{children:[this.props.location.increase_enemy_percentage_by!==null?(this.props.location.increase_enemy_percentage_by*100).toFixed(0):0,"%"]})]}),this.props.location.type_name!==null?this.renderSpecialType():null]}):this.props.location.quest_reward_item_id!==null?t.jsx(o.Fragment,{children:t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Quest Item (Gained on visiting)"}),t.jsx("dd",{children:t.jsxs("a",{href:"/information/item/"+this.props.location.quest_reward_item_id,target:"_blank",children:[this.props.location.quest_reward_item.affix_name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})}):null,this.state.open_help_dialogue?t.jsx(jn,{manage_modal:this.manageHelpDialogue.bind(this)}):null]})}};class Qo extends c.Component{constructor(e){super(e),this.state={can_afford:!1,open_help_dialogue:!1,distance:0,cost:0,time_out:0,x:this.props.location.x,y:this.props.location.y}}componentDidMount(){typeof this.props.character_position<"u"&&typeof this.props.currencies<"u"&&this.setState(vt(this.props.location.x,this.props.location.y,this.props.character_position,this.props.currencies))}handleTeleport(){typeof this.props.teleport_player<"u"&&this.props.teleport_player({x:this.state.x,y:this.state.y,cost:this.state.cost,timeout:this.state.time_out}),this.props.handle_close()}teleportDisabled(){return this.state.cost===0||!this.state.can_afford||!this.props.can_move||this.props.is_automation_running||this.props.is_dead}manageHelpDialogue(){this.setState({open_help_dialogue:!this.state.open_help_dialogue})}underwaterCavesHouse(){return this.props.location.type_name==="Underwater Caves"?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsx("h5",{className:"text-orange-500 dark:text-orange-400",children:"Underwater Caves"}),t.jsxs("p",{className:"my-4",children:["Players in this location cannot explore, instead they will find their attack section has been updated to allow them to select a ",t.jsxs("a",{href:"/information/ranked-fights",target:"_blank",children:["Rank ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," and a monster, from here the fights take place on the server."]}),t.jsx("p",{className:"mb-4",children:"Ranked fights are tracked and reset every month. Players can see who is at the top of the rank fights by opening the side menu and selecting Tops. From here you can see who is #1 in each of the ranks. Being #1 means killing the last creature in the list for that rank."}),t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"})]}):null}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.props.title+" (X/Y): "+this.props.location.x+"/"+this.props.location.y,secondary_actions:this.props.hide_secondary_button?null:{secondary_button_disabled:this.teleportDisabled(),secondary_button_label:"Teleport",handle_action:this.handleTeleport.bind(this)},children:[t.jsx(vn,{location:this.props.location}),this.underwaterCavesHouse(),this.state.cost>0?t.jsxs("dl",{children:[t.jsx("dt",{children:"Cost to teleport (gold):"}),t.jsx("dd",{className:$({"text-gray-700":this.state.cost===0},{"text-green-600":this.state.can_afford&&this.state.cost>0},{"text-red-600":!this.state.can_afford&&this.state.cost>0}),children:u(this.state.cost)}),t.jsx("dt",{children:"Can afford to teleport:"}),t.jsx("dd",{children:this.state.can_afford?"Yes":"No"}),t.jsx("dt",{children:"Distance (miles):"}),t.jsx("dd",{children:this.state.distance}),t.jsx("dt",{children:"Timeout (minutes):"}),t.jsx("dd",{children:this.state.time_out}),t.jsx("dt",{children:"Required Item To Enter:"}),t.jsx("dd",{children:this.props.location.required_quest_item_id!==null?t.jsxs("a",{href:"/information/item/"+this.props.location.required_quest_item_id,target:"_blank",children:[this.props.location.required_quest_item_name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]}):"Requires No Item"})]}):t.jsx(rt,{children:"You are too close to the location to be able to teleport."}),this.state.open_help_dialogue?t.jsx(jn,{manage_modal:this.manageHelpDialogue.bind(this)}):null]})}}class Vo extends c.Component{constructor(e){super(e),this.state={open_location_modal:!1,location:null,view_port:null}}componentDidMount(){qt(this)}componentDidUpdate(){this.state.view_port!==null&&this.state.view_port<600&&this.state.open_location_modal&&this.setState({location:null,open_location_modal:!1})}closeLocationDetails(){this.setState({open_location_modal:!1,location:null})}openLocationDetails(e){if(this.props.locations===null)return;let s=this.props.locations.filter(i=>i.id===e);s.length>0&&this.setState({open_location_modal:!0,location:s[0]})}renderLocationPins(){if(this.props.locations!==null)return this.props.locations.map(e=>e.pin_css_class!==null?t.jsx(va,{location:e,openLocationDetails:this.openLocationDetails.bind(this),pin_class:e.is_corrupted?"location-corrupted-pin":e.pin_css_class},"port-pin-"+e.id):e.is_port?t.jsx(va,{location:e,openLocationDetails:this.openLocationDetails.bind(this),pin_class:e.is_corrupted?"location-corrupted-pin":"port-x-pin"},"port-pin-"+e.id):t.jsx(va,{location:e,openLocationDetails:this.openLocationDetails.bind(this),pin_class:e.is_corrupted?"location-corrupted-pin":"location-x-pin"},"location-pin-"+e.id))}render(){return t.jsxs(o.Fragment,{children:[this.renderLocationPins(),this.state.open_location_modal&&typeof this.state.location<"u"&&this.state.location!==null?t.jsx(Qo,{is_open:this.state.open_location_modal,handle_close:this.closeLocationDetails.bind(this),title:this.state.location.name,location:this.state.location,character_position:this.props.character_position,currencies:this.props.currencies,teleport_player:this.props.teleport_player,hide_secondary_button:!1,can_move:this.props.can_move,is_automation_running:this.props.is_automation_running,is_dead:this.props.is_dead}):null]})}}class Xo extends c.Component{constructor(e){super(e)}kingdomStyle(){return{top:this.props.kingdom.y_position,left:this.props.kingdom.x_position,"--kingdom-color":this.props.kingdom.color}}openKingdomModal(e){this.props.open_kingdom_modal(parseInt(e.target.getAttribute("data-kingdom-id")))}render(){return t.jsx("button",{role:"button","data-kingdom-id":this.props.kingdom.id,className:"kingdom-x-pin",style:this.kingdomStyle(),onClick:this.openKingdomModal.bind(this)},Math.random().toString(36).substring(7)+"-"+this.props.kingdom.id)}}class kn extends c.Component{constructor(e){super(e)}buildTitle(){switch(this.props.type){case"wall_defence":return"Wall Defence";case"treas_defence":return"Treasury Defence";case"gb_defence":return"Gold Bars Defence";case"passive_defence":return"Passive Skill Defence";case"total_defence":return"Total Defence";case"teleport_details":return"Teleport Details";case"total_damage":return"Items Damage (minus kingdom defence reduction)";case"building_damage":return"Damage to the defenders buildings";case"unit_damage":return"Damage to the defenders units";case"total_reduction":return"Defenders Damage Reduction";case"item_resistance":return"Item Resistance";default:return"Error. Unknown type."}}renderWallDefence(){return t.jsx("p",{className:"my-4",children:"This is calculated by your wall level divided wall max level to give the kingdom additional defence bonus towards attacking units and items that are dropped on your kingdoms."})}renderTreasuryDefence(){return t.jsx("p",{className:"my-4",children:"This is calculated by dividing the amount of treasure by the max you can store: 2 Billion Gold. This defence bonus is then added to walls and the other bonuses below to give the kingdom an over all defence bonus."})}renderGoldBarsDefence(){return t.jsxs("p",{className:"my-4",children:["This is the amount of gold bars you have divided by the amount you can have which is 1000 at a cost of 2 billion each. Gold bars can only be purchased in kingdoms where you have the ",t.jsxs("a",{href:"/information/kingdom-passive-skills",target:"_blank",children:["Goblin Bank ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," building unlocked. This is then added to other defence bonuses you have."]})}renderPassiveDefence(){return t.jsxs("p",{className:"my-4",children:["By training ",t.jsxs("a",{href:"/information/kingdom-passive-skills",target:"_blank",children:["passive skills ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," Your kingdom can unlock additional defence bonus for yur kingdom. This is then applied to all other defence bonuses."]})}renderTotalDefence(){return t.jsx("p",{className:"my-4",children:"This is the total and combined defence your kingdom has. If another player sends cannons towards you, your defence will be capped at 45% regardless if it is higher then that. Defence bonus mostly protects against users using items on your kingdom that can do up to 100% in damage for a single one."})}renderTeleportDetails(){return t.jsxs("p",{className:"my-4",children:["This location will let you teleport to it for a fee and a timeout in minutes. If you have trained the skill ",t.jsxs("a",{href:"/information/skill-information",target:"_blank",children:["Quick Feet ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," to a high enough level then the timer will reduce the time before you can move again by a % down to a maximum of 1 minute. If the teleport button is disabled, you cannot afford to travel."]})}renderTotalDamage(){return t.jsx("p",{className:"my-4",children:"This is the total damage of the the items you have selected. The damage is reduced based on the defenders kingdom defence reduction. Maximum reduction is 45%."})}renderBuildingDamage(){return t.jsx("p",{className:"my-4",children:"Based on the items you have selected, 50% of the damage is used against the buildings of the kingdom."})}renderUnitDamage(){return t.jsx("p",{className:"my-4",children:"Based on the items you have selected, 50% of the damage is used against the units of the kingdom."})}renderTotalReduction(){return t.jsx("p",{className:"my-4",children:"If the kingdom has over 100% total defence, then we divide the amount over 100% by 5%. giving a maximum of 20% reduction in damage. this means a kingdom with 325% reduces the damage by 45%. However, if the enemy kingdom has 101% total defence, we will reduce the damage by 5%."})}renderItemResistance(){return t.jsxs("p",{className:"my-4",children:["A kingdom with 100% Item Resistance will not take damage from ",t.jsxs("a",{href:"/information/items-and-kingdoms",target:"_blank",children:["items that you craft through alchemy ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," in which would do damage to players kingdoms. This defence is earned only through completing ",t.jsxs("a",{href:"/information/faction-loyalty",target:"_blank",children:["Faction Loyalty ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," Fame objectives for NPC's while Pledged to a faction. This bonus will only apply while pledged to that faction to all kingdoms on that factions plane."]})}buildSections(){switch(this.props.type){case"wall_defence":return this.renderWallDefence();case"treas_defence":return this.renderTreasuryDefence();case"gb_defence":return this.renderGoldBarsDefence();case"passive_defence":return this.renderPassiveDefence();case"total_defence":return this.renderTotalDefence();case"teleport_details":return this.renderTeleportDetails();case"total_damage":return this.renderTotalDamage();case"building_damage":return this.renderBuildingDamage();case"unit_damage":return this.renderUnitDamage();case"total_reduction":return this.renderTotalReduction();case"item_resistance":return this.renderItemResistance();default:return"Error. Unknown type."}}render(){return t.jsx(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:this.buildTitle(),children:this.buildSections()})}}class Jo extends c.Component{constructor(e){super(e)}render(){return t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"w-full lg:grid lg:grid-cols-3 lg:gap-2",children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Wood:"}),t.jsxs("dd",{children:[u(this.props.kingdom.current_wood)," / ",u(this.props.kingdom.max_wood)]}),t.jsx("dt",{children:"Clay:"}),t.jsxs("dd",{children:[u(this.props.kingdom.current_clay)," / ",u(this.props.kingdom.max_clay)]})]})}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Stone:"}),t.jsxs("dd",{children:[u(this.props.kingdom.current_stone)," / ",u(this.props.kingdom.max_stone)]}),t.jsx("dt",{children:"Iron:"}),t.jsxs("dd",{children:[u(this.props.kingdom.current_iron)," / ",u(this.props.kingdom.max_iron)]})]})}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Pop.:"}),t.jsxs("dd",{children:[u(this.props.kingdom.current_population)," / ",u(this.props.kingdom.max_population)]})]})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"})]})}}class wn{getKingdomSelectionOptions(e){return e.map(s=>({label:s.kingdom_name,value:s.kingdom_id.toString()}))}setAmountToMove(e,s,i,n,r){let l=JSON.parse(JSON.stringify(e));const p=l.findIndex(y=>y.kingdom_id===s&&y.unit_id===i);let m=parseInt(r.target.value,10)||0;if(m<=0&&(m=0),m>n&&(m=n),p===-1){if(m===0)return null;l.push({kingdom_id:s,unit_id:i,amount:m>n?n:m})}else{if(m===0)return l.splice(p,1),l;l[p].amount=m>n?n:m}return l}getValueOfUnitsToCall(e,s,i){let n=JSON.parse(JSON.stringify(e));const r=n.findIndex(l=>l.kingdom_id===s&&l.unit_id===i);return r===-1?"":n[r].amount}getUnitOptions(e,s,i,n){const r=e.filter(m=>{if(i.includes(m.kingdom_id))return m}),l=this;return r.map((m,y)=>m.units.map((_,b)=>t.jsxs("div",{children:[b===0?t.jsxs("p",{className:"my-2",children:["From Kingdom: ",m.kingdom_name," and will take: ",l.getTimeToTravel(m.time)," to get to this kingdom"]}):null,t.jsxs("div",{className:"flex items-center my-4",children:[t.jsxs("label",{className:"w-1/2",children:[_.name," Amount to move"]}),t.jsxs("div",{className:"w-1/2",children:[t.jsx("input",{type:"number",value:l.getValueOfUnitsToCall(s,m.kingdom_id,_.id),onChange:T=>n(m.kingdom_id,_.id,_.amount,T),className:"form-control"}),t.jsxs("span",{className:"text-gray-700 dark:text-white text-xs",children:["Max amount to recruit: ",u(_.amount)]})]})]}),m.units.length===b+1&&r.length>1&&r.length!==y+1?t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}):null]},m.kingdom_id+"-"+_.id)))}renderKingdomSelect(e,s,i){return t.jsx(o.Fragment,{children:t.jsx(B,{onChange:i,isMulti:!0,options:this.getKingdomSelectionOptions(e),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:n=>({...n,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedKingdomsValue(e,s)})})}getSelectedKingdomsValue(e,s){const i=s.map(n=>{const r=e.findIndex(l=>l.kingdom_id===n);if(r!==-1)return{label:e[r].kingdom_name,value:e[r].kingdom_id.toString()}});return i.length>0?i:[{label:"Please select one or more kingdoms",value:"Please select one or more kingdoms"}]}getTimeToTravel(e){const s=e/60;return s>=1?" roughly "+s.toFixed(0)+" hour(s) ":e+" minute(s) "}}class Sn extends c.Component{constructor(e){super(e),this.state={selected_kingdoms:[],selected_units:[]},this.moveUnits=new wn}setAmountToMove(e,s,i,n){const r=this.moveUnits.setAmountToMove(this.state.selected_units,e,s,i,n);r!==null&&this.setState({selected_units:r},()=>{this.props.update_units_selected(r)})}setKingdoms(e){const s=e.filter(n=>n.value!=="Please select one or more kingdoms");let i=JSON.parse(JSON.stringify(this.state.selected_kingdoms));i=s.map(n=>parseInt(n.value,10)||0),this.setState({selected_kingdoms:i},()=>{this.props.update_kingdoms_selected(i)})}render(){return t.jsx(o.Fragment,{children:this.props.kingdoms.length>0?t.jsxs(o.Fragment,{children:[this.moveUnits.renderKingdomSelect(this.props.kingdoms,this.state.selected_kingdoms,this.setKingdoms.bind(this)),this.state.selected_kingdoms.length>0?t.jsx("div",{className:"my-4 max-h-[350px] overflow-y-auto",children:this.moveUnits.getUnitOptions(this.props.kingdoms,this.state.selected_units,this.state.selected_kingdoms,this.setAmountToMove.bind(this))}):null]}):t.jsx(Ce,{children:"You have no units in other kingdoms to move units from or you have no other kingdoms."})})}}class Zo extends c.Component{constructor(e){super(e),this.tabs=[{key:"use-items",name:"Use items"},{key:"send-units",name:"Send Units"}],this.state={loading:!1,fetching_data:!0,items_to_use:[],kingdoms:[],error_message:"",success_message:"",selected_kingdoms:[],selected_units:[],selected_items:[],total_damage:0,total_reduction:0,show_help_modal:!1,help_type:""}}componentDidMount(){new g().setRoute("fetch-attacking-data/"+this.props.kingdom_to_attack_id+"/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({items_to_use:e.data.items_to_use,kingdoms:e.data.kingdoms,fetching_data:!1})},e=>{console.error(e)})}setAmountToMove(e){this.setState({selected_units:e})}setKingdoms(e){this.setState({selected_kingdoms:e})}attackKingdom(){this.setState({loading:!0,success_message:"",error_message:""},()=>{new g().setRoute("attack-kingdom-with-units/"+this.props.kingdom_to_attack_id+"/"+this.props.character_id).setParameters({units_to_move:this.state.selected_units}).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.handle_close()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({success_message:s.data.message})}console.error(e)})})}manageShowHelpDialogue(e){this.setState({show_help_modal:!this.state.show_help_modal,help_type:e})}useItemsOnKingdom(){this.setState({loading:!0,success_message:"",error_message:""},()=>{new g().setRoute("drop-items-on-kingdom/"+this.props.kingdom_to_attack_id+"/"+this.props.character_id).setParameters({slots:this.state.selected_items}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({success_message:s.data.message})}console.error(e)})})}buildItemsSelection(){return this.state.items_to_use.map(e=>({label:e.item.affix_name,value:e.id.toString()}))}setItemsToUse(e){const s=[];let i=0;e.forEach(r=>{if(r.value!=="Please select one or more items"){const l=de.parseInt(r.value,10)||0;if(l!==0){const p=this.state.items_to_use.filter(m=>m.id===l);p.length>0&&(i+=p[0].item.kingdom_damage,s.push(l))}}});let n=0;this.props.kingdom_defence>1&&(n=(this.props.kingdom_defence-1)/5,n<.05&&(n=.05),i-=n),this.setState({selected_items:s,total_damage:i,total_reduction:n})}getSelectedItems(){const e=this.state.items_to_use.filter(s=>{if(this.state.selected_items.includes(s.id))return s});return e.length>0?e.map(s=>({label:s.item.affix_name,value:s.id.toString()})):[{label:"Please select one or more items",value:"Please select one or more items"}]}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Attack Kingdom",primary_button_disabled:this.state.loading,secondary_actions:{secondary_button_disabled:this.state.selected_units.length===0||this.state.loading,secondary_button_label:"Send Units",handle_action:this.attackKingdom.bind(this)},tertiary_actions:{tertiary_button_disabled:this.state.selected_items.length===0||this.state.loading,tertiary_button_label:"Use items",handle_action:this.useItemsOnKingdom.bind(this)},children:this.state.fetching_data?t.jsx("div",{className:"py-4",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[this.state.success_message!==""?t.jsx(je,{children:this.state.success_message}):null,this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,t.jsxs(Be,{tabs:this.tabs,disabled:this.state.loading,children:[t.jsx(H,{children:t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setItemsToUse.bind(this),isMulti:!0,options:this.buildItemsSelection(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedItems()}),t.jsx("div",{className:"my-4",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Total Damage"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[(this.state.total_damage*100).toFixed(2),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageShowHelpDialogue("total_damage"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"Building Damage"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[(this.state.total_damage/2*100).toFixed(2),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageShowHelpDialogue("building_damage"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"Unit Damage"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[(this.state.total_damage/2*100).toFixed(2),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageShowHelpDialogue("unit_damage"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{className:"text-red-600 dark:text-red-400",children:"Defending Kingdom Reduction"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[(this.state.total_reduction*100).toFixed(2)," %",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageShowHelpDialogue("total_reduction"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})})]})})]})},"use-items"),t.jsx(H,{children:t.jsx(Sn,{update_units_selected:this.setAmountToMove.bind(this),kingdoms:this.state.kingdoms,update_kingdoms_selected:this.setKingdoms.bind(this)})},"send-units")]}),this.state.loading?t.jsx(D,{}):null,this.state.show_help_modal?t.jsx(kn,{manage_modal:this.manageShowHelpDialogue.bind(this),type:this.state.help_type}):null]})})}}let Cn=class extends c.Component{constructor(e){super(e),this.state={kingdom_details:null,action_loading:!1,error_message:"",show_attack_dialogue:!1}}componentDidMount(){new g().setRoute("kingdom/"+this.props.kingdom_id+"/"+this.props.character_id).doAjaxCall("get",e=>{const s=e.data;this.setState({kingdom_details:s},()=>{this.props.update_loading(s)})},e=>{console.error(e)})}manageAttackKingdom(){this.setState({show_attack_dialogue:!this.state.show_attack_dialogue})}purchaseKingdom(){this.setState({action_loading:!0,error_message:""},()=>{this.props.update_action_in_progress()}),new g().setRoute("kingdoms/"+this.props.character_id+"/purchase-npc-kingdom").setParameters({kingdom_id:this.props.kingdom_id}).doAjaxCall("post",e=>{this.setState({action_loading:!1},()=>{this.props.update_action_in_progress(),this.props.close_modal()})},e=>{if(this.setState({action_loading:!1},()=>{this.props.update_action_in_progress()}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})}manageHelpDialogue(e){this.setState({show_help:!this.state.show_help,help_type:e})}render(){return this.state.kingdom_details===null?t.jsx("div",{className:"h-40",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[t.jsxs("div",{children:[this.props.show_top_section?t.jsx(Jo,{kingdom:this.state.kingdom_details}):null,t.jsxs("div",{className:"lg:grid lg:grid-cols-2",children:[t.jsxs("div",{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Wall Defence"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.walls_defence),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("wall_defence"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"Treas. Defence"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.treasury_defence),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("treas_defence"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"GB. Defence"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.gold_bars_defence),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("gb_defence"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"Passive Defence"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.passive_defence),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("passive_defence"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})}),t.jsx("dt",{children:"Total Defence"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.defence_bonus),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("total_defence"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})})]}),t.jsx("div",{className:"border-b-2 block border-b-gray-300 dark:border-b-gray-600 my-3 md:hidden"}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Item Resistance"}),t.jsx("dd",{children:t.jsxs("div",{className:"flex items-center mb-4",children:[Ht(this.state.kingdom_details.item_resistance_bonus),"%",t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("item_resistance"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})})]})})]}),t.jsxs("div",{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Treasure:"}),t.jsx("dd",{children:u(this.state.kingdom_details.treasury)}),t.jsx("dt",{children:"Gold Bars:"}),t.jsx("dd",{children:u(this.state.kingdom_details.gold_bars)})]}),this.props.allow_purchase?t.jsx("div",{className:"mt-4 text-center",children:t.jsx(He,{button_label:"Purchase Kingdom",on_click:this.purchaseKingdom.bind(this)})}):null,this.props.can_attack_kingdom?t.jsx("div",{className:"mt-4 text-center",children:t.jsx(Pt,{button_label:"Attack Kingdom",on_click:this.manageAttackKingdom.bind(this)})}):null]})]})]}),this.state.show_help?t.jsx(kn,{manage_modal:this.manageHelpDialogue.bind(this),type:this.state.help_type}):null,this.state.show_attack_dialogue?t.jsx(Zo,{is_open:!0,handle_close:this.manageAttackKingdom.bind(this),kingdom_to_attack_id:this.props.kingdom_id,character_id:this.props.character_id,kingdom_defence:this.state.kingdom_details.defence_bonus}):null,this.state.error_message!==""?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.state.action_loading?t.jsx(D,{}):null]})}};class Qa extends c.Component{constructor(e){super(e),this.state={can_afford:!1,distance:0,cost:0,time_out:0,x:0,y:0,loading:!0,title:"",npc_owned:!1,action_in_progress:!1,can_attack_kingdom:!1}}updateLoading(e){const i={...vt(e.x_position,e.y_position,this.props.character_position,this.props.currencies),loading:!1,x:e.x_position,y:e.y_position,title:this.buildTitle(e),can_attack_kingdom:e.is_npc_owned||e.is_enemy_kingdom&&!e.is_protected,npc_owned:e.is_npc_owned},n=JSON.parse(JSON.stringify(this.state));this.setState({...n,...i})}teleportDisabled(){return this.state.cost===0||!this.state.can_afford||!this.props.can_move||this.props.is_automation_running||this.props.is_dead}handleTeleport(){typeof this.props.teleport_player<"u"&&this.props.teleport_player({x:this.state.x,y:this.state.y,cost:this.state.cost,timeout:this.state.time_out}),this.props.handle_close()}buildTitle(e){const s=e.name+" (X/Y): "+e.x_position+"/"+e.y_position;return e.is_npc_owned?s+" [NPC Owned]":e.is_enemy_kingdom?s+" [Enemy]":s}updateActionInProgress(){this.setState({action_in_progress:!this.state.action_in_progress})}closeModal(){this.props.handle_close()}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.state.loading?"One moment ...":this.state.title,primary_button_disabled:this.state.action_in_progress,secondary_actions:{secondary_button_disabled:this.teleportDisabled(),secondary_button_label:"Teleport",handle_action:this.handleTeleport.bind(this)},children:t.jsxs(o.Fragment,{children:[t.jsx(Cn,{kingdom_id:this.props.kingdom_id,character_id:this.props.character_id,update_loading:this.updateLoading.bind(this),show_top_section:this.props.show_top_section,allow_purchase:this.state.npc_owned,update_action_in_progress:this.updateActionInProgress.bind(this),close_modal:this.closeModal.bind(this),can_attack_kingdom:this.state.can_attack_kingdom}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),this.state.cost>0?t.jsxs(o.Fragment,{children:[t.jsx("h4",{children:"Teleport Details"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Cost to teleport (gold):"}),t.jsx("dd",{className:$({"text-gray-700":this.state.cost===0},{"text-green-600":this.state.can_afford&&this.state.cost>0},{"text-red-600":!this.state.can_afford&&this.state.cost>0}),children:u(this.state.cost)}),t.jsx("dt",{children:"Can afford to teleport:"}),t.jsx("dd",{children:this.state.can_afford?"Yes":"No"}),t.jsx("dt",{children:"Distance (miles):"}),t.jsx("dd",{children:this.state.distance}),t.jsx("dt",{children:"Timeout (minutes):"}),t.jsx("dd",{children:this.state.time_out})]})]}):t.jsx(rt,{children:"You are too close to the location to be able to teleport."})]})})}}class el extends c.Component{constructor(e){super(e),this.state={open_kingdom_modal:!1,kingdom_id:0,view_port:null}}componentDidMount(){qt(this)}componentDidUpdate(){this.state.view_port!==null&&this.state.view_port<600&&this.state.open_kingdom_modal&&this.setState({kingdom_id:0,open_kingdom_modal:!1})}openKingdomModal(e){this.setState({open_kingdom_modal:!0,kingdom_id:e})}closeKingdomModal(){this.setState({open_kingdom_modal:!1,kingdom_id:0})}teleportPlayer(e){this.props.teleport_player(e)}renderKingdomPins(){if(this.props.kingdoms!=null)return this.props.kingdoms.map(e=>t.jsx(Xo,{kingdom:e,open_kingdom_modal:this.openKingdomModal.bind(this)}))}render(){return t.jsxs(o.Fragment,{children:[this.renderKingdomPins(),this.state.open_kingdom_modal?t.jsx(Qa,{is_open:this.state.open_kingdom_modal,kingdom_id:this.state.kingdom_id,character_id:this.props.character_id,currencies:this.props.currencies,character_position:this.props.character_position,teleport_player:this.teleportPlayer.bind(this),handle_close:this.closeKingdomModal.bind(this),can_move:this.props.can_move,is_automation_running:this.props.is_automation_running,is_dead:this.props.is_dead,show_top_section:!0}):null]})}}class tl extends c.Component{constructor(e){super(e)}kingdomStyle(){return{top:this.props.kingdom.y_position,left:this.props.kingdom.x_position,"--kingdom-color":this.props.color}}openKingdomModal(e){this.props.open_kingdom_modal(parseInt(e.target.getAttribute("data-kingdom-id")))}render(){return t.jsx("div",{"data-kingdom-id":this.props.kingdom.id,className:"kingdom-x-pin",style:this.kingdomStyle(),onClick:this.openKingdomModal.bind(this)},Math.random().toString(36).substring(7)+"-"+this.props.kingdom.id)}}class sl extends c.Component{constructor(e){super(e),this.state={open_kingdom_modal:!1,kingdom_id:0,view_port:null}}componentDidMount(){qt(this)}componentDidUpdate(){this.state.view_port!==null&&this.state.view_port<600&&this.state.open_kingdom_modal&&this.setState({kingdom_id:0,open_kingdom_modal:!1})}openKingdomModal(e){this.setState({open_kingdom_modal:!0,kingdom_id:e})}closeKingdomModal(){this.setState({open_kingdom_modal:!1,kingdom_id:0})}teleportPlayer(e){this.props.teleport_player(e)}renderKingdomPins(){if(this.props.kingdoms!=null)return this.props.kingdoms.map(e=>{if(this.props.character_id!==e.character_id)return t.jsx(tl,{kingdom:e,color:"#e82b13",open_kingdom_modal:this.openKingdomModal.bind(this)})})}render(){return t.jsxs(o.Fragment,{children:[this.renderKingdomPins(),this.state.open_kingdom_modal?t.jsx(Qa,{is_open:this.state.open_kingdom_modal,kingdom_id:this.state.kingdom_id,character_id:this.props.character_id,currencies:this.props.currencies,character_position:this.props.character_position,teleport_player:this.teleportPlayer.bind(this),handle_close:this.closeKingdomModal.bind(this),can_move:this.props.can_move,is_automation_running:this.props.is_automation_running,is_dead:this.props.is_dead,show_top_section:!1}):null]})}}const al=(a,e,s)=>{let i=a,n=e;switch(s){case"north":n=n-16;break;case"south":n=n+16;break;case"east":i=i+16;break;case"west":i=i-16;break}return n<16?(ft("cannot_move_up"),!1):i<0?(ft("cannot_move_left"),!1):n>496?(ft("cannot_move_down"),!1):i>496?(ft("cannot_move_right"),!1):{x:i,y:n}};class zs{constructor(e){this.component=e,this.characterPosition=null,this.mapPosition=null}setCharacterPosition(e){return this.characterPosition=e,this}setMapPosition(e){return this.mapPosition=e,this}movePlayer(e,s,i){if(this.characterPosition===null||this.mapPosition===null)return this.component.setState({can_player_move:!0}),ft("cant_move");const n=al(this.characterPosition.x,this.characterPosition.y,s);if(!n)return ft("cant_move");new g().setRoute("move/"+e).setParameters({position_x:this.mapPosition.x,position_y:this.mapPosition.y,character_position_x:n.x,character_position_y:n.y}).doAjaxCall("post",r=>{i.props.update_map_state(r.data)},r=>{this.handleErrors(r)})}teleportPlayer(e,s,i){new g().setRoute("map/teleport/"+s).setParameters(e).doAjaxCall("post",n=>{i(n.data)},n=>{this.handleErrors(n)})}setSail(e,s,i,n){new g().setRoute("map/set-sail/"+s).setParameters(e).doAjaxCall("post",r=>{n(r.data)},r=>{this.handleErrors(r)})}handleErrors(e){const s=e.response;if(!(typeof s>"u")&&s.status===401)return location.reload()}}const fi=a=>{if(a.locations===null)return null;const e=a.locations.filter(s=>s.x===a.character_position.x&&s.y===a.character_position.y&&s.is_port);return e.length>0?e[0]:null},il=a=>{let e=[];a.props.locations!==null&&(e=a.props.locations.filter(r=>r.x===a.props.character_position.x&&r.y===a.props.character_position.y));const s=a.props.player_kingdoms.filter(r=>r.x_position===a.props.character_position.x&&r.y_position===a.props.character_position.y),i=a.props.enemy_kingdoms.filter(r=>r.x_position===a.props.character_position.x&&r.y_position===a.props.character_position.y),n=a.props.npc_kingdoms.filter(r=>r.x_position===a.props.character_position.x&&r.y_position===a.props.character_position.y);return e.length===0&&s.length===0&&i.length===0&&n.length===0};class Va{static buildChangeState(e,s){let i={...this.setState(e),map_id:e.character_map.game_map.id};i.port_location=fi(i);const n=s instanceof ps?s.props.view_port:s.state.view_port;i.map_position={x:gi(i.character_position.x,i.map_position.x,n),y:_i(i.character_position.y,i.map_position.y)},i.time_left!==0&&(i.can_player_move=!1),s instanceof ps?s.props.show_celestial_fight_button(e.celestial_id):s.updateCelestial(e.celestial_id);let r=i.character_position;return r.game_map_id=i.game_map_id,s instanceof ps?s.props.set_character_position(r):s.setCharacterPosition(r),i}static buildCoreState(e,s){let i={...this.setState(e),map_id:e.character_map.game_map.id};i.port_location=fi(i),i.map_position={x:gi(i.character_position.x,i.map_position.x,s.state.view_port),y:_i(i.character_position.y,i.map_position.y,s.state.view_port)},i.time_left!==0&&(i.can_player_move=!1),s.updateCelestial(e.celestial_id);let n=i.character_position;return n.game_map_id=i.game_map_id,s.setCharacterPosition(n),i}static setState(e){return{map_id:e.character_map.id,map_url:e.map_url,map_name:e.character_map.game_map.name,game_map_id:e.character_map.game_map_id,map_position:{x:e.character_map.position_x,y:e.character_map.position_y},character_position:{x:e.character_map.character_position_x,y:e.character_map.character_position_y},locations:e.locations,player_kingdoms:e.my_kingdoms,enemy_kingdoms:e.other_kingdoms,npc_kingdoms:e.npc_kingdoms,can_player_move:e.can_move,time_left:parseInt(this.getTimeLeftInSeconds(e).toFixed(0)),characters_on_map:e.characters_on_map,port_location:null,coordinates:e.coordinates,bottom_bounds:0,right_bounds:0,loading:!1,automation_time_out:0,celestial_time_out:0}}static setMapMovementActionsState(e){return{character_position:{x:e.character_map.character_position_x,y:e.character_map.character_position_y},locations:e.locations,player_kingdoms:e.my_kingdoms,enemy_kingdoms:e.other_kingdoms,npc_kingdoms:e.npc_kingdoms,time_left:parseInt(this.getTimeLeftInSeconds(e).toFixed(0)),port_location:null,coordinates:e.coordinates}}static getTimeLeftInSeconds(e){if(e.can_move_again_at!==null){const s=Ye.fromISO(e.can_move_again_at),i=Ye.now(),n=s.diff(i,"seconds").toObject();return typeof n>"u"?0:n.seconds}return 0}}class nl extends c.Component{constructor(e){super(e)}kingdomStyle(){return{top:this.props.kingdom.y_position,left:this.props.kingdom.x_position,"--kingdom-color":this.props.color}}openKingdomModal(e){this.props.open_kingdom_modal(parseInt(e.target.getAttribute("data-kingdom-id")))}render(){return t.jsx("div",{"data-kingdom-id":this.props.kingdom.id,className:"kingdom-x-pin",style:this.kingdomStyle(),onClick:this.openKingdomModal.bind(this)},this.props.kingdom.id)}}class rl extends c.Component{constructor(e){super(e),this.state={open_kingdom_modal:!1,kingdom_id:0,view_port:null}}componentDidMount(){qt(this)}componentDidUpdate(){this.state.view_port!==null&&this.state.view_port<600&&this.state.open_kingdom_modal&&this.setState({kingdom_id:0,open_kingdom_modal:!1})}openKingdomModal(e){this.setState({open_kingdom_modal:!0,kingdom_id:e})}closeKingdomModal(){this.setState({open_kingdom_modal:!1,kingdom_id:0})}renderKingdomPins(){if(this.props.kingdoms!=null)return this.props.kingdoms.map(e=>t.jsx(nl,{kingdom:e,color:"#e3d60a",open_kingdom_modal:this.openKingdomModal.bind(this)}))}teleportPlayer(e){this.props.teleport_player(e)}render(){return t.jsxs(o.Fragment,{children:[this.renderKingdomPins(),this.state.open_kingdom_modal?t.jsx(Qa,{is_open:this.state.open_kingdom_modal,kingdom_id:this.state.kingdom_id,character_id:this.props.character_id,currencies:this.props.currencies,character_position:this.props.character_position,teleport_player:this.teleportPlayer.bind(this),handle_close:this.closeKingdomModal.bind(this),can_move:this.props.can_move,is_automation_running:this.props.is_automation_running,is_dead:this.props.is_dead,show_top_section:!1}):null]})}}const ol=a=>({top:a.state.character_position.y+"px",left:a.state.character_position.x+"px"}),ll=a=>a.props.view_port>=1600&&a.props.view_port<=1920?{backgroundImage:`url("${a.state.map_url}")`,height:500}:a.props.view_port>=1920?{backgroundImage:`url("${a.state.map_url}")`,backgroundRepeat:"no-repeat",height:500}:{backgroundImage:`url("${a.state.map_url}")`,height:500,width:500};class De extends c.Component{constructor(e){super(e),this.state={time_left:0,percentage_left:0,label:"seconds",time_left_label:0,initial_time:0},this.interval=null}componentDidMount(){this.initializeTimer()}componentDidUpdate(e,s,i){e.time_remaining!=this.props.time_remaining&&(clearInterval(this.interval),this.initializeTimer()),this.state.time_left<0&&(clearInterval(this.interval),this.setState({time_left:0}))}initializeTimer(){this.setState({time_left:this.props.time_remaining,percentage_left:this.props.time_remaining>0?1:0,label:this.getLabel(),time_left_label:this.getTimeLabel(this.props.time_remaining),initial_time:this.props.time_remaining},()=>{this.props.time_remaining>0&&this.state.time_left>0?this.interval=setInterval(()=>{let e=this.state.time_left-1;e<=0?(this.setState({time_left:0,percentage_left:0,label:"seconds",time_left_label:0}),typeof this.props.update_time_remaining<"u"&&this.props.update_time_remaining(0),clearInterval(this.interval)):this.setState({time_left:e,percentage_left:e/this.props.time_remaining,label:this.getLabel(e),time_left_label:this.getTimeLabel(e)})},1e3):clearInterval(this.interval)})}getLabel(e){let s="seconds",i=this.props.time_remaining;return e&&(i=e),i/3600>=1?s="hour(s)":i/60>=1&&(s="minute(s)"),s}getTimeLabel(e){let s=e;return e/3600>=1?s=parseInt((e/3600).toFixed(0)):e/60>=1&&(s=parseInt((e/60).toFixed(0))),s}render(){return this.state.percentage_left<=0&&this.state.time_left<=0||this.props.time_remaining===0?null:t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:$({"flex justify-between mb-1 ":!this.props.useSmallTimer},{"flex md:justify-between mb-1":this.props.useSmallTimer},typeof this.props.additional_css<"u"?this.props.additional_css:""),children:[t.jsx("span",{className:"text-base font-medium text-gray-800 dark:text-white mr-4 md:mr-0",children:this.props.time_out_label}),t.jsxs("span",{className:"text-sm font-medium text-gray-800 dark:text-white mt-[3px]",children:[this.state.time_left_label," ",this.state.label," left"]})]}),t.jsx("div",{className:$("bg-gray-200 rounded-full h-1.5 dark:bg-gray-700",{"w-full":!this.props.useSmallTimer},{"w-1/2":this.props.useSmallTimer}),children:t.jsx("div",{className:"h-1.5 rounded-full "+(this.state.percentage_left>=.75?"bg-fuchsia-600 dark:bg-fuchsia-700":this.state.percentage_left<.75&&this.state.percentage_left>=.5?"bg-fuchsia-500 dark:bg-fuchsia-600":this.state.percentage_left>=.25&&this.state.percentage_left<.5?"bg-fuchsia-400 dark:bg-fuchsia-500":this.state.percentage_left>=0&&this.state.percentage_left<.25?"bg-fuchsia-300 dark:bg-fuchsia-400":""),style:{width:this.state.percentage_left*100+"%"}})})]})}}class Nn extends c.Component{constructor(e){super(e)}render(){return this.props.automation_time_out!==0&&this.props.time_left!==0?t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.time_left,time_out_label:"Movement Timeout"})}),t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.automation_time_out,time_out_label:"Exploration"})})]}),t.jsx(De,{time_remaining:this.props.celestial_time_out,time_out_label:"Celestial Timeout"})]}):this.props.celestial_time_out!==0&&this.props.time_left!==0?t.jsx(o.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.time_left,time_out_label:"Movement Timeout"})}),t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.celestial_time_out,time_out_label:"Celestial Timeout"})})]})}):t.jsxs(o.Fragment,{children:[t.jsx(De,{time_remaining:this.props.automation_time_out,time_out_label:"Exploration"}),t.jsx(De,{time_remaining:this.props.time_left,time_out_label:"Movement"}),t.jsx(De,{time_remaining:this.props.celestial_time_out,time_out_label:"Celestial Timeout"})]})}}class cl extends c.Component{constructor(e){super(e),this.state={loading:!0,game_maps:[],is_traversing:!1,error_message:null,traverse_is_same_map:!0,map:0}}componentDidMount(){new g().setRoute("map/traverse-maps").doAjaxCall("get",e=>{this.setState({game_maps:e.data,loading:!1},()=>{this.disableTraverseForSameMap()})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({loading:!1,error_message:s.data.message})}})}setMap(e){this.setState({map:e.value},()=>{this.disableTraverseForSameMap()})}buildTraverseOptions(){return this.state.game_maps.length>0?this.state.game_maps.map(e=>({label:e.name,value:e.id})):[]}getDefaultValue(){const e=this.state.game_maps.filter(i=>i.id===this.props.map_id)[0];if(this.state.map===0)return{label:e.name,value:e.id};const s=this.state.game_maps.filter(i=>i.id===this.state.map)[0];return{label:s.name,value:s.id}}disableTraverseForSameMap(){this.state.map!==0&&this.setState({traverse_is_same_map:this.state.map===this.props.map_id})}traverse(){this.setState({is_traversing:!0}),new g().setRoute("map/traverse/"+this.props.character_id).setParameters({map_id:this.state.map}).doAjaxCall("post",e=>{this.setState({is_traversing:!1}),this.props.handle_close()},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({is_traversing:!1,error_message:s.data.message})}})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Traverse",primary_button_disabled:this.state.is_traversing,secondary_actions:{handle_action:this.traverse.bind(this),secondary_button_disabled:this.state.is_traversing||this.state.loading||this.state.traverse_is_same_map,secondary_button_label:"Traverse"},children:this.state.loading?t.jsx("div",{className:"p-10",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"mb-4",children:"Welcome to traverse. Every plane but Surface requires a quest item to access, you can gain these items by switching to the quest tab in the game area and completing quests, some items drop off regular creatures, some require quest chains to be completed."}),t.jsxs("p",{className:"mb-4",children:["Some planes of existence like Shadow Planes, make character attacks weaker, while others like Hell and Purgatory will make your character over all, weaker. To offset this, there is ",t.jsxs("a",{href:"/information/gear-progression",target:"_blank",children:["Gear Progression ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," which if followed does help make these areas easier to farm valuable currencies and XP in."]}),t.jsx("div",{className:"w-2/3",children:this.state.is_traversing?t.jsx("span",{className:"text-orange-700 dark:text-orange-400",children:"Traversing. One moment ..."}):t.jsx(B,{onChange:this.setMap.bind(this),options:this.buildTraverseOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getDefaultValue()})}),this.state.error_message!==null?t.jsx("p",{className:"mt-4 mb-4 text-red-500 dark:text-red-400",children:this.state.error_message}):null,this.state.is_traversing?t.jsx(D,{}):null]})})}}class dl extends c.Component{constructor(e){super(e),this.state={show_traverse:!1}}move(e){this.handleMovePlayer(e)}traverse(){this.setState({show_traverse:!this.state.show_traverse})}handleMovePlayer(e){new zs(this).setCharacterPosition(this.props.character_position).setMapPosition(this.props.map_position).movePlayer(this.props.character_id,e,this)}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsxs("div",{className:"grid gap-2 md:grid-cols-5 gap-4",children:[t.jsx(He,{disabled:!this.props.can_move||this.props.is_dead,button_label:"North",on_click:()=>this.move("north")}),t.jsx(He,{disabled:!this.props.can_move||this.props.is_dead,button_label:"South",on_click:()=>this.move("south")}),t.jsx(He,{disabled:!this.props.can_move||this.props.is_dead,button_label:"West",on_click:()=>this.move("west")}),t.jsx(He,{disabled:!this.props.can_move||this.props.is_dead,button_label:"East",on_click:()=>this.move("east")}),t.jsx(He,{disabled:!this.props.can_move||this.props.is_dead||this.props.is_automation_running,button_label:"Traverse",on_click:()=>this.traverse()})]}),this.state.show_traverse?t.jsx(cl,{is_open:!0,handle_close:this.traverse.bind(this),character_id:this.props.character_id,map_id:this.props.map_id}):null]})}}class xi{constructor(e){this.component=e}updateActionState(){this.updateViewLocationData()}updateViewLocationData(){const e=this.component.state;e.location===null&&e.player_kingdom_id===null&&e.enemy_kingdom_id===null&&e.npc_kingdom_id===null&&this.updateState(),e.location!==null&&this.handleLocationChange(),e.player_kingdom_id!==null&&this.handlePlayerKingdomChange(),e.enemy_kingdom_id!==null&&this.handleEnemyKingdomChange(),e.npc_kingdom_id!==null&&this.handleNpcKingdomsChange()}handlePlayerKingdomChange(){const e=this.component.state,s=this.component.props;if(e.player_kingdom_id===null)return;if(s.player_kingdoms===null)return this.component.setState({player_kingdom_id:null});const i=s.player_kingdoms.filter(n=>n.x_position===s.character_position.x&&n.y_position===s.character_position.y);if(i.length>0){if(i[0].id!==e.player_kingdom_id)return this.component.setState({player_kingdom_id:null})}else return this.component.setState({player_kingdom_id:null})}handleLocationChange(){const e=this.component.state,s=this.component.props;if(e.location===null)return;if(s.locations===null)return this.component.setState({location:null});const i=s.locations.filter(n=>n.x===s.character_position.x&&n.y===s.character_position.y);if(i.length>0){if(i[0].id!==e.location.id)return this.component.setState({location:null})}else return this.component.setState({location:null})}handleEnemyKingdomChange(){const e=this.component.state,s=this.component.props;if(e.enemy_kingdom_id===0)return;if(s.enemy_kingdoms===null)return this.component.setState({enemy_kingdom_id:null});const i=s.enemy_kingdoms.filter(n=>n.x_position===s.character_position.x&&n.y_position===s.character_position.y);if(i.length>0){if(i[0].id!==e.enemy_kingdom_id)return this.component.setState({enemy_kingdom_id:null})}else return this.component.setState({enemy_kingdom_id:null})}handleNpcKingdomsChange(){const e=this.component.state,s=this.component.props;if(e.npc_kingdom_id===0)return;if(s.npc_kingdoms===null)return this.component.setState({npc_kingdom_id:null});const i=s.npc_kingdoms.filter(n=>n.x_position===s.character_position.x&&n.y_position===s.character_position.y);if(i.length>0){if(i[0].id!==e.npc_kingdom_id)return this.component.setState({npc_kingdom_id:null})}else return this.component.setState({npc_kingdom_id:null})}updateState(){const e=this.component.props;if(e.locations==null||e.player_kingdoms===null||e.enemy_kingdoms===null||e.npc_kingdoms===null)return;const s=e.locations.filter(m=>m.x===e.character_position.x&&m.y===e.character_position.y),i=e.player_kingdoms.filter(m=>m.x_position===e.character_position.x&&m.y_position===e.character_position.y),n=e.enemy_kingdoms.filter(m=>m.x_position===e.character_position.x&&m.y_position===e.character_position.y),r=e.npc_kingdoms.filter(m=>m.x_position===e.character_position.x&&m.y_position===e.character_position.y);let l={location:null,player_kingdom_id:null,enemy_kingdom_id:null,npc_kingdom_id:null};if(s.length>0&&(l.location=s[0]),i.length>0&&(l.player_kingdom_id=i[0].id),n.length>0&&(l.enemy_kingdom_id=n[0].id),r.length>0&&(l.npc_kingdom_id=r[0].id),l.location===null&&l.player_kingdom_id===null&&l.enemy_kingdom_id===null&&l.npc_kingdom_id===null)return;let p=JSON.parse(JSON.stringify(this.component.state));p={...p,...l},this.component.setState(p)}}class Pn extends c.Component{constructor(e){super(e)}render(){return t.jsxs(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:"Timeout Help",children:[t.jsxs("p",{className:"my-2",children:["When it comes to the teleport timeout, you have a skill called ",t.jsxs("a",{href:"/information/skill-information",target:"_blank",children:["Quick Feet ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),", which if raised over time, will reduce the movement time out of teleporting down from the current value to 1 minute, regardless of distance."]}),t.jsx("p",{children:"You can find this on your character sheet, under Skills. You can sacrifice a % of your XP from monsters in order to level the skill over time, by clicking train on Quick Feet and then selecting the amount of XP to sacrifice between 10-100%."})]})}}class bi{constructor(e){this.component=e}updateTeleportModalState(){this.setCurrentLocation(),this.setPlayerKingdom(),this.setEnemyKingdom(),this.setNPCKingdom()}setCurrentLocation(){const e=this.component.props,s=this.component.state;if(e.locations!==null&&s.current_location===null){const i=e.locations.filter(n=>n.x===e.character_position.x&&n.y===e.character_position.y);i.length>0&&this.component.setState({current_location:i[0]})}}setPlayerKingdom(){const e=this.component.props,s=this.component.state;if(e.player_kingdoms!==null&&s.current_player_kingdom===null){const i=e.player_kingdoms.filter(n=>n.x_position===e.character_position.x&&n.y_position===e.character_position.y);i.length>0&&this.component.setState({current_player_kingdom:i[0]})}}setEnemyKingdom(){const e=this.component.props,s=this.component.state;if(e.enemy_kingdoms!==null&&s.current_enemy_kingdom===null){const i=e.enemy_kingdoms.filter(n=>n.x_position===e.character_position.x&&n.y_position===e.character_position.y);i.length>0&&this.component.setState({current_enemy_kingdom:i[0]})}}setNPCKingdom(){const e=this.component.props,s=this.component.state;if(e.npc_kingdoms!==null&&s.current_npc_kingdom===null){const i=e.npc_kingdoms.filter(n=>n.x_position===e.character_position.x&&n.y_position===e.character_position.y);i.length>0&&this.component.setState({current_npc_kingdom:i[0]})}}}class hl{constructor(e){this.component=e}getDefaultLocationValue(){const e=this.component.state;return e.current_location!==null?{label:e.current_location.name+" (X/Y): "+e.current_location.x+"/"+e.current_location.y+(e.current_location.is_corrupted?" (Corrupted)":""),value:e.current_location.id}:{value:0,label:""}}getDefaultPlayerKingdomValue(){const e=this.component.state;return e.current_player_kingdom!==null?{label:e.current_player_kingdom.name+" (X/Y): "+e.current_player_kingdom.x_position+"/"+e.current_player_kingdom.y_position,value:e.current_player_kingdom.id}:{value:0,label:""}}getDefaultEnemyKingdomValue(){const e=this.component.state;return e.current_enemy_kingdom!==null?{label:e.current_enemy_kingdom.name+" (X/Y): "+e.current_enemy_kingdom.x_position+"/"+e.current_enemy_kingdom.y_position,value:e.current_enemy_kingdom.id}:{value:0,label:""}}getDefaultNPCKingdomValue(){const e=this.component.state;return e.current_npc_kingdom!==null?{label:e.current_npc_kingdom.name+" (X/Y): "+e.current_npc_kingdom.x_position+"/"+e.current_npc_kingdom.y_position,value:e.current_npc_kingdom.id}:{value:0,label:""}}setSelectedXPosition(e){this.component.setState({x_position:e.value,current_location:null,current_player_kingdom:null,current_enemy_kingdom:null,current_npc_kingdom:null},()=>{const s=this.component.state,i=this.component.props,n=vt(s.x_position,s.y_position,s.character_position,i.currencies);this.component.setState(n)})}setSelectedYPosition(e){this.component.setState({y_position:e.value,current_location:null,current_player_kingdom:null},()=>{const s=this.component.state,i=this.component.props,n=vt(s.x_position,e.value,s.character_position,i.currencies);this.component.setState(n)})}setSelectedLocationData(e){const s=this.component.props;if(s.locations!==null){const i=s.locations.filter(n=>n.id===e.value);i.length>0&&this.component.setState({x_position:i[0].x,y_position:i[0].y,current_location:i[0],current_player_kingdom:null,current_enemy_kingdom:null,current_npc_kingdom:null},()=>{const n=this.component.state,r=vt(n.x_position,n.y_position,n.character_position,s.currencies);this.component.setState(r)})}}setSelectedMyKingdomData(e){const s=this.component.props;if(s.player_kingdoms!==null){const i=s.player_kingdoms.filter(n=>n.id===e.value);i.length>0&&this.component.setState({x_position:i[0].x_position,y_position:i[0].y_position,current_player_kingdom:i[0],current_location:null,current_enemy_kingdom:null,current_npc_kingdom:null},()=>{const n=this.component.state,r=vt(n.x_position,n.y_position,n.character_position,s.currencies);this.component.setState(r)})}}setSelectedEnemyKingdomData(e){const s=this.component.props;if(s.enemy_kingdoms!==null){const i=s.enemy_kingdoms.filter(n=>n.id===e.value);i.length>0&&this.component.setState({x_position:i[0].x_position,y_position:i[0].y_position,current_player_kingdom:null,current_location:null,current_enemy_kingdom:i[0],current_npc_kingdom:null},()=>{const n=this.component.state,r=vt(n.x_position,n.y_position,n.character_position,s.currencies);this.component.setState(r)})}}setSelectedNPCKingdomData(e){const s=this.component.props;if(s.npc_kingdoms!==null){const i=s.npc_kingdoms.filter(n=>n.id===e.value);i.length>0&&this.component.setState({x_position:i[0].x_position,y_position:i[0].y_position,current_player_kingdom:null,current_location:null,current_enemy_kingdom:null,current_npc_kingdom:i[0]},()=>{const n=this.component.state,r=vt(n.x_position,n.y_position,n.character_position,s.currencies);this.component.setState(r)})}}buildCoordinatesOptions(e){return e.map(s=>({label:s.toString(),value:s}))}buildLocationOptions(){const e=this.component.props;return e.locations!==null?e.locations.map(s=>({label:s.name+" (X/Y): "+s.x+"/"+s.y+(s.is_corrupted?" (Corrupted)":""),value:s.id})):[]}buildMyKingdomsOptions(){const e=this.component.props;return e.player_kingdoms!==null?e.player_kingdoms.map(s=>({label:s.name+" (X/Y): "+s.x_position+"/"+s.y_position,value:s.id})):[]}buildEnemyKingdomOptions(){const e=this.component.props;return e.enemy_kingdoms!==null?e.enemy_kingdoms.map(s=>({label:s.name+" (X/Y): "+s.x_position+"/"+s.y_position,value:s.id})):[]}buildNpcKingdomOptions(){const e=this.component.props;return e.npc_kingdoms!==null?e.npc_kingdoms.map(s=>({label:s.name+" (X/Y): "+s.x_position+"/"+s.y_position,value:s.id})):[]}}class ul extends c.Component{constructor(e){super(e),this.state={x_position:this.props.character_position.x,y_position:this.props.character_position.y,character_position:{x:this.props.character_position.x,y:this.props.character_position.y},cost:0,can_afford:!1,distance:0,time_out:0,current_location:null,current_player_kingdom:null,current_enemy_kingdom:null,current_npc_kingdom:null,view_port:null,show_help:!1},this.teleportComponent=new hl(this)}componentDidMount(){qt(this),new bi(this).updateTeleportModalState()}componentDidUpdate(){this.props.locations!==null&&new bi(this).updateTeleportModalState()}manageHelpDialogue(){this.setState({show_help:!this.state.show_help})}setXPosition(e){this.teleportComponent.setSelectedXPosition(e)}setYPosition(e){this.teleportComponent.setSelectedYPosition(e)}setLocationData(e){this.teleportComponent.setSelectedLocationData(e)}setMyKingdomData(e){this.teleportComponent.setSelectedMyKingdomData(e)}setEnemyKingdomData(e){this.teleportComponent.setSelectedEnemyKingdomData(e)}setNPCKingdomData(e){this.teleportComponent.setSelectedNPCKingdomData(e)}convertToSelectable(e){return this.teleportComponent.buildCoordinatesOptions(e)}showMyKingdomSelect(){return this.props.player_kingdoms===null?!1:this.props.player_kingdoms.length>0}teleportPlayer(){this.props.teleport_player({x:this.state.x_position,y:this.state.y_position,cost:this.state.cost,timeout:this.state.time_out}),this.props.handle_close()}render(){return this.props.coordinates===null?null:t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.props.title,secondary_actions:{handle_action:this.teleportPlayer.bind(this),secondary_button_disabled:!this.state.can_afford,secondary_button_label:"Teleport"},children:[t.jsxs("div",{className:"grid grid-cols-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[20px]",children:"X"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setXPosition.bind(this),options:this.convertToSelectable(this.props.coordinates.x),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:{label:this.state.x_position,value:this.state.x_position}})})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[20px]",children:"Y"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setYPosition.bind(this),options:this.convertToSelectable(this.props.coordinates.y),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:{label:this.state.y_position,value:this.state.y_position}})})]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[t.jsxs("div",{className:$("flex items-center",{"col-start-1 col-span-2":!this.showMyKingdomSelect()}),children:[t.jsx("label",{className:"w-[100px]",children:"Locations:"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setLocationData.bind(this),options:this.teleportComponent.buildLocationOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.teleportComponent.getDefaultLocationValue()})})]}),this.showMyKingdomSelect()?t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[100px]",children:"My Kingdoms:"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setMyKingdomData.bind(this),options:this.teleportComponent.buildMyKingdomsOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.teleportComponent.getDefaultPlayerKingdomValue()})})]}):null]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[100px]",children:"Enemy Kingdoms"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setEnemyKingdomData.bind(this),options:this.teleportComponent.buildEnemyKingdomOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.teleportComponent.getDefaultEnemyKingdomValue()})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[100px]",children:"NPC Kingdoms"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setNPCKingdomData.bind(this),options:this.teleportComponent.buildNpcKingdomOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.teleportComponent.getDefaultNPCKingdomValue()})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Cost in Gold:"}),t.jsx("dd",{className:$({"text-gray-700":this.state.cost===0},{"text-green-600":this.state.can_afford&&this.state.cost>0},{"text-red-600":!this.state.can_afford&&this.state.cost>0}),children:u(this.state.cost)}),t.jsx("dt",{children:"Can Afford:"}),t.jsx("dd",{children:this.state.can_afford?"Yes":"No"}),t.jsx("dt",{children:"Distance:"}),t.jsxs("dd",{children:[this.state.distance," Miles"]}),t.jsx("dt",{children:"Timeout for:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsxs("span",{children:[this.state.time_out," Minutes"]}),t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue(),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})]}),this.state.show_help?t.jsx(Pn,{manage_modal:this.manageHelpDialogue.bind(this)}):null]})}}class ml{constructor(e){this.component=e}setInitialCurrentSelectedPort(){const e=this.component.props;e.ports!==null&&this.setPort(e)}updateSelectedCurrentPort(){const e=this.component.state,s=this.component.props;e.current_port===null&&s.ports!==null&&this.setPort(s)}getDefaultPortValue(){const e=this.component.state;return e.current_port!==null?{label:e.current_port.name+" (X/Y): "+e.current_port.x+"/"+e.current_port.y,value:e.current_port.id}:{value:0,label:""}}buildSetSailOptions(){const e=this.component.props;return e.ports!==null?e.ports.map(s=>({label:s.name+" (X/Y): "+s.x+"/"+s.y,value:s.id})):[]}setSelectedPortData(e){const s=this.component.props;if(s.ports!==null){const i=s.ports.filter(n=>n.id===e.value);i.length>0&&this.component.setState({x_position:i[0].x,y_position:i[0].y,current_location:i[0],current_player_kingdom:null,current_enemy_kingdom:null},()=>{const n=this.component.state,r=vt(n.x_position,n.y_position,n.character_position,s.currencies);this.component.setState(r)})}}setSail(){const e=this.component.props,s=this.component.state;e.set_sail({x:s.x_position,y:s.y_position,cost:s.cost,timeout:s.time_out}),e.handle_close()}setPort(e){if(e.ports===null)return;const s=e.ports.filter(i=>i.x===e.character_position.x&&i.y===e.character_position.y);s.length>0&&this.component.setState({current_port:s[0]})}}class pl extends c.Component{constructor(e){super(e),this.state={x_position:this.props.character_position.x,y_position:this.props.character_position.y,character_position:{x:this.props.character_position.x,y:this.props.character_position.y},cost:0,can_afford:!1,distance:0,time_out:0,current_port:null,current_location:null,current_player_kingdom:null,current_enemy_kingdom:null,view_port:null,show_help:!1},this.setSailComponent=new ml(this)}componentDidMount(){qt(this),this.setSailComponent.setInitialCurrentSelectedPort()}componentDidUpdate(){this.props.ports!==null&&(this.setSailComponent.updateSelectedCurrentPort(),this.state.view_port!==null&&this.state.view_port<1600&&this.props.handle_close())}setPortData(e){this.setSailComponent.setSelectedPortData(e)}setSail(){this.setSailComponent.setSail()}manageHelpDialogue(){this.setState({show_help:!this.state.show_help})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.props.title,secondary_actions:{handle_action:this.setSail.bind(this),secondary_button_disabled:!this.state.can_afford,secondary_button_label:"Set Sail"},children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[50px]",children:"Ports"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setPortData.bind(this),options:this.setSailComponent.buildSetSailOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.setSailComponent.getDefaultPortValue()})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Cost in Gold:"}),t.jsx("dd",{className:$({"text-gray-700":this.state.cost===0},{"text-green-600":this.state.can_afford&&this.state.cost>0},{"text-red-600":!this.state.can_afford&&this.state.cost>0}),children:u(this.state.cost)}),t.jsx("dt",{children:"Can Afford:"}),t.jsx("dd",{children:this.state.can_afford?"Yes":"No"}),t.jsx("dt",{children:"Distance:"}),t.jsxs("dd",{children:[this.state.distance," Miles"]}),t.jsx("dt",{children:"Timeout for:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsxs("span",{children:[this.state.time_out," Minutes"]}),t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue(),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]})]}),this.state.show_help?t.jsx(Pn,{manage_modal:this.manageHelpDialogue.bind(this)}):null]})}}class _l extends c.Component{constructor(e){super(e),this.state={loading:!0,celestials:[],selected_celestial_id:null,error_message:"",conjuring:!1}}componentDidMount(){new g().setRoute("celestial-beings/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({loading:!1,celestials:e.data.celestial_monsters})},e=>{})}conjure(e){if(this.state.selected_celestial_id===null)return this.setState({error_message:"Select a creature child, before doing that."});this.setState({conjuring:!0},()=>{new g().setRoute("conjure/"+this.props.character_id).setParameters({monster_id:this.state.selected_celestial_id,type:e?"private":"public"}).doAjaxCall("post",s=>{this.setState({conjuring:!1},()=>{this.props.handle_close()})})})}setSelectedCelestial(e){this.setState({selected_celestial_id:e.value})}buildCelestialOptions(){return this.state.celestials.map(e=>({label:e.name+", Gold Cost: "+u(e.gold_cost)+" Gold Dust Cost: "+u(e.gold_dust_cost),value:e.id}))}getSelectedCelestial(){const e=this.state.celestials.filter(s=>{if(this.state.selected_celestial_id!==null)return s.id===this.state.selected_celestial_id});if(e.length>0){const s=e[0];return{label:s.name+", Gold Cost: "+u(s.gold_cost)+" and Gold Dust Cost: "+u(s.gold_dust_cost),value:s.id}}return{label:"Please select celestial to conjure",value:0}}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.props.title,secondary_actions:{handle_action:()=>this.conjure(!1),secondary_button_disabled:this.state.selected_celestial_id===null,secondary_button_label:"Conjure"},tertiary_actions:{handle_action:()=>this.conjure(!0),tertiary_button_label:"Private Conjure",tertiary_button_disabled:this.state.selected_celestial_id===null},children:this.state.loading?t.jsx("div",{className:"h-40",children:t.jsx(Fe,{})}):this.state.celestials.length===0?t.jsx(o.Fragment,{children:t.jsx("p",{children:"Sorry Child this plane has no celestials for you to conjure."})}):t.jsxs(o.Fragment,{children:[this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,t.jsxs("p",{className:"mb-4",children:["For more info, see: ",t.jsxs("a",{href:"/information/celestials",target:"_blank",children:["Celestials help docs. ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsx("p",{className:"mb-4",children:"Check server message section below for relevant details including location. Private conjurations will show you the location in server messages, public will show everyone as a global message. Celestials are first come first serve entities."}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("label",{className:"w-[100px]",children:"Celestials"}),t.jsx("div",{className:"w-2/3",children:t.jsx(B,{onChange:this.setSelectedCelestial.bind(this),options:this.buildCelestialOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedCelestial()})})]}),this.state.conjuring?t.jsx(D,{}):null]})})}}class gl extends c.Component{constructor(e){super(e),this.state={kingdom_name:"",error_message:"",success_message:"",loading:!1}}setName(e){this.setState({kingdom_name:e.target.value})}canSettleHere(){return this.state.kingdom_name.length<5||this.state.kingdom_name.length>30||this.state.loading||this.props.can_settle}settleKingdom(){this.setState({loading:!0,error_message:"",success_message:""},()=>{new g().setRoute("kingdoms/"+this.props.character_id+"/settle").setParameters({name:this.state.kingdom_name}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({loading:!1,error_message:s.data.message})}})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Settle New Kingdom",secondary_actions:{handle_action:this.settleKingdom.bind(this),secondary_button_disabled:this.canSettleHere(),secondary_button_label:"Settle"},children:[t.jsxs("p",{className:"mb-4 mt-2",children:["Checkout ",t.jsxs("a",{href:"/information/kingdoms",target:"_blank",children:["Kingdom's Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," for more info. ",t.jsx("br",{}),t.jsx("br",{}),"Kingdom names can be 5-30 characters long."]}),t.jsxs("p",{className:"mb-4",children:["Each additional kingdom beyond the first costs 10,000 Gold. This includes switching Planes.",t.jsx("br",{}),"Losing all your kingdoms to war or neglect or abandonment - across all planes, resets the cost to 0."]}),t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("label",{className:"w-[50px]",children:"Name"}),t.jsx("div",{className:"w-2/3",children:t.jsx("input",{type:"text",value:this.state.kingdom_name,onChange:this.setName.bind(this),className:"form-control",disabled:this.state.loading,minLength:5,maxLength:30})})]}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.success_message!==""?t.jsx(je,{children:this.state.success_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class fl extends c.Component{constructor(e){super(e)}buildTitle(){const e=this.props.location;return e.name+" (X/Y): "+e.x+"/"+e.y}render(){return t.jsx(ee,{is_open:!0,handle_close:this.props.handle_close,title:this.buildTitle(),children:t.jsx(vn,{location:this.props.location})})}}let ka=class extends c.Component{constructor(e){super(e),this.state={title:"",loading:!0,npc_owned:!1,action_in_progress:!1,can_attack_kingdom:!1}}updateLoading(e){const s={loading:!1,title:this.buildTitle(e),npc_owned:e.is_npc_owned,can_attack_kingdom:e.is_enemy_kingdom||e.is_npc_owned||!e.is_protected},i=JSON.parse(JSON.stringify(this.state));this.setState({...i,...s})}buildTitle(e){const s=e.name+" (X/Y): "+e.x_position+"/"+e.y_position;return e.is_npc_owned?s+" [NPC Owned]":e.is_enemy_kingdom?s+" [Enemy]":s}updateActionInProgress(){this.setState({action_in_progress:!this.state.action_in_progress})}closeModal(){this.props.handle_close()}render(){return t.jsx(ee,{is_open:!0,handle_close:this.props.handle_close,title:this.state.loading?"One moment ...":this.state.title,primary_button_disabled:this.state.action_in_progress,children:t.jsx(Cn,{kingdom_id:this.props.kingdom_id,character_id:this.props.character_id,update_loading:this.updateLoading.bind(this),show_top_section:this.props.show_top_section,allow_purchase:this.state.npc_owned,update_action_in_progress:this.updateActionInProgress.bind(this),close_modal:this.closeModal.bind(this),can_attack_kingdom:this.state.can_attack_kingdom})})}};class xl extends c.Component{constructor(e){super(e)}renderModal(){return this.props.location!==null?t.jsx(fl,{location:this.props.location,handle_close:this.props.handle_close}):this.props.player_kingdom_id!==null?t.jsx(ka,{kingdom_id:this.props.player_kingdom_id,character_id:this.props.character_id,show_top_section:!0,handle_close:this.props.handle_close}):this.props.enemy_kingdom_id!==null?t.jsx(ka,{kingdom_id:this.props.enemy_kingdom_id,character_id:this.props.character_id,show_top_section:!1,handle_close:this.props.handle_close}):this.props.npc_kingdom_id!==null?t.jsx(ka,{kingdom_id:this.props.npc_kingdom_id,character_id:this.props.character_id,show_top_section:!1,handle_close:this.props.handle_close}):null}render(){return this.renderModal()}}class bl extends c.Component{constructor(e){super(e),this.state={show_location_details:!1,open_teleport_modal:!1,open_set_sail:!1,open_conjure:!1,open_settle_modal:!1,player_kingdom_id:null,enemy_kingdom_id:null,npc_kingdom_id:null,location:null}}componentDidMount(){new xi(this).updateActionState()}componentDidUpdate(){new xi(this).updateActionState()}teleportPlayer(e){new zs(this).teleportPlayer(e,this.props.character_id,this.props.update_map_state)}setSail(e){new zs(this).setSail(e,this.props.character_id,this.props.view_port,this.props.update_map_state)}ports(){return this.props.locations===null?[]:this.props.locations.filter(e=>e.is_port)}canSettleKingdom(){return!this.props.can_move||this.props.is_dead||this.props.is_automation_running||!il(this)}canSetSail(){return!this.props.can_move||this.props.is_dead||this.props.is_automation_running||this.props.port_location===null}canDoAction(){return!this.props.can_move||this.props.is_dead||this.props.is_automation_running}canViewLocation(){return this.state.location!==null||this.state.player_kingdom_id!==null||this.state.enemy_kingdom_id!==null||this.state.npc_kingdom_id!==null}manageViewLocation(){this.setState({show_location_details:!this.state.show_location_details})}manageTeleportModal(){this.setState({open_teleport_modal:!this.state.open_teleport_modal})}manageSetSailModal(){this.setState({open_set_sail:!this.state.open_set_sail})}manageConjureModal(){this.setState({open_conjure:!this.state.open_conjure})}manageSettleModal(){this.setState({open_settle_modal:!this.state.open_settle_modal})}render(){return t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-5 gap-2",children:[t.jsx(He,{button_label:"View Location Details",on_click:this.manageViewLocation.bind(this),disabled:!this.canViewLocation()}),t.jsx(He,{button_label:"Settle Kingdom",on_click:this.manageSettleModal.bind(this),disabled:this.canSettleKingdom()}),t.jsx(He,{button_label:"Set Sail",on_click:this.manageSetSailModal.bind(this),disabled:this.canSetSail()}),t.jsx(He,{button_label:"Teleport",on_click:this.manageTeleportModal.bind(this),disabled:this.canDoAction()}),t.jsx(He,{button_label:"Conjure",on_click:this.manageConjureModal.bind(this),disabled:this.canDoAction()||!this.props.can_engage_celestial})]}),this.state.open_conjure&&this.props.can_engage_celestial?t.jsx(_l,{is_open:this.state.open_conjure,handle_close:this.manageConjureModal.bind(this),title:"Conjuration",character_id:this.props.character_id}):null,this.state.open_teleport_modal?t.jsx(ul,{is_open:this.state.open_teleport_modal,title:"Teleport",teleport_player:this.teleportPlayer.bind(this),handle_close:this.manageTeleportModal.bind(this),coordinates:this.props.coordinates,character_position:this.props.character_position,currencies:this.props.character_currencies,view_port:this.props.view_port,locations:this.props.locations,player_kingdoms:this.props.player_kingdoms,enemy_kingdoms:this.props.enemy_kingdoms,npc_kingdoms:this.props.npc_kingdoms}):null,this.state.open_set_sail?t.jsx(pl,{is_open:this.state.open_set_sail,set_sail:this.setSail.bind(this),handle_close:this.manageSetSailModal.bind(this),title:"Set Sail",character_position:this.props.character_position,currencies:this.props.character_currencies,ports:this.ports()}):null,this.state.open_settle_modal?t.jsx(gl,{is_open:this.state.open_settle_modal,handle_close:this.manageSettleModal.bind(this),character_id:this.props.character_id,map_id:this.props.map_id,can_settle:this.canSettleKingdom()}):null,this.state.show_location_details?t.jsx(xl,{player_kingdom_id:this.state.player_kingdom_id,enemy_kingdom_id:this.state.enemy_kingdom_id,npc_kingdom_id:this.state.npc_kingdom_id,location:this.state.location,handle_close:this.manageViewLocation.bind(this),character_id:this.props.character_id}):null]})}}const Ws=a=>{new g().setRoute("update-character-timers/"+a).doAjaxCall("get",e=>{},e=>{if(e.hasOwnProperty("response")){const s=e.response;if(typeof s>"u")return;if(s.status===401)return location.reload()}})},yi=a=>{new g().setRoute("map/update-character-location-actions/"+a).doAjaxCall("get",e=>{},e=>{if(e.hasOwnProperty("response")){const s=e.response;if(typeof s>"u")return;if(s.status===401)return location.reload()}})};var Tn={exports:{}};(function(a,e){(function(i,n){a.exports=n(o,Gr)})(self,function(s,i){return function(){var n={404:function(m,y,_){_.r(y),_.d(y,{DraggableCore:function(){return st},default:function(){return Dt}});var b=_(359),T=_(697),j=_.n(T),w=_(318),N=_.n(w);function A(h){var d,f,S="";if(typeof h=="string"||typeof h=="number")S+=h;else if(typeof h=="object")if(Array.isArray(h))for(d=0;d<h.length;d++)h[d]&&(f=A(h[d]))&&(S&&(S+=" "),S+=f);else for(d in h)h[d]&&(S&&(S+=" "),S+=d);return S}function E(){for(var h=0,d,f,S="";h<arguments.length;)(d=arguments[h++])&&(f=A(d))&&(S&&(S+=" "),S+=f);return S}function q(h,d){for(let f=0,S=h.length;f<S;f++)if(d.apply(d,[h[f],f,h]))return h[f]}function k(h){return typeof h=="function"||Object.prototype.toString.call(h)==="[object Function]"}function C(h){return typeof h=="number"&&!isNaN(h)}function v(h){return parseInt(h,10)}function P(h,d,f){if(h[d])return new Error("Invalid prop ".concat(d," passed to ").concat(f," - do not set this, set it on the child."))}const I=["Moz","Webkit","O","ms"];function U(){var h;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const f=(h=window.document)===null||h===void 0||(h=h.documentElement)===null||h===void 0?void 0:h.style;if(!f||d in f)return"";for(let S=0;S<I.length;S++)if(he(d,I[S])in f)return I[S];return""}function he(h,d){return d?"".concat(d).concat(re(h)):h}function re(h){let d="",f=!0;for(let S=0;S<h.length;S++)f?(d+=h[S].toUpperCase(),f=!1):h[S]==="-"?f=!0:d+=h[S];return d}var Ne=U();let me="";function J(h,d){return me||(me=q(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(f){return k(h[f])})),k(h[me])?h[me](d):!1}function ve(h,d,f){let S=h;do{if(J(S,d))return!0;if(S===f)return!1;S=S.parentNode}while(S);return!1}function xe(h,d,f,S){if(!h)return;const K={capture:!0,...S};h.addEventListener?h.addEventListener(d,f,K):h.attachEvent?h.attachEvent("on"+d,f):h["on"+d]=f}function Se(h,d,f,S){if(!h)return;const K={capture:!0,...S};h.removeEventListener?h.removeEventListener(d,f,K):h.detachEvent?h.detachEvent("on"+d,f):h["on"+d]=null}function be(h){let d=h.clientHeight;const f=h.ownerDocument.defaultView.getComputedStyle(h);return d+=v(f.borderTopWidth),d+=v(f.borderBottomWidth),d}function qe(h){let d=h.clientWidth;const f=h.ownerDocument.defaultView.getComputedStyle(h);return d+=v(f.borderLeftWidth),d+=v(f.borderRightWidth),d}function Je(h){let d=h.clientHeight;const f=h.ownerDocument.defaultView.getComputedStyle(h);return d-=v(f.paddingTop),d-=v(f.paddingBottom),d}function Ke(h){let d=h.clientWidth;const f=h.ownerDocument.defaultView.getComputedStyle(h);return d-=v(f.paddingLeft),d-=v(f.paddingRight),d}function Qe(h,d,f){const K=d===d.ownerDocument.body?{left:0,top:0}:d.getBoundingClientRect(),Z=(h.clientX+d.scrollLeft-K.left)/f,Ge=(h.clientY+d.scrollTop-K.top)/f;return{x:Z,y:Ge}}function O(h,d){const f=L(h,d,"px");return{[he("transform",Ne)]:f}}function F(h,d){return L(h,d,"")}function L(h,d,f){let{x:S,y:K}=h,Z="translate(".concat(S).concat(f,",").concat(K).concat(f,")");if(d){const Ge="".concat(typeof d.x=="string"?d.x:d.x+f),ge="".concat(typeof d.y=="string"?d.y:d.y+f);Z="translate(".concat(Ge,", ").concat(ge,")")+Z}return Z}function Q(h,d){return h.targetTouches&&q(h.targetTouches,f=>d===f.identifier)||h.changedTouches&&q(h.changedTouches,f=>d===f.identifier)}function x(h){if(h.targetTouches&&h.targetTouches[0])return h.targetTouches[0].identifier;if(h.changedTouches&&h.changedTouches[0])return h.changedTouches[0].identifier}function oe(h){if(!h)return;let d=h.getElementById("react-draggable-style-el");d||(d=h.createElement("style"),d.type="text/css",d.id="react-draggable-style-el",d.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,d.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,h.getElementsByTagName("head")[0].appendChild(d)),h.body&&ye(h.body,"react-draggable-transparent-selection")}function M(h){if(h)try{if(h.body&&le(h.body,"react-draggable-transparent-selection"),h.selection)h.selection.empty();else{const d=(h.defaultView||window).getSelection();d&&d.type!=="Caret"&&d.removeAllRanges()}}catch{}}function ye(h,d){h.classList?h.classList.add(d):h.className.match(new RegExp("(?:^|\\s)".concat(d,"(?!\\S)")))||(h.className+=" ".concat(d))}function le(h,d){h.classList?h.classList.remove(d):h.className=h.className.replace(new RegExp("(?:^|\\s)".concat(d,"(?!\\S)"),"g"),"")}function te(h,d,f){if(!h.props.bounds)return[d,f];let{bounds:S}=h.props;S=typeof S=="string"?S:ae(S);const K=ot(h);if(typeof S=="string"){const{ownerDocument:Z}=K,Ge=Z.defaultView;let ge;if(S==="parent"?ge=K.parentNode:ge=Z.querySelector(S),!(ge instanceof Ge.HTMLElement))throw new Error('Bounds selector "'+S+'" could not find an element.');const ke=ge,Ue=Ge.getComputedStyle(K),mt=Ge.getComputedStyle(ke);S={left:-K.offsetLeft+v(mt.paddingLeft)+v(Ue.marginLeft),top:-K.offsetTop+v(mt.paddingTop)+v(Ue.marginTop),right:Ke(ke)-qe(K)-K.offsetLeft+v(mt.paddingRight)-v(Ue.marginRight),bottom:Je(ke)-be(K)-K.offsetTop+v(mt.paddingBottom)-v(Ue.marginBottom)}}return C(S.right)&&(d=Math.min(d,S.right)),C(S.bottom)&&(f=Math.min(f,S.bottom)),C(S.left)&&(d=Math.max(d,S.left)),C(S.top)&&(f=Math.max(f,S.top)),[d,f]}function W(h,d,f){const S=Math.round(d/h[0])*h[0],K=Math.round(f/h[1])*h[1];return[S,K]}function Pe(h){return h.props.axis==="both"||h.props.axis==="x"}function Ee(h){return h.props.axis==="both"||h.props.axis==="y"}function se(h,d,f){const S=typeof d=="number"?Q(h,d):null;if(typeof d=="number"&&!S)return null;const K=ot(f),Z=f.props.offsetParent||K.offsetParent||K.ownerDocument.body;return Qe(S||h,Z,f.props.scale)}function Te(h,d,f){const S=!C(h.lastX),K=ot(h);return S?{node:K,deltaX:0,deltaY:0,lastX:d,lastY:f,x:d,y:f}:{node:K,deltaX:d-h.lastX,deltaY:f-h.lastY,lastX:h.lastX,lastY:h.lastY,x:d,y:f}}function ie(h,d){const f=h.props.scale;return{node:d.node,x:h.state.x+d.deltaX/f,y:h.state.y+d.deltaY/f,deltaX:d.deltaX/f,deltaY:d.deltaY/f,lastX:h.state.x,lastY:h.state.y}}function ae(h){return{left:h.left,top:h.top,right:h.right,bottom:h.bottom}}function ot(h){const d=h.findDOMNode();if(!d)throw new Error("<DraggableCore>: Unmounted during event!");return d}function Ae(){}function Re(h,d,f){return d=ht(d),d in h?Object.defineProperty(h,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):h[d]=f,h}function ht(h){var d=ze(h,"string");return typeof d=="symbol"?d:String(d)}function ze(h,d){if(typeof h!="object"||h===null)return h;var f=h[Symbol.toPrimitive];if(f!==void 0){var S=f.call(h,d||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}const G={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ue=G.mouse;class st extends b.Component{constructor(){super(...arguments),Re(this,"dragging",!1),Re(this,"lastX",NaN),Re(this,"lastY",NaN),Re(this,"touchIdentifier",null),Re(this,"mounted",!1),Re(this,"handleDragStart",d=>{if(this.props.onMouseDown(d),!this.props.allowAnyClick&&typeof d.button=="number"&&d.button!==0)return!1;const f=this.findDOMNode();if(!f||!f.ownerDocument||!f.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:S}=f;if(this.props.disabled||!(d.target instanceof S.defaultView.Node)||this.props.handle&&!ve(d.target,this.props.handle,f)||this.props.cancel&&ve(d.target,this.props.cancel,f))return;d.type==="touchstart"&&d.preventDefault();const K=x(d);this.touchIdentifier=K;const Z=se(d,K,this);if(Z==null)return;const{x:Ge,y:ge}=Z,ke=Te(this,Ge,ge);this.props.onStart,!(this.props.onStart(d,ke)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&oe(S),this.dragging=!0,this.lastX=Ge,this.lastY=ge,xe(S,ue.move,this.handleDrag),xe(S,ue.stop,this.handleDragStop))}),Re(this,"handleDrag",d=>{const f=se(d,this.touchIdentifier,this);if(f==null)return;let{x:S,y:K}=f;if(Array.isArray(this.props.grid)){let ge=S-this.lastX,ke=K-this.lastY;if([ge,ke]=W(this.props.grid,ge,ke),!ge&&!ke)return;S=this.lastX+ge,K=this.lastY+ke}const Z=Te(this,S,K);if(this.props.onDrag(d,Z)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const ke=document.createEvent("MouseEvents");ke.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(ke)}return}this.lastX=S,this.lastY=K}),Re(this,"handleDragStop",d=>{if(!this.dragging)return;const f=se(d,this.touchIdentifier,this);if(f==null)return;let{x:S,y:K}=f;if(Array.isArray(this.props.grid)){let ke=S-this.lastX||0,Ue=K-this.lastY||0;[ke,Ue]=W(this.props.grid,ke,Ue),S=this.lastX+ke,K=this.lastY+Ue}const Z=Te(this,S,K);if(this.props.onStop(d,Z)===!1||this.mounted===!1)return!1;const ge=this.findDOMNode();ge&&this.props.enableUserSelectHack&&M(ge.ownerDocument),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,ge&&(Se(ge.ownerDocument,ue.move,this.handleDrag),Se(ge.ownerDocument,ue.stop,this.handleDragStop))}),Re(this,"onMouseDown",d=>(ue=G.mouse,this.handleDragStart(d))),Re(this,"onMouseUp",d=>(ue=G.mouse,this.handleDragStop(d))),Re(this,"onTouchStart",d=>(ue=G.touch,this.handleDragStart(d))),Re(this,"onTouchEnd",d=>(ue=G.touch,this.handleDragStop(d)))}componentDidMount(){this.mounted=!0;const d=this.findDOMNode();d&&xe(d,G.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const d=this.findDOMNode();if(d){const{ownerDocument:f}=d;Se(f,G.mouse.move,this.handleDrag),Se(f,G.touch.move,this.handleDrag),Se(f,G.mouse.stop,this.handleDragStop),Se(f,G.touch.stop,this.handleDragStop),Se(d,G.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&M(f)}}findDOMNode(){var d,f;return(d=this.props)!==null&&d!==void 0&&d.nodeRef?(f=this.props)===null||f===void 0||(f=f.nodeRef)===null||f===void 0?void 0:f.current:N().findDOMNode(this)}render(){return b.cloneElement(b.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}Re(st,"displayName","DraggableCore"),Re(st,"propTypes",{allowAnyClick:j().bool,children:j().node.isRequired,disabled:j().bool,enableUserSelectHack:j().bool,offsetParent:function(h,d){if(h[d]&&h[d].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:j().arrayOf(j().number),handle:j().string,cancel:j().string,nodeRef:j().object,onStart:j().func,onDrag:j().func,onStop:j().func,onMouseDown:j().func,scale:j().number,className:P,style:P,transform:P}),Re(st,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});function ut(){return ut=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&(h[S]=f[S])}return h},ut.apply(this,arguments)}function Oe(h,d,f){return d=ga(d),d in h?Object.defineProperty(h,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):h[d]=f,h}function ga(h){var d=fa(h,"string");return typeof d=="symbol"?d:String(d)}function fa(h,d){if(typeof h!="object"||h===null)return h;var f=h[Symbol.toPrimitive];if(f!==void 0){var S=f.call(h,d||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}class Dt extends b.Component{static getDerivedStateFromProps(d,f){let{position:S}=d,{prevPropsPosition:K}=f;return S&&(!K||S.x!==K.x||S.y!==K.y)?{x:S.x,y:S.y,prevPropsPosition:{...S}}:null}constructor(d){super(d),Oe(this,"onDragStart",(f,S)=>{if(this.props.onStart(f,ie(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),Oe(this,"onDrag",(f,S)=>{if(!this.state.dragging)return!1;const K=ie(this,S),Z={x:K.x,y:K.y,slackX:0,slackY:0};if(this.props.bounds){const{x:ge,y:ke}=Z;Z.x+=this.state.slackX,Z.y+=this.state.slackY;const[Ue,mt]=te(this,Z.x,Z.y);Z.x=Ue,Z.y=mt,Z.slackX=this.state.slackX+(ge-Z.x),Z.slackY=this.state.slackY+(ke-Z.y),K.x=Z.x,K.y=Z.y,K.deltaX=Z.x-this.state.x,K.deltaY=Z.y-this.state.y}if(this.props.onDrag(f,K)===!1)return!1;this.setState(Z)}),Oe(this,"onDragStop",(f,S)=>{if(!this.state.dragging||this.props.onStop(f,ie(this,S))===!1)return!1;const Z={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:ge,y:ke}=this.props.position;Z.x=ge,Z.y=ke}this.setState(Z)}),this.state={dragging:!1,dragged:!1,x:d.position?d.position.x:d.defaultPosition.x,y:d.position?d.position.y:d.defaultPosition.y,prevPropsPosition:{...d.position},slackX:0,slackY:0,isElementSVG:!1},d.position&&!(d.onDrag||d.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var d,f;return(d=(f=this.props)===null||f===void 0||(f=f.nodeRef)===null||f===void 0?void 0:f.current)!==null&&d!==void 0?d:N().findDOMNode(this)}render(){const{axis:d,bounds:f,children:S,defaultPosition:K,defaultClassName:Z,defaultClassNameDragging:Ge,defaultClassNameDragged:ge,position:ke,positionOffset:Ue,scale:mt,...Et}=this.props;let Ts={},As=null;const cs=!!!ke||this.state.dragging,ds=ke||K,hs={x:Pe(this)&&cs?this.state.x:ds.x,y:Ee(this)&&cs?this.state.y:ds.y};this.state.isElementSVG?As=F(hs,Ue):Ts=O(hs,Ue);const Rs=E(S.props.className||"",Z,{[Ge]:this.state.dragging,[ge]:this.state.dragged});return b.createElement(st,ut({},Et,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),b.cloneElement(b.Children.only(S),{className:Rs,style:{...S.props.style,...Ts},transform:As}))}}Oe(Dt,"displayName","Draggable"),Oe(Dt,"propTypes",{...st.propTypes,axis:j().oneOf(["both","x","y","none"]),bounds:j().oneOfType([j().shape({left:j().number,right:j().number,top:j().number,bottom:j().number}),j().string,j().oneOf([!1])]),defaultClassName:j().string,defaultClassNameDragging:j().string,defaultClassNameDragged:j().string,defaultPosition:j().shape({x:j().number,y:j().number}),positionOffset:j().shape({x:j().oneOfType([j().number,j().string]),y:j().oneOfType([j().number,j().string])}),position:j().shape({x:j().number,y:j().number}),className:P,style:P,transform:P}),Oe(Dt,"defaultProps",{...st.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},16:function(m,y,_){const{default:b,DraggableCore:T}=_(404);m.exports=b,m.exports.default=b,m.exports.DraggableCore=T},703:function(m,y,_){var b=_(414);function T(){}function j(){}j.resetWarningCache=T,m.exports=function(){function w(E,q,k,C,v,P){if(P!==b){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}w.isRequired=w;function N(){return w}var A={array:w,bigint:w,bool:w,func:w,number:w,object:w,string:w,symbol:w,any:w,arrayOf:N,element:w,elementType:w,instanceOf:N,node:w,objectOf:N,oneOf:N,oneOfType:N,shape:N,exact:N,checkPropTypes:j,resetWarningCache:T};return A.PropTypes=A,A}},697:function(m,y,_){m.exports=_(703)()},414:function(m){var y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";m.exports=y},359:function(m){m.exports=s},318:function(m){m.exports=i}},r={};function l(m){var y=r[m];if(y!==void 0)return y.exports;var _=r[m]={exports:{}};return n[m](_,_.exports,l),_.exports}(function(){l.n=function(m){var y=m&&m.__esModule?function(){return m.default}:function(){return m};return l.d(y,{a:y}),y}})(),function(){l.d=function(m,y){for(var _ in y)l.o(y,_)&&!l.o(m,_)&&Object.defineProperty(m,_,{enumerable:!0,get:y[_]})}}(),function(){l.o=function(m,y){return Object.prototype.hasOwnProperty.call(m,y)}}(),function(){l.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})}}();var p=l(16);return p}()})})(Tn);var yl=Tn.exports;const jl=mn(yl);class ps extends c.Component{constructor(e){super(e),this.state={map_url:"",map_id:0,map_name:"",map_position:{x:0,y:0},character_position:{x:0,y:0},game_map_id:0,bottom_bounds:0,right_bounds:0,locations:[],port_location:null,loading:!0,player_kingdoms:[],enemy_kingdoms:[],npc_kingdoms:[],coordinates:null,can_player_move:!0,characters_on_map:0,time_left:0,automation_time_out:0,celestial_time_out:0},this.mapTimeOut=Echo.private("show-timeout-move-"+this.props.user_id),this.explorationTimeOut=Echo.private("exploration-timeout-"+this.props.user_id),this.celestialTimeout=Echo.private("update-character-celestial-timeout-"+this.props.user_id)}componentDidMount(){this.props.map_data!==null&&this.setState({...this.props.map_data,time_left:0,automation_time_out:0,celestial_time_out:0},()=>{Ws(this.props.character_id),yi(this.props.character_id),this.setState({loading:!1})}),this.mapTimeOut.listen("Game.Maps.Events.ShowTimeOutEvent",e=>{this.setState({time_left:e.forLength,can_player_move:e.canMove})}),this.explorationTimeOut.listen("Game.Exploration.Events.ExplorationTimeOut",e=>{this.setState({automation_time_out:e.forLength})}),this.celestialTimeout.listen("Game.Core.Events.UpdateCharacterCelestialTimeOut",e=>{this.setState({celestial_time_out:e.timeLeft})})}componentDidUpdate(){this.props.map_data!==null&&this.state.loading&&this.setState({...this.props.map_data,time_left:0,automation_time_out:0,celestial_time_out:0},()=>{Ws(this.props.character_id),yi(this.props.character_id),this.setState({loading:!1})}),this.props.map_data!==null&&(this.props.map_data.map_url!==this.state.map_url&&this.setState({...this.props.map_data}),(this.props.map_data.player_kingdoms.length!==this.state.player_kingdoms.length||this.props.map_data.enemy_kingdoms.length!==this.state.enemy_kingdoms.length||this.props.map_data.npc_kingdoms.length!==this.state.npc_kingdoms.length)&&this.setState({player_kingdoms:this.props.map_data.player_kingdoms,enemy_kingdoms:this.props.map_data.enemy_kingdoms,npc_kingdoms:this.props.map_data.npc_kingdoms}),de.isEqual(this.props.map_data.locations,this.state.locations)||this.setState({locations:this.props.map_data.locations}))}componentWillUnmount(){this.props.set_map_data(this.state)}setStateFromData(e,s){const i=Va.buildChangeState(e,this);this.setState(i,()=>{if(typeof s=="function")return s()})}handleDrag(e,s){this.setState(zo(s,this.state.bottom_bounds,this.state.right_bounds))}handleTeleportPlayer(e){new zs(this).teleportPlayer(e,this.props.character_id,this.setStateFromData.bind(this))}render(){return this.state.loading?t.jsx(Fe,{}):t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"overflow-hidden max-h-[315px] sm:max-w-[75%] md:max-w-[44%] sm:border-2 lg:border-0 sm:mr-auto sm:ml-auto lg:max-w-full lg:mr-0 lg:ml-0",children:t.jsx(jl,{position:this.state.map_position,bounds:{top:-200,left:Wo(this),right:this.state.right_bounds,bottom:this.state.bottom_bounds},handle:".handle",defaultPosition:{x:0,y:0},grid:[16,16],scale:1,onDrag:this.handleDrag.bind(this),children:t.jsx("div",{children:t.jsxs("div",{className:"handle game-map",style:ll(this),children:[this.state.map_name==="The Ice Plane"?t.jsx(Ko,{}):null,t.jsx(Vo,{locations:this.state.locations,character_position:this.state.character_position,currencies:this.props.currencies,teleport_player:this.handleTeleportPlayer.bind(this),can_move:this.state.can_player_move,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running}),t.jsx(el,{kingdoms:this.state.player_kingdoms,character_id:this.props.character_id,character_position:this.state.character_position,currencies:this.props.currencies,teleport_player:this.handleTeleportPlayer.bind(this),can_move:this.state.can_player_move,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running}),t.jsx(sl,{kingdoms:this.state.enemy_kingdoms,character_id:this.props.character_id,character_position:this.state.character_position,currencies:this.props.currencies,teleport_player:this.handleTeleportPlayer.bind(this),can_move:this.state.can_player_move,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running}),t.jsx(rl,{kingdoms:this.state.npc_kingdoms,character_id:this.props.character_id,character_position:this.state.character_position,currencies:this.props.currencies,teleport_player:this.handleTeleportPlayer.bind(this),can_move:this.state.can_player_move,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running}),t.jsx("div",{className:"map-x-pin",style:ol(this)})]})})})}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"my-4 grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:["X/Y: ",this.state.character_position.x," /"," ",this.state.character_position.y]}),t.jsxs("div",{children:["Plane:"," ",t.jsxs("a",{href:"/information/map/"+this.state.map_id,target:"_blank",children:[this.state.map_name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-2"}),t.jsxs("div",{children:["Character on Plane: ",this.state.characters_on_map]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-2"}),t.jsx(bl,{character_id:this.props.character_id,can_move:this.state.can_player_move,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running,can_engage_celestial:this.props.can_engage_celestial,port_location:this.state.port_location,locations:this.state.locations,player_kingdoms:this.state.player_kingdoms,enemy_kingdoms:this.state.enemy_kingdoms,npc_kingdoms:this.state.npc_kingdoms,character_position:this.state.character_position,character_currencies:this.props.currencies,coordinates:this.state.coordinates,view_port:this.props.view_port,update_map_state:this.setStateFromData.bind(this),map_id:this.state.map_id}),t.jsx("div",{className:$("border-b-2 border-b-gray-300 dark:border-b-gray-600 my-2",{hidden:this.props.view_port>=1600})}),t.jsx(dl,{character_position:this.state.character_position,map_position:this.state.map_position,view_port:this.props.view_port,is_dead:this.props.is_dead,is_automation_running:this.props.is_automaton_running,character_id:this.props.character_id,map_id:this.state.map_id,update_map_state:this.setStateFromData.bind(this),can_move:this.state.can_player_move})]}),t.jsx("div",{className:$("mt-4",{hidden:this.props.disable_bottom_timer}),children:t.jsx(Nn,{time_left:this.state.time_left,automation_time_out:this.state.automation_time_out,celestial_time_out:this.state.celestial_time_out})})]})}}class Ys extends c.Component{constructor(e){super(e)}render(){return t.jsxs("div",{className:$({"relative top-[24px]":this.props.push_down}),children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"font-medium text-orange-700 dark:text-white text-xs "+this.props.text_override_class,children:this.props.primary_label}),t.jsx("span",{className:"text-xs font-medium text-orange-700 dark:text-white "+this.props.text_override_class,children:this.props.secondary_label})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700 "+this.props.height_override_class,children:t.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full "+this.props.height_override_class,style:{width:this.props.percentage_filled+"%"}})})]})}}class vl extends c.Component{constructor(e){super(e),this.state={hide_top_bar:!0}}hideTopBar(){this.setState({hide_top_bar:!this.state.hide_top_bar})}componentDidMount(){}componentDidUpdate(e,s){this.props.view_port>=1600&&this.state.hide_top_bar&&this.setState({hide_top_bar:!1})}getXpPercentage(){const e=this.props.character.xp_next;return this.props.character.xp/e*100}abbreviateNumber(e){if(typeof e>"u")return 0;let s=parseInt(e.toFixed(0));const i=["","k","M","B","T","Quad.","Qunit."];var n=Math.log10(Math.abs(s))/3|0;if(n==0)return s;var r=i[n],l=Math.pow(10,n*3),p=s/l;return p.toFixed(1)+r}render(){return this.props.character===null?null:this.state.hide_top_bar&&this.props.view_port<1600?t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2",children:[t.jsx("span",{children:t.jsx("strong",{children:"Character Details"})}),t.jsx("div",{className:"text-right cursor-pointer text-blue-500",children:t.jsx("button",{onClick:this.hideTopBar.bind(this),children:t.jsx("i",{className:"fas fa-plus-circle"})})})]}),t.jsxs("div",{className:"relative top-[24px]",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{className:"font-medium text-orange-700 dark:text-white text-xs",children:["XP (Current Level: ",this.props.character.level,"/",this.props.character.max_level,")"]}),t.jsxs("span",{className:"text-xs font-medium text-orange-700 dark:text-white",children:[u(this.props.character.xp),"/",u(this.props.character.xp_next)]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700",children:t.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full",style:{width:this.getXpPercentage()+"%"}})})]})]}):t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500 block lg:hidden",children:t.jsx("button",{onClick:this.hideTopBar.bind(this),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"grid md:grid-cols-4",children:[t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Name"}),": ",this.props.character.name]}),t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Race"}),": ",t.jsx("a",{href:"/information/race/"+this.props.character.race_id,target:"_blank",children:this.props.character.race})]}),t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Class"}),": ",t.jsx("a",{href:"/information/class/"+this.props.character.class_id,target:"_blank",children:this.props.character.class})]}),t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Gold"}),": ",this.props.character.gold]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsxs("div",{className:"grid md:grid-cols-3",children:[t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Gold Dust"}),": ",this.props.character.gold_dust]}),t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Crystal Shards"}),": ",this.props.character.shards]}),t.jsxs("span",{className:"mb-2 sm:mb-0",children:[t.jsx("strong",{children:"Copper Coins"}),": ",this.props.character.copper_coins]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3 hidden sm:block"}),t.jsxs("div",{className:"grid md:grid-cols-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Level"}),": ",this.props.character.level,"/",this.props.character.max_level]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"AC"}),": ",this.abbreviateNumber(this.props.character.ac)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Attack"}),": ",this.abbreviateNumber(this.props.character.attack)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Health"}),": ",this.props.character.is_dead?t.jsx(o.Fragment,{children:t.jsx("span",{className:"text-red-600 dark:text-red-400",children:"0 [DEAD]"})}):this.abbreviateNumber(this.props.character.health)]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Strength"}),": ",this.abbreviateNumber(this.props.character.str_modded)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Durability"}),": ",this.abbreviateNumber(this.props.character.dur_modded)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Dexterity"}),": ",this.abbreviateNumber(this.props.character.dex_modded)]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Intelligence"}),": ",this.abbreviateNumber(this.props.character.int_modded)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Charisma"}),": ",this.abbreviateNumber(this.props.character.chr_modded)]}),t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Focus"}),": ",this.abbreviateNumber(this.props.character.focus_modded)]})]}),t.jsx("div",{children:t.jsxs("div",{className:"py-1",children:[t.jsx("strong",{children:"Agility"}),": ",this.abbreviateNumber(this.props.character.agi_modded)]})})]}),t.jsx(Ys,{primary_label:"XP",secondary_label:u(this.props.character.xp)+"/"+u(this.props.character.xp_next),percentage_filled:this.getXpPercentage(),push_down:!0})]})}}function ks(a,e){return e||(e=a.slice(0)),a.raw=e,a}var kl=function(){function a(s){var i=this;this._insertTag=function(n){i.container.insertBefore(n,i.tags.length===0?i.insertionPoint?i.insertionPoint.nextSibling:i.prepend?i.container.firstChild:i.before:i.tags[i.tags.length-1].nextSibling),i.tags.push(n)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var e=a.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(r){var l=document.createElement("style");return l.setAttribute("data-emotion",r.key),r.nonce!==void 0&&l.setAttribute("nonce",r.nonce),l.appendChild(document.createTextNode("")),l.setAttribute("data-s",""),l}(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(r){if(r.sheet)return r.sheet;for(var l=0;l<document.styleSheets.length;l++)if(document.styleSheets[l].ownerNode===r)return document.styleSheets[l]}(i);try{n.insertRule(s,n.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){return s.parentNode&&s.parentNode.removeChild(s)}),this.tags=[],this.ctr=0},a}(),Ze="-ms-",we="-webkit-",wl=Math.abs,ha=String.fromCharCode,Sl=Object.assign;function An(a){return a.trim()}function fe(a,e,s){return a.replace(e,s)}function Da(a,e){return a.indexOf(e)}function et(a,e){return 0|a.charCodeAt(e)}function ys(a,e,s){return a.slice(e,s)}function _t(a){return a.length}function Xa(a){return a.length}function Ds(a,e){return e.push(a),a}var ua=1,Jt=1,Rn=0,tt=0,Me=0,os="";function ma(a,e,s,i,n,r,l){return{value:a,root:e,parent:s,type:i,props:n,children:r,line:ua,column:Jt,length:l,return:""}}function ms(a,e){return Sl(ma("",null,null,"",null,null,0),a,{length:-a.length},e)}function Cl(){return Me=tt>0?et(os,--tt):0,Jt--,Me===10&&(Jt=1,ua--),Me}function at(){return Me=tt<Rn?et(os,tt++):0,Jt++,Me===10&&(Jt=1,ua++),Me}function yt(){return et(os,tt)}function Bs(){return tt}function ws(a,e){return ys(os,a,e)}function js(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qn(a){return ua=Jt=1,Rn=_t(os=a),tt=0,[]}function Dn(a){return os="",a}function Gs(a){return An(ws(tt-1,Ea(a===91?a+2:a===40?a+1:a)))}function Nl(a){for(;(Me=yt())&&Me<33;)at();return js(a)>2||js(Me)>3?"":" "}function Pl(a,e){for(;--e&&at()&&!(Me<48||Me>102||Me>57&&Me<65||Me>70&&Me<97););return ws(a,Bs()+(e<6&&yt()==32&&at()==32))}function Ea(a){for(;at();)switch(Me){case a:return tt;case 34:case 39:a!==34&&a!==39&&Ea(Me);break;case 40:a===41&&Ea(a);break;case 92:at()}return tt}function Tl(a,e){for(;at()&&a+Me!==57&&(a+Me!==84||yt()!==47););return"/*"+ws(e,tt-1)+"*"+ha(a===47?a:at())}function Al(a){for(;!js(yt());)at();return ws(a,tt)}function Rl(a){return Dn(Us("",null,null,null,[""],a=qn(a),0,[0],a))}function Us(a,e,s,i,n,r,l,p,m){for(var y=0,_=0,b=l,T=0,j=0,w=0,N=1,A=1,E=1,q=0,k="",C=n,v=r,P=i,I=k;A;)switch(w=q,q=at()){case 40:if(w!=108&&I.charCodeAt(b-1)==58){Da(I+=fe(Gs(q),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:I+=Gs(q);break;case 9:case 10:case 13:case 32:I+=Nl(w);break;case 92:I+=Pl(Bs()-1,7);continue;case 47:switch(yt()){case 42:case 47:Ds(ql(Tl(at(),Bs()),e,s),m);break;default:I+="/"}break;case 123*N:p[y++]=_t(I)*E;case 125*N:case 59:case 0:switch(q){case 0:case 125:A=0;case 59+_:j>0&&_t(I)-b&&Ds(j>32?vi(I+";",i,s,b-1):vi(fe(I," ","")+";",i,s,b-2),m);break;case 59:I+=";";default:if(Ds(P=ji(I,e,s,y,_,n,p,k,C=[],v=[],b),r),q===123)if(_===0)Us(I,e,P,P,C,r,b,p,v);else switch(T){case 100:case 109:case 115:Us(a,P,P,i&&Ds(ji(a,P,P,0,0,n,p,k,n,C=[],b),v),n,v,b,p,i?C:v);break;default:Us(I,P,P,P,[""],v,0,p,v)}}y=_=j=0,N=E=1,k=I="",b=l;break;case 58:b=1+_t(I),j=w;default:if(N<1){if(q==123)--N;else if(q==125&&N++==0&&Cl()==125)continue}switch(I+=ha(q),q*N){case 38:E=_>0?1:(I+="\f",-1);break;case 44:p[y++]=(_t(I)-1)*E,E=1;break;case 64:yt()===45&&(I+=Gs(at())),T=yt(),_=b=_t(k=I+=Al(Bs())),q++;break;case 45:w===45&&_t(I)==2&&(N=0)}}return r}function ji(a,e,s,i,n,r,l,p,m,y,_){for(var b=n-1,T=n===0?r:[""],j=Xa(T),w=0,N=0,A=0;w<i;++w)for(var E=0,q=ys(a,b+1,b=wl(N=l[w])),k=a;E<j;++E)(k=An(N>0?T[E]+" "+q:fe(q,/&\f/g,T[E])))&&(m[A++]=k);return ma(a,e,s,n===0?"rule":p,m,y,_)}function ql(a,e,s){return ma(a,e,s,"comm",ha(Me),ys(a,2,-2),0)}function vi(a,e,s,i){return ma(a,e,s,"decl",ys(a,0,i),ys(a,i+1,-1),i)}function En(a,e){switch(function(s,i){return(((i<<2^et(s,0))<<2^et(s,1))<<2^et(s,2))<<2^et(s,3)}(a,e)){case 5103:return we+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return we+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return we+a+"-moz-"+a+Ze+a+a;case 6828:case 4268:return we+a+Ze+a+a;case 6165:return we+a+Ze+"flex-"+a+a;case 5187:return we+a+fe(a,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+a;case 5443:return we+a+Ze+"flex-item-"+fe(a,/flex-|-self/,"")+a;case 4675:return we+a+Ze+"flex-line-pack"+fe(a,/align-content|flex-|-self/,"")+a;case 5548:return we+a+Ze+fe(a,"shrink","negative")+a;case 5292:return we+a+Ze+fe(a,"basis","preferred-size")+a;case 6060:return we+"box-"+fe(a,"-grow","")+we+a+Ze+fe(a,"grow","positive")+a;case 4554:return we+fe(a,/([^-])(transform)/g,"$1-webkit-$2")+a;case 6187:return fe(fe(fe(a,/(zoom-|grab)/,we+"$1"),/(image-set)/,we+"$1"),a,"")+a;case 5495:case 3959:return fe(a,/(image-set\([^]*)/,we+"$1$`$1");case 4968:return fe(fe(a,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+we+a+a;case 4095:case 3583:case 4068:case 2532:return fe(a,/(.+)-inline(.+)/,we+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_t(a)-1-e>6)switch(et(a,e+1)){case 109:if(et(a,e+4)!==45)break;case 102:return fe(a,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(et(a,e+3)==108?"$3":"$2-$3"))+a;case 115:return~Da(a,"stretch")?En(fe(a,"stretch","fill-available"),e)+a:a}break;case 4949:if(et(a,e+1)!==115)break;case 6444:switch(et(a,_t(a)-3-(~Da(a,"!important")&&10))){case 107:return fe(a,":",":"+we)+a;case 101:return fe(a,/(.+:)([^;!]+)(;|!.+)?/,"$1"+we+(et(a,14)===45?"inline-":"")+"box$3$1"+we+"$2$3$1"+Ze+"$2box$3")+a}break;case 5936:switch(et(a,e+11)){case 114:return we+a+Ze+fe(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return we+a+Ze+fe(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return we+a+Ze+fe(a,/[svh]\w+-[tblr]{2}/,"lr")+a}return we+a+Ze+a+a}return a}function Vt(a,e){for(var s="",i=Xa(a),n=0;n<i;n++)s+=e(a[n],n,a,e)||"";return s}function Dl(a,e,s,i){switch(a.type){case"@import":case"decl":return a.return=a.return||a.value;case"comm":return"";case"@keyframes":return a.return=a.value+"{"+Vt(a.children,i)+"}";case"rule":a.value=a.props.join(",")}return _t(s=Vt(a.children,i))?a.return=a.value+"{"+s+"}":""}function El(a){var e=Object.create(null);return function(s){return e[s]===void 0&&(e[s]=a(s)),e[s]}}var Il=function(a,e,s){for(var i=0,n=0;i=n,n=yt(),i===38&&n===12&&(e[s]=1),!js(n);)at();return ws(a,tt)},ki=new WeakMap,Ml=function(a){if(a.type==="rule"&&a.parent&&!(a.length<1)){for(var e=a.value,s=a.parent,i=a.column===s.column&&a.line===s.line;s.type!=="rule";)if(!(s=s.parent))return;if((a.props.length!==1||e.charCodeAt(0)===58||ki.get(s))&&!i){ki.set(a,!0);for(var n=[],r=function(_,b){return Dn(function(T,j){var w=-1,N=44;do switch(js(N)){case 0:N===38&&yt()===12&&(j[w]=1),T[w]+=Il(tt-1,j,w);break;case 2:T[w]+=Gs(N);break;case 4:if(N===44){T[++w]=yt()===58?"&\f":"",j[w]=T[w].length;break}default:T[w]+=ha(N)}while(N=at());return T}(qn(_),b))}(e,n),l=s.props,p=0,m=0;p<r.length;p++)for(var y=0;y<l.length;y++,m++)a.props[m]=n[p]?r[p].replace(/&\f/g,l[y]):l[y]+" "+r[p]}}},Fl=function(a){if(a.type==="decl"){var e=a.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(a.return="",a.value="")}},Ol=[function(a,e,s,i){if(a.length>-1&&!a.return)switch(a.type){case"decl":a.return=En(a.value,a.length);break;case"@keyframes":return Vt([ms(a,{value:fe(a.value,"@","@"+we)})],i);case"rule":if(a.length)return function(n,r){return n.map(r).join("")}(a.props,function(n){switch(function(r,l){return(r=/(::plac\w+|:read-\w+)/.exec(r))?r[0]:r}(n)){case":read-only":case":read-write":return Vt([ms(a,{props:[fe(n,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return Vt([ms(a,{props:[fe(n,/:(plac\w+)/,":-webkit-input-$1")]}),ms(a,{props:[fe(n,/:(plac\w+)/,":-moz-$1")]}),ms(a,{props:[fe(n,/:(plac\w+)/,Ze+"input-$1")]})],i)}return""})}}],Ll={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$l=/[A-Z]|^ms/g,Bl=/_EMO_([^_]+?)_([^]*?)_EMO_/g,In=function(a){return a.charCodeAt(1)===45},wi=function(a){return a!=null&&typeof a!="boolean"},wa=El(function(a){return In(a)?a:a.replace($l,"-$&").toLowerCase()}),Si=function(a,e){switch(a){case"animation":case"animationName":if(typeof e=="string")return e.replace(Bl,function(s,i,n){return gt={name:i,styles:n,next:gt},i})}return Ll[a]===1||In(a)||typeof e!="number"||e===0?e:e+"px"};function _s(a,e,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":if(s.anim===1)return gt={name:s.name,styles:s.styles,next:gt},s.name;if(s.styles!==void 0){var i=s.next;if(i!==void 0)for(;i!==void 0;)gt={name:i.name,styles:i.styles,next:gt},i=i.next;var n=s.styles+";";return n}return function(m,y,_){var b="";if(Array.isArray(_))for(var T=0;T<_.length;T++)b+=_s(m,y,_[T])+";";else for(var j in _){var w=_[j];if(typeof w!="object")y!=null&&y[w]!==void 0?b+=j+"{"+y[w]+"}":wi(w)&&(b+=wa(j)+":"+Si(j,w)+";");else if(!Array.isArray(w)||typeof w[0]!="string"||y!=null&&y[w[0]]!==void 0){var N=_s(m,y,w);switch(j){case"animation":case"animationName":b+=wa(j)+":"+N+";";break;default:b+=j+"{"+N+"}"}}else for(var A=0;A<w.length;A++)wi(w[A])&&(b+=wa(j)+":"+Si(j,w[A])+";")}return b}(a,e,s);case"function":if(a!==void 0){var r=gt,l=s(a);return gt=r,_s(a,e,l)}break}if(e==null)return s;var p=e[s];return p!==void 0?p:s}var gt,Ci=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Sa=function(a,e,s){if(a.length===1&&typeof a[0]=="object"&&a[0]!==null&&a[0].styles!==void 0)return a[0];var i=!0,n="";gt=void 0;var r=a[0];r==null||r.raw===void 0?(i=!1,n+=_s(s,e,r)):n+=r[0];for(var l=1;l<a.length;l++)n+=_s(s,e,a[l]),i&&(n+=r[l]);Ci.lastIndex=0;for(var p,m="";(p=Ci.exec(n))!==null;)m+="-"+p[1];var y=function(_){for(var b,T=0,j=0,w=_.length;w>=4;++j,w-=4)b=1540483477*(65535&(b=255&_.charCodeAt(j)|(255&_.charCodeAt(++j))<<8|(255&_.charCodeAt(++j))<<16|(255&_.charCodeAt(++j))<<24))+(59797*(b>>>16)<<16),T=1540483477*(65535&(b^=b>>>24))+(59797*(b>>>16)<<16)^1540483477*(65535&T)+(59797*(T>>>16)<<16);switch(w){case 3:T^=(255&_.charCodeAt(j+2))<<16;case 2:T^=(255&_.charCodeAt(j+1))<<8;case 1:T=1540483477*(65535&(T^=255&_.charCodeAt(j)))+(59797*(T>>>16)<<16)}return(((T=1540483477*(65535&(T^=T>>>13))+(59797*(T>>>16)<<16))^T>>>15)>>>0).toString(36)}(n)+m;return{name:y,styles:n,next:gt}};function Mn(a,e,s){var i="";return s.split(" ").forEach(function(n){a[n]!==void 0?e.push(a[n]+";"):i+=n+" "}),i}var Gl=function(a,e,s){(function(r,l,p){var m=r.key+"-"+l.name;p===!1&&r.registered[m]===void 0&&(r.registered[m]=l.styles)})(a,e,s);var i=a.key+"-"+e.name;if(a.inserted[e.name]===void 0){var n=e;do a.insert(e===n?"."+i:"",n,a.sheet,!0),n=n.next;while(n!==void 0)}};function Ni(a,e){if(a.inserted[e.name]===void 0)return a.insert("",e,a.sheet,!0)}function Pi(a,e,s){var i=[],n=Mn(a,i,s);return i.length<2?s:n+e(i)}var Ti,Ai,Ri,qi,Di,Ul=function a(e){for(var s="",i=0;i<e.length;i++){var n=e[i];if(n!=null){var r=void 0;switch(typeof n){case"boolean":break;case"object":if(Array.isArray(n))r=a(n);else for(var l in r="",n)n[l]&&l&&(r&&(r+=" "),r+=l);break;default:r=n}r&&(s&&(s+=" "),s+=r)}}return s},Fn=function(a){var e=function(i){var n=i.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(E){E.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var l=i.stylisPlugins||Ol,p,m,y={},_=[];p=i.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(E){for(var q=E.getAttribute("data-emotion").split(" "),k=1;k<q.length;k++)y[q[k]]=!0;_.push(E)});var b=[Ml,Fl],T,j,w=[Dl,(j=function(E){T.insert(E)},function(E){E.root||(E=E.return)&&j(E)})],N=function(E){var q=Xa(E);return function(k,C,v,P){for(var I="",U=0;U<q;U++)I+=E[U](k,C,v,P)||"";return I}}(b.concat(l,w));m=function(E,q,k,C){T=k,Vt(Rl(E?E+"{"+q.styles+"}":q.styles),N),C&&(A.inserted[q.name]=!0)};var A={key:n,sheet:new kl({key:n,container:p,nonce:i.nonce,speedy:i.speedy,prepend:i.prepend,insertionPoint:i.insertionPoint}),nonce:i.nonce,inserted:y,registered:{},insert:m};return A.sheet.hydrate(_),A}({key:"css"});e.sheet.speedy=function(i){this.isSpeedy=i},e.compat=!0;var s=function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var l=Sa(n,e.registered,void 0);return Gl(e,l,!1),e.key+"-"+l.name};return{css:s,cx:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Pi(e.registered,s,Ul(n))},injectGlobal:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var l=Sa(n,e.registered);Ni(e,l)},keyframes:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];var l=Sa(n,e.registered),p="animation-"+l.name;return Ni(e,{name:l.name,styles:"@keyframes "+p+"{"+l.styles+"}"}),p},hydrate:function(i){i.forEach(function(n){e.inserted[n]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:Mn.bind(null,e.registered),merge:Pi.bind(null,e.registered,s)}}(),Hl=Fn.cx,Ss=Fn.css,On=Ss(Ti||(Ti=ks([`
  content: '';
  position: absolute;
  top: 0;
  height: var(--tree-line-height);
  box-sizing: border-box;
`]))),Kl=Ss(Ai||(Ai=ks([`
  display: flex;
  padding-inline-start: 0;
  margin: 0;
  padding-top: var(--tree-line-height);
  position: relative;

  ::before {
    `,`;
    left: calc(50% - var(--tree-line-width) / 2);
    width: 0;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
`])),On),zl=Ss(Ri||(Ri=ks([`
  flex: auto;
  text-align: center;
  list-style-type: none;
  position: relative;
  padding: var(--tree-line-height) var(--tree-node-padding) 0
    var(--tree-node-padding);
`]))),Wl=Ss(qi||(qi=ks([`
  ::before,
  ::after {
    `,`;
    right: 50%;
    width: 50%;
    border-top: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }
  ::after {
    left: 50%;
    border-left: var(--tree-line-width) var(--tree-node-line-style)
      var(--tree-line-color);
  }

  :only-of-type {
    padding: 0;
    ::after,
    :before {
      display: none;
    }
  }

  :first-of-type {
    ::before {
      border: 0 none;
    }
    ::after {
      border-radius: var(--tree-line-border-radius) 0 0 0;
    }
  }

  :last-of-type {
    ::before {
      border-right: var(--tree-line-width) var(--tree-node-line-style)
        var(--tree-line-color);
      border-radius: 0 var(--tree-line-border-radius) 0 0;
    }
    ::after {
      border: 0 none;
    }
  }
`])),On);function pa(a){var e=a.children,s=a.label;return o.createElement("li",{className:Hl(zl,Wl,a.className)},s,o.Children.count(e)>0&&o.createElement("ul",{className:Kl},e))}function gs(a){var e=a.children,s=a.label,i=a.lineHeight,n=i===void 0?"20px":i,r=a.lineWidth,l=r===void 0?"1px":r,p=a.lineColor,m=p===void 0?"black":p,y=a.nodePadding,_=y===void 0?"5px":y,b=a.lineStyle,T=b===void 0?"solid":b,j=a.lineBorderRadius,w=j===void 0?"5px":j;return o.createElement("ul",{className:Ss(Di||(Di=ks([`
        padding-inline-start: 0;
        margin: 0;
        display: flex;

        --line-height: `,`;
        --line-width: `,`;
        --line-color: `,`;
        --line-border-radius: `,`;
        --line-style: `,`;
        --node-padding: `,`;

        --tree-line-height: var(--line-height, 20px);
        --tree-line-width: var(--line-width, 1px);
        --tree-line-color: var(--line-color, black);
        --tree-line-border-radius: var(--line-border-radius, 5px);
        --tree-node-line-style: var(--line-style, solid);
        --tree-node-padding: var(--node-padding, 5px);
      `])),n,l,m,w,T,_)},o.createElement(pa,{label:s},e))}class Yl extends c.Component{constructor(e){super(e)}buildTitle(){switch(this.props.type){case"gold_dust":return"How to get: Gold Dust";case"shards":return"How to get: Shards";case"copper_coins":return"How to get: Copper Coins";case"item_requirement":return"How to get: "+this.props.quest.item.name;case"secondary_item_requirement":return"How to get: "+this.props.quest.secondary_item.name;case"required_quest":return"Quest to complete: "+this.props.quest.required_quest.name;case"reincarnation_times":return"Times to reincarnate";case"faction_map":return"Faction Map Requirements";case"fame_requirements":return"Fame Requirements";default:return null}}buildGoldDustHelp(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"Gold dust is gained only by disenchanting items and daily through the Gold Dust lottery system. Players are encouraged to level crafting and enchanting while exploration is running or manually fighting as you can then disenchant the items for Gold Dust."}),t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"Players are also encouraged to turn on Auto Disenchanting in their settings after level 20. This will also then auto disenchant drops from manual fights, adventures and exploration - as you level the disenchanting skill, you will also level the enchanting skill at half the XP."})]})}buildShardHelp(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"Shards drop from Celestial Entities, which can be conjured for a cost in Gold and Gold Dust, or through Hunting them on Wednesdays when they ave a 80% chance to spawn by you just moving. Some quests also reward shards."}),t.jsx("p",{children:"Players use shards and Gold Dust in Alchemy to create powerful potions for short term boons or to create Holy Oils for late game gear upgrades."})]})}buildCopperCoins(){return t.jsx(o.Fragment,{children:t.jsx("p",{className:"mt-2 mb-4 text-gray-700 dark:text-gray-200",children:"You must have access to Purgatory, from there you will kill any creature to get Copper Coins. Players should first complete the quest line to access Purgatory Smith Work Bench in the Purgatory Smiths House in Purgatory. This will allow you to make Holy Items, through Alchemy. These items are required to make it further down the Purgatory monster list."})})}buildFactionMapRequirements(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"There are two aspects to this requirement: The Faction and the level of the faction."}),t.jsxs("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:[t.jsx("strong",{children:"Plane Faction Name (Map to fight on)"})," refers to the map you need to be on to raise the second part: ",t.jsx("strong",{children:"Level required"}),". For example, if you need to be on Surface and get it to level three then you would kill creatures while on Surface to raise the Faction level."]}),t.jsx("p",{className:"my-2",children:t.jsxs("a",{href:"/information/factions",target:"_blank",children:["Learn more about Factions here ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})}buildFameRequirements(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"There are three aspects to fame requirements: The Npc to assist. The Map the Npc lives on and the fame level to have with that npc."}),t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"Players must have a faction at level 5 for the map that the npc lives on in order to assist the npc with their tasks and thus raise their fame to the required level. Once a player has this they just have to Pledge to that faction and then assist the NPC in order for their actions to count."}),t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"By assisting an NPC with their tasks, players will raise their fame with that NPC and gain items and currencies."}),t.jsx("p",{className:"my-2",children:t.jsxs("a",{href:"/information/faction-loyalty",target:"_blank",children:["Learn more about Faction Loyalty here ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})}buildRequiredQuestHelp(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-4 text-gray-700 dark:text-gray-200",children:"You need to complete a quest before you can hand this one in. The quest you are looking for can be in the same tree as this quest. Take a look below to see what plane the quest is on, the name of the quest and if its a raid specific quest, which means it only appears when that raid is running."}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Quest Name:"}),t.jsx("dd",{children:this.props.quest.required_quest.name}),t.jsx("dt",{children:"Plane:"}),t.jsx("dd",{children:t.jsxs("a",{href:"/information/map/"+this.props.quest.required_quest.npc.game_map.id,target:"_blank",children:[this.props.quest.required_quest.npc.game_map.name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),t.jsx("dt",{children:"Is Raid Quest:"}),t.jsx("dd",{children:this.props.quest.required_quest.raid_id!==null?"Yes":"No"}),this.props.quest.required_quest.raid_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Raid Name:"}),t.jsxs("dd",{children:[t.jsx("strong",{children:this.props.quest.required_quest.raid.name})," Check your event calendar in the side bar to see when this raid is going to take place again!"]})]}):null]})]})}buildReincarnationHelp(){return t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"mt-2 mb-4 text-gray-700 dark:text-gray-200",children:"This quest requires you to head to your Character Sheet (tab) and click the Reincarnate button. This will set your character to level one, keeping all skills, current stats and so on. Only your level will be reset back to one, allowing your character to grow stronger."}),t.jsx("p",{className:"mb-4 text-gray-700 dark:text-gray-200",children:"While you can reincarnate at anytime, a word of caution: If you reincarnate too early, you will have less stats then someone who waits till they are level 5000. A character may only reincarnate 100 times. The choice is yours if you reincarnate now, or wait."}),t.jsxs("p",{className:"text-gray-700 dark:text-gray-200",children:["Learn more about ",t.jsxs("a",{href:"/information/reincarnation",target:"_blank",children:["Reincarnation ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}buildContent(){switch(this.props.type){case"gold_dust":return this.buildGoldDustHelp();case"shards":return this.buildShardHelp();case"copper_coins":return this.buildCopperCoins();case"item_requirement":return t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:this.props.item_requirements(this.props.quest.item)});case"secondary_item_requirement":return t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:this.props.item_requirements(this.props.quest.secondary_item)});case"required_quest":return this.buildRequiredQuestHelp();case"reincarnation_times":return this.buildReincarnationHelp();case"faction_map":return this.buildFactionMapRequirements();case"fame_requirements":return this.buildFameRequirements();default:return null}}render(){return t.jsx(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:this.buildTitle(),children:this.buildContent()})}}class Ql extends c.Component{constructor(e){super(e),this.state={help_type:null,open_help:!1}}manageHelpDialogue(e){this.setState({help_type:typeof e<"u"?e:null,open_help:!this.state.open_help})}render(){return t.jsxs(o.Fragment,{children:[t.jsxs("dl",{children:[this.props.quest.gold_cost!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Cost:"}),t.jsx("dd",{children:u(this.props.quest.gold_cost)})]}):null,this.props.quest.gold_dust_cost!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Dust Cost:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:u(this.props.quest.gold_dust_cost)}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("gold_dust"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.shard_cost!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Shards Cost:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:u(this.props.quest.shard_cost)}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("shards"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.copper_coin_cost>0?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Copper Coin Cost:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:u(this.props.quest.copper_coin_cost)}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("copper_coins"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.item!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Required Item:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.item.name}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("item_requirement"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.secondary_item!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Secondary Required Item:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.secondary_item.name}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("secondary_item_requirement"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.access_to_map_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Plane Access Required:"}),t.jsx("dd",{children:this.props.quest.required_plane.name})]}):null,this.props.quest.faction_game_map_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Plane Faction Name (Map to fight on)"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.faction_map.name}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("faction_map"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]}),t.jsx("dt",{children:"Level required"}),t.jsx("dd",{children:this.props.quest.required_faction_level})]}):null,this.props.quest.assisting_npc_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Assist the NPC with their tasks"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.faction_loyalty_npc.real_name}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("fame_requirements"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]}),t.jsx("dt",{children:"On Game Map"}),t.jsx("dd",{children:this.props.quest.faction_loyalty_npc.game_map.name}),t.jsx("dt",{children:"Fame level required"}),t.jsx("dd",{children:this.props.quest.required_fame_level})]}):null,this.props.quest.required_quest_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Required Quest To Complete:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.required_quest.name}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("required_quest"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null,this.props.quest.reincarnated_times!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Number of times to reincarnate:"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:this.props.quest.reincarnated_times}),t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue("reincarnation_times"),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})]})]}):null]}),this.state.open_help&&this.state.help_type!==null?t.jsx(Yl,{manage_modal:this.manageHelpDialogue.bind(this),type:this.state.help_type,item_requirements:this.props.item_requirements,quest:this.props.quest}):null]})}}class Vl extends c.Component{constructor(e){super(e)}getFeatureLink(){return t.jsxs("a",{href:"/information/"+de.kebabCase(this.props.quest.feature_to_unlock_name.toLowerCase()),target:"_blank",children:[this.props.quest.feature_to_unlock_name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}render(){return t.jsxs("dl",{children:[this.props.quest.reward_xp!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"XP Reward"}),t.jsx("dd",{children:u(this.props.quest.reward_xp)})]}):null,this.props.quest.reward_gold!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Reward"}),t.jsx("dd",{children:u(this.props.quest.reward_gold)})]}):null,this.props.quest.reward_gold_dust!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Dust Reward"}),t.jsx("dd",{children:u(this.props.quest.reward_gold_dust)})]}):null,this.props.quest.reward_shards!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Shards Reward"}),t.jsx("dd",{children:u(this.props.quest.reward_shards)})]}):null,this.props.quest.unlocks_skill?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Unlocks New Skill"}),t.jsx("dd",{children:this.props.quest.unlocks_skill_name})]}):null,this.props.quest.feature_to_unlock_name!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Unlocks Game Feature"}),t.jsx("dd",{children:this.getFeatureLink()})]}):null,this.props.quest.unlocks_passive_name!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Unlocks Kingdom Passive"}),t.jsx("dd",{children:this.props.quest.unlocks_passive_name})]}):null,this.props.quest.reward_item!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Item reward"}),t.jsx("dd",{children:t.jsxs("a",{href:"/items/"+this.props.quest.reward_item.id,target:"_blank",children:[this.props.quest.reward_item.name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]}):null]})}}class Xl extends c.Component{constructor(e){super(e),this.state={quest_details:null,loading:!0,handing_in:!1,success_message:null,error_message:null},this.tabs=[{name:"Npc Details",key:"npc-details"},{name:"Required To Complete",key:"required-to-complete"},{name:"Quest Reward",key:"quest-reward"}]}componentDidMount(){this.props.quest_id!==null&&new g().setRoute("quest/"+this.props.quest_id+"/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({quest_details:e.data,loading:!1})},e=>{})}handInQuest(){this.setState({handing_in:!0},()=>{new g().setRoute("quest/"+this.props.quest_id+"/hand-in-quest/"+this.props.character_id).doAjaxCall("post",e=>{this.setState({handing_in:!1,success_message:e.data.message});const s=e.data;delete s.message,this.props.update_quests(s)},e=>{if(typeof e.response<"u"){const s=e.response,i=s.data.hasOwnProperty("message")?s.data.message:s.data.error;this.setState({handing_in:!1,error_message:i})}})})}buildTitle(){return this.state.quest_details===null?"Fetching details ...":this.state.quest_details.name}getNPCCommands(e){return e.commands.map(s=>s.command).join(", ")}renderPlaneAccessRequirements(e){return e.map_required_item!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Required to access"}),t.jsx("dd",{children:e.map_required_item.name}),e.map_required_item.required_quest!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Which needs you to complete (Quest)"}),t.jsx("dd",{children:e.map_required_item.required_quest.name}),t.jsx("dt",{children:"By Speaking to"}),t.jsx("dd",{children:e.map_required_item.required_quest.npc.real_name}),t.jsx("dt",{children:"Who is at (X/Y)"}),t.jsxs("dd",{children:[e.map_required_item.required_quest.npc.x_position,"/",e.map_required_item.required_quest.npc.y_position]}),t.jsx("dt",{children:"On plane"}),t.jsx("dd",{children:e.map_required_item.required_quest.npc.game_map.name}),this.renderPlaneAccessRequirements(e.map_required_item.required_quest.npc.game_map)]}):null,e.map_required_item.required_monster!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Which requires you to fight (first)"}),t.jsx("dd",{children:e.map_required_item.required_monster.name}),t.jsx("dt",{children:"Who resides on plane"}),t.jsx("dd",{children:e.map_required_item.required_monster.game_map.name}),this.renderPlaneAccessRequirements(e.map_required_item.required_monster.game_map)]}):null]}):null}renderLocations(e){return e.map(s=>t.jsx(o.Fragment,{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"By Going to"}),t.jsx("dd",{children:s.name}),t.jsx("dt",{children:"Which is at (X/Y)"}),t.jsxs("dd",{children:[s.x,"/",s.y]}),t.jsx("dt",{children:"On Plane"}),t.jsx("dd",{children:s.map.name}),this.renderPlaneAccessRequirements(s.map)]})}))}getMonsterTypeForRenderingItem(e){let s="Regular Monster";return e.is_celestial_entity&&(s="Celestial"),e.is_raid_monster&&(s="Raid Monster"),e.is_raid_boss&&(s="Raid Boss"),s}renderItem(e){return t.jsxs(o.Fragment,{children:[e.drop_location_id!==null?t.jsx("div",{className:"mb-4",children:t.jsxs(Ce,{children:[t.jsx("p",{className:"mb-2",children:"Some items, such as this one, only drop when you are at a special location. These locations increase enemy strength making them more of a challenge."}),t.jsx("p",{className:"mb-2",children:"These items have a small chance to drop while your looting skill is capped at 45% here."}),t.jsx("p",{children:t.jsx("strong",{children:"These items will not drop if you are using Exploration. You must manually farm these quest items."})})]})}):null,e.required_monster!==null&&e.required_monster.is_celestial_entity?t.jsx("div",{className:"mb-4",children:t.jsxs(Ce,{children:[t.jsxs("p",{className:"mb-2",children:["Some quests such as this one may have you fighting a Celestial entity. You can check the"," ",t.jsx("a",{href:"/information/npcs",target:"_blank",children:"help docs (NPC's)"})," ","to find out, based on which plane, which Summoning NPC you ned to speak to inorder to conjure the entity, there is only one per plane."]}),t.jsx("p",{children:"Celestial Entities below Dungeons plane, will not be included in the weekly spawn."})]})}):null,t.jsxs("dl",{children:[e.required_monster!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Obtained by killing"}),t.jsxs("dd",{children:[e.required_monster.name," ","("+this.getMonsterTypeForRenderingItem(e.required_monster)+")"]}),t.jsx("dt",{children:"Resides on plane"}),t.jsx("dd",{children:e.required_monster.game_map.name}),this.renderPlaneAccessRequirements(e.required_monster.game_map)]}):null,e.required_quest!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Obtained by completing"}),t.jsx("dd",{children:e.required_quest.name}),t.jsx("dt",{children:"Which belongs to (NPC)"}),t.jsx("dd",{children:e.required_quest.npc.real_name}),t.jsx("dt",{children:"Who is on the plane of"}),t.jsx("dd",{children:e.required_quest.npc.game_map.name}),t.jsx("dt",{children:"At coordinates (X/Y)"}),t.jsxs("dd",{children:[e.required_quest.npc.x_position," /"," ",e.required_quest.npc.y_position]}),this.renderPlaneAccessRequirements(e.required_quest.npc.game_map)]}):null,e.drop_location_id!==null?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"By Visiting (Fighting monsters for it to drop)"}),t.jsx("dd",{children:e.drop_location.name}),t.jsx("dt",{children:"At coordinates (X/Y)"}),t.jsxs("dd",{children:[e.drop_location.x," / ",e.drop_location.y]}),t.jsx("dt",{children:"Which is on the plane"}),t.jsx("dd",{children:e.drop_location.map.name}),this.renderPlaneAccessRequirements(e.drop_location.map)]}):null]}),e.locations.length>0?t.jsxs(o.Fragment,{children:[t.jsx("hr",{}),t.jsx("h3",{className:"tw-font-light",children:"Locations"}),t.jsx("p",{children:"Locations that will give you the item, just for visiting."}),t.jsx("hr",{}),this.renderLocations(e.locations)]}):null]})}fetchNpcPlaneAccess(){let e=null;return this.state.loading||(e=this.renderPlaneAccessRequirements(this.state.quest_details.npc.game_map)),e}getText(e){return e===null?"":e.replace(/\n/g,"<br/>")}render(){const e=this.fetchNpcPlaneAccess();return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,secondary_actions:{secondary_button_disabled:!this.props.is_parent_complete||this.props.is_quest_complete,secondary_button_label:"Hand in",handle_action:this.handInQuest.bind(this)},title:this.buildTitle(),large_modal:!1,children:this.state.loading?t.jsx("div",{className:"h-24 mt-10 relative",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[t.jsxs(Be,{tabs:this.tabs,full_width:!0,children:[t.jsxs(H,{children:[t.jsxs("div",{className:$({"grid md:grid-cols-2 gap-2":e!==null}),children:[t.jsxs("div",{children:[t.jsx("div",{className:"border-b-2 block border-b-gray-300 dark:border-b-gray-600 my-3 md:hidden"}),t.jsx("strong",{children:"Basic Info"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Name"}),t.jsx("dd",{children:this.state.quest_details.npc.real_name}),t.jsx("dt",{children:"Coordinates (X/Y)"}),t.jsxs("dd",{children:[this.state.quest_details.npc.x_position," ","/"," ",this.state.quest_details.npc.y_position]}),t.jsx("dt",{children:"On Plane"}),t.jsx("dd",{children:t.jsxs("a",{href:"/information/map/"+this.state.quest_details.npc.game_map.id,target:"_blank",children:[this.state.quest_details.npc.game_map.name," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),t.jsx("dt",{children:"Must be at same location?"}),t.jsx("dd",{children:this.state.quest_details.npc.must_be_at_same_location?"Yes":"No"})]})]}),e!==null?t.jsxs("div",{className:$({"md:pl-2":e!==null}),children:[t.jsx("div",{className:"border-b-2 block border-b-gray-300 dark:border-b-gray-600 my-3 md:hidden"}),t.jsx("strong",{children:"Npc Access Requirements"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("dl",{className:"md:ml-8 max-h-[250px] overflow-y-auto",children:e})]}):null]}),t.jsx("div",{className:"my-4 max-h-[160px] overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-md bg-slate-200 dark:bg-slate-700 p-4 "+(this.props.is_parent_complete?"":" blur-sm"),children:this.props.is_quest_complete?t.jsx("div",{dangerouslySetInnerHTML:{__html:this.getText(this.state.quest_details.after_completion_description)}}):t.jsx("div",{dangerouslySetInnerHTML:{__html:this.getText(this.state.quest_details.before_completion_description)}})})]},"npc-details"),t.jsx(H,{children:t.jsx(Ql,{quest:this.state.quest_details,item_requirements:this.renderItem.bind(this)})},"required-to-complete"),t.jsx(H,{children:t.jsx(Vl,{quest:this.state.quest_details})},"quest-reward")]}),this.state.success_message!==null?t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(je,{children:this.state.success_message})}):null,this.state.error_message!==null?t.jsx("div",{className:"mb-4 mt-4",children:t.jsx(z,{children:this.state.error_message})}):null,this.state.handing_in?t.jsx(D,{}):null]})})}}class Es extends c.Component{constructor(e){super(e),this.state={open_quest_modal:!1}}showQuestDetails(){this.setState({open_quest_modal:!this.state.open_quest_modal})}isQuestCompleted(){return this.props.quest!==null?this.props.completed_quests.includes(this.props.quest.id):!1}isParentQuestComplete(){return this.props.quest!==null?this.props.quest.is_parent?!0:this.props.completed_quests.includes(this.props.quest.parent_quest_id):!1}render(){var e,s;return t.jsxs("div",{children:[t.jsx("button",{type:"button",role:"button",className:$({"text-blue-500 dark:text-blue-400":!this.isQuestCompleted()&&this.isParentQuestComplete()},{"text-green-700 dark:text-green-600":this.isQuestCompleted()},{"text-red-500 dark:text-red-400":!this.isParentQuestComplete()}),onClick:this.showQuestDetails.bind(this),children:(e=this.props.quest)==null?void 0:e.name}),this.state.open_quest_modal?t.jsx(Xl,{is_open:this.state.open_quest_modal,handle_close:this.showQuestDetails.bind(this),quest_id:(s=this.props.quest)==null?void 0:s.id,character_id:this.props.character_id,is_parent_complete:this.isParentQuestComplete(),is_quest_complete:this.isQuestCompleted(),update_quests:this.props.update_quests}):null]})}}class Jl extends c.Component{constructor(e){super(e),this.state={tabs:[{key:"quest-chain",name:"Quest Chain"},{key:"one-off-quests",name:"One Off Quests"}]},this.invalid_planes=["Purgatory"]}componentDidMount(){const e=this.fetchParentRaidQuestChain();if(this.props.raid_quests.length>0&&e!==null){const s=JSON.parse(JSON.stringify(this.state.tabs));s.push({key:"raid-quests",name:"Raid Quests"}),this.setState({tabs:s})}}componentDidUpdate(){const e=this.state.tabs.findIndex(s=>s.key==="raid-quests");if(this.fetchParentRaidQuestChain()===null&&e!==-1){const s=JSON.parse(JSON.stringify(this.state.tabs));s.splice(e,1),this.setState({tabs:s})}else if(this.fetchParentRaidQuestChain()!==null&&e===-1){const s=JSON.parse(JSON.stringify(this.state.tabs));s.push({key:"raid-quests",name:"Raid Quests"}),this.setState({tabs:s})}}renderQuestTree(e){return e==null?null:e.child_quests.map(s=>t.jsx(pa,{label:t.jsx(Es,{quest:s,character_id:this.props.character_id,completed_quests:this.props.completed_quests,update_quests:this.props.update_quests}),children:this.renderQuestTree(s)}))}fetchParentQuestChain(){const e=this.fetchPlane(),s=this.props.quests.filter(i=>i.child_quests.length>0&&i.belongs_to_map_name===e);return s.length>0?s[0]:null}fetchParentRaidQuestChain(){const e=this.fetchPlane(),s=this.props.raid_quests.filter(i=>i.child_quests.length>0&&i.belongs_to_map_name===e);return s.length>0?s[0]:null}fetchSingleQuests(){const e=this.fetchPlane(),s=this.props.quests.filter(i=>i.child_quests.length===0&&i.belongs_to_map_name===e);return s.length>0?s:[]}fetchPlane(){let e=this.props.plane;return this.invalid_planes.indexOf(e)!==-1&&(e="Surface"),e}renderSingleQuests(){return this.fetchSingleQuests().map(e=>t.jsx(gs,{lineWidth:"2px",lineColor:"#0ea5e9",lineBorderRadius:"10px",label:t.jsx(Es,{quest:e,character_id:this.props.character_id,completed_quests:this.props.completed_quests,update_quests:this.props.update_quests}),children:this.renderQuestTree(e)}))}render(){return t.jsxs(Be,{tabs:this.state.tabs,children:[t.jsx(H,{children:t.jsx(gs,{lineWidth:"2px",lineColor:"#0ea5e9",lineBorderRadius:"10px",label:t.jsx(Es,{quest:this.fetchParentQuestChain(),character_id:this.props.character_id,completed_quests:this.props.completed_quests,update_quests:this.props.update_quests}),children:this.renderQuestTree(this.fetchParentQuestChain())})},"quest-chain"),t.jsx(H,{children:this.renderSingleQuests()},"one-off-quests"),this.props.raid_quests.length>0&&this.fetchParentRaidQuestChain()!==null?t.jsx(H,{children:t.jsx(gs,{lineWidth:"2px",lineColor:"#0ea5e9",lineBorderRadius:"10px",label:t.jsx(Es,{quest:this.fetchParentRaidQuestChain(),character_id:this.props.character_id,completed_quests:this.props.completed_quests,update_quests:this.props.update_quests}),children:this.renderQuestTree(this.fetchParentRaidQuestChain())})},"one-off-quests"):null]})}}class Zl extends c.Component{constructor(e){super(e),this.state={quests:[],raid_quests:[],completed_quests:this.props.quest_details.completed_quests,current_plane:this.props.quest_details.player_plane,is_winter_event:this.props.quest_details.is_winter_event,loading:!1}}componentDidMount(){this.setState({quests:this.props.quest_details.quests,raid_quests:this.props.quest_details.raid_quests})}componentDidUpdate(){de.isEqual(this.props.quest_details.completed_quests,this.state.completed_quests)||this.setState({completed_quests:this.props.quest_details.completed_quests})}setPlaneForQuests(e){this.setState({current_plane:e})}buildPlaneSelection(){const e=[{name:"Surface",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"},{name:"Labyrinth",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"},{name:"Dungeons",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"},{name:"Shadow Plane",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"},{name:"Hell",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"}];return this.props.quest_details.is_winter_event&&e.push({name:"The Ice Plane",on_click:this.setPlaneForQuests.bind(this),icon_class:"ra ra-footprint"}),e}render(){return this.state.quests.length===0?t.jsx(Fe,{}):t.jsx(o.Fragment,{children:this.state.loading?t.jsx("div",{className:"h-24 mt-10 relative",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{children:t.jsx(kt,{menu_items:this.buildPlaneSelection(),button_title:"Planes"})}),t.jsx("div",{children:t.jsxs("a",{href:"/information/quests",target:"_blank",className:"ml-2",children:["Quests help"," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{className:"overflow-x-auto overflow-y-hidden max-w-[300px] sm:max-w-[600px] md:max-w-[100%]",children:t.jsx(Jl,{quests:this.state.quests,raid_quests:this.state.raid_quests,completed_quests:this.state.completed_quests,character_id:this.props.character_id,plane:this.state.current_plane,update_quests:this.props.update_quests})})]})})}}class ec{constructor(e){this.component=e,this.characterSheet=null,this.urls=[]}setUrls(e){return this.urls=e,this}async doAjaxCalls(){if(typeof this.urls>"u")return;const e=async s=>{if(s.length===0)return;const i=s[0],n=await this.makeAjaxCall(i.url);switch(i.name){case"character-sheet":this.setCharacterSheet(n);break;case"actions":this.setActionData(n);break;case"game-map":this.setMapData(n);break;case"quests":this.setQuestData(n);break;case"kingdoms":this.setKingdomsData(n);break}await e(s.slice(1))};await e(this.urls)}async makeAjaxCall(e){return new Promise((s,i)=>{new g().setRoute(e).doAjaxCall("get",n=>{s(n)},n=>{i(n)})})}setCharacterSheet(e){this.characterSheet=e.data.sheet,this.component.setState({character:e.data.sheet,percentage_loaded:.2,secondary_loading_title:"Fetching Quest Data ...",character_currencies:{gold:e.data.sheet.gold,gold_dust:e.data.sheet.gold_dust,shards:e.data.sheet.shards,copper_coins:e.data.sheet.copper_coins},character_status:{can_attack:e.data.sheet.can_attack,can_attack_again_at:e.data.sheet.can_attack_again_at,can_craft:e.data.sheet.can_craft,can_craft_again_at:e.data.sheet.can_craft_again_at,is_dead:e.data.sheetis_dead,automation_locked:e.data.sheet.automation_locked,is_silenced:e.data.sheet.is_silenced,killed_in_pvp:e.data.sheet.kill_in_pvp},fame_action_tasks:e.data.sheet.current_fame_tasks},()=>{this.component.setCharacterPosition(e.data.sheet.base_position),e.data.sheet.is_in_timeout&&new g().initiateGlobalTimeOut()})}setQuestData(e){this.component.setState({quests:e.data,percentage_loaded:this.component.state.percentage_loaded+.2,secondary_loading_title:"Fetching Kingdom Data ..."})}setKingdomsData(e){this.component.setState({kingdoms:e.data.kingdoms,kingdom_logs:e.data.logs,loading:!1,percentage_loaded:this.component.state.percentage_loaded+.2,secondary_loading_title:"Fetching Action Data ..."})}setActionData(e){this.characterSheet!==null&&this.component.setState({percentage_loaded:this.component.state.percentage_loaded+.2,secondary_loading_title:"Fetching Map Data ...",action_data:{raid_monsters:[],monsters:e.data.monsters}})}setMapData(e){this.component.setState({map_data:Va.buildCoreState(e.data,this.component)})}}class tc extends c.Component{constructor(e){super(e)}render(){return this.props.character===null?null:t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Name:"}),t.jsx("dd",{children:this.props.character.name}),t.jsx("dt",{children:"Race:"}),t.jsx("dd",{children:this.props.character.race}),t.jsx("dt",{children:"Class:"}),t.jsx("dd",{children:this.props.character.class}),t.jsx("dt",{children:"Level:"}),t.jsxs("dd",{children:[this.props.character.level,"/",this.props.character.max_level]})]})}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Max Health:"}),t.jsx("dd",{children:u(this.props.character.health)}),t.jsx("dt",{children:"Total Attack:"}),t.jsx("dd",{children:u(this.props.character.attack)}),t.jsx("dt",{children:"Heal For:"}),t.jsx("dd",{children:u(this.props.character.heal_for)}),t.jsx("dt",{children:"AC:"}),t.jsx("dd",{children:u(this.props.character.ac)})]})})]}),t.jsx("div",{className:"border-b-2 block border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{className:"flex flex-wrap justify-center gap-2 lg:flex-nowrap text-center",children:t.jsx("div",{className:"mt-4 w-full lg:w-auto",children:t.jsx(Ur,{button_label:"Show additional details",on_click:this.props.manage_addition_data})})}),t.jsxs("div",{className:"relative top-[24px]",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"font-medium text-orange-700 dark:text-white text-xs",children:"XP"}),t.jsxs("span",{className:"text-xs font-medium text-orange-700 dark:text-white",children:[u(this.props.character.xp),"/",u(this.props.character.xp_next)]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700",children:t.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full",style:{width:this.props.character.xp/this.props.character.xp_next*100+"%"}})})]})]})}}function sc(a){function e(O,F,L,Q,x){for(var oe=0,M=0,ye=0,le=0,te,W,Pe=0,Ee=0,se,Te=se=te=0,ie=0,ae=0,ot=0,Ae=0,Re=L.length,ht=Re-1,ze,G="",ue="",st="",ut="",Oe;ie<Re;){if(W=L.charCodeAt(ie),ie===ht&&M+le+ye+oe!==0&&(M!==0&&(W=M===47?10:47),le=ye=oe=0,Re++,ht++),M+le+ye+oe===0){if(ie===ht&&(0<ae&&(G=G.replace(T,"")),0<G.trim().length)){switch(W){case 32:case 9:case 59:case 13:case 10:break;default:G+=L.charAt(ie)}W=59}switch(W){case 123:for(G=G.trim(),te=G.charCodeAt(0),se=1,Ae=++ie;ie<Re;){switch(W=L.charCodeAt(ie)){case 123:se++;break;case 125:se--;break;case 47:switch(W=L.charCodeAt(ie+1)){case 42:case 47:e:{for(Te=ie+1;Te<ht;++Te)switch(L.charCodeAt(Te)){case 47:if(W===42&&L.charCodeAt(Te-1)===42&&ie+2!==Te){ie=Te+1;break e}break;case 10:if(W===47){ie=Te+1;break e}}ie=Te}}break;case 91:W++;case 40:W++;case 34:case 39:for(;ie++<ht&&L.charCodeAt(ie)!==W;);}if(se===0)break;ie++}switch(se=L.substring(Ae,ie),te===0&&(te=(G=G.replace(b,"").trim()).charCodeAt(0)),te){case 64:switch(0<ae&&(G=G.replace(T,"")),W=G.charCodeAt(1),W){case 100:case 109:case 115:case 45:ae=F;break;default:ae=Se}if(se=e(F,ae,se,W,x+1),Ae=se.length,0<qe&&(ae=s(Se,G,ot),Oe=p(3,se,ae,F,J,me,Ae,W,x,Q),G=ae.join(""),Oe!==void 0&&(Ae=(se=Oe.trim()).length)===0&&(W=0,se="")),0<Ae)switch(W){case 115:G=G.replace(P,l);case 100:case 109:case 45:se=G+"{"+se+"}";break;case 107:G=G.replace(q,"$1 $2"),se=G+"{"+se+"}",se=xe===1||xe===2&&r("@"+se,3)?"@-webkit-"+se+"@"+se:"@"+se;break;default:se=G+se,Q===112&&(se=(ue+=se,""))}else se="";break;default:se=e(F,s(F,G,ot),se,Q,x+1)}st+=se,se=ot=ae=Te=te=0,G="",W=L.charCodeAt(++ie);break;case 125:case 59:if(G=(0<ae?G.replace(T,""):G).trim(),1<(Ae=G.length))switch(Te===0&&(te=G.charCodeAt(0),te===45||96<te&&123>te)&&(Ae=(G=G.replace(" ",":")).length),0<qe&&(Oe=p(1,G,F,O,J,me,ue.length,Q,x,Q))!==void 0&&(Ae=(G=Oe.trim()).length)===0&&(G="\0\0"),te=G.charCodeAt(0),W=G.charCodeAt(1),te){case 0:break;case 64:if(W===105||W===99){ut+=G+L.charAt(ie);break}default:G.charCodeAt(Ae-1)!==58&&(ue+=n(G,te,W,G.charCodeAt(2)))}ot=ae=Te=te=0,G="",W=L.charCodeAt(++ie)}}switch(W){case 13:case 10:M===47?M=0:1+te===0&&Q!==107&&0<G.length&&(ae=1,G+="\0"),0<qe*Ke&&p(0,G,F,O,J,me,ue.length,Q,x,Q),me=1,J++;break;case 59:case 125:if(M+le+ye+oe===0){me++;break}default:switch(me++,ze=L.charAt(ie),W){case 9:case 32:if(le+oe+M===0)switch(Pe){case 44:case 58:case 9:case 32:ze="";break;default:W!==32&&(ze=" ")}break;case 0:ze="\\0";break;case 12:ze="\\f";break;case 11:ze="\\v";break;case 38:le+M+oe===0&&(ae=ot=1,ze="\f"+ze);break;case 108:if(le+M+oe+ve===0&&0<Te)switch(ie-Te){case 2:Pe===112&&L.charCodeAt(ie-3)===58&&(ve=Pe);case 8:Ee===111&&(ve=Ee)}break;case 58:le+M+oe===0&&(Te=ie);break;case 44:M+ye+le+oe===0&&(ae=1,ze+="\r");break;case 34:case 39:M===0&&(le=le===W?0:le===0?W:le);break;case 91:le+M+ye===0&&oe++;break;case 93:le+M+ye===0&&oe--;break;case 41:le+M+oe===0&&ye--;break;case 40:if(le+M+oe===0){if(te===0)switch(2*Pe+3*Ee){case 533:break;default:te=1}ye++}break;case 64:M+ye+le+oe+Te+se===0&&(se=1);break;case 42:case 47:if(!(0<le+oe+ye))switch(M){case 0:switch(2*W+3*L.charCodeAt(ie+1)){case 235:M=47;break;case 220:Ae=ie,M=42}break;case 42:W===47&&Pe===42&&Ae+2!==ie&&(L.charCodeAt(Ae+2)===33&&(ue+=L.substring(Ae,ie+1)),ze="",M=0)}}M===0&&(G+=ze)}Ee=Pe,Pe=W,ie++}if(Ae=ue.length,0<Ae){if(ae=F,0<qe&&(Oe=p(2,ue,ae,O,J,me,Ae,Q,x,Q),Oe!==void 0&&(ue=Oe).length===0))return ut+ue+st;if(ue=ae.join(",")+"{"+ue+"}",xe*ve!==0){switch(xe!==2||r(ue,2)||(ve=0),ve){case 111:ue=ue.replace(C,":-moz-$1")+ue;break;case 112:ue=ue.replace(k,"::-webkit-input-$1")+ue.replace(k,"::-moz-$1")+ue.replace(k,":-ms-input-$1")+ue}ve=0}}return ut+ue+st}function s(O,F,L){var Q=F.trim().split(A);F=Q;var x=Q.length,oe=O.length;switch(oe){case 0:case 1:var M=0;for(O=oe===0?"":O[0]+" ";M<x;++M)F[M]=i(O,F[M],L).trim();break;default:var ye=M=0;for(F=[];M<x;++M)for(var le=0;le<oe;++le)F[ye++]=i(O[le]+" ",Q[M],L).trim()}return F}function i(O,F,L){var Q=F.charCodeAt(0);switch(33>Q&&(Q=(F=F.trim()).charCodeAt(0)),Q){case 38:return F.replace(E,"$1"+O.trim());case 58:return O.trim()+F.replace(E,"$1"+O.trim());default:if(0<1*L&&0<F.indexOf("\f"))return F.replace(E,(O.charCodeAt(0)===58?"":"$1")+O.trim())}return O+F}function n(O,F,L,Q){var x=O+";",oe=2*F+3*L+4*Q;if(oe===944){O=x.indexOf(":",9)+1;var M=x.substring(O,x.length-1).trim();return M=x.substring(0,O).trim()+M+";",xe===1||xe===2&&r(M,1)?"-webkit-"+M+M:M}if(xe===0||xe===2&&!r(x,1))return x;switch(oe){case 1015:return x.charCodeAt(10)===97?"-webkit-"+x+x:x;case 951:return x.charCodeAt(3)===116?"-webkit-"+x+x:x;case 963:return x.charCodeAt(5)===110?"-webkit-"+x+x:x;case 1009:if(x.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+x+x;case 978:return"-webkit-"+x+"-moz-"+x+x;case 1019:case 983:return"-webkit-"+x+"-moz-"+x+"-ms-"+x+x;case 883:if(x.charCodeAt(8)===45)return"-webkit-"+x+x;if(0<x.indexOf("image-set(",11))return x.replace(Ne,"$1-webkit-$2")+x;break;case 932:if(x.charCodeAt(4)===45)switch(x.charCodeAt(5)){case 103:return"-webkit-box-"+x.replace("-grow","")+"-webkit-"+x+"-ms-"+x.replace("grow","positive")+x;case 115:return"-webkit-"+x+"-ms-"+x.replace("shrink","negative")+x;case 98:return"-webkit-"+x+"-ms-"+x.replace("basis","preferred-size")+x}return"-webkit-"+x+"-ms-"+x+x;case 964:return"-webkit-"+x+"-ms-flex-"+x+x;case 1023:if(x.charCodeAt(8)!==99)break;return M=x.substring(x.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+M+"-webkit-"+x+"-ms-flex-pack"+M+x;case 1005:return w.test(x)?x.replace(j,":-webkit-")+x.replace(j,":-moz-")+x:x;case 1e3:switch(M=x.substring(13).trim(),F=M.indexOf("-")+1,M.charCodeAt(0)+M.charCodeAt(F)){case 226:M=x.replace(v,"tb");break;case 232:M=x.replace(v,"tb-rl");break;case 220:M=x.replace(v,"lr");break;default:return x}return"-webkit-"+x+"-ms-"+M+x;case 1017:if(x.indexOf("sticky",9)===-1)break;case 975:switch(F=(x=O).length-10,M=(x.charCodeAt(F)===33?x.substring(0,F):x).substring(O.indexOf(":",7)+1).trim(),oe=M.charCodeAt(0)+(M.charCodeAt(7)|0)){case 203:if(111>M.charCodeAt(8))break;case 115:x=x.replace(M,"-webkit-"+M)+";"+x;break;case 207:case 102:x=x.replace(M,"-webkit-"+(102<oe?"inline-":"")+"box")+";"+x.replace(M,"-webkit-"+M)+";"+x.replace(M,"-ms-"+M+"box")+";"+x}return x+";";case 938:if(x.charCodeAt(5)===45)switch(x.charCodeAt(6)){case 105:return M=x.replace("-items",""),"-webkit-"+x+"-webkit-box-"+M+"-ms-flex-"+M+x;case 115:return"-webkit-"+x+"-ms-flex-item-"+x.replace(U,"")+x;default:return"-webkit-"+x+"-ms-flex-line-pack"+x.replace("align-content","").replace(U,"")+x}break;case 973:case 989:if(x.charCodeAt(3)!==45||x.charCodeAt(4)===122)break;case 931:case 953:if(re.test(O)===!0)return(M=O.substring(O.indexOf(":")+1)).charCodeAt(0)===115?n(O.replace("stretch","fill-available"),F,L,Q).replace(":fill-available",":stretch"):x.replace(M,"-webkit-"+M)+x.replace(M,"-moz-"+M.replace("fill-",""))+x;break;case 962:if(x="-webkit-"+x+(x.charCodeAt(5)===102?"-ms-"+x:"")+x,L+Q===211&&x.charCodeAt(13)===105&&0<x.indexOf("transform",10))return x.substring(0,x.indexOf(";",27)+1).replace(N,"$1-webkit-$2")+x}return x}function r(O,F){var L=O.indexOf(F===1?":":"{"),Q=O.substring(0,F!==3?L:10);return L=O.substring(L+1,O.length-1),Je(F!==2?Q:Q.replace(he,"$1"),L,F)}function l(O,F){var L=n(F,F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2));return L!==F+";"?L.replace(I," or ($1)").substring(4):"("+F+")"}function p(O,F,L,Q,x,oe,M,ye,le,te){for(var W=0,Pe=F,Ee;W<qe;++W)switch(Ee=be[W].call(_,O,Pe,L,Q,x,oe,M,ye,le,te)){case void 0:case!1:case!0:case null:break;default:Pe=Ee}if(Pe!==F)return Pe}function m(O){switch(O){case void 0:case null:qe=be.length=0;break;default:if(typeof O=="function")be[qe++]=O;else if(typeof O=="object")for(var F=0,L=O.length;F<L;++F)m(O[F]);else Ke=!!O|0}return m}function y(O){return O=O.prefix,O!==void 0&&(Je=null,O?typeof O!="function"?xe=1:(xe=2,Je=O):xe=0),y}function _(O,F){var L=O;if(33>L.charCodeAt(0)&&(L=L.trim()),Qe=L,L=[Qe],0<qe){var Q=p(-1,F,L,L,J,me,0,0,0,0);Q!==void 0&&typeof Q=="string"&&(F=Q)}var x=e(Se,L,F,0,0);return 0<qe&&(Q=p(-2,x,L,L,J,me,x.length,0,0,0),Q!==void 0&&(x=Q)),Qe="",ve=0,me=J=1,x}var b=/^\0+/g,T=/[\0\r\f]/g,j=/: */g,w=/zoo|gra/,N=/([,: ])(transform)/g,A=/,\r+?/g,E=/([\t\r\n ])*\f?&/g,q=/@(k\w+)\s*(\S*)\s*/,k=/::(place)/g,C=/:(read-only)/g,v=/[svh]\w+-[tblr]{2}/,P=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,U=/-self|flex-/g,he=/[^]*?(:[rp][el]a[\w-]+)[^]*/,re=/stretch|:\s*\w+\-(?:conte|avail)/,Ne=/([^-])(image-set\()/,me=1,J=1,ve=0,xe=1,Se=[],be=[],qe=0,Je=null,Ke=0,Qe="";return _.use=m,_.set=y,a!==void 0&&y(a),_}var ac={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},it={};function xt(){return(xt=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])}return a}).apply(this,arguments)}var Ei=function(a,e){for(var s=[a[0]],i=0,n=e.length;i<n;i+=1)s.push(e[i],a[i+1]);return s},Ia=function(a){return a!==null&&typeof a=="object"&&(a.toString?a.toString():Object.prototype.toString.call(a))==="[object Object]"&&!pn.typeOf(a)},Qs=Object.freeze([]),Tt=Object.freeze({});function Zt(a){return typeof a=="function"}function Ii(a){return a.displayName||a.name||"Component"}function Ja(a){return a&&typeof a.styledComponentId=="string"}var es=typeof process<"u"&&it!==void 0&&(it.REACT_APP_SC_ATTR||it.SC_ATTR)||"data-styled",Za=typeof window<"u"&&"HTMLElement"in window,ic=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&it!==void 0&&(it.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&it.REACT_APP_SC_DISABLE_SPEEDY!==""?it.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&it.REACT_APP_SC_DISABLE_SPEEDY:it.SC_DISABLE_SPEEDY!==void 0&&it.SC_DISABLE_SPEEDY!==""&&it.SC_DISABLE_SPEEDY!=="false"&&it.SC_DISABLE_SPEEDY));function Ot(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+a+" for more information."+(s.length>0?" Args: "+s.join(", "):""))}var nc=function(){function a(s){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=s}var e=a.prototype;return e.indexOfGroup=function(s){for(var i=0,n=0;n<s;n++)i+=this.groupSizes[n];return i},e.insertRules=function(s,i){if(s>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,l=r;s>=l;)(l<<=1)<0&&Ot(16,""+s);this.groupSizes=new Uint32Array(l),this.groupSizes.set(n),this.length=l;for(var p=r;p<l;p++)this.groupSizes[p]=0}for(var m=this.indexOfGroup(s+1),y=0,_=i.length;y<_;y++)this.tag.insertRule(m,i[y])&&(this.groupSizes[s]++,m++)},e.clearGroup=function(s){if(s<this.length){var i=this.groupSizes[s],n=this.indexOfGroup(s),r=n+i;this.groupSizes[s]=0;for(var l=n;l<r;l++)this.tag.deleteRule(n)}},e.getGroup=function(s){var i="";if(s>=this.length||this.groupSizes[s]===0)return i;for(var n=this.groupSizes[s],r=this.indexOfGroup(s),l=r+n,p=r;p<l;p++)i+=this.tag.getRule(p)+`/*!sc*/
`;return i},a}(),Hs=new Map,Vs=new Map,fs=1,Is=function(a){if(Hs.has(a))return Hs.get(a);for(;Vs.has(fs);)fs++;var e=fs++;return Hs.set(a,e),Vs.set(e,a),e},rc=function(a){return Vs.get(a)},oc=function(a,e){e>=fs&&(fs=e+1),Hs.set(a,e),Vs.set(e,a)},lc="style["+es+'][data-styled-version="5.3.11"]',cc=new RegExp("^"+es+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),dc=function(a,e,s){for(var i,n=s.split(","),r=0,l=n.length;r<l;r++)(i=n[r])&&a.registerName(e,i)},hc=function(a,e){for(var s=(e.textContent||"").split(`/*!sc*/
`),i=[],n=0,r=s.length;n<r;n++){var l=s[n].trim();if(l){var p=l.match(cc);if(p){var m=0|parseInt(p[1],10),y=p[2];m!==0&&(oc(y,m),dc(a,y,p[3]),a.getTag().insertRules(m,i)),i.length=0}else i.push(l)}}},uc=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},Ln=function(a){var e=document.head,s=a||e,i=document.createElement("style"),n=function(p){for(var m=p.childNodes,y=m.length;y>=0;y--){var _=m[y];if(_&&_.nodeType===1&&_.hasAttribute(es))return _}}(s),r=n!==void 0?n.nextSibling:null;i.setAttribute(es,"active"),i.setAttribute("data-styled-version","5.3.11");var l=uc();return l&&i.setAttribute("nonce",l),s.insertBefore(i,r),i},mc=function(){function a(s){var i=this.element=Ln(s);i.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,l=0,p=r.length;l<p;l++){var m=r[l];if(m.ownerNode===n)return m}Ot(17)}(i),this.length=0}var e=a.prototype;return e.insertRule=function(s,i){try{return this.sheet.insertRule(i,s),this.length++,!0}catch{return!1}},e.deleteRule=function(s){this.sheet.deleteRule(s),this.length--},e.getRule=function(s){var i=this.sheet.cssRules[s];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},a}(),pc=function(){function a(s){var i=this.element=Ln(s);this.nodes=i.childNodes,this.length=0}var e=a.prototype;return e.insertRule=function(s,i){if(s<=this.length&&s>=0){var n=document.createTextNode(i),r=this.nodes[s];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},e.deleteRule=function(s){this.element.removeChild(this.nodes[s]),this.length--},e.getRule=function(s){return s<this.length?this.nodes[s].textContent:""},a}(),_c=function(){function a(s){this.rules=[],this.length=0}var e=a.prototype;return e.insertRule=function(s,i){return s<=this.length&&(this.rules.splice(s,0,i),this.length++,!0)},e.deleteRule=function(s){this.rules.splice(s,1),this.length--},e.getRule=function(s){return s<this.length?this.rules[s]:""},a}(),Mi=Za,gc={isServer:!Za,useCSSOMInjection:!ic},$n=function(){function a(s,i,n){s===void 0&&(s=Tt),i===void 0&&(i={}),this.options=xt({},gc,{},s),this.gs=i,this.names=new Map(n),this.server=!!s.isServer,!this.server&&Za&&Mi&&(Mi=!1,function(r){for(var l=document.querySelectorAll(lc),p=0,m=l.length;p<m;p++){var y=l[p];y&&y.getAttribute(es)!=="active"&&(hc(r,y),y.parentNode&&y.parentNode.removeChild(y))}}(this))}a.registerId=function(s){return Is(s)};var e=a.prototype;return e.reconstructWithOptions=function(s,i){return i===void 0&&(i=!0),new a(xt({},this.options,{},s),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(s){return this.gs[s]=(this.gs[s]||0)+1},e.getTag=function(){return this.tag||(this.tag=(n=(i=this.options).isServer,r=i.useCSSOMInjection,l=i.target,s=n?new _c(l):r?new mc(l):new pc(l),new nc(s)));var s,i,n,r,l},e.hasNameForId=function(s,i){return this.names.has(s)&&this.names.get(s).has(i)},e.registerName=function(s,i){if(Is(s),this.names.has(s))this.names.get(s).add(i);else{var n=new Set;n.add(i),this.names.set(s,n)}},e.insertRules=function(s,i,n){this.registerName(s,i),this.getTag().insertRules(Is(s),n)},e.clearNames=function(s){this.names.has(s)&&this.names.get(s).clear()},e.clearRules=function(s){this.getTag().clearGroup(Is(s)),this.clearNames(s)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(s){for(var i=s.getTag(),n=i.length,r="",l=0;l<n;l++){var p=rc(l);if(p!==void 0){var m=s.names.get(p),y=i.getGroup(l);if(m&&y&&m.size){var _=es+".g"+l+'[id="'+p+'"]',b="";m!==void 0&&m.forEach(function(T){T.length>0&&(b+=T+",")}),r+=""+y+_+'{content:"'+b+`"}/*!sc*/
`}}}return r}(this)},a}(),fc=/(a)(d)/gi,Fi=function(a){return String.fromCharCode(a+(a>25?39:97))};function Ma(a){var e,s="";for(e=Math.abs(a);e>52;e=e/52|0)s=Fi(e%52)+s;return(Fi(e%52)+s).replace(fc,"$1-$2")}var Wt=function(a,e){for(var s=e.length;s;)a=33*a^e.charCodeAt(--s);return a},Bn=function(a){return Wt(5381,a)};function xc(a){for(var e=0;e<a.length;e+=1){var s=a[e];if(Zt(s)&&!Ja(s))return!1}return!0}var bc=Bn("5.3.11"),yc=function(){function a(e,s,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&xc(e),this.componentId=s,this.baseHash=Wt(bc,s),this.baseStyle=i,$n.registerId(s)}return a.prototype.generateAndInjectStyles=function(e,s,i){var n=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(e,s,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&s.hasNameForId(n,this.staticRulesId))r.push(this.staticRulesId);else{var l=ts(this.rules,e,s,i).join(""),p=Ma(Wt(this.baseHash,l)>>>0);if(!s.hasNameForId(n,p)){var m=i(l,"."+p,void 0,n);s.insertRules(n,p,m)}r.push(p),this.staticRulesId=p}else{for(var y=this.rules.length,_=Wt(this.baseHash,i.hash),b="",T=0;T<y;T++){var j=this.rules[T];if(typeof j=="string")b+=j;else if(j){var w=ts(j,e,s,i),N=Array.isArray(w)?w.join(""):w;_=Wt(_,N+T),b+=N}}if(b){var A=Ma(_>>>0);if(!s.hasNameForId(n,A)){var E=i(b,"."+A,void 0,n);s.insertRules(n,A,E)}r.push(A)}}return r.join(" ")},a}(),jc=/^\s*\/\/.*$/gm,vc=[":","[",".","#"];function kc(a){var e,s,i,n,r=a===void 0?Tt:a,l=r.options,p=l===void 0?Tt:l,m=r.plugins,y=m===void 0?Qs:m,_=new sc(p),b=[],T=function(N){function A(E){if(E)try{N(E+"}")}catch{}}return function(E,q,k,C,v,P,I,U,he,re){switch(E){case 1:if(he===0&&q.charCodeAt(0)===64)return N(q+";"),"";break;case 2:if(U===0)return q+"/*|*/";break;case 3:switch(U){case 102:case 112:return N(k[0]+q),"";default:return q+(re===0?"/*|*/":"")}case-2:q.split("/*|*/}").forEach(A)}}}(function(N){b.push(N)}),j=function(N,A,E){return A===0&&vc.indexOf(E[s.length])!==-1||E.match(n)?N:"."+e};function w(N,A,E,q){q===void 0&&(q="&");var k=N.replace(jc,""),C=A&&E?E+" "+A+" { "+k+" }":k;return e=q,s=A,i=new RegExp("\\"+s+"\\b","g"),n=new RegExp("(\\"+s+"\\b){2,}"),_(E||!A?"":A,C)}return _.use([].concat(y,[function(N,A,E){N===2&&E.length&&E[0].lastIndexOf(s)>0&&(E[0]=E[0].replace(i,j))},T,function(N){if(N===-2){var A=b;return b=[],A}}])),w.hash=y.length?y.reduce(function(N,A){return A.name||Ot(15),Wt(N,A.name)},5381).toString():"",w}var Gn=c.createContext();Gn.Consumer;var Un=c.createContext(),wc=(Un.Consumer,new $n),Fa=kc();function Sc(){return o.useContext(Gn)||wc}function Cc(){return o.useContext(Un)||Fa}var Nc=function(){function a(e,s){var i=this;this.inject=function(n,r){r===void 0&&(r=Fa);var l=i.name+r.hash;n.hasNameForId(i.id,l)||n.insertRules(i.id,l,r(i.rules,l,"@keyframes"))},this.toString=function(){return Ot(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=s}return a.prototype.getName=function(e){return e===void 0&&(e=Fa),this.name+e.hash},a}(),Pc=/([A-Z])/,Tc=/([A-Z])/g,Ac=/^ms-/,Rc=function(a){return"-"+a.toLowerCase()};function Oi(a){return Pc.test(a)?a.replace(Tc,Rc).replace(Ac,"-ms-"):a}var Li=function(a){return a==null||a===!1||a===""};function ts(a,e,s,i){if(Array.isArray(a)){for(var n,r=[],l=0,p=a.length;l<p;l+=1)(n=ts(a[l],e,s,i))!==""&&(Array.isArray(n)?r.push.apply(r,n):r.push(n));return r}if(Li(a))return"";if(Ja(a))return"."+a.styledComponentId;if(Zt(a)){if(typeof(y=a)!="function"||y.prototype&&y.prototype.isReactComponent||!e)return a;var m=a(e);return ts(m,e,s,i)}var y;return a instanceof Nc?s?(a.inject(s,i),a.getName(i)):a:Ia(a)?function _(b,T){var j,w,N=[];for(var A in b)b.hasOwnProperty(A)&&!Li(b[A])&&(Array.isArray(b[A])&&b[A].isCss||Zt(b[A])?N.push(Oi(A)+":",b[A],";"):Ia(b[A])?N.push.apply(N,_(b[A],A)):N.push(Oi(A)+": "+(j=A,(w=b[A])==null||typeof w=="boolean"||w===""?"":typeof w!="number"||w===0||j in ac||j.startsWith("--")?String(w).trim():w+"px")+";"));return T?[T+" {"].concat(N,["}"]):N}(a):a.toString()}var $i=function(a){return Array.isArray(a)&&(a.isCss=!0),a};function $e(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return Zt(a)||Ia(a)?$i(ts(Ei(Qs,[a].concat(s)))):s.length===0&&a.length===1&&typeof a[0]=="string"?a:$i(ts(Ei(a,s)))}var qc=function(a,e,s){return s===void 0&&(s=Tt),a.theme!==s.theme&&a.theme||e||s.theme},Dc=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ec=/(^-|-$)/g;function Ca(a){return a.replace(Dc,"-").replace(Ec,"")}var Ic=function(a){return Ma(Bn(a)>>>0)};function Ms(a){return typeof a=="string"&&!0}var Oa=function(a){return typeof a=="function"||typeof a=="object"&&a!==null&&!Array.isArray(a)},Mc=function(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"};function Fc(a,e,s){var i=a[s];Oa(e)&&Oa(i)?Hn(i,e):a[s]=e}function Hn(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];for(var n=0,r=s;n<r.length;n++){var l=r[n];if(Oa(l))for(var p in l)Mc(p)&&Fc(a,l[p],p)}return a}var Xs=c.createContext();Xs.Consumer;function Oc(a){var e=o.useContext(Xs),s=o.useMemo(function(){return function(i,n){if(!i)return Ot(14);if(Zt(i)){var r=i(n);return r}return Array.isArray(i)||typeof i!="object"?Ot(8):n?xt({},n,{},i):i}(a.theme,e)},[a.theme,e]);return a.children?c.createElement(Xs.Provider,{value:s},a.children):null}var Na={};function Kn(a,e,s){var i=Ja(a),n=!Ms(a),r=e.attrs,l=r===void 0?Qs:r,p=e.componentId,m=p===void 0?function(q,k){var C=typeof q!="string"?"sc":Ca(q);Na[C]=(Na[C]||0)+1;var v=C+"-"+Ic("5.3.11"+C+Na[C]);return k?k+"-"+v:v}(e.displayName,e.parentComponentId):p,y=e.displayName,_=y===void 0?function(q){return Ms(q)?"styled."+q:"Styled("+Ii(q)+")"}(a):y,b=e.displayName&&e.componentId?Ca(e.displayName)+"-"+e.componentId:e.componentId||m,T=i&&a.attrs?Array.prototype.concat(a.attrs,l).filter(Boolean):l,j=e.shouldForwardProp;i&&a.shouldForwardProp&&(j=e.shouldForwardProp?function(q,k,C){return a.shouldForwardProp(q,k,C)&&e.shouldForwardProp(q,k,C)}:a.shouldForwardProp);var w,N=new yc(s,b,i?a.componentStyle:void 0),A=N.isStatic&&l.length===0,E=function(q,k){return function(C,v,P,I){var U=C.attrs,he=C.componentStyle,re=C.defaultProps,Ne=C.foldedComponentIds,me=C.shouldForwardProp,J=C.styledComponentId,ve=C.target,xe=function(Q,x,oe){Q===void 0&&(Q=Tt);var M=xt({},x,{theme:Q}),ye={};return oe.forEach(function(le){var te,W,Pe,Ee=le;for(te in Zt(Ee)&&(Ee=Ee(M)),Ee)M[te]=ye[te]=te==="className"?(W=ye[te],Pe=Ee[te],W&&Pe?W+" "+Pe:W||Pe):Ee[te]}),[M,ye]}(qc(v,o.useContext(Xs),re)||Tt,v,U),Se=xe[0],be=xe[1],qe=function(Q,x,oe,M){var ye=Sc(),le=Cc(),te=x?Q.generateAndInjectStyles(Tt,ye,le):Q.generateAndInjectStyles(oe,ye,le);return te}(he,I,Se),Je=P,Ke=be.$as||v.$as||be.as||v.as||ve,Qe=Ms(Ke),O=be!==v?xt({},v,{},be):v,F={};for(var L in O)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?F.as=O[L]:(me?me(L,ci,Ke):!Qe||ci(L))&&(F[L]=O[L]));return v.style&&be.style!==v.style&&(F.style=xt({},v.style,{},be.style)),F.className=Array.prototype.concat(Ne,J,qe!==J?qe:null,v.className,be.className).filter(Boolean).join(" "),F.ref=Je,o.createElement(Ke,F)}(w,q,k,A)};return E.displayName=_,(w=c.forwardRef(E)).attrs=T,w.componentStyle=N,w.displayName=_,w.shouldForwardProp=j,w.foldedComponentIds=i?Array.prototype.concat(a.foldedComponentIds,a.styledComponentId):Qs,w.styledComponentId=b,w.target=i?a.target:a,w.withComponent=function(q){var k=e.componentId,C=function(P,I){if(P==null)return{};var U,he,re={},Ne=Object.keys(P);for(he=0;he<Ne.length;he++)U=Ne[he],I.indexOf(U)>=0||(re[U]=P[U]);return re}(e,["componentId"]),v=k&&k+"-"+(Ms(q)?q:Ca(Ii(q)));return Kn(q,xt({},C,{attrs:T,componentId:v}),s)},Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(q){this._foldedDefaultProps=i?Hn({},a.defaultProps,q):q}}),Object.defineProperty(w,"toString",{value:function(){return"."+w.styledComponentId}}),n&&Hr(w,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),w}var La=function(a){return function e(s,i,n){if(n===void 0&&(n=Tt),!pn.isValidElementType(i))return Ot(1,String(i));var r=function(){return s(i,n,$e.apply(void 0,arguments))};return r.withConfig=function(l){return e(s,i,xt({},n,{},l))},r.attrs=function(l){return e(s,i,xt({},n,{attrs:Array.prototype.concat(n.attrs,l).filter(Boolean)}))},r}(Kn,a)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(a){La[a]=La(a)});const ne=La;var At;function ss(a,e){return a[e]}function Lc(a=[],e,s=0){return[...a.slice(0,s),e,...a.slice(s)]}function $c(a=[],e,s="id"){const i=a.slice(),n=ss(e,s);return n?i.splice(i.findIndex(r=>ss(r,s)===n),1):i.splice(i.findIndex(r=>r===e),1),i}function Bi(a){return a.map((e,s)=>{const i=Object.assign(Object.assign({},e),{sortable:e.sortable||!!e.sortFunction||void 0});return e.id||(i.id=s+1),i})}function xs(a,e){return Math.ceil(a/e)}function Pa(a,e){return Math.min(a,e)}(function(a){a.ASC="asc",a.DESC="desc"})(At||(At={}));const Le=()=>null;function zn(a,e=[],s=[]){let i={},n=[...s];return e.length&&e.forEach(r=>{if(!r.when||typeof r.when!="function")throw new Error('"when" must be defined in the conditional style object and must be function');r.when(a)&&(i=r.style||{},r.classNames&&(n=[...n,...r.classNames]),typeof r.style=="function"&&(i=r.style(a)||{}))}),{conditionalStyle:i,classNames:n.join(" ")}}function Ks(a,e=[],s="id"){const i=ss(a,s);return i?e.some(n=>ss(n,s)===i):e.some(n=>n===a)}function Fs(a,e){return e?a.findIndex(s=>bs(s.id,e)):-1}function bs(a,e){return a==e}function Bc(a,e){const s=!a.toggleOnSelectedRowsChange;switch(e.type){case"SELECT_ALL_ROWS":{const{keyField:i,rows:n,rowCount:r,mergeSelections:l}=e,p=!a.allSelected,m=!a.toggleOnSelectedRowsChange;if(l){const y=p?[...a.selectedRows,...n.filter(_=>!Ks(_,a.selectedRows,i))]:a.selectedRows.filter(_=>!Ks(_,n,i));return Object.assign(Object.assign({},a),{allSelected:p,selectedCount:y.length,selectedRows:y,toggleOnSelectedRowsChange:m})}return Object.assign(Object.assign({},a),{allSelected:p,selectedCount:p?r:0,selectedRows:p?n:[],toggleOnSelectedRowsChange:m})}case"SELECT_SINGLE_ROW":{const{keyField:i,row:n,isSelected:r,rowCount:l,singleSelect:p}=e;return p?r?Object.assign(Object.assign({},a),{selectedCount:0,allSelected:!1,selectedRows:[],toggleOnSelectedRowsChange:s}):Object.assign(Object.assign({},a),{selectedCount:1,allSelected:!1,selectedRows:[n],toggleOnSelectedRowsChange:s}):r?Object.assign(Object.assign({},a),{selectedCount:a.selectedRows.length>0?a.selectedRows.length-1:0,allSelected:!1,selectedRows:$c(a.selectedRows,n,i),toggleOnSelectedRowsChange:s}):Object.assign(Object.assign({},a),{selectedCount:a.selectedRows.length+1,allSelected:a.selectedRows.length+1===l,selectedRows:Lc(a.selectedRows,n),toggleOnSelectedRowsChange:s})}case"SELECT_MULTIPLE_ROWS":{const{keyField:i,selectedRows:n,totalRows:r,mergeSelections:l}=e;if(l){const p=[...a.selectedRows,...n.filter(m=>!Ks(m,a.selectedRows,i))];return Object.assign(Object.assign({},a),{selectedCount:p.length,allSelected:!1,selectedRows:p,toggleOnSelectedRowsChange:s})}return Object.assign(Object.assign({},a),{selectedCount:n.length,allSelected:n.length===r,selectedRows:n,toggleOnSelectedRowsChange:s})}case"CLEAR_SELECTED_ROWS":{const{selectedRowsFlag:i}=e;return Object.assign(Object.assign({},a),{allSelected:!1,selectedCount:0,selectedRows:[],selectedRowsFlag:i})}case"SORT_CHANGE":{const{sortDirection:i,selectedColumn:n,clearSelectedOnSort:r}=e;return Object.assign(Object.assign(Object.assign({},a),{selectedColumn:n,sortDirection:i,currentPage:1}),r&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:s})}case"CHANGE_PAGE":{const{page:i,paginationServer:n,visibleOnly:r,persistSelectedOnPageChange:l}=e,p=n&&l,m=n&&!l||r;return Object.assign(Object.assign(Object.assign(Object.assign({},a),{currentPage:i}),p&&{allSelected:!1}),m&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:s})}case"CHANGE_ROWS_PER_PAGE":{const{rowsPerPage:i,page:n}=e;return Object.assign(Object.assign({},a),{currentPage:n,rowsPerPage:i})}}}const Gc=$e`
	pointer-events: none;
	opacity: 0.4;
`,Uc=ne.div`
	position: relative;
	box-sizing: border-box;
	display: flex;
	flex-direction: column;
	width: 100%;
	height: 100%;
	max-width: 100%;
	${({disabled:a})=>a&&Gc};
	${({theme:a})=>a.table.style};
`,Hc=$e`
	position: sticky;
	position: -webkit-sticky; /* Safari */
	top: 0;
	z-index: 1;
`,Kc=ne.div`
	display: flex;
	width: 100%;
	${({$fixedHeader:a})=>a&&Hc};
	${({theme:a})=>a.head.style};
`,zc=ne.div`
	display: flex;
	align-items: stretch;
	width: 100%;
	${({theme:a})=>a.headRow.style};
	${({$dense:a,theme:e})=>a&&e.headRow.denseStyle};
`,Wn=(a,...e)=>$e`
		@media screen and (max-width: ${599}px) {
			${$e(a,...e)}
		}
	`,Wc=(a,...e)=>$e`
		@media screen and (max-width: ${959}px) {
			${$e(a,...e)}
		}
	`,Yc=(a,...e)=>$e`
		@media screen and (max-width: ${1280}px) {
			${$e(a,...e)}
		}
	`,Qc=a=>(e,...s)=>$e`
			@media screen and (max-width: ${a}px) {
				${$e(e,...s)}
			}
		`,ls=ne.div`
	position: relative;
	display: flex;
	align-items: center;
	box-sizing: border-box;
	line-height: normal;
	${({theme:a,$headCell:e})=>a[e?"headCells":"cells"].style};
	${({$noPadding:a})=>a&&"padding: 0"};
`,Yn=ne(ls)`
	flex-grow: ${({button:a,grow:e})=>e===0||a?0:e||1};
	flex-shrink: 0;
	flex-basis: 0;
	max-width: ${({maxWidth:a})=>a||"100%"};
	min-width: ${({minWidth:a})=>a||"100px"};
	${({width:a})=>a&&$e`
			min-width: ${a};
			max-width: ${a};
		`};
	${({right:a})=>a&&"justify-content: flex-end"};
	${({button:a,center:e})=>(e||a)&&"justify-content: center"};
	${({compact:a,button:e})=>(a||e)&&"padding: 0"};

	/* handle hiding cells */
	${({hide:a})=>a&&a==="sm"&&Wn`
    display: none;
  `};
	${({hide:a})=>a&&a==="md"&&Wc`
    display: none;
  `};
	${({hide:a})=>a&&a==="lg"&&Yc`
    display: none;
  `};
	${({hide:a})=>a&&Number.isInteger(a)&&Qc(a)`
    display: none;
  `};
`,Vc=$e`
	div:first-child {
		white-space: ${({$wrapCell:a})=>a?"normal":"nowrap"};
		overflow: ${({$allowOverflow:a})=>a?"visible":"hidden"};
		text-overflow: ellipsis;
	}
`,Xc=ne(Yn).attrs(a=>({style:a.style}))`
	${({$renderAsCell:a})=>!a&&Vc};
	${({theme:a,$isDragging:e})=>e&&a.cells.draggingStyle};
	${({$cellStyle:a})=>a};
`;var Jc=o.memo(function({id:a,column:e,row:s,rowIndex:i,dataTag:n,isDragging:r,onDragStart:l,onDragOver:p,onDragEnd:m,onDragEnter:y,onDragLeave:_}){const{conditionalStyle:b,classNames:T}=zn(s,e.conditionalCellStyles,["rdt_TableCell"]);return o.createElement(Xc,{id:a,"data-column-id":e.id,role:"cell",className:T,"data-tag":n,$cellStyle:e.style,$renderAsCell:!!e.cell,$allowOverflow:e.allowOverflow,button:e.button,center:e.center,compact:e.compact,grow:e.grow,hide:e.hide,maxWidth:e.maxWidth,minWidth:e.minWidth,right:e.right,width:e.width,$wrapCell:e.wrap,style:b,$isDragging:r,onDragStart:l,onDragOver:p,onDragEnd:m,onDragEnter:y,onDragLeave:_},!e.cell&&o.createElement("div",{"data-tag":n},function(j,w,N,A){return w?N&&typeof N=="function"?N(j,A):w(j,A):null}(s,e.selector,e.format,i)),e.cell&&e.cell(s,i,e,a))});const Gi="input";var Qn=o.memo(function({name:a,component:e=Gi,componentOptions:s={style:{}},indeterminate:i=!1,checked:n=!1,disabled:r=!1,onClick:l=Le}){const p=e,m=p!==Gi?s.style:(_=>Object.assign(Object.assign({fontSize:"18px"},!_&&{cursor:"pointer"}),{padding:0,marginTop:"1px",verticalAlign:"middle",position:"relative"}))(r),y=o.useMemo(()=>function(_,...b){let T;return Object.keys(_).map(j=>_[j]).forEach((j,w)=>{typeof j=="function"&&(T=Object.assign(Object.assign({},_),{[Object.keys(_)[w]]:j(...b)}))}),T||_}(s,i),[s,i]);return o.createElement(p,Object.assign({type:"checkbox",ref:_=>{_&&(_.indeterminate=i)},style:m,onClick:r?Le:l,name:a,"aria-label":a,checked:n,disabled:r},y,{onChange:Le}))});const Zc=ne(ls)`
	flex: 0 0 48px;
	min-width: 48px;
	justify-content: center;
	align-items: center;
	user-select: none;
	white-space: nowrap;
`;function ed({name:a,keyField:e,row:s,rowCount:i,selected:n,selectableRowsComponent:r,selectableRowsComponentProps:l,selectableRowsSingle:p,selectableRowDisabled:m,onSelectedRow:y}){const _=!(!m||!m(s));return o.createElement(Zc,{onClick:b=>b.stopPropagation(),className:"rdt_TableCell",$noPadding:!0},o.createElement(Qn,{name:a,component:r,componentOptions:l,checked:n,"aria-checked":n,onClick:()=>{y({type:"SELECT_SINGLE_ROW",row:s,isSelected:n,keyField:e,rowCount:i,singleSelect:p})},disabled:_}))}const td=ne.button`
	display: inline-flex;
	align-items: center;
	user-select: none;
	white-space: nowrap;
	border: none;
	background-color: transparent;
	${({theme:a})=>a.expanderButton.style};
`;function sd({disabled:a=!1,expanded:e=!1,expandableIcon:s,id:i,row:n,onToggled:r}){const l=e?s.expanded:s.collapsed;return o.createElement(td,{"aria-disabled":a,onClick:()=>r&&r(n),"data-testid":`expander-button-${i}`,disabled:a,"aria-label":e?"Collapse Row":"Expand Row",role:"button",type:"button"},l)}const ad=ne(ls)`
	white-space: nowrap;
	font-weight: 400;
	min-width: 48px;
	${({theme:a})=>a.expanderCell.style};
`;function id({row:a,expanded:e=!1,expandableIcon:s,id:i,onToggled:n,disabled:r=!1}){return o.createElement(ad,{onClick:l=>l.stopPropagation(),$noPadding:!0},o.createElement(sd,{id:i,row:a,expanded:e,expandableIcon:s,disabled:r,onToggled:n}))}const nd=ne.div`
	width: 100%;
	box-sizing: border-box;
	${({theme:a})=>a.expanderRow.style};
	${({$extendedRowStyle:a})=>a};
`;var rd=o.memo(function({data:a,ExpanderComponent:e,expanderComponentProps:s,extendedRowStyle:i,extendedClassNames:n}){const r=["rdt_ExpanderRow",...n.split(" ").filter(l=>l!=="rdt_TableRow")].join(" ");return o.createElement(nd,{className:r,$extendedRowStyle:i},o.createElement(e,Object.assign({data:a},s)))});const Ta="allowRowEvents";var Js,$a,Ui;(function(a){a.LTR="ltr",a.RTL="rtl",a.AUTO="auto"})(Js||(Js={})),function(a){a.LEFT="left",a.RIGHT="right",a.CENTER="center"}($a||($a={})),function(a){a.SM="sm",a.MD="md",a.LG="lg"}(Ui||(Ui={}));const od=$e`
	&:hover {
		${({$highlightOnHover:a,theme:e})=>a&&e.rows.highlightOnHoverStyle};
	}
`,ld=$e`
	&:hover {
		cursor: pointer;
	}
`,cd=ne.div.attrs(a=>({style:a.style}))`
	display: flex;
	align-items: stretch;
	align-content: stretch;
	width: 100%;
	box-sizing: border-box;
	${({theme:a})=>a.rows.style};
	${({$dense:a,theme:e})=>a&&e.rows.denseStyle};
	${({$striped:a,theme:e})=>a&&e.rows.stripedStyle};
	${({$highlightOnHover:a})=>a&&od};
	${({$pointerOnHover:a})=>a&&ld};
	${({$selected:a,theme:e})=>a&&e.rows.selectedHighlightStyle};
	${({$conditionalStyle:a})=>a};
`;function dd({columns:a=[],conditionalRowStyles:e=[],defaultExpanded:s=!1,defaultExpanderDisabled:i=!1,dense:n=!1,expandableIcon:r,expandableRows:l=!1,expandableRowsComponent:p,expandableRowsComponentProps:m,expandableRowsHideExpander:y,expandOnRowClicked:_=!1,expandOnRowDoubleClicked:b=!1,highlightOnHover:T=!1,id:j,expandableInheritConditionalStyles:w,keyField:N,onRowClicked:A=Le,onRowDoubleClicked:E=Le,onRowMouseEnter:q=Le,onRowMouseLeave:k=Le,onRowExpandToggled:C=Le,onSelectedRow:v=Le,pointerOnHover:P=!1,row:I,rowCount:U,rowIndex:he,selectableRowDisabled:re=null,selectableRows:Ne=!1,selectableRowsComponent:me,selectableRowsComponentProps:J,selectableRowsHighlight:ve=!1,selectableRowsSingle:xe=!1,selected:Se,striped:be=!1,draggingColumnId:qe,onDragStart:Je,onDragOver:Ke,onDragEnd:Qe,onDragEnter:O,onDragLeave:F}){const[L,Q]=o.useState(s);o.useEffect(()=>{Q(s)},[s]);const x=o.useCallback(()=>{Q(!L),C(!L,I)},[L,C,I]),oe=P||l&&(_||b),M=o.useCallback(ae=>{ae.target.getAttribute("data-tag")===Ta&&(A(I,ae),!i&&l&&_&&x())},[i,_,l,x,A,I]),ye=o.useCallback(ae=>{ae.target.getAttribute("data-tag")===Ta&&(E(I,ae),!i&&l&&b&&x())},[i,b,l,x,E,I]),le=o.useCallback(ae=>{q(I,ae)},[q,I]),te=o.useCallback(ae=>{k(I,ae)},[k,I]),W=ss(I,N),{conditionalStyle:Pe,classNames:Ee}=zn(I,e,["rdt_TableRow"]),se=ve&&Se,Te=w?Pe:{},ie=be&&he%2==0;return o.createElement(o.Fragment,null,o.createElement(cd,{id:`row-${j}`,role:"row",$striped:ie,$highlightOnHover:T,$pointerOnHover:!i&&oe,$dense:n,onClick:M,onDoubleClick:ye,onMouseEnter:le,onMouseLeave:te,className:Ee,$selected:se,$conditionalStyle:Pe},Ne&&o.createElement(ed,{name:`select-row-${W}`,keyField:N,row:I,rowCount:U,selected:Se,selectableRowsComponent:me,selectableRowsComponentProps:J,selectableRowDisabled:re,selectableRowsSingle:xe,onSelectedRow:v}),l&&!y&&o.createElement(id,{id:W,expandableIcon:r,expanded:L,row:I,onToggled:x,disabled:i}),a.map(ae=>ae.omit?null:o.createElement(Jc,{id:`cell-${ae.id}-${W}`,key:`cell-${ae.id}-${W}`,dataTag:ae.ignoreRowClick||ae.button?null:Ta,column:ae,row:I,rowIndex:he,isDragging:bs(qe,ae.id),onDragStart:Je,onDragOver:Ke,onDragEnd:Qe,onDragEnter:O,onDragLeave:F}))),l&&L&&o.createElement(rd,{key:`expander-${W}`,data:I,extendedRowStyle:Te,extendedClassNames:Ee,ExpanderComponent:p,expanderComponentProps:m}))}const hd=ne.span`
	padding: 2px;
	color: inherit;
	flex-grow: 0;
	flex-shrink: 0;
	${({$sortActive:a})=>a?"opacity: 1":"opacity: 0"};
	${({$sortDirection:a})=>a==="desc"&&"transform: rotate(180deg)"};
`,ud=({sortActive:a,sortDirection:e})=>c.createElement(hd,{$sortActive:a,$sortDirection:e},"▲"),md=ne(Yn)`
	${({button:a})=>a&&"text-align: center"};
	${({theme:a,$isDragging:e})=>e&&a.headCells.draggingStyle};
`,pd=$e`
	cursor: pointer;
	span.__rdt_custom_sort_icon__ {
		i,
		svg {
			transform: 'translate3d(0, 0, 0)';
			${({$sortActive:a})=>a?"opacity: 1":"opacity: 0"};
			color: inherit;
			font-size: 18px;
			height: 18px;
			width: 18px;
			backface-visibility: hidden;
			transform-style: preserve-3d;
			transition-duration: 95ms;
			transition-property: transform;
		}

		&.asc i,
		&.asc svg {
			transform: rotate(180deg);
		}
	}

	${({$sortActive:a})=>!a&&$e`
			&:hover,
			&:focus {
				opacity: 0.7;

				span,
				span.__rdt_custom_sort_icon__ * {
					opacity: 0.7;
				}
			}
		`};
`,_d=ne.div`
	display: inline-flex;
	align-items: center;
	justify-content: inherit;
	height: 100%;
	width: 100%;
	outline: none;
	user-select: none;
	overflow: hidden;
	${({disabled:a})=>!a&&pd};
`,gd=ne.div`
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
`;var fd=o.memo(function({column:a,disabled:e,draggingColumnId:s,selectedColumn:i={},sortDirection:n,sortIcon:r,sortServer:l,pagination:p,paginationServer:m,persistSelectedOnSort:y,selectableRowsVisibleOnly:_,onSort:b,onDragStart:T,onDragOver:j,onDragEnd:w,onDragEnter:N,onDragLeave:A}){o.useEffect(()=>{typeof a.selector=="string"&&console.error(`Warning: ${a.selector} is a string based column selector which has been deprecated as of v7 and will be removed in v8. Instead, use a selector function e.g. row => row[field]...`)},[]);const[E,q]=o.useState(!1),k=o.useRef(null);if(o.useEffect(()=>{k.current&&q(k.current.scrollWidth>k.current.clientWidth)},[E]),a.omit)return null;const C=()=>{if(!a.sortable&&!a.selector)return;let J=n;bs(i.id,a.id)&&(J=n===At.ASC?At.DESC:At.ASC),b({type:"SORT_CHANGE",sortDirection:J,selectedColumn:a,clearSelectedOnSort:p&&m&&!y||l||_})},v=J=>o.createElement(ud,{sortActive:J,sortDirection:n}),P=()=>o.createElement("span",{className:[n,"__rdt_custom_sort_icon__"].join(" ")},r),I=!(!a.sortable||!bs(i.id,a.id)),U=!a.sortable||e,he=a.sortable&&!r&&!a.right,re=a.sortable&&!r&&a.right,Ne=a.sortable&&r&&!a.right,me=a.sortable&&r&&a.right;return o.createElement(md,{"data-column-id":a.id,className:"rdt_TableCol",$headCell:!0,allowOverflow:a.allowOverflow,button:a.button,compact:a.compact,grow:a.grow,hide:a.hide,maxWidth:a.maxWidth,minWidth:a.minWidth,right:a.right,center:a.center,width:a.width,draggable:a.reorder,$isDragging:bs(a.id,s),onDragStart:T,onDragOver:j,onDragEnd:w,onDragEnter:N,onDragLeave:A},a.name&&o.createElement(_d,{"data-column-id":a.id,"data-sort-id":a.id,role:"columnheader",tabIndex:0,className:"rdt_TableCol_Sortable",onClick:U?void 0:C,onKeyPress:U?void 0:J=>{J.key==="Enter"&&C()},$sortActive:!U&&I,disabled:U},!U&&me&&P(),!U&&re&&v(I),typeof a.name=="string"?o.createElement(gd,{title:E?a.name:void 0,ref:k,"data-column-id":a.id},a.name):a.name,!U&&Ne&&P(),!U&&he&&v(I)))});const xd=ne(ls)`
	flex: 0 0 48px;
	justify-content: center;
	align-items: center;
	user-select: none;
	white-space: nowrap;
	font-size: unset;
`;function bd({headCell:a=!0,rowData:e,keyField:s,allSelected:i,mergeSelections:n,selectedRows:r,selectableRowsComponent:l,selectableRowsComponentProps:p,selectableRowDisabled:m,onSelectAllRows:y}){const _=r.length>0&&!i,b=m?e.filter(w=>!m(w)):e,T=b.length===0,j=Math.min(e.length,b.length);return o.createElement(xd,{className:"rdt_TableCol",$headCell:a,$noPadding:!0},o.createElement(Qn,{name:"select-all-rows",component:l,componentOptions:p,onClick:()=>{y({type:"SELECT_ALL_ROWS",rows:b,rowCount:j,mergeSelections:n,keyField:s})},checked:i,indeterminate:_,disabled:T}))}function Vn(a=Js.AUTO){const e=typeof window=="object",[s,i]=o.useState(!1);return o.useEffect(()=>{if(e)if(a!=="auto")i(a==="rtl");else{const n=!(!window.document||!window.document.createElement),r=document.getElementsByTagName("BODY")[0],l=document.getElementsByTagName("HTML")[0],p=r.dir==="rtl"||l.dir==="rtl";i(n&&p)}},[a,e]),s}const yd=ne.div`
	display: flex;
	align-items: center;
	flex: 1 0 auto;
	height: 100%;
	color: ${({theme:a})=>a.contextMenu.fontColor};
	font-size: ${({theme:a})=>a.contextMenu.fontSize};
	font-weight: 400;
`,jd=ne.div`
	display: flex;
	align-items: center;
	justify-content: flex-end;
	flex-wrap: wrap;
`,Hi=ne.div`
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	box-sizing: inherit;
	z-index: 1;
	align-items: center;
	justify-content: space-between;
	display: flex;
	${({$rtl:a})=>a&&"direction: rtl"};
	${({theme:a})=>a.contextMenu.style};
	${({theme:a,$visible:e})=>e&&a.contextMenu.activeStyle};
`;function vd({contextMessage:a,contextActions:e,contextComponent:s,selectedCount:i,direction:n}){const r=Vn(n),l=i>0;return s?o.createElement(Hi,{$visible:l},o.cloneElement(s,{selectedCount:i})):o.createElement(Hi,{$visible:l,$rtl:r},o.createElement(yd,null,((p,m,y)=>{if(m===0)return null;const _=m===1?p.singular:p.plural;return y?`${m} ${p.message||""} ${_}`:`${m} ${_} ${p.message||""}`})(a,i,r)),o.createElement(jd,null,e))}const kd=ne.div`
	position: relative;
	box-sizing: border-box;
	overflow: hidden;
	display: flex;
	flex: 1 1 auto;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	flex-wrap: wrap;
	${({theme:a})=>a.header.style}
`,wd=ne.div`
	flex: 1 0 auto;
	color: ${({theme:a})=>a.header.fontColor};
	font-size: ${({theme:a})=>a.header.fontSize};
	font-weight: 400;
`,Sd=ne.div`
	flex: 1 0 auto;
	display: flex;
	align-items: center;
	justify-content: flex-end;

	> * {
		margin-left: 5px;
	}
`,Cd=({title:a,actions:e=null,contextMessage:s,contextActions:i,contextComponent:n,selectedCount:r,direction:l,showMenu:p=!0})=>o.createElement(kd,{className:"rdt_TableHeader",role:"heading","aria-level":1},o.createElement(wd,null,a),e&&o.createElement(Sd,null,e),p&&o.createElement(vd,{contextMessage:s,contextActions:i,contextComponent:n,direction:l,selectedCount:r}));function Xn(a,e){var s={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&e.indexOf(i)<0&&(s[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(i=Object.getOwnPropertySymbols(a);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(a,i[n])&&(s[i[n]]=a[i[n]])}return s}const Nd={left:"flex-start",right:"flex-end",center:"center"},Pd=ne.header`
	position: relative;
	display: flex;
	flex: 1 1 auto;
	box-sizing: border-box;
	align-items: center;
	padding: 4px 16px 4px 24px;
	width: 100%;
	justify-content: ${({align:a})=>Nd[a]};
	flex-wrap: ${({$wrapContent:a})=>a?"wrap":"nowrap"};
	${({theme:a})=>a.subHeader.style}
`,Td=a=>{var{align:e="right",wrapContent:s=!0}=a,i=Xn(a,["align","wrapContent"]);return o.createElement(Pd,Object.assign({align:e,$wrapContent:s},i))},Ad=ne.div`
	display: flex;
	flex-direction: column;
`,Rd=ne.div`
	position: relative;
	width: 100%;
	border-radius: inherit;
	${({$responsive:a,$fixedHeader:e})=>a&&$e`
			overflow-x: auto;

			// hidden prevents vertical scrolling in firefox when fixedHeader is disabled
			overflow-y: ${e?"auto":"hidden"};
			min-height: 0;
		`};

	${({$fixedHeader:a=!1,$fixedHeaderScrollHeight:e="100vh"})=>a&&$e`
			max-height: ${e};
			-webkit-overflow-scrolling: touch;
		`};

	${({theme:a})=>a.responsiveWrapper.style};
`,Ki=ne.div`
	position: relative;
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	${a=>a.theme.progress.style};
`,qd=ne.div`
	position: relative;
	width: 100%;
	${({theme:a})=>a.tableWrapper.style};
`,Dd=ne(ls)`
	white-space: nowrap;
	${({theme:a})=>a.expanderCell.style};
`,Ed=ne.div`
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	${({theme:a})=>a.noData.style};
`,Id=()=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.createElement("path",{d:"M7 10l5 5 5-5z"}),c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Md=ne.select`
	cursor: pointer;
	height: 24px;
	max-width: 100%;
	user-select: none;
	padding-left: 8px;
	padding-right: 24px;
	box-sizing: content-box;
	font-size: inherit;
	color: inherit;
	border: none;
	background-color: transparent;
	appearance: none;
	direction: ltr;
	flex-shrink: 0;

	&::-ms-expand {
		display: none;
	}

	&:disabled::-ms-expand {
		background: #f60;
	}

	option {
		color: initial;
	}
`,Fd=ne.div`
	position: relative;
	flex-shrink: 0;
	font-size: inherit;
	color: inherit;
	margin-top: 1px;

	svg {
		top: 0;
		right: 0;
		color: inherit;
		position: absolute;
		fill: currentColor;
		width: 24px;
		height: 24px;
		display: inline-block;
		user-select: none;
		pointer-events: none;
	}
`,Od=a=>{var{defaultValue:e,onChange:s}=a,i=Xn(a,["defaultValue","onChange"]);return o.createElement(Fd,null,o.createElement(Md,Object.assign({onChange:s,defaultValue:e},i)),o.createElement(Id,null))},R={columns:[],data:[],title:"",keyField:"id",selectableRows:!1,selectableRowsHighlight:!1,selectableRowsNoSelectAll:!1,selectableRowSelected:null,selectableRowDisabled:null,selectableRowsComponent:"input",selectableRowsComponentProps:{},selectableRowsVisibleOnly:!1,selectableRowsSingle:!1,clearSelectedRows:!1,expandableRows:!1,expandableRowDisabled:null,expandableRowExpanded:null,expandOnRowClicked:!1,expandableRowsHideExpander:!1,expandOnRowDoubleClicked:!1,expandableInheritConditionalStyles:!1,expandableRowsComponent:function(){return c.createElement("div",null,"To add an expander pass in a component instance via ",c.createElement("strong",null,"expandableRowsComponent"),". You can then access props.data from this component.")},expandableIcon:{collapsed:c.createElement(()=>c.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),c.createElement("path",{d:"M0-.25h24v24H0z",fill:"none"})),null),expanded:c.createElement(()=>c.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}),c.createElement("path",{d:"M0-.75h24v24H0z",fill:"none"})),null)},expandableRowsComponentProps:{},progressPending:!1,progressComponent:c.createElement("div",{style:{fontSize:"24px",fontWeight:700,padding:"24px"}},"Loading..."),persistTableHead:!1,sortIcon:null,sortFunction:null,sortServer:!1,striped:!1,highlightOnHover:!1,pointerOnHover:!1,noContextMenu:!1,contextMessage:{singular:"item",plural:"items",message:"selected"},actions:null,contextActions:null,contextComponent:null,defaultSortFieldId:null,defaultSortAsc:!0,responsive:!0,noDataComponent:c.createElement("div",{style:{padding:"24px"}},"There are no records to display"),disabled:!1,noTableHead:!1,noHeader:!1,subHeader:!1,subHeaderAlign:$a.RIGHT,subHeaderWrap:!0,subHeaderComponent:null,fixedHeader:!1,fixedHeaderScrollHeight:"100vh",pagination:!1,paginationServer:!1,paginationServerOptions:{persistSelectedOnSort:!1,persistSelectedOnPageChange:!1},paginationDefaultPage:1,paginationResetDefaultPage:!1,paginationTotalRows:0,paginationPerPage:10,paginationRowsPerPageOptions:[10,15,20,25,30],paginationComponent:null,paginationComponentOptions:{},paginationIconFirstPage:c.createElement(()=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},c.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),c.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"})),null),paginationIconLastPage:c.createElement(()=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},c.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),c.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),null),paginationIconNext:c.createElement(()=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},c.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),null),paginationIconPrevious:c.createElement(()=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},c.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),c.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),null),dense:!1,conditionalRowStyles:[],theme:"default",customStyles:{},direction:Js.AUTO,onChangePage:Le,onChangeRowsPerPage:Le,onRowClicked:Le,onRowDoubleClicked:Le,onRowMouseEnter:Le,onRowMouseLeave:Le,onRowExpandToggled:Le,onSelectedRowsChange:Le,onSort:Le,onColumnOrderChange:Le},Ld={rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},$d=ne.nav`
	display: flex;
	flex: 1 1 auto;
	justify-content: flex-end;
	align-items: center;
	box-sizing: border-box;
	padding-right: 8px;
	padding-left: 8px;
	width: 100%;
	${({theme:a})=>a.pagination.style};
`,Os=ne.button`
	position: relative;
	display: block;
	user-select: none;
	border: none;
	${({theme:a})=>a.pagination.pageButtonsStyle};
	${({$isRTL:a})=>a&&"transform: scale(-1, -1)"};
`,Bd=ne.div`
	display: flex;
	align-items: center;
	border-radius: 4px;
	white-space: nowrap;
	${Wn`
    width: 100%;
    justify-content: space-around;
  `};
`,Jn=ne.span`
	flex-shrink: 1;
	user-select: none;
`,Gd=ne(Jn)`
	margin: 0 24px;
`,Ud=ne(Jn)`
	margin: 0 4px;
`;var Hd=o.memo(function({rowsPerPage:a,rowCount:e,currentPage:s,direction:i=R.direction,paginationRowsPerPageOptions:n=R.paginationRowsPerPageOptions,paginationIconLastPage:r=R.paginationIconLastPage,paginationIconFirstPage:l=R.paginationIconFirstPage,paginationIconNext:p=R.paginationIconNext,paginationIconPrevious:m=R.paginationIconPrevious,paginationComponentOptions:y=R.paginationComponentOptions,onChangeRowsPerPage:_=R.onChangeRowsPerPage,onChangePage:b=R.onChangePage}){const T=(()=>{const J=typeof window=="object";function ve(){return{width:J?window.innerWidth:void 0,height:J?window.innerHeight:void 0}}const[xe,Se]=o.useState(ve);return o.useEffect(()=>{if(!J)return()=>null;function be(){Se(ve())}return window.addEventListener("resize",be),()=>window.removeEventListener("resize",be)},[]),xe})(),j=Vn(i),w=T.width&&T.width>599,N=xs(e,a),A=s*a,E=A-a+1,q=s===1,k=s===N,C=Object.assign(Object.assign({},Ld),y),v=s===N?`${E}-${e} ${C.rangeSeparatorText} ${e}`:`${E}-${A} ${C.rangeSeparatorText} ${e}`,P=o.useCallback(()=>b(s-1),[s,b]),I=o.useCallback(()=>b(s+1),[s,b]),U=o.useCallback(()=>b(1),[b]),he=o.useCallback(()=>b(xs(e,a)),[b,e,a]),re=o.useCallback(J=>_(Number(J.target.value),s),[s,_]),Ne=n.map(J=>o.createElement("option",{key:J,value:J},J));C.selectAllRowsItem&&Ne.push(o.createElement("option",{key:-1,value:e},C.selectAllRowsItemText));const me=o.createElement(Od,{onChange:re,defaultValue:a,"aria-label":C.rowsPerPageText},Ne);return o.createElement($d,{className:"rdt_Pagination"},!C.noRowsPerPage&&w&&o.createElement(o.Fragment,null,o.createElement(Ud,null,C.rowsPerPageText),me),w&&o.createElement(Gd,null,v),o.createElement(Bd,null,o.createElement(Os,{id:"pagination-first-page",type:"button","aria-label":"First Page","aria-disabled":q,onClick:U,disabled:q,$isRTL:j},l),o.createElement(Os,{id:"pagination-previous-page",type:"button","aria-label":"Previous Page","aria-disabled":q,onClick:P,disabled:q,$isRTL:j},m),!C.noRowsPerPage&&!w&&me,o.createElement(Os,{id:"pagination-next-page",type:"button","aria-label":"Next Page","aria-disabled":k,onClick:I,disabled:k,$isRTL:j},p),o.createElement(Os,{id:"pagination-last-page",type:"button","aria-label":"Last Page","aria-disabled":k,onClick:he,disabled:k,$isRTL:j},r)))});const Mt=(a,e)=>{const s=o.useRef(!0);o.useEffect(()=>{s.current?s.current=!1:a()},e)};function Kd(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var zd=function(a){return function(e){return!!e&&typeof e=="object"}(a)&&!function(e){var s=Object.prototype.toString.call(e);return s==="[object RegExp]"||s==="[object Date]"||function(i){return i.$$typeof===Wd}(e)}(a)},Wd=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function vs(a,e){return e.clone!==!1&&e.isMergeableObject(a)?as((s=a,Array.isArray(s)?[]:{}),a,e):a;var s}function Yd(a,e,s){return a.concat(e).map(function(i){return vs(i,s)})}function zi(a){return Object.keys(a).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(s){return Object.propertyIsEnumerable.call(e,s)}):[]}(a))}function Wi(a,e){try{return e in a}catch{return!1}}function Qd(a,e,s){var i={};return s.isMergeableObject(a)&&zi(a).forEach(function(n){i[n]=vs(a[n],s)}),zi(e).forEach(function(n){(function(r,l){return Wi(r,l)&&!(Object.hasOwnProperty.call(r,l)&&Object.propertyIsEnumerable.call(r,l))})(a,n)||(Wi(a,n)&&s.isMergeableObject(e[n])?i[n]=function(r,l){if(!l.customMerge)return as;var p=l.customMerge(r);return typeof p=="function"?p:as}(n,s)(a[n],e[n],s):i[n]=vs(e[n],s))}),i}function as(a,e,s){(s=s||{}).arrayMerge=s.arrayMerge||Yd,s.isMergeableObject=s.isMergeableObject||zd,s.cloneUnlessOtherwiseSpecified=vs;var i=Array.isArray(e);return i===Array.isArray(a)?i?s.arrayMerge(a,e,s):Qd(a,e,s):vs(e,s)}as.all=function(a,e){if(!Array.isArray(a))throw new Error("first argument should be an array");return a.reduce(function(s,i){return as(s,i,e)},{})};var Vd=Kd(as);const Yi={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#FFFFFF"},context:{background:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},divider:{default:"rgba(0,0,0,.12)"},button:{default:"rgba(0,0,0,.54)",focus:"rgba(0,0,0,.12)",hover:"rgba(0,0,0,.12)",disabled:"rgba(0, 0, 0, .18)"},selected:{default:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},highlightOnHover:{default:"#EEEEEE",text:"rgba(0, 0, 0, 0.87)"},striped:{default:"#FAFAFA",text:"rgba(0, 0, 0, 0.87)"}},Qi={default:Yi,light:Yi,dark:{text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(0,0,0,.12)"},background:{default:"#424242"},context:{background:"#E91E63",text:"#FFFFFF"},divider:{default:"rgba(81, 81, 81, 1)"},button:{default:"#FFFFFF",focus:"rgba(255, 255, 255, .54)",hover:"rgba(255, 255, 255, .12)",disabled:"rgba(255, 255, 255, .18)"},selected:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},highlightOnHover:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},striped:{default:"rgba(0, 0, 0, .87)",text:"#FFFFFF"}}};function Xd(a,e,s,i){const[n,r]=o.useState(()=>Bi(a)),[l,p]=o.useState(""),m=o.useRef("");Mt(()=>{r(Bi(a))},[a]);const y=o.useCallback(A=>{var E,q,k;const{attributes:C}=A.target,v=(E=C.getNamedItem("data-column-id"))===null||E===void 0?void 0:E.value;v&&(m.current=((k=(q=n[Fs(n,v)])===null||q===void 0?void 0:q.id)===null||k===void 0?void 0:k.toString())||"",p(m.current))},[n]),_=o.useCallback(A=>{var E;const{attributes:q}=A.target,k=(E=q.getNamedItem("data-column-id"))===null||E===void 0?void 0:E.value;if(k&&m.current&&k!==m.current){const C=Fs(n,m.current),v=Fs(n,k),P=[...n];P[C]=n[v],P[v]=n[C],r(P),e(P)}},[e,n]),b=o.useCallback(A=>{A.preventDefault()},[]),T=o.useCallback(A=>{A.preventDefault()},[]),j=o.useCallback(A=>{A.preventDefault(),m.current="",p("")},[]),w=function(A=!1){return A?At.ASC:At.DESC}(i),N=o.useMemo(()=>n[Fs(n,s==null?void 0:s.toString())]||{},[s,n]);return{tableColumns:n,draggingColumnId:l,handleDragStart:y,handleDragEnter:_,handleDragOver:b,handleDragLeave:T,handleDragEnd:j,defaultSortDirection:w,defaultSortColumn:N}}var Jd=o.memo(function(a){const{data:e=R.data,columns:s=R.columns,title:i=R.title,actions:n=R.actions,keyField:r=R.keyField,striped:l=R.striped,highlightOnHover:p=R.highlightOnHover,pointerOnHover:m=R.pointerOnHover,dense:y=R.dense,selectableRows:_=R.selectableRows,selectableRowsSingle:b=R.selectableRowsSingle,selectableRowsHighlight:T=R.selectableRowsHighlight,selectableRowsNoSelectAll:j=R.selectableRowsNoSelectAll,selectableRowsVisibleOnly:w=R.selectableRowsVisibleOnly,selectableRowSelected:N=R.selectableRowSelected,selectableRowDisabled:A=R.selectableRowDisabled,selectableRowsComponent:E=R.selectableRowsComponent,selectableRowsComponentProps:q=R.selectableRowsComponentProps,onRowExpandToggled:k=R.onRowExpandToggled,onSelectedRowsChange:C=R.onSelectedRowsChange,expandableIcon:v=R.expandableIcon,onChangeRowsPerPage:P=R.onChangeRowsPerPage,onChangePage:I=R.onChangePage,paginationServer:U=R.paginationServer,paginationServerOptions:he=R.paginationServerOptions,paginationTotalRows:re=R.paginationTotalRows,paginationDefaultPage:Ne=R.paginationDefaultPage,paginationResetDefaultPage:me=R.paginationResetDefaultPage,paginationPerPage:J=R.paginationPerPage,paginationRowsPerPageOptions:ve=R.paginationRowsPerPageOptions,paginationIconLastPage:xe=R.paginationIconLastPage,paginationIconFirstPage:Se=R.paginationIconFirstPage,paginationIconNext:be=R.paginationIconNext,paginationIconPrevious:qe=R.paginationIconPrevious,paginationComponent:Je=R.paginationComponent,paginationComponentOptions:Ke=R.paginationComponentOptions,responsive:Qe=R.responsive,progressPending:O=R.progressPending,progressComponent:F=R.progressComponent,persistTableHead:L=R.persistTableHead,noDataComponent:Q=R.noDataComponent,disabled:x=R.disabled,noTableHead:oe=R.noTableHead,noHeader:M=R.noHeader,fixedHeader:ye=R.fixedHeader,fixedHeaderScrollHeight:le=R.fixedHeaderScrollHeight,pagination:te=R.pagination,subHeader:W=R.subHeader,subHeaderAlign:Pe=R.subHeaderAlign,subHeaderWrap:Ee=R.subHeaderWrap,subHeaderComponent:se=R.subHeaderComponent,noContextMenu:Te=R.noContextMenu,contextMessage:ie=R.contextMessage,contextActions:ae=R.contextActions,contextComponent:ot=R.contextComponent,expandableRows:Ae=R.expandableRows,onRowClicked:Re=R.onRowClicked,onRowDoubleClicked:ht=R.onRowDoubleClicked,onRowMouseEnter:ze=R.onRowMouseEnter,onRowMouseLeave:G=R.onRowMouseLeave,sortIcon:ue=R.sortIcon,onSort:st=R.onSort,sortFunction:ut=R.sortFunction,sortServer:Oe=R.sortServer,expandableRowsComponent:ga=R.expandableRowsComponent,expandableRowsComponentProps:fa=R.expandableRowsComponentProps,expandableRowDisabled:Dt=R.expandableRowDisabled,expandableRowsHideExpander:h=R.expandableRowsHideExpander,expandOnRowClicked:d=R.expandOnRowClicked,expandOnRowDoubleClicked:f=R.expandOnRowDoubleClicked,expandableRowExpanded:S=R.expandableRowExpanded,expandableInheritConditionalStyles:K=R.expandableInheritConditionalStyles,defaultSortFieldId:Z=R.defaultSortFieldId,defaultSortAsc:Ge=R.defaultSortAsc,clearSelectedRows:ge=R.clearSelectedRows,conditionalRowStyles:ke=R.conditionalRowStyles,theme:Ue=R.theme,customStyles:mt=R.customStyles,direction:Et=R.direction,onColumnOrderChange:Ts=R.onColumnOrderChange,className:As}=a,{tableColumns:xa,draggingColumnId:cs,handleDragStart:ds,handleDragEnter:hs,handleDragOver:Rs,handleDragLeave:ai,handleDragEnd:ii,defaultSortDirection:wr,defaultSortColumn:Sr}=Xd(s,Ts,Z,Ge),[{rowsPerPage:St,currentPage:lt,selectedRows:ba,allSelected:ni,selectedCount:ri,selectedColumn:pt,sortDirection:Bt,toggleOnSelectedRowsChange:Cr},It]=o.useReducer(Bc,{allSelected:!1,selectedCount:0,selectedRows:[],selectedColumn:Sr,toggleOnSelectedRowsChange:!1,sortDirection:wr,currentPage:Ne,rowsPerPage:J,selectedRowsFlag:!1,contextMessage:R.contextMessage}),{persistSelectedOnSort:oi=!1,persistSelectedOnPageChange:qs=!1}=he,li=!(!U||!qs&&!oi),Nr=te&&!O&&e.length>0,Pr=Je||Hd,Tr=o.useMemo(()=>((V={},pe="default",Ve="default")=>{const ct=Qi[pe]?pe:Ve;return Vd({table:{style:{color:(X=Qi[ct]).text.primary,backgroundColor:X.background.default}},tableWrapper:{style:{display:"table"}},responsiveWrapper:{style:{}},header:{style:{fontSize:"22px",color:X.text.primary,backgroundColor:X.background.default,minHeight:"56px",paddingLeft:"16px",paddingRight:"8px"}},subHeader:{style:{backgroundColor:X.background.default,minHeight:"52px"}},head:{style:{color:X.text.primary,fontSize:"12px",fontWeight:500}},headRow:{style:{backgroundColor:X.background.default,minHeight:"52px",borderBottomWidth:"1px",borderBottomColor:X.divider.default,borderBottomStyle:"solid"},denseStyle:{minHeight:"32px"}},headCells:{style:{paddingLeft:"16px",paddingRight:"16px"},draggingStyle:{cursor:"move"}},contextMenu:{style:{backgroundColor:X.context.background,fontSize:"18px",fontWeight:400,color:X.context.text,paddingLeft:"16px",paddingRight:"8px",transform:"translate3d(0, -100%, 0)",transitionDuration:"125ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",willChange:"transform"},activeStyle:{transform:"translate3d(0, 0, 0)"}},cells:{style:{paddingLeft:"16px",paddingRight:"16px",wordBreak:"break-word"},draggingStyle:{}},rows:{style:{fontSize:"13px",fontWeight:400,color:X.text.primary,backgroundColor:X.background.default,minHeight:"48px","&:not(:last-of-type)":{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:X.divider.default}},denseStyle:{minHeight:"32px"},selectedHighlightStyle:{"&:nth-of-type(n)":{color:X.selected.text,backgroundColor:X.selected.default,borderBottomColor:X.background.default}},highlightOnHoverStyle:{color:X.highlightOnHover.text,backgroundColor:X.highlightOnHover.default,transitionDuration:"0.15s",transitionProperty:"background-color",borderBottomColor:X.background.default,outlineStyle:"solid",outlineWidth:"1px",outlineColor:X.background.default},stripedStyle:{color:X.striped.text,backgroundColor:X.striped.default}},expanderRow:{style:{color:X.text.primary,backgroundColor:X.background.default}},expanderCell:{style:{flex:"0 0 48px"}},expanderButton:{style:{color:X.button.default,fill:X.button.default,backgroundColor:"transparent",borderRadius:"2px",transition:"0.25s",height:"100%",width:"100%","&:hover:enabled":{cursor:"pointer"},"&:disabled":{color:X.button.disabled},"&:hover:not(:disabled)":{cursor:"pointer",backgroundColor:X.button.hover},"&:focus":{outline:"none",backgroundColor:X.button.focus},svg:{margin:"auto"}}},pagination:{style:{color:X.text.secondary,fontSize:"13px",minHeight:"56px",backgroundColor:X.background.default,borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:X.divider.default},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"px",cursor:"pointer",transition:"0.4s",color:X.button.default,fill:X.button.default,backgroundColor:"transparent","&:disabled":{cursor:"unset",color:X.button.disabled,fill:X.button.disabled},"&:hover:not(:disabled)":{backgroundColor:X.button.hover},"&:focus":{outline:"none",backgroundColor:X.button.focus}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:X.text.primary,backgroundColor:X.background.default}},progress:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:X.text.primary,backgroundColor:X.background.default}}},V);var X})(mt,Ue),[mt,Ue]),Ar=o.useMemo(()=>Object.assign({},Et!=="auto"&&{dir:Et}),[Et]),We=o.useMemo(()=>{if(Oe)return e;if(pt!=null&&pt.sortFunction&&typeof pt.sortFunction=="function"){const V=pt.sortFunction,pe=Bt===At.ASC?V:(Ve,ct)=>-1*V(Ve,ct);return[...e].sort(pe)}return function(V,pe,Ve,ct){return pe?ct&&typeof ct=="function"?ct(V.slice(0),pe,Ve):V.slice(0).sort((X,ya)=>{const Ut=pe(X),Ct=pe(ya);if(Ve==="asc"){if(Ut<Ct)return-1;if(Ut>Ct)return 1}if(Ve==="desc"){if(Ut>Ct)return-1;if(Ut<Ct)return 1}return 0}):V}(e,pt==null?void 0:pt.selector,Bt,ut)},[Oe,pt,Bt,e,ut]),us=o.useMemo(()=>{if(te&&!U){const V=lt*St,pe=V-St;return We.slice(pe,V)}return We},[lt,te,U,St,We]),Rr=o.useCallback(V=>{It(V)},[]),qr=o.useCallback(V=>{It(V)},[]),Dr=o.useCallback(V=>{It(V)},[]),Er=o.useCallback((V,pe)=>Re(V,pe),[Re]),Ir=o.useCallback((V,pe)=>ht(V,pe),[ht]),Mr=o.useCallback((V,pe)=>ze(V,pe),[ze]),Fr=o.useCallback((V,pe)=>G(V,pe),[G]),Gt=o.useCallback(V=>It({type:"CHANGE_PAGE",page:V,paginationServer:U,visibleOnly:w,persistSelectedOnPageChange:qs}),[U,qs,w]),Or=o.useCallback(V=>{const pe=xs(re||us.length,V),Ve=Pa(lt,pe);U||Gt(Ve),It({type:"CHANGE_ROWS_PER_PAGE",page:Ve,rowsPerPage:V})},[lt,Gt,U,re,us.length]);if(te&&!U&&We.length>0&&us.length===0){const V=xs(We.length,St),pe=Pa(lt,V);Gt(pe)}Mt(()=>{C({allSelected:ni,selectedCount:ri,selectedRows:ba.slice(0)})},[Cr]),Mt(()=>{st(pt,Bt,We.slice(0))},[pt,Bt]),Mt(()=>{I(lt,re||We.length)},[lt]),Mt(()=>{P(St,lt)},[St]),Mt(()=>{Gt(Ne)},[Ne,me]),Mt(()=>{if(te&&U&&re>0){const V=xs(re,St),pe=Pa(lt,V);lt!==pe&&Gt(pe)}},[re]),o.useEffect(()=>{It({type:"CLEAR_SELECTED_ROWS",selectedRowsFlag:ge})},[b,ge]),o.useEffect(()=>{if(!N)return;const V=We.filter(Ve=>N(Ve)),pe=b?V.slice(0,1):V;It({type:"SELECT_MULTIPLE_ROWS",keyField:r,selectedRows:pe,totalRows:We.length,mergeSelections:li})},[e,N]);const Lr=w?us:We,$r=qs||b||j;return o.createElement(Oc,{theme:Tr},!M&&(!!i||!!n)&&o.createElement(Cd,{title:i,actions:n,showMenu:!Te,selectedCount:ri,direction:Et,contextActions:ae,contextComponent:ot,contextMessage:ie}),W&&o.createElement(Td,{align:Pe,wrapContent:Ee},se),o.createElement(Rd,Object.assign({$responsive:Qe,$fixedHeader:ye,$fixedHeaderScrollHeight:le,className:As},Ar),o.createElement(qd,null,O&&!L&&o.createElement(Ki,null,F),o.createElement(Uc,{disabled:x,className:"rdt_Table",role:"table"},!oe&&(!!L||We.length>0&&!O)&&o.createElement(Kc,{className:"rdt_TableHead",role:"rowgroup",$fixedHeader:ye},o.createElement(zc,{className:"rdt_TableHeadRow",role:"row",$dense:y},_&&($r?o.createElement(ls,{style:{flex:"0 0 48px"}}):o.createElement(bd,{allSelected:ni,selectedRows:ba,selectableRowsComponent:E,selectableRowsComponentProps:q,selectableRowDisabled:A,rowData:Lr,keyField:r,mergeSelections:li,onSelectAllRows:qr})),Ae&&!h&&o.createElement(Dd,null),xa.map(V=>o.createElement(fd,{key:V.id,column:V,selectedColumn:pt,disabled:O||We.length===0,pagination:te,paginationServer:U,persistSelectedOnSort:oi,selectableRowsVisibleOnly:w,sortDirection:Bt,sortIcon:ue,sortServer:Oe,onSort:Rr,onDragStart:ds,onDragOver:Rs,onDragEnd:ii,onDragEnter:hs,onDragLeave:ai,draggingColumnId:cs})))),!We.length&&!O&&o.createElement(Ed,null,Q),O&&L&&o.createElement(Ki,null,F),!O&&We.length>0&&o.createElement(Ad,{className:"rdt_TableBody",role:"rowgroup"},us.map((V,pe)=>{const Ve=ss(V,r),ct=function(Ct=""){return typeof Ct!="number"&&(!Ct||Ct.length===0)}(Ve)?pe:Ve,X=Ks(V,ba,r),ya=!!(Ae&&S&&S(V)),Ut=!!(Ae&&Dt&&Dt(V));return o.createElement(dd,{id:ct,key:ct,keyField:r,"data-row-id":ct,columns:xa,row:V,rowCount:We.length,rowIndex:pe,selectableRows:_,expandableRows:Ae,expandableIcon:v,highlightOnHover:p,pointerOnHover:m,dense:y,expandOnRowClicked:d,expandOnRowDoubleClicked:f,expandableRowsComponent:ga,expandableRowsComponentProps:fa,expandableRowsHideExpander:h,defaultExpanderDisabled:Ut,defaultExpanded:ya,expandableInheritConditionalStyles:K,conditionalRowStyles:ke,selected:X,selectableRowsHighlight:T,selectableRowsComponent:E,selectableRowsComponentProps:q,selectableRowDisabled:A,selectableRowsSingle:b,striped:l,onRowExpandToggled:k,onRowClicked:Er,onRowDoubleClicked:Ir,onRowMouseEnter:Mr,onRowMouseLeave:Fr,onSelectedRow:Dr,draggingColumnId:cs,onDragStart:ds,onDragOver:Rs,onDragEnd:ii,onDragEnter:hs,onDragLeave:ai})}))))),Nr&&o.createElement("div",null,o.createElement(Pr,{onChangePage:Gt,onChangeRowsPerPage:Or,rowCount:re||We.length,currentPage:lt,rowsPerPage:St,direction:Et,paginationRowsPerPageOptions:ve,paginationIconLastPage:xe,paginationIconFirstPage:Se,paginationIconNext:be,paginationIconPrevious:qe,paginationComponentOptions:Ke})))});class Ie extends c.Component{constructor(e){super(e)}render(){return t.jsx("div",{className:"w-[400px] sm:w-full",children:t.jsx(Jd,{columns:this.props.columns,data:this.props.data,theme:this.props.dark_table?"dark":"default",conditionalRowStyles:typeof this.props.conditional_row_styles>"u"?[]:this.props.conditional_row_styles,pagination:!0,responsive:!0})})}}class Zn extends c.Component{constructor(e){super(e)}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:t.jsx("span",{className:"text-pink-500 dark:text-pink-300",children:this.props.item.item_name}),children:t.jsx("div",{className:"mb-5",children:this.props.item.usable||this.props.item.damages_kingdoms?t.jsx(_n,{item:this.props.item}):t.jsx(Kr,{item:this.props.item})})})}}class Zd extends c.Component{constructor(e){super(e),this.state={loading:!0,boons:[],dark_tables:!1,show_usable_details:!1,item_to_use:null,removing_boon:!1,error_message:null,success_message:null}}componentDidMount(){ca(this),this.props.finished_loading&&this.props.character_id!==null&&new g().setRoute("character-sheet/"+this.props.character_id+"/active-boons").doAjaxCall("get",e=>{this.setState({loading:!1,boons:e.data.active_boons})},e=>{console.error(e)})}manageBoon(e){this.setState({show_usable_details:!this.state.show_usable_details,item_to_use:typeof e<"u"?e.boon_applied:null})}removeBoon(e){this.setState({removing_boon:!0,success_message:null,error_message:null},()=>{new g().setRoute("character-sheet/"+this.props.character_id+"/remove-boon/"+e).doAjaxCall("post",s=>{this.setState({removing_boon:!1,boons:s.data.boons,success_message:s.data.message})},s=>{let i="UNKNOWN ERROR - CHECK CONSOLE!";s.response!==void 0&&(i=s.response.data.message),this.setState({removing_boon:!1,error_message:i}),console.error(s.response)})})}buildColumns(){return[{name:"Name",selector:e=>e.boon_applied.name,sortable:!0,cell:e=>t.jsx("span",{children:t.jsx("button",{onClick:()=>this.manageBoon(e),className:"text-sky-600 dark:text-sky-300",children:e.boon_applied.name})},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Time Remaining",selector:e=>e.started,sortable:!0,cell:e=>t.jsx("span",{children:this.getLabel(e.started,e.complete)},e.started+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Actions",selector:e=>e.boon_applied.id,sortable:!0,cell:e=>t.jsx("span",{children:t.jsx(ce,{button_label:"Remove Boon",on_click:()=>this.removeBoon(e.id)})},e.boon_applied.id+"-"+(Math.random()+1).toString(36).substring(7))}]}getLabel(e,s){let i="seconds";const n=Ye.now();let l=Ye.fromISO(s).diff(n,["seconds"]).toObject().seconds;return typeof l>"u"?"Error":(l/3600>=1?i=u(l/3600)+" hour(s)":l/60>=1&&(i=u(l/60)+" minute(s)"),i)}render(){return this.state.loading?t.jsx(D,{}):t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"my-5",children:[this.state.boons.length>0?t.jsx(Ce,{children:"This tab does not update in real time. You can switch tabs to get the latest data."}):null,this.state.removing_boon?t.jsx(D,{}):null,this.state.success_message!==null?t.jsx(je,{additional_css:"my-4",children:t.jsx("p",{children:this.state.success_message})}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:t.jsx("p",{children:this.state.error_message})}):null,t.jsx("p",{className:"my-4 text-center",children:t.jsxs("a",{href:"/information/alchemy",target:"_blank",children:["What are boons and how do I get them? ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),this.state.boons.length>0?t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{columns:this.buildColumns(),data:this.state.boons,dark_table:this.state.dark_tables})}):t.jsx("p",{className:"my-4 text-center",children:"No Active Boons."})]}),this.state.show_usable_details&&this.state.item_to_use!==null?t.jsx(Zn,{is_open:this.state.show_usable_details,manage_modal:this.manageBoon.bind(this),item:this.state.item_to_use}):null]})}}class eh extends c.Component{constructor(e){super(e)}render(){return t.jsx(ee,{is_open:!0,handle_close:this.props.manage_modal,title:"Pledge Loyalty To: "+this.props.faction.map_name,secondary_actions:{secondary_button_disabled:!1,secondary_button_label:"I pledge my allegiance",handle_action:this.props.handle_pledge},children:t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"mb-4",children:t.jsx("strong",{children:"Would you like to pledge your loyalty to Surface?"})}),this.props.pledging?t.jsx("div",{className:"my-4",children:t.jsx(D,{})}):null,t.jsxs("div",{className:"max-h-[450px] overflow-y-scroll md:max-h-auto md:overflow-y-visible",children:[t.jsxs("p",{className:"mb-4",children:["Pledging to a Faction allows a player to complete tasks to gain fame with the Npcs of that plane. As you complete tasks you will be rewarded with Currencies (Gold, Gold Dust and Shards), a ",t.jsxs("a",{href:"/information/random-enchants",target:"_blank",children:["Medium Unique Items ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," and XP all (With exception of the item) equal to the current NPC Fame Level."]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("p",{className:"mb-4",children:['Upon pledging, players will see a new tab on the Game tab named "Faction Loyalty". This tab will appear in your action section regardless of mobile or desktop. This tab will show you all the requirements for each NPC of that plane. There are two types of tasks: Bounties and Crafting. Crafting can be done any where and just requires you to click the "Craft for NPC" while crafting the item the NPC wants. Bounties are kill X creatures and must be done ',t.jsx("strong",{children:"manually"}),"."]}),t.jsx("p",{className:"mb-4",children:"Each NPC will have a button called Assist. Players can assist only one NPC at a time with their tasks and must be assisting for their bounties and crafting to count. The total amount of tasks to do is the total amount of Fame needed to level the NPC. These tasks will switch each level."}),t.jsxs("p",{className:"mb-4 italic",children:["It is suggested you ",t.jsxs("a",{href:"/information/automation",target:"_blank",children:["read more about Faction Loyalties ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," for your own curiosity child."]})]})]})})}}class th extends c.Component{constructor(e){super(e),this.state={loading:!0,factions:[],dark_tables:!1,pledge_faction:null,success_message:null,pledging:!1}}componentDidMount(){ca(this),this.props.character_id!==null&&this.props.finished_loading&&new g().setRoute("character-sheet/"+this.props.character_id+"/factions").doAjaxCall("get",e=>{this.setState({loading:!1,factions:e.data.factions})},e=>{console.error(e)})}handlePledge(e){this.props.update_pledge_tab&&this.setState({pledging:!0},()=>{let s=this.props.pledged_faction_id;s||(s=this.state.pledge_faction.id),new g().setRoute("faction-loyalty/"+(e?"pledge":"remove-pledge")+"/"+this.props.character_id+"/"+s).doAjaxCall("post",i=>{this.closePledge(),this.setState({success_message:i.data.message,pledging:!1},()=>{this.props.update_pledge_tab(e,e?s:null),this.props.update_faction_action_tasks(null)})},i=>{this.setState({pledging:!1}),console.error(i)})})}buildColumns(){return[{name:"Name",selector:e=>e.name,sortable:!0,cell:e=>t.jsx("span",{children:e.map_name},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Title",selector:e=>e.title,sortable:!0,cell:e=>t.jsx("span",{children:e.title!==null?e.title:"N/A"},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Level",selector:e=>e.current_level,sortable:!0,cell:e=>t.jsx("span",{children:e.current_level},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Points",selector:e=>e.points_needed,sortable:!0,cell:e=>t.jsxs("span",{children:[u(e.current_points)," / ",u(e.points_needed)]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Pledge Loyalty",selector:e=>e.id,sortable:!0,cell:e=>t.jsx("span",{children:this.props.is_pledged&&this.props.pledged_faction_id===e.id?t.jsx(ce,{button_label:"Un-pledge",on_click:()=>this.handlePledge(!1)}):t.jsx(Y,{button_label:"Pledge Loyalty",on_click:()=>{this.pledgeLoyalty(e)},disabled:!e.maxed})},e.id+"-"+(Math.random()+1).toString(36).substring(7))}]}pledgeLoyalty(e){this.setState({pledge_faction:e})}closePledge(){this.setState({pledge_faction:null})}render(){return this.state.loading?t.jsx(D,{}):t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"my-5",children:[this.state.factions.length>0?t.jsxs(Ce,{additional_css:"mb-4",children:["This tab does not update in real time. You can switch tabs to get the latest data. You can learn more about ",t.jsxs("a",{href:"/information/factions",target:"_blank",children:["Factions ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," in the help docs. Players who reach the max level (5) of a faction can then ",t.jsx("a",{href:"/information/faction-loyalty",target:"_blank",children:"Pledge their loyalty"}),"."]}):null,this.state.success_message!==null?t.jsx(je,{additional_css:"mb-4",children:this.state.success_message}):null,this.state.pledge_faction===null&&this.state.pledging?t.jsx("div",{className:"mb-4",children:t.jsx(D,{})}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{columns:this.buildColumns(),data:this.state.factions,dark_table:this.state.dark_tables})})]}),this.state.pledge_faction!==null?t.jsx(eh,{is_open:!0,manage_modal:this.closePledge.bind(this),faction:this.state.pledge_faction,handle_pledge:()=>this.handlePledge(!0),pledging:this.state.pledging}):null]})}}class sh extends c.Component{constructor(e){super(e),this.state={selected_buff:null,selected_buff_xp:0,selected_buff_cost:0,loading:!1,error_message:null,success_message:null}}reincarnate(){this.props.mercenary!==null&&this.props.reincarnate(this.props.mercenary.id)}selectBuffToPurchase(e){const s=e.value,i=this.props.xp_buffs.filter(n=>n.value===s);i.length>0&&this.setState({selected_buff:s,selected_buff_xp:i[0].xp_amount,selected_buff_cost:i[0].cost})}buildOptions(){return this.props.xp_buffs.map(e=>({label:e.label+" XP Increase Per Kill: "+(e.xp_amount*100).toFixed(0)+"%",value:e.value}))}selectedBuff(){if(this.state.selected_buff!==null){const e=this.props.xp_buffs.filter(s=>s.value===this.state.selected_buff);return{label:this.state.selected_buff+" XP Increase Per Kill: "+(e[0].xp_amount*100).toFixed(0)+"%",value:this.state.selected_buff}}return{label:"Please select",value:""}}purchaseBuff(){this.props.mercenary!==null&&this.state.selected_buff!=null&&this.props.purchase_buff(this.props.mercenary.id,this.state.selected_buff)}render(){return this.props.mercenary===null?null:t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:this.props.mercenary.name,secondary_actions:{secondary_button_disabled:!this.props.mercenary.can_reincarnate,secondary_button_label:"Re-incarnate",handle_action:this.reincarnate.bind(this)},children:t.jsxs("div",{className:"max-h-[350px] overflow-y-auto lg:max-h-full lg:overflow-y-hidden",children:[t.jsx("p",{className:"my-4",children:"Mercenaries such as this one give bonuses to currency acquisition. Any action that would give the currency the mercenary is named after will increase as you raise this mercenaries level."}),t.jsx("p",{className:"mb-4",children:"Once a mercenary reaches level 100, you can pay 500 shards to reincarnate them. This allows you to get the bonus this mercenary applies to currency drops and actions that give currencies - of 1100%. Each time you reincarnate you will ned 5% more - which stacks each time you do it - XP to level the mercenary. You can reincarnate 10 times."}),t.jsxs("p",{className:"mb-4",children:["Mercenaries are leveled by you killing monsters. Its ",t.jsx("strong",{children:"recommended"})," you use exploration to do this. Each Mercenary you own will gain 25XP per kill you make."]}),t.jsx("p",{className:"mb-4",children:t.jsxs("a",{href:"/information/mercenary",target:"_blank",className:"ml-2 relative top-[5px]",children:["Learn more about mercenaries ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2 my-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"my-2",children:"Base Details"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Level: "}),t.jsxs("dd",{children:[this.props.mercenary.level," / ",this.props.mercenary.max_level]}),t.jsx("dt",{children:"XP: "}),t.jsxs("dd",{children:[this.props.mercenary.current_xp," / ",this.props.mercenary.xp_required]}),t.jsx("dt",{children:"XP Buff: "}),t.jsxs("dd",{children:[this.props.mercenary.xp_buff!==null?(this.props.mercenary.xp_buff*100).toFixed(0):0," %"]}),t.jsx("dt",{children:"Bonus To Currency Reward: "}),t.jsxs("dd",{children:[(this.props.mercenary.bonus*100).toFixed(2)," %"]}),t.jsx("dt",{children:"Times Reincarnated: "}),t.jsx("dd",{children:this.props.mercenary.times_reincarnated===null?0:this.props.mercenary.times_reincarnated})]})]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{className:"my-2",children:"Purchase XP Buffs"}),t.jsx("p",{className:"mb-4",children:"Purchase a XP buff for the mercenary. All buffs are permanent."}),t.jsx(B,{onChange:this.selectBuffToPurchase.bind(this),options:this.buildOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedBuff()}),this.state.selected_buff!==null?t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Selected Buff:"}),t.jsx("dd",{children:this.state.selected_buff}),t.jsx("dt",{children:"Selected Buff XP Value:"}),t.jsxs("dd",{children:[(this.state.selected_buff_xp*100).toFixed(0),"%"]}),t.jsx("dt",{children:"Selected Buff Cost:"}),t.jsxs("dd",{children:[u(this.state.selected_buff_cost)," Gold"]})]}):null,t.jsx(Y,{button_label:"Purchase buff",on_click:this.purchaseBuff.bind(this),additional_css:"mt-4"})]})]}),t.jsxs("div",{className:"my-4",children:[this.props.reincarnating||this.props.buying_buff?t.jsx(D,{}):null,this.props.error_message!==null?t.jsx(z,{children:this.props.error_message}):null]})]})})}}class ah extends c.Component{constructor(e){super(e),this.state={loading:!1,mercs:[],mercs_to_buy:[],merc_xp_buffs:[],merc_selected:null,buying_merc:!1,error_message:null,success_message:null,reincarnate_error_message:null,reincarnate_success_message:null,reincarnating:!1,buying_buff:!1,dark_tables:!1,show_merc_details:!1,merc_for_show:null}}componentDidMount(){ca(this);let e=null;this.props.character!==null&&(e=this.props.character.id,this.props.character.is_mercenary_unlocked&&this.setState({loading:!0},()=>{new g().setRoute("mercenaries/list/"+e).doAjaxCall("get",s=>{this.setState({mercs:s.data.merc_data,mercs_to_buy:s.data.mercs_to_buy,merc_xp_buffs:s.data.merc_xp_buffs,loading:!1})},s=>{console.error(s)})}))}buildMerList(){return this.state.mercs_to_buy===null?[{label:"",value:0}]:this.state.mercs_to_buy.map(e=>({label:e.name,value:e.value}))}setMercenaryToBuy(e){this.setState({merc_selected:e.value})}defaultMerc(){if(this.state.merc_selected!==null){const e=this.findMerc(this.state.merc_selected);if(e!==null)return[{label:e.name,value:e.value}]}return[{label:"Please Select",value:0}]}findMerc(e){const s=this.state.mercs_to_buy.filter(i=>i.value===e);return s.length>0?s[0]:null}closeSuccess(){this.setState({success_message:null})}closeError(){this.setState({error_message:null})}closeReincarnatedMessage(){this.setState({reincarnate_success_message:null})}closeDetailsModal(){return this.setState({show_merc_details:!1,merc_for_show:null})}manageDetailsModal(e){const s=this.state.mercs.findIndex(i=>i.name===e);s!=-1&&this.setState({merc_for_show:JSON.parse(JSON.stringify(this.state.mercs[s])),show_merc_details:!0})}reincarnateMerc(e){let s=null;this.props.character!==null&&(s=this.props.character.id,this.setState({reincarnating:!0,reincarnate_success_message:null,reincarnate_error_message:null},()=>{new g().setRoute("mercenaries/re-incarnate/"+s+"/"+e).doAjaxCall("post",i=>{this.setState({mercs:i.data.merc_data,mercs_to_buy:i.data.mercs_to_buy,reincarnating:!1,reincarnate_success_message:i.data.message},()=>this.closeDetailsModal())},i=>{if(typeof i.response<"u"){const n=i.response;this.setState({reincarnating:!1,reincarnate_error_message:n.data.message})}})}))}purchaseBuff(e,s){let i=null;this.props.character!==null&&(i=this.props.character.id,this.setState({success_message:null,error_message:null,buying_buff:!0},()=>{new g().setRoute("mercenaries/purcahse-buff/"+i+"/"+e).setParameters({type:s}).doAjaxCall("post",n=>{this.setState({mercs:n.data.merc_data,mercs_to_buy:n.data.mercs_to_buy,buying_buff:!1,success_message:n.data.message},()=>{this.closeDetailsModal()})},n=>{if(typeof n.response<"u"){const r=n.response;this.setState({buying_buff:!1,error_message:r.data.message})}})}))}buyMerc(){let e=null;this.props.character!==null&&(e=this.props.character.id,this.setState({success_message:null,error_message:null,buying_merc:!0},()=>{new g().setRoute("mercenaries/buy/"+e).setParameters({type:this.state.merc_selected}).doAjaxCall("post",s=>{this.setState({mercs:s.data.merc_data,mercs_to_buy:s.data.mercs_to_buy,buying_merc:!1,success_message:s.data.message})},s=>{if(typeof s.response<"u"){const i=s.response;this.setState({buying_merc:!1,error_message:i.data.message})}})}))}buildColumns(){return[{name:"Name",selector:e=>e.name,sortable:!0,cell:e=>t.jsx("span",{children:t.jsx("button",{className:"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-500",onClick:()=>this.manageDetailsModal(e.name),children:e.name})},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Xp",selector:e=>e.current_xp,sortable:!0,cell:e=>t.jsxs("span",{children:[e.current_xp,"/",e.xp_required]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Level",selector:e=>e.level,sortable:!0,cell:e=>t.jsxs("span",{children:[e.level,"/",e.max_level]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Bonus",selector:e=>e.bonus,sortable:!0,cell:e=>t.jsxs("span",{children:[(e.bonus*100).toFixed(0),"%"]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"XP Buff",selector:e=>e.xp_buff,sortable:!0,cell:e=>t.jsxs("span",{children:[(e.xp_buff*100).toFixed(0),"%"]},e.id+"-"+(Math.random()+1).toString(36).substring(7))}]}render(){if(this.props.character!==null)return this.props.character.is_mercenary_unlocked?this.state.loading?t.jsx(D,{}):t.jsxs("div",{children:[this.state.reincarnate_success_message!==null?t.jsx(je,{additional_css:"mb-4",close_alert:this.closeReincarnatedMessage.bind(this),children:this.state.reincarnate_success_message}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{columns:this.buildColumns(),data:this.state.mercs,dark_table:this.state.dark_tables})}),t.jsxs("div",{className:$("flex justify-center mt-4",{hidden:this.state.mercs_to_buy.length===0}),children:[t.jsx("div",{children:t.jsx(B,{onChange:this.setMercenaryToBuy.bind(this),options:this.buildMerList(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultMerc()})}),t.jsx("div",{children:t.jsx(Y,{button_label:"Purchase",on_click:this.buyMerc.bind(this),additional_css:"ml-2"})}),t.jsx("div",{children:t.jsxs("a",{href:"/information/mercenary",target:"_blank",className:"ml-2 relative top-[5px]",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]}),t.jsx("p",{className:$("my-2 text-sm text-center",{hidden:this.state.mercs_to_buy.length===0}),children:"Each Mercenary costs: 10,000,000 Gold"}),t.jsxs("div",{className:"my-2 w-1/2 ml-auto mr-auto",children:[this.state.buying_merc?t.jsx(D,{}):null,this.state.success_message!==null?t.jsx(je,{close_alert:this.closeSuccess.bind(this),children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{close_alert:this.closeError.bind(this),children:this.state.error_message}):null]}),this.state.show_merc_details?t.jsx(sh,{mercenary:this.state.merc_for_show,is_open:!0,handle_close:this.closeDetailsModal.bind(this),character:this.props.character,reincarnating:this.state.reincarnating,buying_buff:this.state.buying_buff,error_message:this.state.reincarnate_error_message,reincarnate:this.reincarnateMerc.bind(this),xp_buffs:this.state.merc_xp_buffs,purchase_buff:this.purchaseBuff.bind(this)}):null]}):t.jsxs("div",{className:"text-center text-red-500 dark:text-red-400",children:[t.jsxs("p",{children:["You must complete a quest to unlock this feature. Head down to ",t.jsxs("a",{href:"/information/planes",target:"_blank",children:["Labyrinth ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})," and complete the ",t.jsxs("a",{href:"/information/quests",target:"_blank",children:["Quest: ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),' "The truth is out there".']})}}class ih extends c.Component{constructor(e){super(e),this.tabs=[{key:"info",name:"Info"},{key:"active-boons",name:"Active Boons"},{key:"factions",name:"Factions"},{key:"mercenaries",name:"Mercenaries"}]}render(){var e,s,i,n;return t.jsx(o.Fragment,{children:t.jsxs(Be,{tabs:this.tabs,full_width:!0,children:[t.jsx(H,{children:t.jsx(tc,{character:this.props.character,finished_loading:this.props.finished_loading,manage_addition_data:this.props.manage_addition_data})},"info"),t.jsx(H,{children:t.jsx(Zd,{character_id:(e=this.props.character)==null?void 0:e.id,finished_loading:this.props.finished_loading})},"active-boons"),t.jsx(H,{children:t.jsx(th,{update_pledge_tab:this.props.update_pledge_tab,character_id:(s=this.props.character)==null?void 0:s.id,finished_loading:this.props.finished_loading,is_pledged:(i=this.props.character)==null?void 0:i.can_see_pledge_tab,pledged_faction_id:(n=this.props.character)==null?void 0:n.pledged_to_faction_id,update_faction_action_tasks:this.props.update_faction_action_tasks})},"factions"),t.jsx(H,{children:t.jsx(ah,{character:this.props.character})},"mercenaries")]})})}}class er extends c.Component{constructor(e){super(e),this.state={loading:!0,skill_data:{}}}componentDidMount(){new g().setRoute("character/skill/"+this.props.skill.character_id+"/"+this.props.skill.id).doAjaxCall("get",e=>{this.setState({loading:!1,skill_data:e.data})},e=>{})}getFilteredFields(){return["unit_time_reduction","building_time_reduction","unit_movement_time_reduction","base_damage_mod","base_healing_mod","base_ac_mod","fight_timeout_mod","move_timeout_mod","class_bonus"].filter(s=>this.state.skill_data[s]>0)}iSkillDetailsEmpty(){return!(this.getFilteredFields().length>0)}renderDetails(){return this.getFilteredFields().map(e=>t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:de.upperFirst(e.replaceAll("_"," "))}),t.jsxs("dd",{children:[(this.state.skill_data[e]*100).toFixed(2),"%"]})]}))}renderSkillDetails(){return t.jsx("dl",{children:this.renderDetails()})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.state.skill_data.name,children:this.state.loading?t.jsx("div",{className:"p-4 m-4",children:t.jsx(Fe,{})}):t.jsxs(o.Fragment,{children:[this.state.skill_data.is_locked?t.jsx(z,{additional_css:"mb-4 mt-4",children:"This skill is locked. You will need to complete a quest to unlock it."}):null,t.jsx("p",{className:"mb-4",children:this.state.skill_data.description}),t.jsxs("div",{className:$({"grid gap-2 md:grid-cols-2 md:gap-4":!this.iSkillDetailsEmpty()}),children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Current Level"}),t.jsx("dd",{children:this.state.skill_data.level}),t.jsx("dt",{children:"Max Level"}),t.jsx("dd",{children:this.state.skill_data.max_level}),t.jsx("dt",{children:"XP Towards"}),t.jsxs("dd",{children:[this.state.skill_data.xp_towards!==null?(this.state.skill_data.xp_towards*100).toFixed(2):0,"%"]}),t.jsx("dt",{children:"Skill Bonus"}),t.jsxs("dd",{children:[(this.state.skill_data.skill_bonus*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Skill XP Bonus"}),t.jsxs("dd",{children:[(this.state.skill_data.skill_xp_bonus*100).toFixed(2)," %"]}),t.jsx("dt",{children:"XP"}),t.jsxs("dd",{children:[u(this.state.skill_data.xp)," / ",u(this.state.skill_data.xp_max)]})]})}),this.iSkillDetailsEmpty()?null:t.jsx("div",{children:this.renderSkillDetails()})]})]})})}}class nh extends c.Component{constructor(e){super(e)}render(){return t.jsxs(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:"Sacrifice XP",children:[t.jsxs("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:["By setting this to a percentage, any XP gained from monsters or Exploration will be reduced ",t.jsx("strong",{children:"BEFORE"})," additional modifiers and quest items are applied. This amount will then be applied to the skill XP."]}),t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"As you level these skills the XP will go up by 100 per skill level, that is at level 1, you need 100XP, but at level 10, you need 1000."}),t.jsx("p",{className:"my-2 text-gray-700 dark:text-gray-200",children:"Because skills xp will get out of control fast, there are various books and quests that increase the XP bonus per kill, players are also suggested to use Exploration for levels 5 and beyond. Do not try and master a skill, instead rely on quest items and enchantments while leveling other skills."})]})}}class rh extends c.Component{constructor(e){super(e),this.state={selected_value:0,error_message:null,loading:!1,show_help:!1}}setSkillToTrain(e){this.setState({selected_value:e.value,error_message:null})}trainSkill(){if(this.state.selected_value===0)return this.setState({error_message:"You must select a % of XP tp sacrifice."});this.setState({loading:!0},()=>{new g().setRoute("skill/train/"+this.props.character_id).setParameters({skill_id:this.props.skill.id,xp_percentage:this.state.selected_value}).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.set_success_message(e.data.message),this.props.update_skills(e.data.skills),this.props.manage_modal()})},e=>{})})}buildItems(){return[{label:"10%",value:.1},{label:"20%",value:.2},{label:"30%",value:.3},{label:"40%",value:.4},{label:"50%",value:.5},{label:"60%",value:.6},{label:"70%",value:.7},{label:"80%",value:.8},{label:"90%",value:.9},{label:"100%",value:1}]}defaultItem(){return this.state.selected_value===0?{label:"Please Select",value:0}:{label:this.state.selected_value*100+"%",value:this.state.selected_value}}manageHelpDialogue(){this.setState({show_help:!this.state.show_help})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.skill.name,primary_button_disabled:this.state.loading,secondary_actions:{secondary_button_label:"Train Skill",secondary_button_disabled:this.state.loading||this.state.error_message!==null,handle_action:this.trainSkill.bind(this)},children:[this.props.skill.is_locked?t.jsx(z,{additional_css:"mb-4 mt-4",children:"This skill is locked. You will need to complete a quest to unlock it."}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mb-4 mt-4",children:this.state.error_message}):null,t.jsx("p",{className:"mb-4",children:this.props.skill.description}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Current Level"}),t.jsx("dd",{children:this.props.skill.level}),t.jsx("dt",{children:"Max Level"}),t.jsx("dd",{children:this.props.skill.max_level}),t.jsxs("dt",{className:"flex items-center",children:[t.jsx("span",{children:"XP Towards"}),t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue(),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," Help"]})})})]}),t.jsx("dd",{children:t.jsx(B,{onChange:this.setSkillToTrain.bind(this),options:this.buildItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultItem()})}),t.jsx("dt",{children:"XP"}),t.jsxs("dd",{children:[u(this.props.skill.xp)," / ",u(this.props.skill.xp_max)]})]}),this.state.loading?t.jsx(D,{}):null,this.state.show_help?t.jsx(nh,{manage_modal:this.manageHelpDialogue.bind(this)}):null]})}}class oh extends c.Component{constructor(e){super(e),this.state={show_skill_details:!1,show_train_skill:!1,skill:null,stopping:!1,success_message:null}}manageTrainSkill(e){this.setState({show_train_skill:!this.state.show_train_skill,skill:typeof e<"u"?e:null})}stopTraining(e){this.setState({stopping:!0},()=>{new g().setRoute("skill/cancel-train/"+this.props.character_id+"/"+e.id).doAjaxCall("post",s=>{this.setState({stopping:!1,success_message:s.data.message},()=>{this.props.update_skills(s.data.skills)})},s=>{})})}manageSkillDetails(e){this.setState({show_skill_details:!this.state.show_skill_details,skill:typeof e<"u"?e:null})}setSuccessMessage(e){this.setState({success_message:e})}closeSuccessMessage(){this.setState({success_message:null})}isAnySkillTraining(){return this.props.trainable_skills.filter(e=>e.is_training).length>0}buildColumns(){return[{name:"Name",selector:e=>e.name,sortable:!0,cell:e=>t.jsx("span",{className:"m-auto",children:t.jsxs("button",{onClick:()=>this.manageSkillDetails(e),className:$("underline",{"text-orange-600 dark:text-orange-300":e.is_class_skill}),children:[t.jsx("i",{className:$({"ra ra-player-pyromaniac":e.is_class_skill})})," ",e.name]})},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Level",selector:e=>e.level,sortable:!0,cell:e=>t.jsxs("span",{children:[e.level,"/",e.max_level]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"XP",selector:e=>e.xp,sortable:!0,cell:e=>t.jsxs("span",{children:[u(e.xp),"/",u(e.xp_max)]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Training?",selector:e=>e.is_training?"Yes":"No",sortable:!0},{name:"Actions",selector:e=>"",sortable:!1,cell:e=>t.jsx("span",{children:e.is_training?t.jsx(ce,{button_label:this.state.stopping?t.jsxs("span",{children:["Stopping ",t.jsx("i",{className:"fas fa-spinner fa-pulse"})]}):"Stop training",on_click:()=>this.stopTraining(e),disabled:this.props.is_dead||this.state.stopping||this.props.is_automation_running}):t.jsx(Y,{button_label:"Train",on_click:()=>this.manageTrainSkill(e),disabled:this.props.is_dead||this.isAnySkillTraining()||this.props.is_automation_running})},e.id+"-"+(Math.random()+1).toString(36).substring(7))}]}render(){return t.jsxs(o.Fragment,{children:[this.props.is_automation_running?t.jsx("div",{className:"mb-4",children:t.jsx(rt,{children:"Automation is running. You cannot train or stop training skills."})}):null,t.jsx("div",{className:"mb-4",children:t.jsx(Ce,{children:"This section will not update in real time."})}),t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{columns:this.buildColumns(),data:this.props.trainable_skills,dark_table:this.props.dark_table})}),this.state.show_skill_details&&this.state.skill!==null?t.jsx(er,{skill:this.state.skill,manage_modal:this.manageSkillDetails.bind(this),is_open:this.state.show_skill_details}):null,this.state.show_train_skill&&this.state.skill!==null?t.jsx(rh,{is_open:this.state.show_train_skill,manage_modal:this.manageTrainSkill.bind(this),skill:this.state.skill,set_success_message:this.setSuccessMessage.bind(this),update_skills:this.props.update_skills,character_id:this.props.character_id}):null]})}}class Vi extends c.Component{constructor(e){super(e)}isMaxLevel(){return this.props.passive.current_level===this.props.passive.max_level}render(){return t.jsxs("div",{children:[t.jsx("button",{onClick:()=>this.props.show_passive_modal(this.props.passive),disabled:this.props.is_automation_running,children:t.jsxs("h4",{className:$({"text-red-500 dark:text-red-400":this.props.passive.parent_skill_id!==null&&this.props.passive.is_locked,"text-blue-500 dark:text-blue-400":this.props.passive.parent_skill_id===null,"text-green-700 dark:text-green-600":this.props.passive.current_level===this.props.passive.max_level}),children:[t.jsx("i",{className:$("ra ra-wooden-sign",{hidden:this.props.passive.quest_name===null||this.props.passive.is_quest_complete,"text-yellow-500 dark:text-yellow-400":this.props.passive.quest_name!==null&&!this.props.passive.is_quest_complete})})," ",this.props.passive.name]})}),t.jsxs("p",{className:"mt-3",children:["Level: ",this.props.passive.current_level,"/",this.props.passive.max_level]}),this.isMaxLevel()?t.jsx("p",{className:"text-green-700 dark:text-green-600 mt-3",children:"Skill is maxed out!"}):t.jsxs("p",{className:"mt-3",children:["Hours till next: ",this.props.passive.hours_to_next]})]})}}class lh extends c.Component{constructor(e){super(e),this.state={loading:!1,error_message:""}}trainSkill(){this.setState({loading:!0},()=>{new g().setRoute("train/passive/"+this.props.skill.id+"/"+this.props.character_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.manage_success_message(e.data.message),this.props.update_passives(e.data.kingdom_passives,e.data.passive_training),this.props.manage_modal()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})})}cancelTrainingSkill(){this.setState({loading:!0},()=>{new g().setRoute("stop-training/passive/"+this.props.skill.id+"/"+this.props.character_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.manage_success_message(e.data.message),this.props.update_passives(e.data.kingdom_passives),this.props.manage_modal()})},e=>{})})}isMaxed(){return this.props.skill.current_level===this.props.skill.max_level}isTraining(){return this.props.skill.started_at!==null}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.skill.name,primary_button_disabled:this.state.loading,secondary_actions:{secondary_button_disabled:this.isMaxed()||this.props.skill.is_locked||this.state.loading||this.state.is_dead,secondary_button_label:this.isTraining()?"Stop Training":"Train",handle_action:this.isTraining()?this.cancelTrainingSkill.bind(this):this.trainSkill.bind(this)},children:[t.jsx("p",{className:"mt-4 mb-4",children:this.props.skill.passive_skill.description}),this.props.is_dead?t.jsx("p",{className:"mb-4 text-red-700 dark:text-red-500",children:"No no child! You dead! You ain't training nothing, till you head to the Game tab and click revive."}):null,this.props.skill.is_locked&&this.props.skill.passive_skill.unlocks_at_level!==null?t.jsxs("p",{className:"mb-4 text-orange-700 dark:text-orange-400",children:["This skill requires it's parent to be trained to be able to train this skill. This skill will unlock at (parent) level: ",this.props.skill.passive_skill.unlocks_at_level]}):null,this.props.skill.quest_name!==null&&!this.props.skill.is_quest_complete?t.jsxs("p",{className:"mb-4 text-orange-700 dark:text-orange-400",children:['You must complete the quest: "',this.props.skill.quest_name,'" before you can unlock this passive.']}):null,this.isMaxed()?t.jsx("p",{className:"mb-4 text-green-600 dark:text-green-500",children:"This skill has been maxed out and cannot be trained any higher."}):t.jsxs(o.Fragment,{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Level"}),t.jsxs("dd",{children:[this.props.skill.current_level," / ",this.props.skill.max_level]}),t.jsx("dt",{children:"Hours till next level:"}),t.jsx("dd",{children:this.props.skill.hours_to_next})]}),t.jsxs("p",{className:"mt-4 mb-4",children:[t.jsx("strong",{children:"Caution:"})," Canceling this skill before it is done training, will result in you having to start the progress all over again. ",t.jsx("strong",{children:"We do not take into account, time elapsed when canceling"}),"."]})]}),this.state.loading?t.jsx(D,{}):null,this.state.error_message!==""?t.jsx(z,{additional_css:"mt-4",children:this.state.error_message}):null]})}}class ch extends c.Component{constructor(e){super(e),this.state={show_training_modal:!1,skill:null}}buildNodes(e){let s=[];return e.children.length>0&&(s=e.children.map(i=>t.jsx(pa,{label:t.jsx(Vi,{passive:i,show_passive_modal:this.showTrainingModal.bind(this),is_automation_running:this.props.is_automation_running}),children:this.buildNodes(i)}))),s}showTrainingModal(e){this.setState({show_training_modal:!this.state.show_training_modal,skill:typeof e>"u"?null:e})}render(){return t.jsxs("div",{className:"overflow-x-auto overflow-y-hidden max-w-[300px] sm:max-w-[600px] md:max-w-[100%]",children:[t.jsx(gs,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",label:t.jsx(Vi,{passive:this.props.passives,show_passive_modal:this.showTrainingModal.bind(this),is_automation_running:this.props.is_automation_running}),children:this.buildNodes(this.props.passives)}),this.state.show_training_modal&&this.state.skill!==null?t.jsx(lh,{is_open:this.state.show_training_modal,manage_modal:this.showTrainingModal.bind(this),skill:this.state.skill,manage_success_message:this.props.manage_success_message,update_passives:this.props.update_passives,character_id:this.props.character_id,is_dead:this.props.is_dead}):null]})}}class dh extends c.Component{constructor(e){super(e),this.state={loading:!0,kingdom_passives:[],success_message:null,skill_in_training:null}}componentDidMount(){new g().setRoute("character/kingdom-passives/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({loading:!1,kingdom_passives:e.data.kingdom_passives,skill_in_training:e.data.passive_training})},e=>{})}manageSuccessMessage(e){this.setState({success_message:e})}closeSuccessAlert(){this.setState({success_message:null})}updatePassives(e,s){this.setState({kingdom_passives:e,skill_in_training:s})}findSkillInTraining(e){if(!this.updatePassiveTrainingState(e)&&e.children.length>0)for(let s=0;s<e.children.length;s++){const i=e.children[s];if(i.children.length>0&&this.findSkillInTraining(i),this.updatePassiveTrainingState(i))return}}updatePassiveTrainingState(e){return e.started_at!==null?(this.setState({skill_in_training:e}),!0):(this.setState({skill_in_training:null}),!1)}getTimeLeftInSeconds(){if(this.state.skill_in_training!==null){const e=Ye.now(),i=Ye.fromISO(this.state.skill_in_training.completed_at).diff(e,["seconds"]).toObject();return i.hasOwnProperty("seconds")&&typeof i.seconds<"u"?i.seconds:0}return 0}render(){return t.jsx(o.Fragment,{children:this.state.loading?t.jsx("div",{className:"relative p-10",children:t.jsx(Fe,{})}):t.jsxs("div",{children:[this.state.success_message!==null?t.jsx("div",{className:"mb-4",children:t.jsx(je,{close_alert:this.closeSuccessAlert.bind(this),children:this.state.success_message})}):null,t.jsx("div",{className:"mb-4",children:t.jsx(Ce,{children:"Click The skill name for additional actions. The timer will show below the tree when a skill is in progress."})}),this.props.is_automation_running?t.jsx("div",{className:"mb-4",children:t.jsx(rt,{children:"Automation is running. You cannot manage your passive skills."})}):null,t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),this.state.skill_in_training!=null?t.jsx("div",{className:"my-4",children:t.jsx(De,{time_out_label:"Skill In Training: "+this.state.skill_in_training.name,time_remaining:this.getTimeLeftInSeconds()})}):null,t.jsx(ch,{passives:this.state.kingdom_passives[0],manage_success_message:this.manageSuccessMessage.bind(this),update_passives:this.updatePassives.bind(this),character_id:this.props.character_id,is_dead:this.props.is_dead,is_automation_running:this.props.is_automation_running})]})})}}class hh extends c.Component{constructor(e){super(e),this.state={show_skill_details:!1,skill:null}}manageSkillDetails(e){this.setState({show_skill_details:!this.state.show_skill_details,skill:typeof e<"u"?e:null})}buildColumns(){return[{name:"Name",selector:e=>e.name,sortable:!0,cell:e=>t.jsx("span",{className:"m-auto",children:t.jsx("button",{onClick:()=>this.manageSkillDetails(e),className:"underline",children:e.name})},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"Level",selector:e=>e.level,sortable:!0,cell:e=>t.jsxs("span",{children:[e.level,"/",e.max_level]},e.id+"-"+(Math.random()+1).toString(36).substring(7))},{name:"XP",selector:e=>e.xp,sortable:!0,cell:e=>t.jsxs("span",{children:[e.xp,"/",e.xp_max]},e.id+"-"+(Math.random()+1).toString(36).substring(7))}]}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mb-4",children:t.jsx(Ce,{children:"This section will not update in real time."})}),t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{columns:this.buildColumns(),data:this.props.crafting_skills,dark_table:this.props.dark_table})}),this.state.show_skill_details&&this.state.skill!==null?t.jsx(er,{skill:this.state.skill,manage_modal:this.manageSkillDetails.bind(this),is_open:this.state.show_skill_details}):null]})}}class uh extends c.Component{constructor(e){super(e),this.tabs=[{key:"skills",name:"Skills"},{key:"crafting",name:"Crafting Skills"},{key:"kingdom-passives",name:"Kingdom Passives"}],this.state={loading:!0,dark_tables:!1,skills:null},this.updateCharacterSkills=Echo.private("update-skill-"+this.props.user_id)}componentDidMount(){zr(this),this.props.finished_loading&&new g().setRoute("character/skills/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({skills:e.data,loading:!1})},e=>{console.error(e)}),this.updateCharacterSkills.listen("Game.Skills.Events.UpdateCharacterSkills",e=>{let s=JSON.parse(JSON.stringify(this.state.skills));e.trainingSkills.length>0&&(s.training_skills=e.trainingSkills),e.craftingSkills.length>0&&(s.crafting_skills=e.craftingSkills),this.setState({skills:s})})}updateSkills(e){if(typeof e<"u"){let s=JSON.parse(JSON.stringify(this.state.skills));const i=Object.keys(e);s[i[0]]=e[i[0]],this.setState({skills:s})}}render(){return this.state.loading||this.state.skills===null?t.jsx("div",{className:"my-4",children:t.jsx(Fe,{})}):t.jsxs(Be,{tabs:this.tabs,full_width:!0,children:[t.jsx(H,{children:t.jsx(oh,{trainable_skills:this.state.skills.training_skills,dark_table:this.state.dark_tables,is_dead:this.props.is_dead,update_skills:this.updateSkills.bind(this),character_id:this.props.character_id,is_automation_running:this.props.is_automation_running})},"skills"),t.jsx(H,{children:t.jsx(hh,{crafting_skills:this.state.skills.crafting_skills,dark_table:this.state.dark_tables})},"crafting"),t.jsx(H,{children:t.jsx(dh,{is_dead:this.props.is_dead,character_id:this.props.character_id,is_automation_running:this.props.is_automation_running})},"kingdom-passives")]})}}class mh extends c.Component{constructor(e){super(e),this.state={loading:!0,gem_details:null}}componentDidMount(){new g().setRoute("character/"+this.props.character_id+"/gem-details/"+this.props.slot_id).doAjaxCall("get",e=>{this.setState({loading:!1,gem_details:e.data})},e=>{console.error(e)})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.title,children:this.state.loading?t.jsx(D,{}):t.jsx(Wr,{gem:this.state.gem_details})})}}class Xi extends c.Component{constructor(e){super(e)}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.title,primary_button_disabled:this.props.loading,secondary_actions:{secondary_button_disabled:this.props.loading,secondary_button_label:"Yes. I understand.",handle_action:this.props.do_action.bind(this)},children:[this.props.children,this.props.loading?t.jsx(D,{}):null]})}}class tr extends c.Component{constructor(e){super(e),this.state={viewGem:!1,slot_id:0,gem_slots:[],view_sell_all:!1,view_sell:!1,gem_to_sell:{},is_selling:!1,success_message:null}}componentDidMount(){new g().setRoute("character/"+this.props.character_id+"/gem-bag").doAjaxCall("get",e=>{this.setState({gem_slots:e.data.gem_slots})},e=>{console.error(e)})}showSellConfirmation(e){this.setState({gem_to_sell:this.state.gem_slots.find(s=>s.id===e),slot_id:e,view_sell:!0})}showSellAllConfirmation(){this.setState({view_sell_all:!0})}sellGem(){this.setState({is_selling:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/sell-gem/"+this.state.slot_id).doAjaxCall("post",e=>{this.setState({gem_to_sell:{},slot_id:0,view_sell:!1,gem_slots:e.data.gems,success_message:e.data.message,is_selling:!1})},e=>{this.setState({gem_to_sell:{},slot_id:0,view_sell:!1,is_selling:!1}),console.error(e)})})}sellAllGems(){this.setState({is_selling:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/sell-all-gems").doAjaxCall("post",e=>{this.setState({view_sell_all:!1,gem_slots:e.data.gems,success_message:e.data.message,is_selling:!1})},e=>{this.setState({view_sell_all:!1,is_selling:!1}),console.error(e)})})}viewItem(e){this.setState({view_gem:!0,slot_id:e.id})}closeViewGem(){this.setState({view_gem:!1,slot_id:0})}gemActions(e){return t.jsx(Y,{button_label:"Sell",on_click:()=>this.showSellConfirmation(e.id)})}buildGemDialogueTitle(e){let s=this.state.gem_slots.filter(i=>i.id===e);return s.length>0&&(s=s[0]),t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:s.name})}render(){return t.jsxs(o.Fragment,{children:[t.jsx(Ce,{additional_css:"mt-4 mb-4",children:"Click the item name to get additional actions."}),t.jsx(Y,{button_label:"Sell all Gems",on_click:this.showSellAllConfirmation.bind(this),additional_css:"my-3"}),this.state.success_message!==null?t.jsx(je,{additional_css:"my-4",children:this.state.success_message}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.state.gem_slots,columns:ph(this,this.viewItem.bind(this)),dark_table:this.props.dark_table})}),this.state.view_gem?t.jsx(mh,{slot_id:this.state.slot_id,is_open:this.state.view_gem,title:this.buildGemDialogueTitle(this.state.slot_id),character_id:this.props.character_id,manage_modal:this.closeViewGem.bind(this)}):null,this.state.view_sell?t.jsxs(Xi,{is_open:this.state.view_sell,manage_modal:()=>{this.setState({slot_id:0,view_sell:!1,gem_to_sell:{}})},title:t.jsxs("span",{children:["Selling: ",t.jsxs("span",{className:"text-lime-600 dark:text-lime-500",children:[" ",this.state.gem_to_sell.name," "]})," (Tier: ",this.state.gem_to_sell.tier,")"]}),loading:this.state.is_selling,do_action:this.sellGem.bind(this),children:[t.jsxs("p",{className:"my-4",children:[t.jsx("strong",{children:"Are you sure?"})," By selling this gem, you get 15% of the currencies required to make a gem of their tier back."]}),t.jsx("p",{className:"my-4",children:t.jsx("strong",{children:"This action cannot be undone."})})]}):null,this.state.view_sell_all?t.jsxs(Xi,{is_open:this.state.view_sell_all,manage_modal:()=>{this.setState({view_sell_all:!1})},title:"Sell All Gems",loading:this.state.is_selling,do_action:this.sellAllGems.bind(this),children:[t.jsxs("p",{className:"my-4",children:[t.jsx("strong",{children:"Are you sure?"})," By selling all gems, you get 15% of the currencies required to make a gem of their tier back."]}),t.jsx("p",{className:"my-4",children:t.jsx("strong",{children:"This action cannot be undone."})})]}):null]})}}class sr extends c.Component{constructor(e){super(e)}viewItem(){if(typeof this.props.on_click<"u")return this.props.on_click(this.props.item)}render(){return t.jsx("button",{className:$({"text-lime-600 dark:text-lime-500":this.props.item instanceof tr},{"text-artifact-colors-800 dark:text-artifact-colors-200":this.props.item.type==="artifact"&&!this.props.item.is_mythic},{"text-red-700 dark:text-red-400":this.props.item.type==="trinket"&&!this.props.item.is_mythic},{"text-green-700 dark:text-green-600":this.props.item.is_unique&&this.props.item.type!=="trinket"&&!this.props.item.is_mythic},{"text-sky-700 dark:text-sky-300":this.props.item.has_holy_stacks_applied>0&&!this.props.item.is_unique&&this.props.item.type!=="trinket"&&!this.props.item.is_mythic},{"text-orange-400 dark:text-orange-300":this.props.item.type==="quest"&&!this.props.item.is_unique&&!this.props.item.is_mythic},{"text-pink-500 dark:text-pink-300":this.props.item.type==="alchemy"&&!this.props.item.is_unique&&!this.props.item.is_mythic},{"text-gray-600 dark:text-gray-300":this.props.item.attached_affixes_count===0&&!this.props.item.is_unique&&this.props.item.type!=="alchemy"&&this.props.item.type!=="quest"&&this.props.item.has_holy_stacks_applied===0&&this.props.item.type!=="trinket"&&!this.props.item.is_mythic&&this.props.item.type!=="artifact"},{"text-blue-500":this.props.item.attached_affixes_count===1&&!this.props.item.is_unique&&this.props.item.type!=="alchemy"&&this.props.item.type!=="quest"&&this.props.item.has_holy_stacks_applied===0&&this.props.item.type!=="trinket"&&!this.props.item.is_mythic},{"text-fuchsia-800 dark:text-fuchsia-300":this.props.item.attached_affixes_count===2&&!this.props.item.is_unique&&this.props.item.type!=="alchemy"&&this.props.item.type!=="quest"&&this.props.item.has_holy_stacks_applied===0&&this.props.item.type!=="trinket"&&!this.props.item.is_mythic},{"text-amber-600 dark:text-amber-500":this.props.item.is_mythic}),onClick:()=>this.viewItem(),children:this.props.item.item_name})}}class ei extends c.Component{constructor(e){super(e)}render(){return t.jsx("button",{className:"hover:text-blue-500 text-blue-700 dark:text-blue-500 dark:hover:text-blue-400 disabled:text-blue-400 dark:disabled:bg-blue-400 disabled:line-through focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-200 dark:focus-visible:ring-white focus-visible:ring-opacity-75 "+this.props.additional_css,onClick:this.props.on_click,disabled:this.props.disabled,children:this.props.button_label})}}const ti=(a,e,s,i)=>{const n=[{name:"Name",selector:r=>r.item_name,cell:r=>t.jsx("span",{className:"m-auto",children:t.jsx(sr,{item:r,on_click:e})})},{name:"Type",selector:r=>r.type,sortable:!0},{name:"Attack",selector:r=>r.attack,sortable:!0,format:r=>u(r.attack)},{name:"AC",selector:r=>r.ac,sortable:!0,format:r=>u(r.ac)},{name:"Holy Stacks",selector:r=>r.holy_stacks,sortable:!0,format:r=>r.has_holy_stacks_applied+"/"+r.holy_stacks}];return typeof i<"u"&&i==="equipped"&&n.push({name:"Position",selector:r=>"",cell:r=>r.position}),typeof s<"u"&&n.push({name:"Item Skills",selector:r=>r.item_skill,cell:r=>t.jsx("span",{children:r.item_skill_progressions.length>0?t.jsx(ei,{button_label:"Manage Skills",on_click:()=>s(r.slot_id,r.item_skills,r.item_skill_progressions)}):"N/A"})}),typeof a<"u"&&n.push({name:"Actions",selector:r=>"",cell:r=>a.actions(r)}),n},ar=(a,e,s)=>{const i=[{name:"Name",selector:n=>n.item_name,cell:n=>t.jsx(sr,{item:n,on_click:e})},{name:"Description",selector:n=>n.description,cell:n=>n.description}];return s&&i.push({name:"Can Stack",selector:n=>"",cell:n=>n.can_stack?"Yes":"No"}),typeof a<"u"&&i.push({name:"Actions",selector:n=>"",cell:n=>a.actions(n)}),i},ph=(a,e)=>{const s=[{name:"Name",selector:i=>i.name,cell:i=>t.jsx("button",{className:"text-lime-600 dark:text-lime-500",onClick:()=>e(i),children:i.name})},{name:"Tier",selector:i=>i.tier,cell:i=>i.tier},{name:"Amount",selector:i=>i.amount,cell:i=>i.amount},{name:"Atoned To",selector:i=>i.element_atoned_to,cell:i=>i.element_atoned_to},{name:"Atoned Amount",selector:i=>i.element_atoned_to_amount,cell:i=>(i.element_atoned_to_amount*100).toFixed(2)+"%"},{name:"Strong Against",selector:i=>i.strong_against,cell:i=>i.strong_against},{name:"Weak Against",selector:i=>i.weak_against,cell:i=>i.weak_against}];return typeof a<"u"&&s.push({name:"Actions",selector:i=>"",cell:i=>a.gemActions(i)}),s};class _h extends c.Component{constructor(e){super(e),this.state={data:this.props.equipped_items,loading:!1,search_string:"",success_message:null,error_message:null,item_id:null,view_item:!1}}componentDidUpdate(e,s,i){!de.isEqual(s.data,this.props.equipped_items)&&this.state.search_string.length===0&&this.setState({data:this.props.equipped_items})}viewItem(e){this.setState({item_id:typeof e<"u"?e.item_id:null,view_item:!this.state.view_item})}search(e){const s=e.target.value;this.setState({data:this.props.equipped_items.filter(i=>i.item_name.includes(s)||i.type.includes(s)),search_string:s})}actions(e){return t.jsx(ce,{button_label:"Remove",on_click:()=>this.unequip(e.slot_id),disabled:this.props.is_dead||this.props.is_automation_running||this.state.loading})}assignToSet(e){this.setState({loading:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/inventory/save-equipped-as-set").setParameters({move_to_set:this.props.sets[e].set_id}).doAjaxCall("post",s=>{this.setState({loading:!1,success_message:s.data.message},()=>{this.props.update_inventory(s.data.inventory)})},s=>{})})}hasEmptySet(){return this.props.is_set_equipped||this.state.data.length===0?!1:Object.keys(this.props.sets).filter(s=>this.props.sets[s].items.length===0).length>0}buildMenuItems(){let e=Object.keys(this.props.sets);return e=e.filter(s=>this.props.sets[s].items.length===0),e.map(s=>({name:s,icon_class:"ra ra-crossed-swords",on_click:()=>this.assignToSet(s)}))}manageSuccessMessage(){this.setState({success_message:null})}manageErrorMessage(){this.setState({error_message:null})}unequipAll(){this.setState({loading:!0,success_message:null,error_message:null},()=>{this.props.disable_tabs(),new g().setRoute("character/"+this.props.character_id+"/inventory/unequip-all").setParameters({is_set_equipped:this.props.is_set_equipped}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message},()=>{this.props.update_inventory(e.data.inventory),this.props.disable_tabs()})},e=>{const s=e.response;s&&this.setState({loading:!1,error_message:s.data.message},()=>{this.props.disable_tabs()})})})}unequip(e){this.setState({loading:!0,success_message:null,error_message:null},()=>{new g().setRoute("character/"+this.props.character_id+"/inventory/unequip").setParameters({inventory_set_equipped:this.props.is_set_equipped,item_to_remove:e}).doAjaxCall("post",s=>{this.setState({loading:!1,success_message:s.data.message},()=>{this.props.update_inventory(s.data.inventory)})},s=>{const i=s.response;i&&this.setState({loading:!1,error_message:i.data.message},()=>{this.props.disable_tabs()})})})}render(){return t.jsxs(o.Fragment,{children:[this.state.success_message!==null?t.jsx(je,{additional_css:"mb-4 mt-4",close_alert:this.manageSuccessMessage.bind(this),children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mb-4 mt-4",close_alert:this.manageErrorMessage.bind(this),children:this.state.error_message}):null,t.jsxs("div",{className:"mb-5",children:[t.jsxs("div",{className:"flex flex-row flex-wrap items-center",children:[t.jsx("div",{children:t.jsx("label",{className:"label block mb-2 mr-3",htmlFor:"search",children:"Search"})}),t.jsx("div",{children:t.jsx("input",{type:"text",name:"search",className:"form-control",onChange:this.search.bind(this),placeholder:"search"})}),t.jsx("div",{className:"mt-2 sm:mt-0 sm:ml-2",children:t.jsx(ce,{button_label:"Unequip All",on_click:this.unequipAll.bind(this),disabled:this.props.is_dead||this.state.data.length===0||this.props.is_automation_running||this.state.loading})}),this.hasEmptySet()?t.jsx("div",{className:"ml-2",children:t.jsx(kt,{menu_items:this.buildMenuItems(),button_title:"Assign to Set",disabled:this.props.is_dead||this.props.is_automation_running||this.state.loading})}):null,this.props.is_set_equipped?t.jsx("div",{className:"ml-2 text-green-700 dark:text-green-500",children:"Set Equipped."}):null]}),this.state.loading?t.jsx(D,{show_label:!0,label:"Unequipping items and recalculating your stats (this can take a few seconds) ..."}):null]}),this.state.view_item&&this.state.item_id!==null?t.jsx(Ka,{character_id:this.props.character_id,item_id:this.state.item_id,is_open:this.state.view_item,manage_modal:this.viewItem.bind(this)}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{data:this.state.data,columns:ti(this,this.viewItem.bind(this),this.props.manage_skills,"equipped"),dark_table:this.props.dark_tables})})]})}}class gh extends c.Component{constructor(e){super(e),this.state={new_set_name:this.props.current_set_name,error_message:null}}updateName(e){const s=e.target.value;s.length>20?this.setState({error_message:"Name must be shorter then 20 characters (including spaces)",new_set_name:s}):this.setState({new_set_name:s,error_message:null})}renameSet(){this.props.rename_set(this.state.new_set_name),this.props.manage_modal()}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.title,secondary_actions:{secondary_button_disabled:this.state.error_message!==null,secondary_button_label:"Rename",handle_action:()=>this.renameSet()},children:[this.state.error_message!==null?t.jsx(z,{additional_css:"mt-4 mb-4",children:this.state.error_message}):null,t.jsxs("div",{className:"mb-5",children:[t.jsx("label",{className:"label block mb-2",htmlFor:"set-name",children:"Set Name"}),t.jsx("input",{id:"set-name",type:"text",className:"form-control",name:"set-name",value:this.state.new_set_name,autoFocus:!0,onChange:this.updateName.bind(this)}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Names can only be 20 characters long (including spaces)"})]})]})}}class fh extends c.Component{constructor(e){super(e),this.state={data:[],drop_down_labels:[],selected_set:null,selected_set_index:null,loading:!1,success_message:null,show_rename_set:!1,search_string:"",item_id:null,view_item:!1,loading_label:null,show_loading_label:!1,error_message:null}}componentDidMount(){this.setSetData(this.props.sets)}componentDidUpdate(e,s,i){this.state.selected_set!==null&&this.state.search_string.length===0&&(de.isEqual(this.props.sets[this.state.selected_set].items,this.state.data)||this.setState({data:this.props.sets[this.state.selected_set].items}))}setSetData(e){const s=Object.keys(e),i=e[s[0]].items;let n=this.state.selected_set_index===null?0:this.state.selected_set_index,r="";if(this.state.selected_set===null){r=s[0],n=0;for(let l=0;l<s.length;l++)e[s[l]].equipped&&(n=s.findIndex(p=>p===s[l]),r=s[n])}else r=s[n];this.setState({data:i,drop_down_labels:s,selected_set:r,selected_set_index:n})}actions(e){return t.jsx(ce,{button_label:"Remove",on_click:()=>this.removeFromSet(e.slot_id),disabled:this.buttonsDisabled()})}emptySet(){const e=this.props.sets[this.state.selected_set].set_id;this.setState({loading:!0,error_message:null,success_message:null},()=>{new g().setRoute("character/"+this.props.character_id+"/inventory-set/"+e+"/remove-all").doAjaxCall("post",s=>{this.setState({loading:!1,success_message:s.data.message},()=>{this.props.update_inventory(s.data.inventory)})},s=>{if(this.setState({loading:!1}),typeof s.response<"u"){const i=s.response;this.setState({error_message:i.data.message})}})})}equipSet(){let e=this.props.savable_sets.filter(s=>s.name===this.state.selected_set);e.length>0&&(e=e[0].id),this.setState({loading:!0,show_loading_label:!0,loading_label:"Equipping set and recalculating your stats (this can take a few seconds) ...",error_message:null,success_message:null},()=>{this.props.disable_tabs(),new g().setRoute("character/"+this.props.character_id+"/inventory-set/equip/"+e).doAjaxCall("post",s=>{this.setState({loading:!1,success_message:s.data.message},()=>{this.props.update_inventory(s.data.inventory),this.props.disable_tabs()})},s=>{if(this.setState({loading:!1}),typeof s.response<"u"){const i=s.response;this.setState({error_message:i.data.message})}})})}removeFromSet(e){if(this.state.selected_set!==null){const s=this.props.sets[this.state.selected_set].set_id;this.setState({loading:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/inventory-set/remove").setParameters({inventory_set_id:s,slot_id:e}).doAjaxCall("post",i=>{this.setState({loading:!1,success_message:i.data.message,search_string:""},()=>{this.props.update_inventory(i.data.inventory)})},i=>{if(this.setState({loading:!1}),typeof i.response<"u"){const n=i.response;this.setState({error_message:n.data.message})}})})}}renameSet(e){const i=Object.keys(this.props.sets).filter(r=>r===this.state.selected_set),n=this.props.sets[i[0]].set_id;this.setState({loading:!0,error_message:null,success_message:null},()=>{new g().setRoute("character/"+this.props.character_id+"/inventory-set/rename-set").setParameters({set_id:n,set_name:e}).doAjaxCall("post",r=>{this.setState({loading:!1,success_message:r.data.message},()=>{this.setSetData(r.data.inventory.sets),this.props.update_inventory(r.data.inventory)})},r=>{if(typeof r.response<"u"){const l=r.response;this.setState({loading:!1,error_message:l.data.message})}})})}switchTable(e){const s=this.props.sets[e].items,n=Object.keys(this.props.sets).indexOf(e,0);this.setState({data:s,selected_set:e,selected_set_index:n!==-1?n:0})}buildMenuItems(){return this.state.drop_down_labels.map(e=>({name:e,icon_class:$("ra ra-crossed-swords",{"text-yellow-600":this.cannotEquipSet(e)}),on_click:()=>this.switchTable(e)}))}manageRenameSet(){this.setState({show_rename_set:!this.state.show_rename_set})}buildActionsDropDown(){const e=[];return e.push({name:"Rename set",icon_class:"fas fa-edit",on_click:()=>this.manageRenameSet()}),this.state.selected_set!==null&&this.state.selected_set!==this.props.set_name_equipped&&this.props.sets[this.state.selected_set].items.length>0&&(e.push({name:"Empty set",icon_class:"fas fa-eraser",on_click:()=>this.emptySet()}),!this.cannotEquipSet()&&!this.props.is_automation_running&&e.push({name:"Equip set",icon_class:"ra ra-muscle-fat",on_click:()=>this.equipSet()})),e}search(e){const s=e.target.value,i=this.props.sets[this.state.selected_set].items.filter(n=>n.item_name.includes(s)||n.type.includes(s));this.setState({data:i,search_string:s})}buttonsDisabled(){return this.state.selected_set!==null?this.props.sets[this.state.selected_set].equipped||this.props.is_dead||this.props.is_automation_running||this.state.loading:!0}cannotEquipSet(e){return this.state.selected_set!==null?typeof e<"u"?!this.props.sets[e].equippable:!this.props.sets[this.state.selected_set].equippable:!1}clearSuccessMessage(){this.setState({success_message:null})}clearErrorMessage(){this.setState({error_message:null})}buildSetTitle(){return this.state.selected_set!==null?"Viewing: "+this.state.selected_set+".":null}viewItem(e){this.setState({item_id:typeof e<"u"?e.item_id:null,view_item:!this.state.view_item})}render(){return t.jsxs(o.Fragment,{children:[this.state.success_message!==null?t.jsx(je,{close_alert:this.clearSuccessMessage.bind(this),additional_css:"mt-4 mb-4",children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{close_alert:this.clearErrorMessage.bind(this),additional_css:"mt-4 mb-4",children:this.state.error_message}):null,this.cannotEquipSet()?t.jsxs(rt,{additional_css:"mb-4",children:["Cannot equip set because it violates the"," ",t.jsxs("a",{href:"/information/equipment-sets",target:"_blank",children:["set ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","rules. You can still treat this set like a stash tab."]}):null,this.buildSetTitle()!==null?t.jsx("div",{children:t.jsx("h4",{className:"text-orange-500 dark:text-orange-400",children:this.buildSetTitle()})}):null,t.jsxs("div",{className:"flex flex-row flex-wrap items-center",children:[t.jsx("div",{children:t.jsx(kt,{menu_items:this.buildMenuItems(),button_title:"Sets",selected_name:this.state.selected_set,secondary_selected:this.props.set_name_equipped,disabled:this.props.is_dead||this.state.loading})}),t.jsx("div",{className:"ml-2",children:t.jsx(kt,{menu_items:this.buildActionsDropDown(),button_title:"Actions",disabled:this.props.is_dead||this.state.loading})}),t.jsx("div",{className:"sm:ml-4 md:ml-0 my-4 md:my-0 md:absolute md:right-[10px]",children:t.jsx("input",{type:"text",name:"search",className:"form-control",onChange:this.search.bind(this),placeholder:"Search",value:this.state.search_string})})]}),this.state.loading?t.jsx(D,{show_label:this.state.show_loading_label,label:this.state.loading_label}):null,this.state.show_rename_set&&this.state.selected_set!==null?t.jsx(gh,{is_open:this.state.show_rename_set,manage_modal:this.manageRenameSet.bind(this),title:"Rename Set",current_set_name:this.state.selected_set,rename_set:this.renameSet.bind(this)}):null,this.state.view_item&&this.state.item_id!==null?t.jsx(Ka,{character_id:this.props.character_id,item_id:this.state.item_id,is_open:this.state.view_item,manage_modal:this.viewItem.bind(this)}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{data:this.state.data,columns:ti(this,this.viewItem.bind(this),this.props.manage_skills),dark_table:this.props.dark_tables})})]})}}class xh extends c.Component{constructor(e){super(e),this.state={data:this.props.quest_items,item_id:null,view_item:!1}}search(e){const s=e.target.value;this.setState({data:this.props.quest_items.filter(i=>i.item_name.includes(s)||i.description.includes(s))})}viewItem(e){this.setState({item_id:typeof e<"u"?e.item_id:null,view_item:!this.state.view_item})}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mb-5",children:t.jsxs("div",{className:"flex flex-row flex-wrap items-center",children:[t.jsx("div",{children:t.jsx("label",{className:"label block mb-2 mr-3",htmlFor:"search",children:"Search"})}),t.jsx("div",{children:t.jsx("input",{type:"text",name:"search",className:"form-control",onChange:this.search.bind(this)})}),t.jsx("div",{className:"mt-2 sm:mt-0",children:t.jsxs("a",{href:"/information/quests",target:"_blank",className:"sm:ml-2",children:["Quests help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})}),t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{data:this.state.data,columns:ar(void 0,this.viewItem.bind(this)),dark_table:this.props.dark_table})}),this.state.view_item&&this.state.item_id!==null?t.jsx(Ka,{character_id:this.props.character_id,item_id:this.state.item_id,is_open:this.state.view_item,manage_modal:this.viewItem.bind(this)}):null]})}}class bh extends c.Component{constructor(e){super(e),this.tabs=[{key:"general",name:"General"},{key:"comparison",name:"Comparison"}],this.state={loading:!0,action_loading:!1,comparison_details:null,show_equip_modal:!1,show_move_modal:!1,show_sell_modal:!1,show_list_item_modal:!1,item_to_sell:null}}setStatusToLoading(){this.setState({action_loading:!this.state.action_loading})}componentDidMount(){new g().setRoute("character/"+this.props.character_id+"/inventory/comparison").setParameters({slot_id:this.props.slot_id,item_to_equip_type:this.props.item_type}).doAjaxCall("get",e=>{this.setState({loading:!1,comparison_details:e.data})},e=>{console.error(e)})}buildTitle(){return this.state.comparison_details===null?"Loading comparison data ...":t.jsx(Yr,{item:{name:this.state.comparison_details.itemToEquip.affix_name,type:this.state.comparison_details.itemToEquip.type,affix_count:this.state.comparison_details.itemToEquip.affix_count,is_unique:this.state.comparison_details.itemToEquip.is_unique,holy_stacks_applied:this.state.comparison_details.itemToEquip.holy_stacks_applied,is_mythic:this.state.comparison_details.itemToEquip.is_mythic}})}isLargeModal(){return this.state.comparison_details!==null?this.state.comparison_details.details.length===2:!1}isGridSize(e,s){switch(e){case 5:return s.affix_count===0&&s.holy_stacks_applied===0&&!s.is_unique;case 7:return s.affix_count>0||s.holy_stacks_applied>0||s.is_unique;default:return!1}}render(){return this.props.is_dead?t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:"You are dead",large_modal:!1,primary_button_disabled:!1,children:t.jsx("p",{className:"text-red-700 dark:text-red-400",children:"And you thought dead people could manage their inventory. Go to the game tab, click revive and live again."})}):t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.buildTitle(),large_modal:!0,primary_button_disabled:this.state.action_loading,children:this.state.loading||this.state.comparison_details===null?t.jsx("div",{className:"p-5 mb-2",children:t.jsx(Fe,{})}):t.jsx(Qr,{is_large_modal:this.isLargeModal(),is_grid_size:this.isGridSize.bind(this),comparison_details:this.state.comparison_details,set_action_loading:this.setStatusToLoading.bind(this),is_action_loading:this.state.action_loading,update_inventory:this.props.update_inventory,set_success_message:this.props.set_success_message,manage_modal:this.props.manage_modal,character_id:this.props.character_id,dark_charts:this.props.dark_charts,usable_sets:this.props.usable_sets,slot_id:this.props.slot_id,is_automation_running:this.props.is_automation_running})})}}class yh extends c.Component{constructor(e){super(e),this.state={view_comparison:!1,slot_id:0,item_type:""}}viewItem(e){this.setState({view_comparison:!0,slot_id:typeof e<"u"?e.slot_id:0,item_type:typeof e<"u"?e.type:""})}closeViewItem(){this.setState({view_comparison:!1,slot_id:0,item_type:""})}render(){return t.jsxs(o.Fragment,{children:[t.jsxs(Ce,{additional_css:"mt-4 mb-4",children:['Click the item name to get additional actions. This table only sometimes updates automatically, such as with mass disenchanting items. Players will find their inventory fills up with a lot of "colorful" items, you can learn more about that ',t.jsxs("a",{href:"/information/equipment-types",target:"_blank",children:["here. ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"!"]}),t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.props.inventory,columns:ti(void 0,this.viewItem.bind(this),this.props.manage_skills),dark_table:this.props.dark_table})}),this.state.view_comparison?t.jsx(bh,{is_open:this.state.view_comparison,manage_modal:this.closeViewItem.bind(this),title:"Comparison",slot_id:this.state.slot_id,item_type:this.state.item_type,character_id:this.props.character_id,update_inventory:this.props.update_inventory,usable_sets:this.props.usable_sets,set_success_message:this.props.set_success_message,dark_charts:this.props.dark_table,is_dead:this.props.is_dead,is_automation_running:this.props.is_automation_running}):null]})}}class jh extends c.Component{constructor(e){super(e),this.state={loading:!1,error_message:null}}useItem(){this.setState({loading:!0,error_message:null}),new g().setRoute("character/"+this.props.character_id+"/inventory/use-item/"+this.props.item.item_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.update_inventory(e.data.inventory),this.props.set_success_message(e.data.message),this.props.manage_modal()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:t.jsx("span",{className:"text-pink-500 dark:text-pink-300",children:this.props.item.item_name}),secondary_actions:{secondary_button_disabled:!1,secondary_button_label:"Use item",handle_action:()=>this.useItem()},children:t.jsxs("div",{className:"mb-5",children:[t.jsx(_n,{item:this.props.item}),this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]})})}}class Kt extends c.Component{constructor(e){super(e),this.state={loading:!1}}confirm(){this.setState({loading:!0},()=>{let e=new g().setRoute(this.props.url);this.props.ajax_params&&(e=e.setParameters(this.props.ajax_params)),e.doAjaxCall("post",s=>{this.setState({loading:!1},()=>{s.data.hasOwnProperty("inventory")&&this.props.update_inventory(s.data.inventory),this.props.set_success_message(s.data.message),this.props.manage_modal()})},s=>{})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.title,primary_button_disabled:this.state.loading,secondary_actions:{secondary_button_disabled:this.state.loading,secondary_button_label:"Yes. I understand.",handle_action:this.confirm.bind(this)},children:[this.props.children,this.state.loading?t.jsx(D,{}):null]})}}class vh extends c.Component{constructor(e){super(e),this.state={show_list_modal:!1,show_use_item_modal:!1,show_usable_details:!1,show_use_many:!1,show_destroy_item:!1,item_to_list:null,item_to_use:null,item_to_destroy_name:null,item_slot_id_to_delete:null}}manageUseItem(e){this.setState({show_use_item_modal:!this.state.show_use_item_modal,item_to_use:e})}list(e){var s;new g().setRoute("market-board/sell-item/"+this.props.character_id).setParameters({list_for:e,slot_id:(s=this.state.item_to_list)==null?void 0:s.slot_id}).doAjaxCall("post",i=>{this.setState({item_to_list:null},()=>{this.props.update_inventory(i.data.inventory),this.props.set_success_message(i.data.message)})},i=>{})}destroy(e){this.setState({show_destroy_item:!this.state.show_destroy_item,item_to_destroy_name:e.item_name,item_slot_id_to_delete:e.slot_id})}showDestroyConfirmation(){this.setState({show_destroy_item:!this.state.show_destroy_item,item_to_destroy_name:null,item_slot_id_to_delete:null})}manageList(e){this.setState({show_list_modal:!this.state.show_list_modal,item_to_list:typeof e<"u"?e:null})}actions(e){const s=[{name:"List",icon_class:"ra ra-wooden-sign",on_click:()=>this.manageList(e)},{name:"Destroy",icon_class:"ra ra-bubbling-potion",on_click:()=>this.destroy(e)}];return e.usable&&!e.damages_kingdoms&&s.push({name:"Use Item",icon_class:"ra ra-bubbling-potion",on_click:()=>this.manageUseItem(e)}),t.jsx(kt,{menu_items:s,button_title:"Actions",use_relative:!0})}manageViewItem(e){this.setState({show_usable_details:!this.state.show_usable_details,item_to_use:typeof e<"u"?e:null})}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-y-hidden",children:t.jsx(Ie,{data:this.props.usable_items,columns:ar(this,this.manageViewItem.bind(this),!0),dark_table:this.props.dark_table})}),this.state.show_destroy_item?t.jsx(Kt,{is_open:this.state.show_destroy_item,manage_modal:this.showDestroyConfirmation.bind(this),title:"Destroy "+this.state.item_to_destroy_name,url:"character/"+this.props.character_id+"/inventory/destroy-alchemy-item",ajax_params:{slot_id:this.state.item_slot_id_to_delete},update_inventory:this.props.update_inventory,set_success_message:this.props.set_success_message,children:t.jsx("p",{children:"Are you sure you want to do this? This action will destroy the selected item from your usable inventory. You cannot undo this action."})}):null,this.state.show_list_modal&&this.state.item_to_list!==null?t.jsx(Vr,{is_open:this.state.show_list_modal,manage_modal:this.manageList.bind(this),list_item:this.list.bind(this),item:this.state.item_to_list,dark_charts:this.props.dark_table}):null,this.state.show_use_item_modal&&this.state.item_to_use!==null?t.jsx(jh,{is_open:this.state.show_use_item_modal,manage_modal:this.manageUseItem.bind(this),item:this.state.item_to_use,update_inventory:this.props.update_inventory,set_success_message:this.props.set_success_message,character_id:this.props.character_id}):null,this.state.show_usable_details&&this.state.item_to_use!==null?t.jsx(Zn,{is_open:this.state.show_usable_details,manage_modal:this.manageViewItem.bind(this),item:this.state.item_to_use}):null]})}}class kh{constructor(e,s){this.itemsToUse=e,this.component=s}useAllItems(e){new g().setRoute("character/"+e+"/inventory/use-many-items").setParameters({items_to_use:this.itemsToUse}).doAjaxCall("post",s=>{this.component.setState({using_item:null,loading:!1},()=>{this.component.props.set_success_message("Used all selected items."),this.component.props.update_inventory(s.data.inventory),this.component.props.manage_modal()})},s=>{if(typeof s.response<"u"){const i=s.response;this.component.setState({loading:!1,error_message:i.data.message})}})}}class wh extends c.Component{constructor(e){super(e),this.state={loading:!1,selected_items:[],error_message:null,using_item:null,item_progress:0}}useManyItems(){this.setState({loading:!0,error_message:null},()=>{const e=this.props.items.filter(s=>this.state.selected_items.includes(s.slot_id)).map(s=>s.slot_id);new kh(e,this).useAllItems(this.props.character_id)})}setItemsToUse(e){e.length>10?this.setState({error_message:"You may only apply 10 boons."}):this.setState({error_message:null,selected_items:e.map(s=>s.value)})}buildItems(){return this.props.items.filter(e=>!e.damages_kingdoms&&e.usable&&e.can_stack).map(e=>({label:e.item_name+" Lasts for: "+e.lasts_for+" minutes",value:e.slot_id}))}defaultItem(){return this.state.selected_items.length===0?[]:this.props.items.filter(e=>this.state.selected_items.includes(e.slot_id)).map(e=>({label:e.item_name+" Lasts for: "+e.lasts_for+" minutes",value:e.slot_id}))}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:"Use many items",primary_button_disabled:this.state.loading,secondary_actions:{secondary_button_disabled:this.state.loading,secondary_button_label:"Use selected",handle_action:()=>this.useManyItems()},children:t.jsxs("div",{className:"mb-5",children:[t.jsx("p",{className:"mt-4 mb-4 text-sky-700 dark:text-sky-500",children:"You may select up to 10 boons to apply to your self. Only usable items will be listed below."}),t.jsx("p",{className:"mb-4",children:"Boons stack on to of each other, making applying multiple beneficial. When a character switches to a plane like Shadow Plane, Hell or Purgatory, we recalculate your stats based on plane stat reductions based off your surface level stats. The more boons you use, the more stats you have for harder planes of existence."}),t.jsx("p",{className:"mb-4",children:"Only items that can stack will be allowed to be selected."}),t.jsx(B,{onChange:this.setItemsToUse.bind(this),options:this.buildItems(),menuPosition:"absolute",menuPlacement:"bottom",isMulti:!0,styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultItem()}),this.state.loading?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(D,{})}):null]})})}}class Sh extends c.Component{constructor(e){super(e),this.state={table:"inventory",data:this.props.inventory,usable_items:this.props.usable_items,show_destroy_all:!1,show_disenchant_all:!1,show_sell_all:!1,show_use_many:!1,show_destroy_all_alchemy:!1,show_equip_best:!1,success_message:null,search_string:""}}componentDidUpdate(){!de.isEqual(this.state.data,this.props.inventory)&&this.state.search_string.length===0&&this.setState({data:this.props.inventory}),!de.isEqual(this.state.usable_items,this.props.usable_items)&&this.state.search_string.length===0&&this.setState({usable_items:this.props.usable_items})}setSuccessMessage(e){this.setState({success_message:e})}switchTable(e){this.setState({table:e})}search(e){const s=e.target.value;this.state.table==="Inventory"?this.setState({data:this.props.inventory.filter(i=>{const n=i.item_name.toLowerCase(),r=i.type.toLowerCase();if(n.includes(s.toLowerCase())||r.includes(s.toLowerCase()))return i}).filter(i=>i),search_string:s}):this.setState({usable_items:this.props.usable_items.filter(i=>{if(i.item_name.toLowerCase().includes(s.toLowerCase()))return i}).filter(i=>i),search_string:s})}handleEquipBest(){this.setState({show_equip_best:!this.state.show_equip_best})}manageDisenchantAll(){this.setState({show_disenchant_all:!this.state.show_disenchant_all})}manageDestroyAll(){this.setState({show_destroy_all:!this.state.show_destroy_all})}manageDestroyAllAlchemy(){this.setState({show_destroy_all_alchemy:!this.state.show_destroy_all_alchemy})}manageSellAll(){this.setState({show_sell_all:!this.state.show_sell_all})}manageUseManyItems(){this.setState({show_use_many:!this.state.show_use_many})}closeSuccess(){this.setState({success_message:null})}createActionsDropDown(){return this.state.table==="inventory"?[{name:"Destroy All",icon_class:"far fa-trash-alt",on_click:()=>this.manageDestroyAll()},{name:"Disenchant All",icon_class:"ra ra-fire",on_click:()=>this.manageDisenchantAll()},{name:"Sell All",icon_class:"far fa-money-bill-alt",on_click:()=>this.manageSellAll()}]:[{name:"Use many",icon_class:"ra ra-bottle-vapors",on_click:()=>this.manageUseManyItems()},{name:"Destroy All",icon_class:"far fa-trash-alt",on_click:()=>this.manageDestroyAllAlchemy()}]}isDropDownHidden(){return this.state.table==="inventory"?this.state.data.length===0:this.props.usable_items.length===0}updateInventory(e){this.setState({search_string:""},()=>{this.props.update_inventory(e)})}renderTables(){switch(this.state.table){case"inventory":return t.jsx(yh,{dark_table:this.props.dark_tables,character_id:this.props.character_id,inventory:this.state.data,is_dead:this.props.is_dead,update_inventory:this.updateInventory.bind(this),usable_sets:this.props.usable_sets,set_success_message:this.setSuccessMessage.bind(this),is_automation_running:this.props.is_automation_running,manage_skills:this.props.manage_skills});case"usable-items":return t.jsx(vh,{dark_table:this.props.dark_tables,character_id:this.props.character_id,usable_items:this.state.usable_items,is_dead:this.props.is_dead,update_inventory:this.updateInventory.bind(this),set_success_message:this.setSuccessMessage.bind(this),is_automation_running:this.props.is_automation_running});case"gems":return t.jsx(tr,{dark_table:this.props.dark_tables,character_id:this.props.character_id,is_dead:this.props.is_dead});default:return null}}render(){return t.jsxs(o.Fragment,{children:[this.state.success_message!==null?t.jsx(je,{close_alert:this.closeSuccess.bind(this),additional_css:"mt-4 mb-4",children:this.state.success_message}):null,t.jsxs("div",{className:"flex flex-row flex-wrap items-center",children:[t.jsx("div",{children:t.jsx(kt,{menu_items:[{name:"Inventory",icon_class:"fas fa-shopping-bag",on_click:()=>this.switchTable("inventory")},{name:"Usable",icon_class:"ra ra-bubbling-potion",on_click:()=>this.switchTable("usable-items")},{name:"Gem Bag",icon_class:"fas fa-gem",on_click:()=>this.switchTable("gems")}],button_title:"Type",selected_name:this.state.table,disabled:this.props.is_dead})}),t.jsx("div",{className:$("ml-2",{hidden:this.isDropDownHidden()}),children:t.jsx(kt,{menu_items:this.createActionsDropDown(),button_title:"Actions",selected_name:this.state.table,disabled:this.props.is_dead})}),t.jsx("div",{className:"sm:ml-4 md:ml-0 my-4 md:my-0 md:absolute md:right-[10px]",children:t.jsx("input",{type:"text",name:"search",className:"form-control",onChange:this.search.bind(this),placeholder:"Search",value:this.state.search_string})})]}),this.renderTables(),this.state.show_destroy_all?t.jsxs(Kt,{is_open:this.state.show_destroy_all,manage_modal:this.manageDestroyAll.bind(this),title:"Destroy all",url:"character/"+this.props.character_id+"/inventory/destroy-all",update_inventory:this.props.update_inventory,set_success_message:this.setSuccessMessage.bind(this),children:[t.jsx("p",{children:"Are you sure you want to do this? This action will destroy all items in your inventory. You cannot undo this action."}),t.jsx("p",{className:"mt-2",children:"Make sure you move any items you want to a set or equip the items you want, before destroying all."}),t.jsxs("p",{className:"mt-2",children:["It is advised that players do not destroy enchanted items (names with *'s) or uniques (green items), but instead sell them on the market or"," ",t.jsxs("a",{href:"/information/skill-information",target:"_blank",children:["disenchant"," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","them to make"," ",t.jsxs("a",{href:"/information/currencies",target:"_blank",children:["Gold Dust"," ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"."]})]}):null,this.state.show_destroy_all_alchemy?t.jsx(Kt,{is_open:this.state.show_destroy_all_alchemy,manage_modal:this.manageDestroyAllAlchemy.bind(this),title:"Destroy all Alchemy Items",url:"character/"+this.props.character_id+"/inventory/destroy-all-alchemy-items",update_inventory:this.props.update_inventory,set_success_message:this.setSuccessMessage.bind(this),children:t.jsx("p",{children:"Are you sure you want to do this? This action will destroy all (Alchemy) items in your inventory. You cannot undo this action."})}):null,this.state.show_disenchant_all?t.jsxs(Kt,{is_open:this.state.show_disenchant_all,manage_modal:this.manageDisenchantAll.bind(this),title:"Disenchant all",url:"character/"+this.props.character_id+"/inventory/disenchant-all",update_inventory:this.props.update_inventory,set_success_message:this.setSuccessMessage.bind(this),children:[t.jsx("p",{children:"Are you sure you want to do this? This action will disenchant all items in your inventory. You cannot undo this action."}),t.jsxs("p",{className:"mt-2",children:["When you disenchant items you will get some"," ",t.jsxs("a",{href:"/information/currencies",target:"_blank",children:["Gold Dust"," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","and experience towards"," ",t.jsxs("a",{href:"/information/skill-information",target:"_blank",children:["Disenchanting"," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","and half XP towards Enchanting."]}),t.jsx("p",{className:"mt-2",children:"Tip for crafters/enchanters: Equip a set that's full enchanting when doing your mass disenchanting, because the XP you get, while only half, can be boosted. For new players, you should be crafting and enchanting and then disenchanting or selling your equipment on the market, if it is not viable for you."})]}):null,this.state.show_sell_all?t.jsxs(Kt,{is_open:this.state.show_sell_all,manage_modal:this.manageSellAll.bind(this),title:"Sell all",url:"character/"+this.props.character_id+"/inventory/sell-all",update_inventory:this.props.update_inventory,set_success_message:this.setSuccessMessage.bind(this),children:[t.jsx("p",{children:"Are you sure? You are about to sell all items in your inventory (this does not effect Alchemy, Quest items, Sets or Equipped items). This action cannot be undone. Also, trinkets cannot be sold to the shop. They can be listed to the market or destroyed."}),t.jsxs("p",{className:"mt-2",children:[t.jsx("strong",{children:"Note"}),": The amount of gold you will get back for items that are enchanted or crafted over the price of two billion gold will never be sold for ",t.jsx("strong",{children:"more than"})," two billion gold. Ie, a 36 billion gold item will only sell for two billion gold before taxes."]}),t.jsx("p",{className:"mt-2",children:"It is highly recommended you use the market place to sell anything beyond shop gear to make your money back."})]}):null,this.state.show_equip_best?t.jsxs(Kt,{is_open:this.state.show_equip_best,manage_modal:this.handleEquipBest.bind(this),title:"Equip best in slot",url:"character/"+this.props.character_id+"/inventory/equip-best-in-slot",update_inventory:this.props.update_inventory,set_success_message:this.setSuccessMessage.bind(this),children:[t.jsxs(rt,{additional_css:"my-4",children:[t.jsx("p",{className:"mb-4",children:"This is a highly experimental feature which might break or give unexpected results"}),t.jsx("p",{className:"mb-4",children:"The core of this feature is to allow you to have the game automatically equip what it think's is the best equipment. This does not take into account any skills on the item or that you are training and does not take into account your current class in relation to whats might be best for it."}),t.jsxs("p",{children:["If you encounter issues or bugs please, with as much details as you can, post the issues in "," ",t.jsxs("a",{href:"https://discord.gg/hcwdqJUerh",target:"_blank",children:["Discord #bugs ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]}),t.jsxs("p",{children:["Based on equippable positions, what you may or may not have equipped and following ",t.jsxs("a",{href:"/information/equipment-sets",target:"_blank",children:["Rules of equipment ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),", we will compare whats in your inventory to whats equipped and replace or equip what's considered better for your character."]})]}):null,this.state.show_use_many&&this.state.usable_items.length>0?t.jsx(wh,{is_open:this.state.show_use_many,manage_modal:this.manageUseManyItems.bind(this),items:this.state.usable_items,update_inventory:this.props.update_inventory,character_id:this.props.character_id,set_success_message:this.setSuccessMessage.bind(this)}):null]})}}class Ji extends c.Component{constructor(e){super(e)}isActive(){return this.props.skill.parent_level_needed===null?!0:!this.props.is_locked}isMaxLevel(){return this.props.skill_progression.current_level===this.props.skill_progression.item_skill.max_level}render(){return t.jsxs("div",{children:[t.jsx("button",{onClick:()=>this.props.show_passive_modal(this.props.skill,this.props.skill_progression),children:t.jsxs("h4",{className:$({"text-item-skill-training-300 dark:text-item-skill-training-600":this.props.skill_progression.is_training,"text-red-500 dark:text-red-400":this.props.is_locked,"text-green-700 dark:text-green-600":this.props.skill_progression.current_level===this.props.skill.max_level,"text-blue-500 dark:text-blue-400":this.isActive()&&this.props.skill_progression.current_level<this.props.skill.max_level}),children:[this.props.skill_progression.is_training?t.jsx("i",{className:"ra ra-broadsword"}):null," ",this.props.skill.name]})}),t.jsxs("p",{className:"mt-3",children:["Level: ",this.props.skill_progression.current_level,"/",this.props.skill_progression.item_skill.max_level]}),this.isMaxLevel()?t.jsx("p",{className:"text-green-700 dark:text-green-600 mt-3",children:"Skill is maxed out!"}):t.jsxs("p",{className:"mt-3",children:["Kills till next level: ",this.props.skill_progression.current_kill,"/",this.props.skill_progression.item_skill.total_kills_needed]})]})}}const ir=(a,e,s)=>{const i=si(a,e);let n=!1;if(typeof i<"u"){const r=Ba(i,s);typeof r<"u"&&a.parent_level_needed!==null&&(n=r.current_level<a.parent_level_needed)}return n},Ba=(a,e)=>e.find(s=>s.item_skill_id===a.id),si=(a,e)=>{for(const s of e){if(s.id===a.parent_id)return s;if(s.children.length>0){const i=si(a,s.children);if(typeof i<"u")return i}}};class Ch extends c.Component{constructor(e){super(e)}buildNodes(e){let s;return s=e.children.map(i=>{const n=Ba(i,this.props.progression_data);if(typeof n<"u")return t.jsx(pa,{label:t.jsx(Ji,{skill:i,skill_progression:n,show_passive_modal:this.props.show_skill_management,is_locked:ir(i,this.props.skill_data,this.props.progression_data)}),children:this.buildNodes(i)})}),s.filter(i=>typeof i<"u")}render(){const e=Ba(this.props.skill_data[0],this.props.progression_data);return typeof e>"u"?t.jsx(z,{children:"Could not render item skill tree, something is wrong. The First skill does not have any progression data."}):t.jsx("div",{className:"overflow-x-auto overflow-y-hidden max-w-[300px] sm:max-w-[600px] md:max-w-[100%]",children:t.jsx(gs,{lineWidth:"2px",lineColor:"green",lineBorderRadius:"10px",label:t.jsx(Ji,{skill:this.props.skill_data[0],skill_progression:e,show_passive_modal:this.props.show_skill_management,is_locked:!1}),children:this.buildNodes(this.props.skill_data[0])})})}}class Nh extends c.Component{constructor(e){super(e),this.state={loading:!1,success_message:null,error_message:null}}trainSkill(){this.setState({loading:!0},()=>{new g().setRoute("item-skills/train/"+this.props.character_id+"/"+this.props.skill_progression_data.item_id+"/"+this.props.skill_progression_data.item_skill_id).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{this.setState({loading:!1});const s=e.response;typeof s<"u"&&this.setState({error_message:s.data.message})})})}stopTrainingSkipp(){this.setState({loading:!0},()=>{new g().setRoute("item-skills/stop-training/"+this.props.character_id+"/"+this.props.skill_progression_data.item_id+"/"+this.props.skill_progression_data.item_skill_id).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{this.setState({loading:!1});const s=e.response;typeof s<"u"&&this.setState({error_message:s.data.message})})})}render(){const e=this.props.skill_progression_data,s=si(this.props.skill_progression_data.item_skill,this.props.skills);return t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:this.props.skill_progression_data.item_skill.name}),this.state.success_message!==null?t.jsx(je,{additional_css:"my-4",children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.props.is_skill_locked?t.jsx(Ce,{additional_css:"my-4",children:"This skill is locked and cannot be trained until you meet the requirements below."}):null,t.jsx("p",{className:"my-4",children:this.props.skill_progression_data.item_skill.description}),t.jsxs("p",{className:"mb-4",children:["For more infomatio please refer to the ",t.jsxs("a",{href:"/information/item-skills",target:"_blank",children:["Item Skills help docs ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"."]}),s?t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"bg-yellow-200 border border-yellow-700 dark:border-yellow-400 rounded-md py-3 px-4 text-yellow-900 dark:text-yellow-700",children:[t.jsx("h3",{className:"my-4 font-bold text-yellow-900 dark:text-yellow-700",children:"Requirements"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Parent Skill Name:"}),t.jsx("dd",{children:s.name}),t.jsx("dt",{children:"Required Level:"}),t.jsx("dd",{children:this.props.skill_progression_data.item_skill.parent_level_needed})]})]})]}):null,t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("h4",{className:"my-4 font-bold",children:"Progression Data"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Level (Current/Max):"}),t.jsxs("dd",{children:[e.current_level,"/",e.item_skill.max_level]}),t.jsx("dt",{children:"Kill Count (Current/Needed):"}),t.jsx("dd",{children:e.current_level===e.item_skill.max_level?"You have maxed this skill":e.current_kill+"/"+e.item_skill.total_kills_needed})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2",children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Str Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.str_mod>0}),children:[(e.str_mod*100).toFixed(0),"% ",e.item_skill.str_mod>0?"(+"+(e.item_skill.str_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Dex Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.dex_mod>0}),children:[(e.dex_mod*100).toFixed(0),"% ",e.item_skill.dex_mod>0?"(+"+(e.item_skill.dex_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Dur Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.dur_mod>0}),children:[(e.dur_mod*100).toFixed(0),"% ",e.item_skill.dur_mod>0?"(+"+(e.item_skill.dur_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Agi Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.agi_mod>0}),children:[(e.agi_mod*100).toFixed(0),"% ",e.item_skill.agi_mod>0?"(+"+(e.item_skill.agi_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Int Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.int_mod>0}),children:[(e.int_mod*100).toFixed(0),"% ",e.item_skill.int_mod>0?"(+"+(e.item_skill.int_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Chr Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.chr_mod>0}),children:[(e.chr_mod*100).toFixed(0),"% ",e.item_skill.chr_mod>0?"(+"+(e.item_skill.chr_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Focus Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.focus_mod>0}),children:[(e.focus_mod*100).toFixed(0),"% ",e.item_skill.focus_mod>0?"(+"+(e.item_skill.focus_mod*100).toFixed(0)+"%/Lv)":""]})]})}),t.jsx("div",{className:"block lg:hidden border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Attack Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.base_attack_mod>0}),children:[(e.base_attack_mod*100).toFixed(0),"% ",e.item_skill.base_attack_mod>0?"(+"+(e.item_skill.base_attack_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"AC Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.base_ac_mod>0}),children:[(e.base_ac_mod*100).toFixed(0),"% ",e.item_skill.base_ac_mod>0?"(+"+(e.item_skill.base_ac_mod*100).toFixed(0)+"%/Lv)":""]}),t.jsx("dt",{children:"Healing Modifier"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":e.item_skill.base_healing_mod>0}),children:[(e.base_healing_mod*100).toFixed(0),"% ",e.item_skill.base_healing_mod>0?"(+"+(e.item_skill.base_healing_mod*100).toFixed(0)+"%/Lv)":""]})]})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),this.state.loading?t.jsx(D,{}):null,t.jsxs("div",{className:"flex space-x-4 flex-row justify-start",children:[this.props.skill_progression_data.is_training?t.jsx(Y,{button_label:"Stop Training Skill",on_click:this.stopTrainingSkipp.bind(this),disabled:this.state.loading}):t.jsx(da,{button_label:"Train Skill",on_click:this.trainSkill.bind(this),disabled:this.state.loading||this.props.is_skill_locked}),t.jsx(ce,{button_label:"Close Skill Management",on_click:()=>this.props.manage_skill_details(null,null),disabled:this.state.loading})]})]})}}class Ph extends c.Component{constructor(e){super(e),this.state={skill_progression:null,skill:null}}showSkillSection(e,s){this.setState({skill_progression:s,skill:e})}componentDidUpdate(e){if(this.state.skill_progression!==null){const s=this.props.skill_progression_data.find(i=>{var n;return i.id===((n=this.state.skill_progression)==null?void 0:n.id)});if(typeof s>"u")return;s!==this.state.skill_progression&&this.setState({skill_progression:s})}}render(){return this.state.skill_progression!==null&&this.state.skill!==null?t.jsx(Nh,{skill_progression_data:this.state.skill_progression,skills:this.props.skill_data,manage_skill_details:this.showSkillSection.bind(this),character_id:this.props.character_id,is_skill_locked:ir(this.state.skill,this.props.skill_data,this.props.skill_progression_data)}):t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"p-4 text-center font-thin text-xl",children:t.jsx("h3",{children:"Ancestral Skill Tree"})}),t.jsxs("p",{className:"text-center font-thin text-sm text-gray-600 dark:text-gray-300 italic mt-1",children:["All the skills here will stack together. For more info please refer to: ",t.jsxs("a",{href:"/information/ancestral-items",target:"_blank",children:["Ancestral items help docs ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"."]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx(ce,{button_label:"Close Skill Tree",on_click:()=>this.props.close_skill_tree(),additional_css:"mb-4"}),t.jsx(Ch,{skill_data:this.props.skill_data,progression_data:this.props.skill_progression_data,show_skill_management:this.showSkillSection.bind(this)})]})}}class Th extends c.Component{constructor(e){super(e),this.tabs=[{key:"inventory",name:"Inventory"},{key:"equipped",name:"Equipped"},{key:"sets",name:"Sets"},{key:"quest",name:"Quest items"}],this.state={table:"Inventory",dark_tables:!1,loading:!0,inventory:null,disable_tabs:!1,item_skill_data:null},this.updateInventoryListener=Echo.private("update-inventory-"+this.props.user_id)}componentDidMount(){Xr(this),this.props.finished_loading&&new g().setRoute("character/"+this.props.character_id+"/inventory").doAjaxCall("get",e=>{this.setState({loading:!1,inventory:e.data})},e=>{console.error(e)}),this.updateInventoryListener.listen("Game.CharacterInventory.Events.CharacterInventoryUpdateBroadCastEvent",e=>{if(this.state.inventory!==null){const s=JSON.parse(JSON.stringify(this.state.inventory));s[e.type]=e.inventory,this.setState({inventory:s},()=>{this.updateItemSkillData()})}})}switchTable(e){this.setState({table:e})}updateInventory(e){let s=JSON.parse(JSON.stringify(this.state.inventory));const i=Object.keys(e);for(let n=0;n<i.length;n++)s[i[n]]=e[i[n]];this.setState({inventory:s})}manageDisableTabs(){this.setState({disable_tabs:!this.state.disable_tabs},()=>{typeof this.props.update_disable_tabs<"u"&&this.props.update_disable_tabs()})}updateItemSkillData(){if(this.state.item_skill_data===null||this.state.inventory===null)return;const e=this.state.inventory.equipped.find(s=>{var i;return s.slot_id===((i=this.state.item_skill_data)==null?void 0:i.slot_id)});if(typeof e<"u")return this.manageItemSkills(e.slot_id,e.item_skills,e.item_skill_progressions)}manageItemSkills(e,s,i){this.setState({item_skill_data:{slot_id:e,item_skills:s,item_skill_progressions:i}})}closeItemSkillTree(){this.setState({item_skill_data:null})}render(){return this.state.loading||this.state.inventory===null?t.jsx("div",{className:"my-4",children:t.jsx(Fe,{})}):this.state.item_skill_data!==null?t.jsx("div",{className:"my-4",children:t.jsx(Ph,{slot_id:this.state.item_skill_data.slot_id,skill_data:this.state.item_skill_data.item_skills,skill_progression_data:this.state.item_skill_data.item_skill_progressions,close_skill_tree:this.closeItemSkillTree.bind(this),character_id:this.props.character_id})}):t.jsxs(Be,{tabs:this.tabs,full_width:!0,disabled:this.state.disable_tabs,children:[t.jsx(H,{children:t.jsx(Sh,{dark_tables:this.state.dark_tables,character_id:this.props.character_id,inventory:this.state.inventory.inventory,usable_items:this.state.inventory.usable_items,is_dead:this.props.is_dead,update_inventory:this.updateInventory.bind(this),usable_sets:this.state.inventory.usable_sets,is_automation_running:this.props.is_automation_running,user_id:this.props.user_id,manage_skills:this.manageItemSkills.bind(this)})},"inventory"),t.jsx(H,{children:t.jsx(_h,{dark_tables:this.state.dark_tables,equipped_items:this.state.inventory.equipped,is_dead:this.props.is_dead,sets:this.state.inventory.sets,character_id:this.props.character_id,is_set_equipped:this.state.inventory.set_is_equipped,update_inventory:this.updateInventory.bind(this),is_automation_running:this.props.is_automation_running,disable_tabs:this.manageDisableTabs.bind(this),manage_skills:this.manageItemSkills.bind(this)})},"equipped"),t.jsx(H,{children:t.jsx(fh,{dark_tables:this.state.dark_tables,sets:this.state.inventory.sets,is_dead:this.props.is_dead,character_id:this.props.character_id,savable_sets:this.state.inventory.savable_sets,update_inventory:this.updateInventory.bind(this),set_name_equipped:this.state.inventory.set_name_equipped,is_automation_running:this.props.is_automation_running,disable_tabs:this.manageDisableTabs.bind(this),manage_skills:this.manageItemSkills.bind(this)})},"sets"),t.jsx(H,{children:t.jsx(xh,{dark_table:this.state.dark_tables,quest_items:this.state.inventory.quest_items,is_dead:this.props.is_dead,character_id:this.props.character_id})},"quest")]})}}class Ah extends c.Component{constructor(e){super(e)}render(){return t.jsx(ee,{is_open:!0,handle_close:this.props.manage_modal,title:"Are you sure?",secondary_actions:{secondary_button_disabled:!1,secondary_button_label:"Yes I am sure",handle_action:this.props.handle_reincarnate},children:t.jsxs("div",{className:"my-4",children:[t.jsx("p",{className:"mb-4",children:t.jsx("strong",{children:"This action cannot be undone!"})}),t.jsx("p",{className:"mb-4",children:"Are you sure you want to reincarnate? Here's what will happen:"}),t.jsxs("p",{className:"mb-4",children:["Your level will be reset to one, you will ",t.jsx("strong",{children:"lose nothing else"}),". 20% of your current raw stats will be applied to your level 1 base raw stats. You will then level back up to max level and reincarnate again to get even stronger."]}),t.jsx("p",{className:"mb-4",children:"You can reincarnate at anytime, for the cost of 50,000 Copper Coins. Each time you do we add 5%, which stacks with how many times you have reincarnated, to your XP required to level up, which over time can make it take longer and longer to level up, but your character gets even stronger."})]})})}}class Rh extends c.Component{constructor(e){super(e)}appendAdditionalClasses(){return this.props.additionalClasses?this.props.additionalClasses:""}render(){return t.jsxs("div",{className:"bg-white rounded-sm drop-shadow-md p-6 dark:bg-gray-800 dark:text-gray-400 "+this.appendAdditionalClasses(),children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px] right-[20px]",children:t.jsx("button",{onClick:this.props.close_action,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),this.props.children]})}}class qh extends c.Component{constructor(e){super(e),this.tabs=[{key:"stats",name:"Stats"},{key:"holy",name:"Holy"},{key:"voidance",name:"Voidance"},{key:"ambush-counter",name:"Ambush & Counter."}],this.state={is_loading:!0,stat_details:[],error_message:""}}whenTabUpdates(e){this.props.when_tab_changes&&this.props.when_tab_changes(e,this.tabs)}componentDidMount(){this.props.character!==null&&new g().setRoute("character-sheet/"+this.props.character.id+"/stat-details").doAjaxCall("get",e=>{this.setState({is_loading:!1,stat_details:e.data.stat_details})},e=>{this.setState({is_loading:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.message})})}render(){return this.props.character===null?null:this.state.is_loading?t.jsx(D,{}):t.jsxs(Be,{tabs:this.tabs,full_width:!0,listen_for_change:this.whenTabUpdates.bind(this),children:[t.jsx(H,{children:t.jsxs("div",{className:"max-h-[350px] md:max-h-full overflow-y-scroll md:overflow-y-visible",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Raw Str"}),t.jsx("dd",{children:u(this.state.stat_details.str)}),t.jsx("dt",{children:"Raw Dex"}),t.jsx("dd",{children:u(this.state.stat_details.dex)}),t.jsx("dt",{children:"Raw Agi"}),t.jsx("dd",{children:u(this.state.stat_details.agi)}),t.jsx("dt",{children:"Raw Chr"}),t.jsx("dd",{children:u(this.state.stat_details.chr)}),t.jsx("dt",{children:"Raw Dur"}),t.jsx("dd",{children:u(this.state.stat_details.dur)}),t.jsx("dt",{children:"Raw Int"}),t.jsx("dd",{children:u(this.state.stat_details.int)}),t.jsx("dt",{children:"Raw Focus"}),t.jsx("dd",{children:u(this.state.stat_details.focus)})]})}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Modded Str"}),t.jsx("dd",{children:u(this.state.stat_details.str_modded)}),t.jsx("dt",{children:"Modded Dex"}),t.jsx("dd",{children:u(this.state.stat_details.dex_modded)}),t.jsx("dt",{children:"Modded Agi"}),t.jsx("dd",{children:u(this.state.stat_details.agi_modded)}),t.jsx("dt",{children:"Modded Chr"}),t.jsx("dd",{children:u(this.state.stat_details.chr_modded)}),t.jsx("dt",{children:"Modded Dur"}),t.jsx("dd",{children:u(this.state.stat_details.dur_modded)}),t.jsx("dt",{children:"Modded Int"}),t.jsx("dd",{children:u(this.state.stat_details.int_modded)}),t.jsx("dt",{children:"Modded Focus"}),t.jsx("dd",{children:u(this.state.stat_details.focus_modded)})]})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Weapon Damage"}),t.jsx("dd",{children:u(this.state.stat_details.weapon_attack)}),t.jsx("dt",{children:"Ring Damage"}),t.jsx("dd",{children:u(this.state.stat_details.ring_damage)}),t.jsx("dt",{children:"Spell Damage"}),t.jsx("dd",{children:u(this.state.stat_details.spell_damage)}),t.jsx("dt",{children:"Healing Amount"}),t.jsx("dd",{children:u(this.state.stat_details.healing_amount)})]})}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("div",{children:t.jsxs("dl",{children:[t.jsxs("dt",{children:["Voided Weapon Damage ",t.jsx("sup",{children:"*"})]}),t.jsx("dd",{children:u(this.state.stat_details.voided_weapon_attack)}),t.jsxs("dt",{children:["Voided Ring Damage ",t.jsx("sup",{children:"*"})]}),t.jsx("dd",{children:u(this.state.stat_details.ring_damage)}),t.jsxs("dt",{children:["Voided Spell Damage ",t.jsx("sup",{children:"*"})]}),t.jsx("dd",{children:u(this.state.stat_details.voided_spell_damage)}),t.jsxs("dt",{children:["Voided Healing Amount ",t.jsx("sup",{children:"*"})]}),t.jsx("dd",{children:u(this.state.stat_details.voided_healing_amount)})]})})]}),t.jsxs("p",{className:"mt-4 mb-2",children:[t.jsx("sup",{children:"*"})," For more information please see ",t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["Voidance Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})},"stats"),t.jsxs(H,{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Holy Bonus:"}),t.jsxs("dt",{children:[(this.state.stat_details.holy_bonus*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Holy Stacks:"}),t.jsxs("dt",{children:[this.state.stat_details.current_stacks," / ",this.props.character.max_holy_stacks]}),t.jsx("dt",{children:"Holy Attack Bonus:"}),t.jsxs("dt",{children:[(this.state.stat_details.holy_attack_bonus*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Holy AC Bonus:"}),t.jsxs("dt",{children:[(this.state.stat_details.holy_ac_bonus*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Holy Healing Bonus:"}),t.jsxs("dt",{children:[(this.state.stat_details.holy_healing_bonus*100).toFixed(2),"%"]})]}),t.jsxs("p",{className:"mt-4",children:["For more information please see ",t.jsxs("a",{href:"/information/holy-items",target:"_blank",children:["Holy Items Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]},"holy"),t.jsxs(H,{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Devouring Light:"}),t.jsxs("dt",{children:[(this.state.stat_details.devouring_light*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Devouring Light Res.:"}),t.jsxs("dt",{children:[(this.state.stat_details.devouring_light_res*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Devouring Darkness:"}),t.jsxs("dt",{children:[(this.state.stat_details.devouring_darkness*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Devouring Darkness Res.:"}),t.jsxs("dt",{children:[(this.state.stat_details.devouring_darkness_res*100).toFixed(2),"%"]})]}),t.jsxs("p",{className:"mt-4",children:["For more information please see ",t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["Voidance Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]},"voidance"),t.jsxs(H,{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Ambush Chance"}),t.jsxs("dd",{children:[(this.state.stat_details.ambush_chance*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Ambush Resistance"}),t.jsxs("dd",{children:[(this.state.stat_details.ambush_resistance_chance*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Counter Chance"}),t.jsxs("dd",{children:[(this.state.stat_details.counter_chance*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Counter Resistance"}),t.jsxs("dd",{children:[(this.state.stat_details.counter_resistance_chance*100).toFixed(2),"%"]})]}),t.jsxs("p",{className:"mt-4",children:["For more information please see ",t.jsxs("a",{href:"/information/ambush-and-counter",target:"_blank",children:["Ambush and Counter Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]},"ambush-counter")]})}}class Zi extends c.Component{constructor(e){super(e),this.state={additional_info_tab_text:"stats"}}changeAdditionalInfoTextWhenTabChanges(e,s){const i=s[e];this.setState({additional_info_tab_text:i.key})}renderTextForTabChange(){switch(this.state.additional_info_tab_text){case"stats":return t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"underline",children:"Stats"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Stats represent two aspects of your character: Gear on (Modified) or naked (Raw). In some instances, your character can become"," ",t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["voided ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","and thus your raw stats come into play."]}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Under stats, we have your basic damage information based on what's equipped, what"," ",t.jsxs("a",{href:"/information/enchanting",target:"_blank",children:["enchantments ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","are applied and so on. There are a lot of aspects that go into gear progression that one encounters as they progress in the game."]})]});case"holy":return t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"underline",children:"Holy"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Holy is a special kind of property that can be applied to items. This is also know as"," ",t.jsxs("a",{href:"/information/holy-items",target:"_blank",children:["Holy Oils ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","which are crafted through a system called: ",t.jsxs("a",{href:"/information/alchemy",target:"_blank",children:["Alchemy ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),". These Oils can be applied to items only while in ",t.jsxs("a",{href:"/information/planes",target:"_blank",children:["Purgatory ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Hoily oils apply two things to characters: Stats (random based on the level of the oil) and"," ",t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["Devouring Light/Darkness ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","to the item. These can stack on the item in question giving late game players a huge power boost for the challenges to come!"]})]});case"voidance":return t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"underline",children:"Voidance"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:[t.jsxs("a",{href:"/information/voidance",target:"_blank",children:["Voidance ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," "," refers to the concept of Devouring Darkness and Devouring Light."]}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Devouring Light and Darkness refer to the ability to devoid as well as void the enemy. Voiding (Devouring Light) means you stop the enemy from using enchantments and reducing their power. Where as devoiding (Devouring Darkness) the enemy refers to stopping them from being able to void you."}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Players can gain this via quest items like:"," ",t.jsxs("a",{href:"/information/quest-items?table[search]=Dead+King%27s+Crown",target:"_blank",children:["Dead Kings Crown ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","quest item."]})]});case"ambush-counter":return t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"underline",children:"Ambush and Counter"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:[t.jsxs("a",{href:"/information/ambush-and-counter",target:"_blank",children:["Ambush and Counter ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," "," Refer to the ability to ambush and enemy or counter an enemies attack."]}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Ambushing and Countering chance as well as the resistance to each, are onlky obtainable by characters who craft:"," ",t.jsxs("a",{href:"/information/trinketry",target:"_blank",children:["Trinkets ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," "," which require access to the end game plane:"," ",t.jsxs("a",{href:"/information/planes",target:"_blank",children:["Purgatory ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","where players can then obtain"," ",t.jsxs("a",{href:"/information/currencies",target:"_blank",children:["Copper Coins ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","to then craft them."]}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Fortunately for new players, this is not required until the start of the end game where creatures will start to have small amounts of Ambush and Counter chance and resistance, which will grow over time as you move down the list."})]});default:return null}}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute top-1/4 bottom-1/4 left-1/2 bg-gray-300 w-px transform -translate-x-1/2"}),t.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center",children:[t.jsx("div",{id:"leftSide",className:"pr-4 sm:w-full md:w-1/2",children:t.jsx(qh,{character:this.props.character,is_open:!0,manage_modal:()=>{},title:"",finished_loading:!0,when_tab_changes:this.changeAdditionalInfoTextWhenTabChanges.bind(this)})}),t.jsxs("div",{id:"rightSide",className:"mt-10 md:mt-0 pl-4 sm:w-full md:w-1/2",children:[t.jsx("h1",{children:"What is this?"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"To the left, or top (For mobile), we can see a set of stats, each tab represents an aspect of your character, with specific types of gear assigned or not."}),this.renderTextForTabChange()]})]})]})}}class Dh extends c.Component{constructor(e){super(e),this.state={is_loading:!0,error_message:"",resistance_info:[]}}componentDidMount(){this.setState({error_message:""},()=>{this.props.character!==null&&new g().setRoute("character-sheet/"+this.props.character.id+"/resistance-info").doAjaxCall("get",e=>{this.setState({is_loading:!1,resistance_info:e.data.resistance_info})},e=>{this.setState({is_loading:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.mmessage})})})}render(){return this.props.character===null?null:this.state.error_message!==""?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):this.state.is_loading?t.jsx(D,{}):t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Spell Evasions"}),t.jsxs("dd",{children:[(this.state.resistance_info.spell_evasion*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Affix Damage Reduction"}),t.jsxs("dd",{children:[(this.state.resistance_info.affix_damage_reduction*100).toFixed(2),"%"]})]})})}}class en extends c.Component{constructor(e){super(e)}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute top-1/4 bottom-1/4 left-1/2 bg-gray-300 w-px transform -translate-x-1/2"}),t.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center",children:[t.jsx("div",{id:"leftSide",className:"pr-4 sm:w-full md:w-1/2",children:t.jsx(Dh,{character:this.props.character,is_open:!0,manage_modal:()=>{},title:"",finished_loading:!0})}),t.jsxs("div",{id:"rightSide",className:"mt-10 md:mt-0 pl-4 sm:w-full md:w-1/2",children:[t.jsx("h1",{children:"What is this?"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"To the left, or top (For mobile), we can see a set of resistances. These effect your character in one way: Resisting the damage of spells or enchantments (also known as Affix Damage) that's the enemy can do to you."}),t.jsx("h3",{className:"underline",children:"Spell Evasion"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Helps you evade the enemies spells. This can be obtained from rings."}),t.jsx("h3",{className:"underline",children:"Affix Damage Reduction"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Helps you reduce the incoming Affix Damage. This can be obtained from rings."})]})]})]})}}class Eh extends c.Component{constructor(e){super(e),this.state={is_loading:!0,reincarnation_details:[],error_message:""}}componentDidMount(){this.props.character!==null&&new g().setRoute("character-sheet/"+this.props.character.id+"/reincarnation-info").doAjaxCall("get",e=>{this.setState({is_loading:!1,reincarnation_details:e.data.reincarnation_details})},e=>{this.setState({is_loading:!1}),typeof e.response<"u"&&this.setState({erro_message:e.response.data.message})})}render(){return this.props.character===null?null:t.jsx(t.Fragment,{children:this.state.is_loading?t.jsx(Fe,{}):t.jsx("div",{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Reincarnated Times"}),t.jsx("dd",{children:this.state.reincarnation_details.reincarnated_times!==null?u(this.state.reincarnation_details.reincarnated_times):0}),t.jsx("dt",{children:"Reincarnation Stat Bonus (pts.)"}),t.jsx("dd",{children:this.state.reincarnation_details.reincarnated_stat_increase!==null?u(this.state.reincarnation_details.reincarnated_stat_increase):0}),t.jsx("dt",{children:"Base Stat Mod"}),t.jsxs("dd",{children:[(this.state.reincarnation_details.base_stat_mod*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Base Damage Stat Mod"}),t.jsxs("dd",{children:[(this.state.reincarnation_details.base_damage_stat_mod*100).toFixed(2),"%"]}),t.jsx("dt",{children:"XP Penalty"}),t.jsxs("dd",{children:[this.state.reincarnation_details.xp_penalty!==null?(this.state.reincarnation_details.xp_penalty*100).toFixed(0):0,"%"]})]})})})}}class tn extends c.Component{constructor(e){super(e)}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute top-1/4 bottom-1/4 left-1/2 bg-gray-300 w-px transform -translate-x-1/2"}),t.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center",children:[t.jsx("div",{id:"leftSide",className:"pr-4 sm:w-full md:w-1/2",children:t.jsx(Eh,{character:this.props.character,is_open:!0,manage_modal:()=>{},title:"",finished_loading:!0})}),t.jsxs("div",{id:"rightSide",className:"mt-10 md:mt-0 pl-4 sm:w-full md:w-1/2",children:[t.jsx("h1",{children:"What is this?"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["To the left, or top (For mobile), we can see some basic information about how many times our character"," ","can ",t.jsxs("a",{href:"/information/reincarnation",target:"_blank",children:["reincarnated ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","as well as the effects that has on your character."]}),t.jsx("h3",{className:"underline",children:"Reincarnation"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Characters who reach the max level: 5,000 and have access to end game currency: ",t.jsxs("a",{href:"/information/currencies",target:"_blank",children:["Copper Coins ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","Have the ability to Reincarnate."]}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Essentially, when you reincarnate you set your character level to level 1. You keep a portion of your raw stats at the level you choose to reincarnate and then you level from 1 to, ideally, 5000 again and then repeat another 98 times. Why? Power. Every time you do this your raw stats will grow and your character will become much more powerful - especially when combined with your gear."})]})]})]})}}let Ih=class extends c.Component{constructor(e){super(e),this.state={class_ranks:[],dark_tables:!1,loading:!0,open_class_details:!1,show_class_specialties:!1,class_name_selected:null,switching_class:!1,success_message:null,error_message:null}}componentDidMount(){Jr(this),new g().setRoute("class-ranks/"+this.props.character.id).doAjaxCall("get",e=>{this.setState({class_ranks:e.data.class_ranks,loading:!1})},e=>{console.error(e)})}manageViewClass(e){const s=this.state.class_ranks.filter(i=>i.class_name===e)[0];this.setState({open_class_details:!this.state.open_class_details,class_name_selected:s})}switchClass(e){this.setState({switching_class:!0,success_message:null,error_message:null},()=>{new g().setRoute("switch-classes/"+this.props.character.id+"/"+e).doAjaxCall("post",s=>{this.setState({switching_class:!1,success_message:s.data.message,class_ranks:s.data.class_ranks})},s=>{this.setState({switching_class:!1}),typeof s.response<"u"&&(s.response,this.setState({error_message:"Something went wrong switching classes."})),console.error(s)})})}tableColumns(){return[{name:"Class name",selector:e=>e.class_name,cell:e=>t.jsx("button",{onClick:()=>this.manageViewClass(e.class_name),className:"hover:underline text-blue-500 dark:text-blue-400",children:e.class_name})},{name:"Rank Level",selector:e=>e.level,sortable:!0},{name:"XP",selector:e=>e.current_xp,cell:e=>t.jsx("span",{children:u(e.current_xp)+"/"+u(e.required_xp)})},{name:"Active",selector:e=>e.is_active,cell:e=>t.jsx("span",{children:e.is_active?"Yes":"No"})},{name:"Is Locked",selector:e=>e.is_locked,cell:e=>t.jsx("span",{children:e.is_locked?"Yes":"No"})},{name:"Action",selector:e=>e.id,cell:e=>t.jsx("span",{children:t.jsx(Y,{button_label:"Switch To",on_click:()=>this.switchClass(e.game_class_id),disabled:e.is_active||e.is_locked})})}]}masteryTableColumns(){return[{name:"Mastery Name",selector:e=>e.mastery_name},{name:"Level",selector:e=>e.level,sortable:!0,cell:e=>t.jsx("span",{children:u(e.level)+"/100"})},{name:"XP",selector:e=>e.current_xp,cell:e=>t.jsx("span",{children:u(e.current_xp)+"/"+u(e.required_xp)})}]}manageClassSpecialties(){this.setState({show_class_specialties:!this.state.show_class_specialties})}render(){return this.state.loading?t.jsx("div",{className:"relative my-6 p-[20px]",children:t.jsx(Fe,{})}):t.jsx("div",{className:"max-h-[375px] overflow-y-auto",children:this.state.open_class_details&&this.state.class_name_selected!==null?t.jsxs("div",{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px] right-[10px]",children:t.jsx("button",{onClick:()=>this.manageViewClass(null),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsx("h2",{className:"text-sky-700 dark:text-sky-500 font-bold my-4",children:this.state.class_name_selected.class_name}),t.jsxs("p",{className:"mb-4",children:["To learn more about this class, checkout ",t.jsxs("a",{href:"/information/class/"+this.state.class_name_selected.game_class_id,target:"_blank",children:["the class documentation ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," to learn more about special attacks and tips and tricks to play the class to the fullest advantage."]}),t.jsx("p",{className:"mb-4",children:"When you switch to this class, your current class skill be hidden and you will now have an opportunity to level this classes skill in the skill section for trainable skills. Click the above link to learn more about the class."}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"my-3",children:"Base Information"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Base Damage Stat"}),t.jsx("dd",{children:this.state.class_name_selected.game_class.to_hit_stat}),t.jsx("dt",{children:"Accuracy Mod"}),t.jsxs("dd",{children:["+",(this.state.class_name_selected.game_class.accuracy_mod*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Looting Mod"}),t.jsxs("dd",{children:["+",(this.state.class_name_selected.game_class.accuracy_mod*100).toFixed(2),"%"]})]}),this.state.class_name_selected.secondary_class_name!==null&&this.state.class_name_selected.primary_class_name!==null?t.jsxs(o.Fragment,{children:[t.jsx("h3",{className:"my-3",children:"Requirements"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("p",{className:"mb-2",children:"This class may require you to level other classes before being able to switch to this class. To do so, follow the below information to unlock the class!"}),t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Primary Class Required:"}),t.jsx("dd",{children:this.state.class_name_selected.primary_class_name}),t.jsx("dt",{children:"Primary Class Rank Level Required:"}),t.jsx("dd",{children:this.state.class_name_selected.primary_class_required_level}),t.jsx("dt",{children:"Secondary Class Required:"}),t.jsx("dd",{children:this.state.class_name_selected.secondary_class_name}),t.jsx("dt",{children:"Secondary Class Rank Level Required:"}),t.jsx("dd",{children:this.state.class_name_selected.secondary_class_required_level})]})]}):null]}),t.jsx("div",{className:"border-b-2 block lg:hidden border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"my-3",children:"Class Masteries"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsx("p",{className:"my-4",children:"The more levels you put in, by using a specific weapon type, the more % bonus towards that weapon types damage."}),t.jsx(Ie,{data:this.state.class_name_selected.weapon_masteries,columns:this.masteryTableColumns(),dark_table:this.state.dark_tables})]})]})]}):t.jsxs(o.Fragment,{children:[this.state.switching_class?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.state.success_message!==null?t.jsx(je,{additional_css:"my-4",children:this.state.success_message}):null,t.jsx(Ie,{data:this.state.class_ranks,columns:this.tableColumns(),dark_table:this.state.dark_tables})]})})}};class Mh extends c.Component{constructor(e){super(e),this.state={loading:!0,equipping:!1,equipping_special_id:null,class_specialties:[],class_specials_for_table:[],specialties_equipped:[],other_class_specialties:[],filtered_other_class_specialties:[],class_ranks:[],dark_tables:!1,show_equipped:!1,special_selected:null,equipped_special:null,success_message:null,error_message:null,selected_filter:null,other_selected_filter:null},this.tabs=[{key:"class-specialties",name:"Class Specialties"},{key:"equipped-specialities",name:"Equipped Specialties"},{key:"other-specialties",name:"Your other Specialties"}]}componentDidMount(){Zr(this),this.props.character!==null&&new g().setRoute("class-ranks/"+this.props.character.id+"/specials").doAjaxCall("get",e=>{this.setState({loading:!1,class_specialties:e.data.class_specialties,class_specials_for_table:e.data.class_specialties,specialties_equipped:e.data.specials_equipped,class_ranks:e.data.class_ranks,other_class_specialties:e.data.other_class_specials,selected_filter:this.props.character===null?null:this.props.character.class,other_selected_filter:this.props.character===null?null:this.props.character.class},()=>{this.filterTable(),this.filterOtherClassSpecialsTable()})},e=>{console.error(e)})}filterTableByClass(e){if(e.value==="Please select"){this.setState({class_specials_for_table:this.state.class_specialties,selected_filter:this.props.character===null?null:this.props.character.class},()=>{this.filterTable(),this.filterOtherClassSpecialsTable()});return}this.setState({selected_filter:e.value},()=>{this.filterTable()})}filterOtherSpecialties(e){if(e.value==="Please select"){this.setState({filtered_other_class_specialties:this.state.other_class_specialties});return}this.setState({other_selected_filter:e.value},()=>{this.filterOtherClassSpecialsTable()})}filterTable(){if(this.state.selected_filter===null)return;const e=JSON.parse(JSON.stringify(this.state.class_specialties));if(this.state.selected_filter==="Equippable"){const s=e.filter(i=>{if(this.state.class_ranks.filter(r=>{if(r.game_class_id===i.game_class_id)return r.level>=i.requires_class_rank_level}).length>0)return i});this.setState({class_specials_for_table:s});return}this.setState({class_specials_for_table:e.filter(s=>s.class_name===this.state.selected_filter)})}filterOtherClassSpecialsTable(){if(this.state.other_class_specialties===null)return;const e=JSON.parse(JSON.stringify(this.state.other_class_specialties));e.length!==0&&this.setState({other_class_specialties:e.filter(s=>s.class_name===this.state.other_selected_filter)})}classOptions(e){const s=["Please select","Heretic","Fighter","Vampire","Ranger","Prophet","Thief","Blacksmith","Arcane Alchemist","Prisoner","Alcoholic","Merchant"];return e&&s.splice(1,0,"Equippable"),s.map(i=>({label:i,value:i}))}unequipSpecial(e){this.setState({equipping:!0,equipping_special_id:e,success_message:null,error_message:null},()=>{this.props.character!==null&&new g().setRoute("unequip-specialty/"+this.props.character.id+"/"+e).doAjaxCall("post",s=>{this.setState({equipping:!1,equipping_special_id:null,class_specialties:s.data.class_specialties,class_specials_for_table:s.data.class_specialties,specialties_equipped:s.data.specials_equipped,class_ranks:s.data.class_ranks,other_class_specialties:s.data.other_class_specials,success_message:s.data.message},()=>{this.filterTable(),this.filterOtherClassSpecialsTable()})},s=>{this.setState({equipping:!1}),typeof s.response<"u"&&this.setState({error_message:s.response.data.message})})})}equipSpecial(e){this.setState({equipping:!0,equipping_special_id:e,success_message:null,error_message:null},()=>{this.props.character!==null&&new g().setRoute("equip-specialty/"+this.props.character.id+"/"+e).doAjaxCall("post",s=>{this.setState({equipping:!1,equipping_special_id:null,success_message:s.data.message,class_specialties:s.data.class_specialties,class_specials_for_table:s.data.class_specialties,specialties_equipped:s.data.specials_equipped,class_ranks:s.data.class_ranks,other_class_specialties:s.data.other_class_specials},()=>{this.filterTable(),this.filterOtherClassSpecialsTable()})},s=>{this.setState({equipping:!1}),typeof s.response<"u"&&this.setState({error_message:s.response.data.message})})})}doesSpecialtyDealDamage(e){return e.specialty_damage!==null?e.specialty_damage>0:!1}classSpecialtiesTable(){return[{name:"Name",selector:e=>e.name,cell:e=>t.jsx(o.Fragment,{children:t.jsx("button",{className:"hover:underline text-blue-500 dark:text-blue-400",onClick:()=>this.manageViewSpecialty(e),children:e.name})})},{name:"Class Name",selector:e=>e.class_name},{name:"Class Rank Required",selector:e=>e.requires_class_rank_level},{name:"Deals Damage",selector:e=>this.doesSpecialtyDealDamage(e)?"Yes":"No"},{name:"Actions",selector:e=>e.id,cell:e=>t.jsx(o.Fragment,{children:this.specialtyIsEquipped(e.id)?t.jsx("span",{className:"text-green-500 dark:text-green-400",children:"Specialty is equipped"}):this.hasDamageSpecialtyEquipped(e)?t.jsx("span",{className:"text-red-500 dark:text-red-400",children:"You already have a damage specialty equipped."}):t.jsx(Y,{button_label:this.state.equipping&&this.state.equipping_special_id===e.id?t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin"})," Equip"]}):"Equip",on_click:()=>this.equipSpecial(e.id),disabled:this.isEquipButtonDisabled(e.requires_class_rank_level,e.game_class_id)})})}]}specialtyIsEquipped(e){return this.state.specialties_equipped.filter(s=>e===s.game_class_special_id).length>0}classSpecialtiesEquippedTable(e){return[{name:"Name",selector:s=>s.game_class_special.name,cell:s=>t.jsx(o.Fragment,{children:t.jsx("button",{className:"hover:underline text-blue-500 dark:text-blue-400",onClick:()=>this.manageViewSpecialtyEquipped(s,!e),children:s.game_class_special.name})})},{name:"Class Name",selector:s=>s.class_name},{name:"Level",selector:s=>s.level},{name:"XP",selector:s=>s.id,cell:s=>t.jsxs(o.Fragment,{children:[u(s.current_xp),"/",u(s.required_xp)]})},{name:"Deals Damage",selector:s=>this.doesSpecialtyDealDamage(s)?"Yes":"No"},{name:"Actions",selector:s=>s.id,cell:s=>t.jsx(o.Fragment,{children:e?this.specialtyIsEquipped(s.id)?t.jsx("span",{className:"text-green-500 dark:text-green-400",children:"Specialty is equipped"}):this.hasDamageSpecialtyEquipped(s)?t.jsx("span",{className:"text-red-500 dark:text-red-400",children:"You already have a damage specialty equipped."}):t.jsx(Y,{button_label:this.state.equipping&&this.state.equipping_special_id===s.game_class_special_id?t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin"})," Equip"]}):"Equip",on_click:()=>this.equipSpecial(s.game_class_special_id),disabled:this.isEquipButtonDisabled(s.game_class_special.requires_class_rank_level,s.game_class_special.game_class_id)}):t.jsx(Y,{button_label:this.state.equipping&&this.state.equipping_special_id===s.id?t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"fas fa-spinner fa-spin"})," Unequip"]}):"Unequip",on_click:()=>this.unequipSpecial(s.id),disabled:this.state.equipping})})}]}isEquipButtonDisabled(e,s){return this.state.equipping?!0:this.state.class_ranks.filter(n=>n.game_class_id===s)[0].level<e}manageViewSpecialty(e){this.setState({special_selected:e})}manageViewSpecialtyEquipped(e,s){this.setState({equipped_special:e,show_equipped:s})}hasDamageSpecialtyEquipped(e){return this.state.specialties_equipped.some(s=>s.specialty_damage!==null&&e.specialty_damage!==null?s.specialty_damage>0:!1)}renderSpecialty(){if(this.state.special_selected!==null)return t.jsxs("div",{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px] right-[20px]",children:t.jsx("button",{onClick:()=>this.manageViewSpecialty(null),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"text-sky-700 dark:text-sky-500 font-bold my-4",children:this.state.special_selected.name}),t.jsx("p",{className:"my-4",children:this.state.special_selected.description}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Damage Information"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Required Attack Type:"}),t.jsx("dd",{children:de.startCase(this.state.special_selected.attack_type_required)}),t.jsx("dt",{children:"Damage Amount:"}),t.jsx("dd",{children:u(this.state.special_selected.specialty_damage)}),t.jsx("dt",{children:"Damage Increase per level:"}),t.jsx("dd",{children:u(this.state.special_selected.increase_specialty_damage_per_level)}),t.jsx("dt",{children:"% Of Damage Stat Used:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.specialty_damage_uses_damage_stat_amount),"%"]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("h3",{className:"my-4",children:"Evasion Bonus"}),t.jsx("p",{children:"This will be applied to your spell evasion, which comes primarily from rings."}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Spell Evasion"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.spell_evasion),"%"]})]})]}),t.jsx("div",{className:"lg:hidden block border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:"Modifier Information"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{className:"mb-4",children:[t.jsx("dt",{children:"Base Damage Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.base_damage_mod),"%"]}),t.jsx("dt",{children:"Base AC Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.base_ac_mod),"%"]}),t.jsx("dt",{children:"Base Healing Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.base_healing_mod),"%"]}),t.jsx("dt",{children:"Base Spell Damage Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.base_spell_damage_mod),"%"]}),t.jsx("dt",{children:"Base Health Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.health_mod),"%"]}),t.jsx("dt",{children:"Base Damage Stat Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.base_damage_stat_increase),"%"]})]}),t.jsx("h3",{children:"Reductions"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Affix Damage Reduction"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.affix_damage_reduction),"%"]}),t.jsx("dt",{children:"Healing Reduction"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.healing_reduction),"%"]}),t.jsx("dt",{children:"Skill Reduction"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.skill_reduction),"%"]}),t.jsx("dt",{children:"Resistance Reduction"}),t.jsxs("dd",{children:[this.renderPercent(this.state.special_selected.resistance_reduction),"%"]})]})]})]})]})]})}renderSpecialtyEquipped(e){if(this.state.equipped_special!==null)return t.jsxs("div",{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px]",children:t.jsx("button",{onClick:()=>this.manageViewSpecialtyEquipped(null,!1),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"my-4",children:[t.jsxs("h3",{className:"text-green-500 dark:text-green-400 font-bold my-4",children:[this.state.equipped_special.game_class_special.name," ",this.state.show_equipped?e!==null?"("+e+" Level: "+this.state.equipped_special.level+")":"(Level: "+this.state.equipped_special.level+")":"(Level: "+this.state.equipped_special.level+")"]}),t.jsx("p",{className:"my-4",children:this.state.equipped_special.game_class_special.description}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Damage Information"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Required Attack Type:"}),t.jsx("dd",{children:de.startCase(this.state.equipped_special.game_class_special.attack_type_required)}),t.jsx("dt",{children:"Damage Amount:"}),t.jsx("dd",{children:u(this.state.equipped_special.specialty_damage)}),t.jsx("dt",{children:"Damage Increase per level:"}),t.jsx("dd",{children:u(this.state.equipped_special.increase_specialty_damage_per_level)}),t.jsx("dt",{children:"% Of Damage Stat Used:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.game_class_special.specialty_damage_uses_damage_stat_amount),"%"]})]})]}),t.jsx("div",{className:"lg:hidden block border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:"Modifier Information"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Base Damage Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.base_damage_mod),"%"]}),t.jsx("dt",{children:"Base AC Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.base_ac_mod),"%"]}),t.jsx("dt",{children:"Base Healing Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.base_healing_mod),"%"]}),t.jsx("dt",{children:"Base Spell Damage Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.base_spell_damage_mod),"%"]}),t.jsx("dt",{children:"Base Health Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.health_mod),"%"]}),t.jsx("dt",{children:"Base Damage Stat Modifier:"}),t.jsxs("dd",{children:[this.renderPercent(this.state.equipped_special.base_damage_stat_increase),"%"]})]})]})]})]})]})}renderPercent(e){return e===null?0:(e*100).toFixed(2)}renderSpecialties(){return t.jsxs(o.Fragment,{children:[this.state.equipping?t.jsx(D,{}):null,this.state.success_message!==null?t.jsx(je,{children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{children:this.state.error_message}):null,t.jsxs(Be,{tabs:this.tabs,children:[t.jsxs(H,{children:[t.jsxs("div",{className:"mb-4",children:[t.jsx(Ce,{additional_css:"my-4",children:'To reset the table below, select "Please select" when filtering by class.'}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"mr-4 dark:text-gray-300 mt-[10px]",children:"Class Filter"}),t.jsx("div",{className:"w-1/2",children:t.jsx(B,{onChange:this.filterTableByClass.bind(this),options:this.classOptions(!0),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:this.state.selected_filter!==null?this.state.selected_filter:"Please Select",value:this.state.selected_filter!==null?this.state.selected_filter:"Please Select"}]})})]})]}),t.jsx(Ie,{data:this.state.class_specials_for_table,columns:this.classSpecialtiesTable(),dark_table:this.state.dark_tables})]},"class-specialties"),t.jsx(H,{children:t.jsx(Ie,{data:this.state.specialties_equipped,columns:this.classSpecialtiesEquippedTable(!1),dark_table:this.state.dark_tables})},"equipped-specialties"),t.jsxs(H,{children:[t.jsx(Ce,{additional_css:"my-4",children:"These specialties are ones you have progression in but do not have equipped."}),t.jsxs("div",{className:"flex mb-4",children:[t.jsx("div",{className:"mr-4 dark:text-gray-300 mt-[10px]",children:"Class Filter"}),t.jsx("div",{className:"w-1/2",children:t.jsx(B,{onChange:this.filterOtherSpecialties.bind(this),options:this.classOptions(!1),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:this.state.other_selected_filter!==null?this.state.other_selected_filter:"Please Select",value:this.state.other_selected_filter!==null?this.state.other_selected_filter:"Please Select"}]})})]}),t.jsx(Ie,{data:this.state.other_class_specialties,columns:this.classSpecialtiesEquippedTable(!0),dark_table:this.state.dark_tables})]},"other-specialties")]})]})}render(){return this.props.character===null?null:t.jsx("div",{className:"max-h-[475px] lg:max-h-[525px] overflow-y-auto",children:this.state.loading?t.jsx("div",{className:"p-10",children:t.jsx(D,{})}):this.state.equipped_special!==null?this.renderSpecialtyEquipped("Equipped"):this.state.special_selected!==null?this.renderSpecialty():this.renderSpecialties()})}}class Fh extends c.Component{constructor(e){super(e),this.tabs=[{key:"class-ranks",name:"Class Ranks"},{key:"class-masteries",name:"Class Masteries"}]}whenTabUpdates(e){this.props.when_tab_changes&&this.props.when_tab_changes(e,this.tabs)}render(){return this.props.character===null?null:t.jsxs(Be,{tabs:this.tabs,full_width:!0,listen_for_change:this.whenTabUpdates.bind(this),children:[t.jsx(H,{children:t.jsx(Ih,{character:this.props.character})},"class-ranks"),t.jsx(H,{children:t.jsx(Mh,{is_open:!0,manage_modal:()=>{},title:"",character:this.props.character,finished_loading:!0})},"class-masteries")]})}}class sn extends c.Component{constructor(e){super(e),this.state={character_class_rank_tab_text:"class-ranks"}}changeAdditionalInfoTextWhenTabChanges(e,s){const i=s[e];this.setState({character_class_rank_tab_text:i.key})}buildHelpSectionContentBasedOnTab(){switch(this.state.character_class_rank_tab_text){case"class-ranks":return this.classRanksHelpText();case"class-masteries":return this.classSpecialHelpText();default:return null}}classRanksHelpText(){return t.jsxs("div",{className:"max-h-[400px] overflow-y-scroll",children:[t.jsx("h1",{children:"What is this?"}),t.jsxs("p",{className:"dark:text-gray-300 mt-4",children:["To the left, or top (For mobile), we can manage our ",t.jsxs("a",{href:"/information/class-ranks",target:"_blank",children:["Class Ranks ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ",". We can think of these in a similar vien of Final Fantasy Job system (or similar games) where players cna switch classes, level special abilities and mix and match those abilities to make their own build."]}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Characters level their class ranks by being that class and killing creatures. Over time, your server message section will tell you when your class rank, class special or class weapon mastery levels up."}),t.jsx("h3",{className:"underline",children:"When To Switch Classes"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Players can switch classes at anytime they want. Players will notice the Orange skill under their trainable skills will swap out for that classes skill."}),t.jsx("h3",{className:"underline",children:"Weapon Masteries"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Each class has a list of weapon masteries, which while that weapon type is equipped, as you kill creatures this will level - allowing you do an additional % of damage while that weapon type is equipped. You can see this by clicking on the class rank name."}),t.jsx("h3",{className:"underline",children:"Some Classes Require Other Classes"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Some classes like Prisoner or Alcoholic require players to level other class ranks to specific levels before being able to switch to those classes. These classes cannot be selected at registration."}),t.jsx("h3",{className:"underline",children:"Some Classes Require Other Classes"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Some classes like Prisoner or Alcoholic require players to level other class ranks to specific levels before being able to switch to those classes. These classes cannot be selected at registration."})]})}classSpecialHelpText(){return t.jsxs(t.Fragment,{children:[t.jsx("h1",{children:"What is this?"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["To the left, or top (For mobile), we can manage our ",t.jsxs("a",{href:"/information/class-ranks",target:"_blank",children:["Class Specialties ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ",". We can think of these as special abilities that you can equip and level up by killing creatures."]}),t.jsx("h3",{className:"underline",children:"Mixing and Matching"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Players who switch classes and level their class rank via fighting monsters, will unlock specials that can the be equipped. Some of them give boosts to Attack, Ac, Healing and so on. While others will allow you to deal damage, but you can only have one damage ability equipped at a time."}),t.jsx("h3",{className:"underline",children:"Making Your Own Build"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Players who level each class and unlock each of the classes special abilities as well as level them up will find that they have a play ground of their own making where they can create their own build that make their character not just feel unique but all their own."}),t.jsx("h3",{className:"underline",children:"Specific Attack Types"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"As you click through the Class Specials you will notice the ones that do damage will tell you, in the top left, what attack type to use when fighting monsters to trigger the attack."})]})}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute top-1/4 bottom-1/4 left-1/2 bg-gray-300 w-px transform -translate-x-1/2"}),t.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center",children:[t.jsx("div",{id:"leftSide",className:"pr-4 sm:w-full md:w-1/2",children:t.jsx(Fh,{character:this.props.character,is_open:!0,manage_modal:()=>{},title:"",finished_loading:!0,when_tab_changes:this.changeAdditionalInfoTextWhenTabChanges.bind(this)})}),t.jsx("div",{id:"rightSide",className:"mt-10 md:mt-0 pl-4 sm:w-full md:w-1/2",children:this.buildHelpSectionContentBasedOnTab()})]})]})}}class Oh extends c.Component{constructor(e){super(e),this.state={is_loading:!0,elemental_atonement_details:[],error_message:""}}componentDidMount(){new g().setRoute("character-sheet/"+this.props.character.id+"/elemental-atonement-info").doAjaxCall("get",e=>{this.setState({is_loading:!1,elemental_atonement_details:e.data.elemental_atonement_details})},e=>{this.setState({is_loading:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.message})})}render(){return this.state.is_loading?t.jsx(D,{}):t.jsxs("div",{children:[t.jsx("p",{className:"my-4",children:"Your atonement is calculated based off the gems you have socketed onto your gear. The highest elemental value is your damage, where as the rest are used as resistances against that type of elemental damage."}),this.state.elemental_atonement_details===null?t.jsxs(rt,{children:["You have nothing equipped. Cannot calculate your Elemental Atonement. Learn more ",t.jsxs("a",{href:"/information/atonement",target:"_blank",children:["here: Atonement ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}):t.jsxs(o.Fragment,{children:[t.jsx(za,{original_atonement:this.state.elemental_atonement_details.elemental_atonement}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("h4",{className:"my-4",children:"Elemental Damage"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Element: "}),t.jsx("dd",{children:this.state.elemental_atonement_details.elemental_atonement.highest_element.name}),t.jsx("dt",{children:"Damage: "}),t.jsxs("dd",{children:[(this.state.elemental_atonement_details.elemental_atonement.highest_element.damage*100).toFixed(2),"%"]})]}),t.jsxs("p",{className:"my-4",children:["Your elemental damage is a % of damage you will deal as that element in addition to your other attacks when you attack an enemy. You can learn more about it ",t.jsxs("a",{href:"/information/atonement",target:"_blank",children:["here: Atonement ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})]})}}class an extends c.Component{constructor(e){super(e)}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute top-1/4 bottom-1/4 left-1/2 bg-gray-300 w-px transform -translate-x-1/2"}),t.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-center",children:[t.jsx("div",{id:"leftSide",className:"pr-4 sm:w-full md:w-1/2",children:t.jsx(Oh,{character:this.props.character,is_open:!0,manage_modal:()=>{},title:"",finished_loading:!0})}),t.jsxs("div",{id:"rightSide",className:"mt-10 md:mt-0 pl-4 sm:w-full md:w-1/2 max-h-[400px] overflow-y-scroll",children:[t.jsx("h1",{children:"What is this?"}),t.jsxs("p",{className:"dark:text-gray-300 mt-4",children:["To the left, or top (For mobile), we can see our ",t.jsxs("a",{href:"/information/gems",target:"_blank",children:["Elemental Atonement's ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ",". You get these from Gem Crafting (Click link above) which we can start doing at End game when it matters."]}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Players will not need to make use of this feature until they start participating in Raids where enemies have Elemental Attacks of their own."}),t.jsx("h3",{className:"underline",children:"Gems"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Players craft what are called gems, there are 4 tiers each giving a specific % that is randomly rolled for that rank which applies to your damage and resistance."}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"Each gem will have a Fire, Water and Ice atonement %. The highest value on that gem is what the gem is atoned to. Each element is weak and strong against the opposite element: Fire is Strong Against Ice who is Strong against Water who is strong against Fire."}),t.jsx("h3",{className:"underline",children:"Sockets"}),t.jsxs("p",{className:"dark:text-gray-300 my-4",children:["Players who have access to Purgatory can access the ",t.jsxs("a",{href:"/information/seer-camp",target:"_blank",children:["Seer Camp ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," ","which allows you to apply 1-6 sockets on a piece of gear and then socket the gems on to"," ","your gear and even remove gems."]}),t.jsx("h3",{className:"underline",children:"Atonement"}),t.jsx("p",{className:"dark:text-gray-300 my-4",children:"When you craft and socket your gems your character will become atoned to the element who is the highest across all your gear meaning you will do double damage to those weak to your element and reduce damage from monsters who have the opposite element."})]})]})]})}}class Lh extends c.Component{constructor(e){super(e),this.tabs=[{key:"core-info",name:"Base Info"},{key:"resistance",name:"Resistances"},{key:"reincarnation",name:"Reincarnation"},{key:"class-ranks",name:"Class Ranks"},{key:"elemental-atonement",name:"Elemental Atonement"}],this.state={small_tab_selected:"",view_port:0}}componentDidMount(){qt(this)}sectionDropDownOptions(){return this.tabs.map(e=>({label:e.name,value:e.key}))}setSelected(e){this.setState({small_tab_selected:e.value})}getSelectedValue(){if(this.state.small_tab_selected==="")return{label:"Please select",value:""};const e=this.tabs.find(s=>s.key===this.state.small_tab_selected);return e?{label:e==null?void 0:e.name,value:e==null?void 0:e.key}:{label:"Please select",value:""}}renderSmallSection(){switch(this.state.small_tab_selected){case"core-info":return t.jsx(Zi,{character:this.props.character});case"resistance":return t.jsx(en,{character:this.props.character});case"reincarnation":return t.jsx(tn,{character:this.props.character});case"class-ranks":return t.jsx(sn,{character:this.props.character});case"elemental-atonement":return t.jsx(an,{character:this.props.character});default:return null}}renderTabs(){return t.jsxs(Be,{tabs:this.tabs,full_width:!0,children:[t.jsx(H,{children:t.jsx(Zi,{character:this.props.character})},"core-info"),t.jsx(H,{children:t.jsx(en,{character:this.props.character})},"resistance"),t.jsx(H,{children:t.jsx(tn,{character:this.props.character})},"reincarnation"),t.jsx(H,{children:t.jsx(sn,{character:this.props.character})},"class-ranks"),t.jsx(H,{children:t.jsx(an,{character:this.props.character})},"elemental-atonement")]})}render(){return this.state.view_port<775?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"my-4",children:t.jsx(B,{onChange:this.setSelected.bind(this),options:this.sectionDropDownOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedValue()})}),this.renderSmallSection()]}):this.renderTabs()}}class $h extends c.Component{constructor(e){super(e),this.state={show_inventory_section:!1,show_skills_section:!1,show_top_section:!1,show_additional_character_data:!1,reincarnating:!1,success_message:null,error_message:null,reincarnation_check:!1}}manageReincarnationCheck(){this.setState({reincarnation_check:!this.state.reincarnation_check})}showSection(){return typeof this.props.view_port>"u"?!0:this.props.view_port>1600}showCloseButton(){return typeof this.props.view_port>"u"?!1:this.props.view_port<1600}showTopSection(){this.setState({show_top_section:!this.state.show_top_section})}showSelectedSection(e){switch(e.value){case"inventory":return this.manageInventoryManagement();case"skills":return this.manageSkillsManagement();default:return}}showAdditionalCharacterData(){this.setState({show_additional_character_data:!this.state.show_additional_character_data})}manageInventoryManagement(){this.setState({show_inventory_section:!this.state.show_inventory_section})}manageSkillsManagement(){this.setState({show_skills_section:!this.state.show_skills_section})}reincarnateCharacter(){this.setState({reincarnating:!0,reincarnation_check:!1},()=>{var e;new g().setRoute("character/reincarnate/"+((e=this.props.character)==null?void 0:e.id)).doAjaxCall("post",s=>{this.setState({reincarnating:!1,success_message:s.data.message})},s=>{this.setState({reincarnating:!1},()=>{if(typeof s.response<"u"){const i=s.response;this.setState({error_message:i.data.message})}})})})}render(){return this.props.character===null?null:this.state.show_additional_character_data?t.jsx(Rh,{close_action:this.showAdditionalCharacterData.bind(this),children:t.jsx(Lh,{character:this.props.character})}):t.jsxs("div",{children:[this.props.character.is_dead?t.jsx(z,{additional_css:"mb-4",children:t.jsx("p",{className:"p-3",children:"Christ child! You are dead. Dead people cannot do a lot of things including: Manage inventory, Manage Skills - including passives, Manage Boons or even use items. Go resurrect child!"})}):null,this.props.character.is_automation_running?t.jsxs(rt,{additional_css:"mb-4",children:[t.jsx("p",{className:"p-3",children:"Child! You are busy with Automation. You cannot manage aspects of your inventory or skills such as whats training, passives or equipped items."}),t.jsx("p",{className:"p-3",children:"How ever, you can still manage the items you craft - such as sell, disenchant and destroy. You can also move items to sets, but not equip sets."}),t.jsxs("p",{className:"p-3",children:["Please see ",t.jsxs("a",{href:"/information/automation",target:"_blank",children:["Automation ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," for more details."]})]}):null,t.jsx("div",{className:"flex flex-col lg:flex-row w-full gap-2",children:this.showSection()||this.state.show_top_section?t.jsxs(o.Fragment,{children:[t.jsxs(_e,{additionalClasses:"overflow-y-auto lg:w-1/2",children:[this.showCloseButton()?t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px]",children:t.jsx("button",{onClick:this.showTopSection.bind(this),children:t.jsx("i",{className:"fas fa-minus-circle"})})}):null,t.jsx(ih,{character:this.props.character,finished_loading:this.props.finished_loading,view_port:this.props.view_port,manage_addition_data:this.showAdditionalCharacterData.bind(this),update_pledge_tab:this.props.update_pledge_tab,update_faction_action_tasks:this.props.update_faction_action_tasks})]}),t.jsx(_e,{additionalClasses:"overflow-y-auto lg:w-1/2 md:max-h-[325px]",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold:"}),t.jsx("dd",{children:this.props.character.gold}),t.jsx("dt",{children:"Gold Dust:"}),t.jsx("dd",{children:this.props.character.gold_dust}),t.jsx("dt",{children:"Shards:"}),t.jsx("dd",{children:this.props.character.shards}),t.jsx("dt",{children:"Copper Coins:"}),t.jsx("dd",{children:this.props.character.copper_coins})]}),t.jsxs("div",{className:"mt-6 text-center",children:[t.jsx(Y,{button_label:"Reincarnate Character",on_click:this.manageReincarnationCheck.bind(this)}),t.jsx("p",{className:"text-sm my-2",children:t.jsxs("a",{href:"/information/reincarnation",target:"_blank",children:["What is Reincarnation? ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),this.state.reincarnating?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx("p",{className:"text-red-500 dark:text-red-400 my-3",children:this.state.error_message}):null,this.state.success_message!==null?t.jsx("p",{className:"text-green-500 dark:text-green-400 my-3",children:this.state.success_message}):null]})]}),t.jsx("div",{className:"border-b-2 block lg:hidden border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{children:[t.jsxs("dl",{children:[t.jsx("dt",{children:"Inventory Max:"}),t.jsx("dd",{children:this.props.character.inventory_max}),t.jsx("dt",{children:"Inventory Count:"}),t.jsx("dd",{children:this.props.character.inventory_count})]}),t.jsx("p",{className:"my-4",children:"Inventory count consists of both Usable Items, Items in your inventory as well as your Gem Bag. Equipment, Quest items and Sets do not count towards inventory count."}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Damage Stat:"}),t.jsx("dd",{children:this.props.character.damage_stat}),t.jsx("dt",{children:"To Hit:"}),t.jsx("dd",{children:this.props.character.to_hit_stat}),t.jsx("dt",{children:"Class Bonus:"}),t.jsxs("dd",{children:[(this.props.character.extra_action_chance.chance*100).toFixed(2),"%"]})]}),t.jsxs("p",{className:"mt-4",children:["Make sure you read up on your ",t.jsxs("a",{href:"/information/class/"+this.props.character.class_id,target:"_blank",children:["class ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," for tips and tricks."]})]})]})})]}):t.jsx(o.Fragment,{children:t.jsxs(_e,{additionalClasses:"overflow-y-auto lg:w-1/2",children:[t.jsx("span",{className:"relative top-[10px]",children:t.jsx("strong",{children:"Character Details"})}),t.jsx("div",{className:"text-right cursor-pointer text-blue-500 relative top-[-12px]",children:t.jsx("button",{onClick:this.showTopSection.bind(this),children:t.jsx("i",{className:"fas fa-plus-circle"})})})]})})}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full mt-2",children:[this.showSection()||this.state.show_skills_section?t.jsxs(_e,{additionalClasses:"overflow-y-auto lg:w-1/2 lg:h-fit",children:[this.showCloseButton()?t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px]",children:t.jsx("button",{onClick:this.manageSkillsManagement.bind(this),children:t.jsx("i",{className:"fas fa-minus-circle"})})}):null,t.jsx(uh,{character_id:this.props.character.id,user_id:this.props.character.user_id,is_dead:this.props.character.is_dead,is_automation_running:this.props.character.is_automation_running,finished_loading:this.props.finished_loading})]}):null,this.showSection()||this.state.show_inventory_section?t.jsxs(_e,{additionalClasses:"overflow-y-auto lg:w-1/2 lg:h-fit",children:[this.showCloseButton()?t.jsx("div",{className:"text-right cursor-pointer text-red-500 relative top-[10px]",children:t.jsx("button",{onClick:this.manageInventoryManagement.bind(this),children:t.jsx("i",{className:"fas fa-minus-circle"})})}):null,t.jsx(Th,{character_id:this.props.character.id,is_dead:this.props.character.is_dead,user_id:this.props.character.user_id,is_automation_running:this.props.character.is_automation_running,finished_loading:this.props.finished_loading,update_disable_tabs:this.props.update_disable_tabs})]}):null,!this.showSection()&&!this.state.show_inventory_section&&!this.state.show_skills_section?t.jsx(B,{onChange:this.showSelectedSection.bind(this),options:[{label:"Inventory Management",value:"inventory"},{label:"Skill Management",value:"skills"}],menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:"Please Select",value:""}]}):null]}),this.state.reincarnation_check?t.jsx(Ah,{manage_modal:this.manageReincarnationCheck.bind(this),handle_reincarnate:this.reincarnateCharacter.bind(this)}):null]})}}class Bh extends c.Component{constructor(e){super(e),this.state={new_name:"",error_message:"",loading:!1}}changeName(){this.setState({loading:!0},()=>{new g().setRoute("character-sheet/"+this.props.character_id+"/name-change").setParameters({name:this.state.new_name}).doAjaxCall("post",e=>{location.reload()},e=>{let s=null;this.setState({loading:!1}),typeof e.response<"u"&&(s=e.response,this.setState({error_message:s.data.errors.name[0]}))})})}closeErrorMessage(){this.setState({error_message:""})}updateName(e){const s=e.target.value;s.length>15?this.setState({error_message:"Name is above the 15 character limit.",new_name:s}):s.length<5?this.setState({error_message:"Name is below the 5 character limit.",new_name:s}):this.setState({new_name:s,error_message:""})}manageModal(){}render(){return t.jsx(ee,{is_open:!0,handle_close:this.manageModal,primary_button_disabled:!0,title:"Force Name Change",secondary_actions:{secondary_button_label:"Change Name",secondary_button_disabled:this.state.loading||this.state.new_name===""||this.state.error_message!=="",handle_action:this.changeName.bind(this)},children:t.jsxs("div",{className:"mb-5 relative",children:[this.state.error_message!==""?t.jsx(z,{close_alert:this.closeErrorMessage.bind(this),additional_css:"mb-5",children:this.state.error_message}):null,t.jsx("p",{className:"mb-5",children:"The Creator has decided that your name violates the rules of the game or is offensive to other players. You are being forced to change your name. Even if you logout and back in, you will still see this modal. Failure to change your name, or use of third party tools to get around this, will result in an immediate ban."}),t.jsxs("div",{className:"mb-5",children:[t.jsx("label",{className:"label block mb-2",htmlFor:"set-name",children:"New Character Name"}),t.jsx("input",{id:"set-name",type:"text",className:"form-control",name:"set-name",value:this.state.new_name,autoFocus:!0,onChange:this.updateName.bind(this)}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Character names may not contain spaces an can only be 15 characters long (5 characters min) and only contain letters and numbers (of any case)."})]}),this.state.loading?t.jsx(D,{}):null]})})}}class Gh extends c.Component{constructor(e){super(e),this.refreshListener=Echo.private("refresh-listener-"+this.props.user_id)}componentDidMount(){this.refreshListener.listen("Admin.Events.RefreshUserScreenEvent",e=>{location.reload()})}render(){return null}}const Uh=a=>[{name:"Name",selector:e=>e.name,cell:e=>t.jsxs("button",{className:"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-500",onClick:()=>a(e),children:[Hh(e)," ",e.name," ",e.is_protected?" (Protected) ":""]})},{name:"Map",selector:e=>e.game_map_name},{name:"X Position",selector:e=>e.x_position},{name:"Y Position",selector:e=>e.y_position},{name:"Current Morale",selector:e=>e.current_morale,cell:e=>(e.current_morale*100).toFixed(2)+"%"},{name:"Treasury",selector:e=>e.treasury,cell:e=>u(e.treasury)},{name:"Gold Bars",selector:e=>e.gold_bars,cell:e=>u(e.gold_bars)}],Hh=a=>{const e=[];a.is_protected&&e.push(t.jsx("i",{className:"ra ra-heavy-shield text-blue-500 dark:text-blue-400"})),a.is_under_attack&&e.push(t.jsx("i",{className:"ra ra-axe text-red-500 dark:text-red-400"}));const s=a.unitsInMovement.filter(i=>{const n=i.is_returning||i.is_moving||i.is_recalled||i.is_attacking,r=a.name===i.from_kingdom_name,l=a.name===i.to_kingdom_name;return n&&(r||l)});return s.length>0&&(s[0].is_attacking&&e.push(t.jsx("i",{className:"ra ra-axe text-red-500 dark:text-red-400"})),s[0].is_returning||s[0].is_recalled?e.push(t.jsx("i",{className:"fas fa-exchange-alt text-orange-500 dark:text-orange-300"})):e.push(t.jsx("i",{className:"ra ra-heavy-shield text-blue-500 dark:text-blue-400"}))),e};class Ga extends c.Component{constructor(e){super(e)}render(){return t.jsx("button",{type:"button",className:"py-2 px-3 text-xs border-sky-500 border-2 font-medium text-center text-gray-900 dark:text-gray-200 hover:text-gray-200 dark:hover:text-gray-300 hover:bg-sky-600 rounded-sm focus:ring-4 focus:ring-sky-300 dark:hover:bg-sky-600 dark:focus:ring-sky-800 disabled:bg-sky-600 disabled:bg-opacity-75 dark:disabled:bg-opacity-50 dark:disabled:bg-sky-500 disabled:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-200 dark:focus-visible:ring-white focus-visible:ring-opacity-75 "+this.props.additional_css,onClick:this.props.on_click,disabled:this.props.disabled,children:this.props.button_label})}}class Kh extends c.Component{constructor(e){super(e),this.state={name:this.props.name,loading:!1,error_message:""}}setName(e){this.setState({name:e.target.value,error_message:""})}rename(){this.setState({loading:!0},()=>{new g().setParameters({name:this.state.name}).setRoute("kingdom/"+this.props.kingdom_id+"/rename").doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.handle_close()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Re-name Kingdom",secondary_actions:{handle_action:this.rename.bind(this),secondary_button_disabled:this.state.name.length===0||this.state.name===this.props.name,secondary_button_label:"Rename Kingdom"},children:[t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("label",{className:"w-[50px]",children:"Name"}),t.jsx("div",{className:"w-2/3",children:t.jsx("input",{type:"text",value:this.state.name,onChange:this.setName.bind(this),className:"form-control",disabled:this.state.loading,minLength:5,maxLength:30})})]}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class zh extends c.Component{constructor(e){super(e),this.state={loading:!1,total:"",error_message:"",cost:0}}setAmount(e){let s=parseInt(e.target.value,10);s>2e9&&(s=2e9),this.setState({total:s,cost:s*5,error_message:""})}buyPop(){this.setState({loading:!0},()=>{new g().setParameters({amount_to_purchase:this.state.total}).setRoute("kingdoms/purchase-people/"+this.props.kingdom.id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.handle_close()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Buy Population",primary_button_disabled:this.state.loading,secondary_actions:{handle_action:this.buyPop.bind(this),secondary_button_disabled:this.state.total===0||this.props.gold===0||this.state.cost>this.props.gold||this.state.loading,secondary_button_label:"Buy Population"},children:[t.jsxs("p",{className:"mt-4",children:[t.jsx("strong",{children:"Caution:"})," You may buy a total of 2 billion people at a cost of 5 Gold person. However if, upon the hourly update of kingdoms, you have more then the maximum population your kingdom is allowed, The Old Man will be angry with you."]}),t.jsx("p",{className:"my-4",children:"The Old Man will first take the cost of 10,000 gold per additional person over the population limit for the kingdom from your kingdom treasury. No gold? He will take your the amount out of your Gold Bars rounded up. No Gold Bars? He will take the gold out of your pockets. Still no gold? He will destroy your kingdom."}),t.jsx("p",{className:"my-4",children:t.jsx("strong",{children:"Do not buy more then you can use."})}),t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("label",{className:"w-1/2",children:"Population To Buy"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",value:this.state.total,onChange:this.setAmount.bind(this),className:"form-control",disabled:this.state.loading})})]}),t.jsx("div",{className:"my-4",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold on hand:"}),t.jsx("dd",{children:u(this.props.gold)}),t.jsx("dt",{children:"Total Cost:"}),t.jsx("dd",{children:u(this.state.cost)})]})}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class Wh extends c.Component{constructor(e){super(e),this.tabs=[{key:"deposit",name:"Deposit"},{key:"withdrawal",name:"withdrawal"}],this.state={amount_to_withdraw:"",amount_to_deposit:"",cost_to_deposit:0,gold_gained:0,error_message:"",success_message:"",loading:!1}}setAmountToWithdraw(e){let s=de.parseInt(e.target.value,10)||0;if(s===0)return this.setState({success_message:"",error_message:"",amount_to_withdraw:"",gold_gained:0});s>this.props.gold_bars&&(s=this.props.gold_bars),this.setState({success_message:"",error_message:"",amount_to_withdraw:s,gold_gained:s*2e9})}setAmountToDeposit(e){let s=de.parseInt(e.target.value,10)||0;this.setAmount(s)}setAmount(e){if(e===0)return this.setState({success_message:"",error_message:"",amount_to_deposit:"",cost_to_deposit:0});e>1e3&&(e=1e3),this.props.gold_bars+e>1e3&&(e=this.props.gold_bars-this.props.gold_bars),this.setState({success_message:"",error_message:"",amount_to_deposit:e,cost_to_deposit:e*2e9})}closeSuccess(){this.setState({success_message:""})}withdraw(){this.setState({loading:!0,error_message:"",success_message:""},()=>{new g().setParameters({amount_to_withdraw:this.state.amount_to_withdraw}).setRoute("kingdoms/withdraw-bars-as-gold/"+this.props.kingdom_id).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message,amount_to_deposit:"",amount_to_withdraw:""})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}deposit(){this.setState({loading:!0,error_message:"",success_message:""},()=>{new g().setParameters({amount_to_purchase:this.state.amount_to_deposit}).setRoute("kingdoms/purchase-gold-bars/"+this.props.kingdom_id).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message,amount_to_deposit:"",amount_to_withdraw:""})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}isInputDisabled(e){return this.props.goblin_bank.level<5?!0:e===0}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Goblin Bank",primary_button_disabled:this.state.loading,children:[this.props.goblin_bank.level<5?t.jsx(rt,{additional_css:"my-4",children:"You need to level the Goblin Bank to level 5 before being able to use the bank."}):null,t.jsxs(Be,{tabs:this.tabs,disabled:this.state.loading,children:[t.jsxs(H,{children:[t.jsx(Ce,{children:"Cost to buy is 2 Billion Gold per Rune. You may have a total of 1000 Gold Bars."}),t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("label",{className:"w-1/2",children:"Amount to deposit"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",value:this.state.amount_to_deposit,onChange:this.setAmountToDeposit.bind(this),className:"form-control",disabled:this.isInputDisabled(this.props.character_gold)})})]}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current Gold Bars"}),t.jsx("dd",{children:u(this.props.gold_bars)}),t.jsx("dt",{children:"Current Gold"}),t.jsx("dd",{children:u(this.props.character_gold)}),t.jsx("dt",{children:"Cost in Gold"}),t.jsx("dd",{children:u(this.state.cost_to_deposit)})]}),t.jsx(Y,{button_label:"Deposit Amount",on_click:this.deposit.bind(this),disabled:this.state.amount_to_deposit===""||this.props.character_gold===0||typeof this.state.amount_to_deposit=="number"&&this.state.amount_to_deposit<=0||typeof this.state.cost_to_deposit=="number"&&this.props.character_gold<this.state.cost_to_deposit})]},"deposit"),t.jsxs(H,{children:[t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("label",{className:"w-1/2",children:"Amount to withdraw"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",value:this.state.amount_to_withdraw,onChange:this.setAmountToWithdraw.bind(this),className:"form-control",disabled:this.isInputDisabled(this.props.gold_bars)})})]}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current Gold Bars"}),t.jsx("dd",{children:u(this.props.gold_bars)}),t.jsx("dt",{children:"Gold to gain"}),t.jsx("dd",{children:u(this.state.gold_gained)})]}),t.jsx(Y,{button_label:"Withdraw Amount",on_click:this.withdraw.bind(this),disabled:this.state.amount_to_withdraw===""||this.props.gold_bars<=0})]},"withdrawal")]}),this.state.error_message!==""?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.state.success_message!==""?t.jsx(je,{additional_css:"my-4",close_alert:this.closeSuccess.bind(this),children:this.state.success_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class Yh extends c.Component{constructor(e){super(e),this.state={error_message:"",loading:!1}}abandonKingdom(){this.setState({loading:!0},()=>{new g().setRoute("kingdoms/abandon/"+this.props.kingdom_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.handle_close(),this.props.handle_kingdom_close()})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Abandon Kingdom",primary_button_disabled:this.state.loading,secondary_actions:{handle_action:this.abandonKingdom.bind(this),secondary_button_disabled:!1,secondary_button_label:"Abandon"},children:[t.jsxs("p",{className:"mt-4",children:[t.jsx("strong",{children:"Are you sure"})," you want to do this? You won't be able to abandon the kingdom if:"]}),t.jsxs("ul",{className:"my-4 list-disc ml-5",children:[t.jsx("li",{children:"You have units in queue"}),t.jsx("li",{children:"You have buildings in queue"}),t.jsx("li",{children:"You have units in movement or are under attack or units are traveling to your kingdom"}),t.jsx("li",{children:"You have gold bars in the kingdom"}),t.jsx("li",{children:"You have already abandoned a kingdom"})]}),t.jsx("p",{className:"my-4",children:"Abandoning kingdoms turns it into an NPC kingdom (yellow on the map). You cannot settle or purchase another kingdom for 15 minutes AFTER you have abandoned the kingdom."}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class Qh extends c.Component{constructor(e){super(e),this.tabs=[{key:"deposit",name:"Deposit"},{key:"withdrawal",name:"withdrawal"},{key:"mass-embezzle",name:"Mass Embezzle"}],this.state={amount_to_withdraw:"",amount_to_deposit:"",loading:!1,success_message:"",error_message:""}}setAmountToDeposit(e){let s=parseInt(e.target.value,10)||0;if(s===0)return this.setState({success_message:"",error_message:"",amount_to_deposit:""});if(s>2e9&&(s=2e9),s+this.props.treasury>2e9&&(s=2e9-this.props.treasury),s>this.props.character_gold&&(s=this.props.character_gold),s===0){this.setState({success_message:"",error_message:"",amount_to_deposit:""});return}this.setState({success_message:"",error_message:"",amount_to_deposit:s})}setAmountToWithdraw(e){let s=parseInt(e.target.value,10)||0;return s===0?this.setState({success_message:"",error_message:"",amount_to_withdraw:""}):(s>2e9&&(s=2e9),s>this.props.character_gold&&(s=s-this.props.character_gold,s<=0&&(s=0)),this.setState({success_message:"",error_message:s===0?"This would cost gold wastage. Not allowed.":"",amount_to_withdraw:s===0?"":s}))}closeSuccess(){this.setState({success_message:""})}deposit(){this.setState({loading:!0},()=>{new g().setRoute("kingdoms/deposit/"+this.props.kingdom_id).setParameters({deposit_amount:this.state.amount_to_deposit}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}withdraw(){this.setState({loading:!0},()=>{new g().setRoute("kingdoms/embezzle/"+this.props.kingdom_id).setParameters({embezzle_amount:this.state.amount_to_withdraw}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}massEmbezzle(){this.setState({loading:!0},()=>{new g().setRoute("kingdoms/mass-embezzle/"+this.props.character_id).setParameters({embezzle_amount:this.state.amount_to_withdraw}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}console.error(e)})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Manage Treasury",primary_button_disabled:this.state.loading,children:[t.jsxs(Be,{tabs:this.tabs,disabled:this.state.loading,children:[t.jsxs(H,{children:[t.jsx(Ce,{children:"Depositing Gold can increase the Morale by 5% per deposit. The minimum amount to gain 5% increase in morale is 10,000,000 Gold. Kingdoms can hold a maximum of 2 billion gold. Depositing gold also increases your treasury defence which increases your over all kingdom defence."}),t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("label",{className:"w-1/2",children:"Amount to deposit"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",onChange:this.setAmountToDeposit.bind(this),className:"form-control",disabled:this.props.character_gold===0})})]}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current Treasury"}),t.jsx("dd",{children:u(this.props.treasury)}),t.jsx("dt",{children:"Current Morale"}),t.jsxs("dd",{children:[(this.props.morale*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Current Gold"}),t.jsx("dd",{children:u(this.props.character_gold)})]}),t.jsx(Y,{button_label:"Deposit Amount",on_click:this.deposit.bind(this),disabled:this.state.amount_to_deposit===""||this.props.character_gold===0||typeof this.state.amount_to_deposit=="number"&&this.props.character_gold<this.state.amount_to_deposit})]},"deposit"),t.jsxs(H,{children:[t.jsx(Ce,{children:"Withdrawing, or Embezzling, will reduce the morale of the kingdom by 15%, regardless of amount taken. If a kingdom has 15% or less morale, you cannot withdraw gold. Withdrawing gold also reduces your treasury defence, which reduces your overall kingdom defence."}),t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("label",{className:"w-1/2",children:"Amount to withdraw"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",onChange:this.setAmountToWithdraw.bind(this),className:"form-control",disabled:this.props.treasury===0||this.props.morale<=.15})})]}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current Treasury"}),t.jsx("dd",{children:u(this.props.treasury)}),t.jsx("dt",{children:"Current Morale"}),t.jsxs("dd",{children:[(this.props.morale*100).toFixed(2),"%"]})]}),t.jsx(Y,{button_label:"Withdraw Amount",on_click:this.withdraw.bind(this),disabled:this.state.amount_to_withdraw===""||this.props.treasury===0||this.props.morale<=.15})]},"withdrawal"),t.jsxs(H,{children:[t.jsx("p",{className:"my-4",children:"Mass embezzling can be done from any kingdom, but only applies to all kingdoms on the current plane."}),t.jsx("p",{className:"my-4",children:"Each kingdom that gets embezzled from will reduce it's morale by 15%. Low morale kingdoms and kingdoms with no treasury will be skipped. Each kingdom that can be embezzled from will also loose Treasury Defence, which in turn reduces your over all kingdom defence."}),t.jsx("p",{className:"my-4",children:"Your server message section, below, will update to show which kingdoms you embezzled from and how much as well as morale reductions."}),t.jsxs("p",{className:"my-4",children:["Finally, if you have not completed the Goblins Lust for Gold ",t.jsxs("a",{href:"/information/quests",target:"_blank",children:["quest ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," you will not be able to embezzle and be told as such."]}),t.jsxs("div",{className:"flex items-center my-4",children:[t.jsx("label",{className:"w-1/2",children:"Amount to withdraw"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",onChange:this.setAmountToWithdraw.bind(this),className:"form-control",disabled:this.props.treasury===0})})]}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current Treasury"}),t.jsx("dd",{children:u(this.props.treasury)})]}),t.jsx(Y,{button_label:"Mass Embezzle",on_click:this.massEmbezzle.bind(this)})]},"mass-embezzle")]}),this.state.error_message!==""?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,this.state.success_message!==""?t.jsx(je,{additional_css:"my-4",close_alert:this.closeSuccess.bind(this),children:this.state.success_message}):null,this.state.loading?t.jsx(D,{}):null]})}}class Vh extends c.Component{constructor(e){super(e),this.state={loading:!0,processing_unit_request:!1,kingdoms:[],error_message:null,success_message:null,selected_kingdoms:[],selected_units:[]},this.moveUnits=new wn}componentDidMount(){new g().setRoute("kingdoms/units/"+this.props.character_id+"/"+this.props.kingdom_id+"/call-reinforcements").doAjaxCall("get",e=>{this.setState({loading:!1,kingdoms:e.data})},e=>{this.setState({loading:!1}),console.error(e)})}callUnits(){this.setState({processing_unit_request:!0},()=>{new g().setRoute("kingdom/move-reinforcements/"+this.props.character_id+"/"+this.props.kingdom_id).setParameters({units_to_move:this.state.selected_units}).doAjaxCall("post",e=>{this.setState({processing_unit_request:!1,success_message:e.data.message})},e=>{this.setState({processing_unit_request:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.message})})})}setAmountToMove(e){this.setState({selected_units:e})}setKingdoms(e){this.setState({selected_kingdoms:e})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Call for reinforcements",primary_button_disabled:this.state.loading,secondary_actions:{handle_action:this.callUnits.bind(this),secondary_button_disabled:this.state.loading||this.state.kingdoms.length===0&&this.state.selected_units.length===0,secondary_button_label:"Call Reinforcements"},children:[this.state.loading?t.jsx(Fe,{}):null,this.state.kingdoms.length>0?t.jsxs(o.Fragment,{children:[t.jsx(Sn,{kingdoms:this.state.kingdoms,update_units_selected:this.setAmountToMove.bind(this),update_kingdoms_selected:this.setKingdoms.bind(this)}),this.state.processing_unit_request?t.jsx(D,{}):null]}):t.jsx(Ce,{children:"You have no units in other kingdoms to move units from or you have no other kingdoms."}),this.state.success_message!==null?t.jsx(je,{additional_css:"my-4",children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null]})}}class Xh extends c.Component{constructor(e){super(e),this.state={loading:!1,total:0,error_message:"",time_estimate:0,cost:0}}getTimeLeft(){const e=Ye.fromISO(this.props.smelting_completed_at),s=Ye.now(),i=e.diff(s,"seconds").toObject();return typeof i>"u"||typeof i.seconds>"u"?0:parseInt(i.seconds.toFixed(0))}setAmount(e){let s=parseInt(e.target.value,10)||0;s>this.props.max_steel&&(s=this.props.max_steel);let n=(s/100>>0)*5;this.setState({total:s,cost:s*2,error_message:s<100&&s>0?"Can only smelt a minimum of 100 iron at a time.":"",time_estimate:parseInt((n-n*this.props.smelting_time_reduction).toFixed(2))})}smeltSteel(){this.setState({loading:!0},()=>{new g().setParameters({amount_to_smelt:this.state.total}).setRoute("kingdoms/smelt-iron/"+this.props.kingdom_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}})})}cancelSmelting(){this.setState({loading:!0},()=>{new g().setRoute("kingdoms/cancel-smelting/"+this.props.kingdom_id).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;s.status===422&&this.setState({error_message:s.data.message})}})})}renderSmeltingOption(){return t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("label",{className:"w-1/2",children:"Iron to smelt"}),t.jsx("div",{className:"w-1/2",children:t.jsx("input",{type:"number",onChange:this.setAmount.bind(this),className:"form-control",disabled:this.state.loading})})]}),t.jsx("div",{className:"my-4",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Iron on hand:"}),t.jsx("dd",{children:u(this.props.iron)}),t.jsx("dt",{children:"Iron Cost:"}),t.jsx("dd",{className:$({"text-red-500 dark:text-red-400":this.state.cost>this.props.iron}),children:u(this.state.cost)}),t.jsx("dt",{children:"Time Estimate:"}),t.jsxs("dd",{children:[u(this.state.time_estimate)," Minutes"]})]})}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Smelt Steel",primary_button_disabled:this.state.loading,secondary_actions:{handle_action:this.smeltSteel.bind(this),secondary_button_disabled:this.state.total===0||this.state.total<100||this.props.iron===0||this.state.cost>this.props.iron||this.state.loading,secondary_button_label:"Smelt Steel"},children:this.props.smelting_time_left>0?t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-4",children:"Canceling this smelting request will only give you a percentage of iron back based on the time elapsed."}),t.jsx(De,{time_remaining:this.getTimeLeft(),time_out_label:"Smelting Steel: "+u(this.props.smelting_amount)}),t.jsx(ce,{button_label:"Stop Smelting",on_click:this.cancelSmelting.bind(this),additional_css:"my-4"}),this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,this.state.loading?t.jsx(D,{}):null]}):this.renderSmeltingOption()})}}class Jh extends c.Component{constructor(e){super(e)}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.handle_close,title:"Specialty Actions Help",children:t.jsxs("div",{className:" overflow-y-auto max-h-[450px] lg:max-h-none",children:[t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"my-3",children:"Smelting"}),t.jsx("p",{className:"mb-2",children:"Smelting is unlocked by completing a quest line in Hell starting with the quest: Story of the Red Hawks. This will then unlock the Passive: Blacksmith's Furnace, which after leveling it to level one, will then unlock the Blacksmith's Furnace building."}),t.jsx("p",{children:"Once this building is then level 6, you can use the Smelter to smelt iron into steel which is then used to build the Airship Fields - who in turn let you recruit Airships."})]}),t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"my-3",children:"Manage Gold Bars"}),t.jsx("p",{className:"mb-2",children:"Gold bars are a way for you to store excess gold in the kingdom treasury. You can do this by unlocking and leveling the Goblin Coin Bank passive, then leveling the building to level 5."}),t.jsx("p",{children:"Each gold bar costs 1 billion gold. You can store 1000 gold bars for a total of 2 Trillion Gold. This will also increase your kingdom defence by 1% for every ~10 gold bars to a maximum of 100%."})]})]})})}}class nr extends c.Component{constructor(e){super(e),this.state={goblin_bank_building:null,show_change_name_modal:!1,show_buy_pop_modal:!1,show_goblin_bank:!1,show_abandon_kingdom:!1,show_manage_treasury:!1,show_call_for_reinforcements:!1,show_smelter:!1,show_specialty_help:!1}}showChangeName(){this.setState({show_change_name_modal:!this.state.show_change_name_modal})}showBuyPop(){this.setState({show_buy_pop_modal:!this.state.show_buy_pop_modal})}showGoblinBank(){const e=this.props.kingdom.buildings.filter(s=>s.name==="Goblin Coin Bank")[0];this.setState({show_goblin_bank:!this.state.show_goblin_bank,goblin_bank_building:e})}showAbandonKingdom(){this.setState({show_abandon_kingdom:!this.state.show_abandon_kingdom})}showManageTreasury(){this.setState({show_manage_treasury:!this.state.show_manage_treasury})}showCallForReinforcements(){this.setState({show_call_for_reinforcements:!this.state.show_call_for_reinforcements})}showSmelter(){this.setState({show_smelter:!this.state.show_smelter})}abandonedKingdom(){this.props.close_details()}canManageGoldBars(){let e=this.props.kingdom.buildings.filter(s=>s.name==="Goblin Coin Bank");return e.length===0?!1:(e=e[0],e.is_locked)}showSpecialtyHelpModal(){this.setState({show_specialty_help:!this.state.show_specialty_help})}render(){return t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Basics"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Name"}),t.jsx("dd",{children:this.props.kingdom.name}),t.jsx("dt",{children:"Morale"}),t.jsx("dd",{children:(this.props.kingdom.current_morale*100).toFixed(2)+"/100%"}),t.jsx("dt",{children:"Treasury"}),t.jsx("dd",{children:u(this.props.kingdom.treasury)}),t.jsx("dt",{children:"Gold Bars"}),t.jsx("dd",{children:u(this.props.kingdom.gold_bars)})]})]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:"Resources"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Stone"}),t.jsx("dd",{children:u(this.props.kingdom.current_stone)+"/"+u(this.props.kingdom.max_stone)}),t.jsx("dt",{children:"Clay"}),t.jsx("dd",{children:u(this.props.kingdom.current_clay)+"/"+u(this.props.kingdom.max_clay)}),t.jsx("dt",{children:"Wood"}),t.jsx("dd",{children:u(this.props.kingdom.current_wood)+"/"+u(this.props.kingdom.max_wood)}),t.jsx("dt",{children:"Iron"}),t.jsx("dd",{children:u(this.props.kingdom.current_iron)+"/"+u(this.props.kingdom.max_iron)}),t.jsx("dt",{children:"Steel"}),t.jsx("dd",{children:u(this.props.kingdom.current_steel)+"/"+u(this.props.kingdom.max_steel)}),t.jsx("dt",{children:"Population"}),t.jsx("dd",{children:u(this.props.kingdom.current_population)+"/"+u(this.props.kingdom.max_population)})]})]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Defence Break Down"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Wall Defence"}),t.jsxs("dd",{children:[(this.props.kingdom.walls_defence*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Treasury Defence"}),t.jsxs("dd",{children:[(this.props.kingdom.treasury_defence*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Gold Bars Defence"}),t.jsxs("dd",{children:[(this.props.kingdom.gold_bars_defence*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Passive Defence"}),t.jsxs("dd",{children:[(this.props.kingdom.passive_defence*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Total Defence Bonus"}),t.jsxs("dd",{children:[(this.props.kingdom.defence_bonus*100).toFixed(2),"%"]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("h3",{children:"Item Resistance"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Item Resistance"}),t.jsxs("dd",{children:[(this.props.kingdom.item_resistance_bonus*100).toFixed(2),"%"]})]})]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:"Kingdom Actions"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[t.jsx(He,{button_label:"Change Name",on_click:this.showChangeName.bind(this)}),t.jsx(Nt,{button_label:"Call for Reinforcements",on_click:this.showCallForReinforcements.bind(this)}),t.jsx(He,{button_label:"Buy Population",on_click:this.showBuyPop.bind(this)}),t.jsx(Ga,{button_label:"Manage Treasury",on_click:this.showManageTreasury.bind(this)}),t.jsx(Pt,{button_label:"Abandon Kingdom",on_click:this.showAbandonKingdom.bind(this)})]})]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsxs("h3",{children:["Specialty Actions ",t.jsx("button",{onClick:this.showSpecialtyHelpModal.bind(this),children:t.jsx("i",{className:"fas fa-info-circle text-blue-500 dark:text-blue-400"})})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[t.jsx(He,{button_label:this.props.kingdom.smelting_time_left>0?t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"far fa-clock text-yellow-700 dark:text-yellow-500 mr-2"})," Smelter"]}):"Smelter",on_click:this.showSmelter.bind(this),disabled:!this.props.kingdom.can_access_smelter}),t.jsx(Ga,{button_label:"Manage Gold Bars",on_click:this.showGoblinBank.bind(this),disabled:this.canManageGoldBars()})]})]})]}),this.state.show_change_name_modal?t.jsx(Kh,{name:this.props.kingdom.name,kingdom_id:this.props.kingdom.id,is_open:!0,handle_close:this.showChangeName.bind(this)}):null,this.state.show_buy_pop_modal?t.jsx(zh,{kingdom:this.props.kingdom,is_open:!0,handle_close:this.showBuyPop.bind(this),gold:this.props.character_gold}):null,this.state.show_goblin_bank&&this.state.goblin_bank_building!==null?t.jsx(Wh,{is_open:!0,handle_close:this.showGoblinBank.bind(this),character_gold:this.props.character_gold,gold_bars:this.props.kingdom.gold_bars,kingdom_id:this.props.kingdom.id,goblin_bank:this.state.goblin_bank_building}):null,this.state.show_abandon_kingdom?t.jsx(Yh,{is_open:!0,handle_close:this.showAbandonKingdom.bind(this),handle_kingdom_close:this.props.close_details,kingdom_id:this.props.kingdom.id}):null,this.state.show_manage_treasury?t.jsx(Qh,{is_open:!0,handle_close:this.showManageTreasury.bind(this),character_gold:this.props.character_gold,treasury:this.props.kingdom.treasury,morale:this.props.kingdom.current_morale,kingdom_id:this.props.kingdom.id,character_id:this.props.kingdom.character_id}):null,this.state.show_call_for_reinforcements?t.jsx(Vh,{is_open:!0,kingdom_id:this.props.kingdom.id,handle_close:this.showCallForReinforcements.bind(this),character_id:this.props.kingdom.character_id}):null,this.state.show_smelter?t.jsx(Xh,{is_open:!0,kingdom_id:this.props.kingdom.id,max_steel:this.props.kingdom.max_steel,iron:this.props.kingdom.current_iron,handle_close:this.showSmelter.bind(this),character_id:this.props.kingdom.character_id,smelting_time_reduction:this.props.kingdom.smelting_time_reduction,smelting_time_left:this.props.kingdom.smelting_time_left,smelting_completed_at:this.props.kingdom.smelting_completed_at,smelting_amount:this.props.kingdom.smelting_amount}):null,this.state.show_specialty_help?t.jsx(Jh,{is_open:!0,handle_close:this.showSpecialtyHelpModal.bind(this)}):null]})}}const Zh=(a,e,s,i)=>[{name:"Name",selector:n=>n.name,cell:n=>t.jsx("button",{onClick:()=>a(n),className:$({"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-500":!n.is_locked,"text-white underline":n.is_locked}),children:n.name})},{name:"Level",selector:n=>n.level,cell:n=>t.jsxs("span",{children:[n.level,"/",n.max_level]})},{name:"Defence",selector:n=>n.current_defence,cell:n=>u(n.current_defence)},{name:"Durability",selector:n=>n.current_durability,cell:n=>t.jsxs("span",{children:[n.current_durability,"/",n.max_durability]})},{name:"Upgrade Time Left",minWidth:"300px",cell:n=>t.jsx(o.Fragment,{children:t.jsxs("div",{className:"w-full mt-2",children:[t.jsx(De,{time_remaining:nn(n.id,s),time_out_label:"Building",useSmallTimer:i<800}),nn(n.id,s)>0?t.jsx("div",{className:"mb-2 mt-4",children:t.jsx("button",{className:"hover:text-red-500 text-red-700 dark:text-red-500 dark:hover:text-red-400 disabled:text-red-400 dark:disabled:bg-red-400 disabled:line-through focus:outline-none focus-visible:ring-2 focus-visible:ring-red-200 dark:focus-visible:ring-white focus-visible:ring-opacity-75",onClick:()=>e(eu(n.id,s)),children:"Cancel"})}):null]})}),omit:s.length===0}],eu=(a,e)=>{let s=e.filter(i=>i.building_id===a);return s.length>0?s[0].id:null},nn=(a,e)=>{let s=e.filter(i=>i.building_id===a);if(s.length>0){const i=s[0],n=Ye.now(),l=Ye.fromISO(i.completed_at).diff(n,["seconds"]);return typeof l>"u"||typeof l.seconds>"u"?0:parseInt(l.seconds.toFixed(0))}return 0};class rr extends c.Component{constructor(e){super(e),this.state={success_message:null,error_message:null,loading:!1}}viewBuilding(e){this.props.view_building(e)}createConditionalRowStyles(){return[{when:e=>e.is_locked,style:{backgroundColor:"#f4a0a0",color:"white"}}]}cancelBuildingQueue(e){e!==null&&this.setState({loading:!0,success_message:null,error_message:null},()=>{new g().setRoute("kingdoms/building-upgrade/cancel").setParameters({queue_id:e}).doAjaxCall("post",s=>{this.setState({success_message:s.data.message,loading:!1})},s=>{if(typeof s.response<"u"){const i=s.response;this.setState({error_message:i.data.message,loading:!1})}})})}render(){return t.jsxs(o.Fragment,{children:[this.state.error_message!==null?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(z,{children:this.state.error_message})}):null,this.state.success_message!==null?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(je,{children:this.state.success_message})}):null,this.state.loading?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(D,{})}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.props.buildings,columns:Zh(this.viewBuilding.bind(this),this.cancelBuildingQueue.bind(this),this.props.buildings_in_queue,this.props.view_port),dark_table:this.props.dark_tables,conditional_row_styles:this.createConditionalRowStyles()})})]})}}const tu=(a,e,s,i,n)=>[{name:"Name",selector:r=>r.name,cell:r=>t.jsx("span",{className:"m-auto",children:t.jsx("button",{onClick:()=>a(r),className:$({"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-500":!rn(r,n),"text-white underline":rn(r,n)}),children:r.name})})},{name:"Recruited From",selector:r=>r.recruited_from.building_name},{name:"Amount",cell:r=>au(r.id,i)},{name:"Attack",selector:r=>r.attack,cell:r=>t.jsx("span",{children:r.attack})},{name:"Defence",selector:r=>r.defence,cell:r=>u(r.defence)},{name:"Upgrade Time Left",minWidth:"300px",cell:r=>t.jsx(o.Fragment,{children:t.jsxs("div",{className:"w-full mt-4",children:[t.jsx(De,{time_remaining:on(r.id,s),time_out_label:"Training"}),on(r.id,s)>0?t.jsx("div",{className:"mt-2 mb-4",children:t.jsx("button",{className:"hover:text-red-500 text-red-700 dark:text-red-500 dark:hover:text-red-400 disabled:text-red-400 dark:disabled:bg-red-400 disabled:line-through focus:outline-none focus-visible:ring-2 focus-visible:ring-red-200 dark:focus-visible:ring-white focus-visible:ring-opacity-75",onClick:()=>e(su(r.id,s)),children:"Cancel"})}):null]})}),omit:s.length===0}],rn=(a,e)=>{const s=e.filter(n=>n.game_building_id===a.recruited_from.game_building_id);if(s.length===0)return!1;const i=s[0];return i.level<a.required_building_level||i.is_locked},su=(a,e)=>{const s=e.filter(i=>i.game_unit_id===a);return s.length>0?s[0].id:null},au=(a,e)=>{const s=e.filter(i=>i.game_unit_id===a);if(s.length>0){let i=s[0];return u(i.amount)}return 0},on=(a,e)=>{let s=e.filter(i=>i.game_unit_id===a);if(s.length>0){const i=s[0],n=Ye.now(),l=Ye.fromISO(i.completed_at).diff(n,["seconds"]);return typeof l>"u"||typeof l.seconds>"u"?0:parseInt(l.seconds.toFixed(0))}return 0};class or extends c.Component{constructor(e){super(e),this.state={error_message:null,success_message:null,loading:!1}}viewUnit(e){this.props.view_unit(e)}createConditionalRowStyles(){return[{when:e=>this.cannotBeRecruited(e),style:{backgroundColor:"#f4a0a0",color:"white"}}]}cannotBeRecruited(e){const s=this.props.buildings.filter(n=>n.game_building_id===e.recruited_from.game_building_id);if(s.length===0)return!1;const i=s[0];return i.level<e.required_building_level||i.is_locked}getOrderedUnits(e){const s=[];for(let i=0;i<e.length;i++){const n=e[i];this.cannotBeRecruited(n)?s.push(n):s.unshift(n)}return s}cancelUnitRecruitment(e){e!==null&&this.setState({success_message:null,error_message:null,loading:!0},()=>{new g().setRoute("kingdoms/recruit-units/cancel").setParameters({queue_id:e}).doAjaxCall("post",s=>{this.setState({loading:!1,success_message:s.data.message})},s=>{if(typeof s.response<"u"){const i=s.response;this.setState({loading:!1,error_message:i.data.message})}})})}render(){return t.jsxs(o.Fragment,{children:[this.state.error_message!==null?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(z,{children:this.state.error_message})}):null,this.state.success_message!==null?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(je,{children:this.state.success_message})}):null,this.state.loading?t.jsx("div",{className:"mt-4 mb-4",children:t.jsx(D,{})}):null,t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.getOrderedUnits(this.props.units),conditional_row_styles:this.createConditionalRowStyles(),columns:tu(this.viewUnit.bind(this),this.cancelUnitRecruitment.bind(this),this.props.units_in_queue,this.props.current_units,this.props.buildings),dark_table:this.props.dark_tables})})]})}}class wt{initialize(){let e=document.head.querySelector('meta[name="csrf-token"]');if(e===null)throw new Error("CSRF Token is missing. Failed to initialize.");this.echo=new eo({broadcaster:"pusher",key:"test",wsHost:window.location.hostname,wsPort:6001,wssPort:6001,enabledTransports:["ws","wss"],namespace:"App",auth:{headers:{"X-CSRF-TOKEN":e.content}}})}getEcho(){if(this.echo)return this.echo;throw new Error("Echo has not been initialized.")}}function iu(a){a.register("core-event-listener",{useClass:wt}),a.register("AjaxInterface",{useClass:g})}const nu=(a,e)=>{const s=new Map;return a.forEach(n=>s.set(n.id,n)),e.forEach(n=>s.set(n.id,n)),Array.from(s.values())};var ru=Object.defineProperty,ou=Object.getOwnPropertyDescriptor,lu=(a,e,s,i)=>{for(var n=i>1?void 0:i?ou(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&ru(e,s,n),n},cu=(a,e)=>(s,i)=>e(s,i,a);let Zs=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a,this.userId=e}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.traverseUpdate=a.private("update-plane-"+this.userId),this.updateCharacterBasePosition=a.private("update-character-position-"+this.userId),this.updateCraftingTypes=a.private("update-location-base-crafting-options-"+this.userId),this.updateSpecialShopsAccess=a.private("update-location-base-shops-"+this.userId),this.updateSpecialEventGoals=a.private("update-location-base-event-goals-"+this.userId),this.corruptedLocations=a.join("corrupt-locations")}catch(a){throw new Error(a)}}listen(){this.listenToTraverse(),this.listenToBasePositionUpdate(),this.listForLocationBasedCraftingTypes(),this.listForUpdatesToSpecialShopsAccess(),this.listenForEventGoalUpdates(),this.listenForCorruptedLocationUpdates()}listenToTraverse(){this.traverseUpdate&&this.traverseUpdate.listen("Game.Maps.Events.UpdateMap",a=>{this.component&&(this.component.setStateFromData(a.mapDetails),this.component.updateQuestPlane(a.mapDetails.character_map.game_map.name))})}listenToBasePositionUpdate(){this.updateCharacterBasePosition&&this.updateCharacterBasePosition.listen("Game.Maps.Events.UpdateCharacterBasePosition",a=>{if(!this.component)return;const e=JSON.parse(JSON.stringify(this.component.state.character));e.base_position=a.basePosition,this.component.setState({character:e})})}listForLocationBasedCraftingTypes(){this.updateCraftingTypes&&this.updateCraftingTypes.listen("Game.Maps.Events.UpdateLocationBasedCraftingOptions",a=>{if(!this.component)return;const e=JSON.parse(JSON.stringify(this.component.state.character));e.can_use_work_bench=a.canUseWorkBench,e.can_access_queen=a.canUseQueenOfHearts,e.can_access_labyrinth_oracle=a.canAccessLabyrinthOracle,this.component.setState({character:e})})}listForUpdatesToSpecialShopsAccess(){this.updateSpecialShopsAccess&&this.updateSpecialShopsAccess.listen("Game.Maps.Events.UpdateLocationBasedSpecialShops",a=>{if(!this.component)return;const e=JSON.parse(JSON.stringify(this.component.state.character));e.can_access_hell_forged=a.canAccessHellForgedShop,e.can_access_purgatory_chains=a.canAccessPurgatoryChainsShop,this.component.setState({character:e})})}listenForEventGoalUpdates(){this.updateSpecialEventGoals&&this.updateSpecialEventGoals.listen("Game.Maps.Events.UpdateLocationBasedEventGoals",a=>{if(!this.component)return;const e=JSON.parse(JSON.stringify(this.component.state.character));e.can_use_event_goals_button=a.canSeeEventGoals,this.component.setState({character:e})})}listenForCorruptedLocationUpdates(){this.corruptedLocations&&this.corruptedLocations.listen("Game.Raids.Events.CorruptLocations",a=>{if(!this.component)return;let e=JSON.parse(JSON.stringify(this.component.state.map_data));const s=e.locations;if(s===null)return;const i=nu(s,a.corruptedLocations);e.locations=i,this.component.setState({map_data:e})})}};Zs=lu([Rt(),cu(0,Lt(wt))],Zs);var du=Object.defineProperty,hu=Object.getOwnPropertyDescriptor,uu=(a,e,s,i)=>{for(var n=i>1?void 0:i?hu(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&du(e,s,n),n},mu=(a,e)=>(s,i)=>e(s,i,a);let ea=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a,this.userId=e}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.characterTopBar=a.private("update-top-bar-"+this.userId),this.characterCurrencies=a.private("update-currencies-"+this.userId),this.characterAttacks=a.private("update-character-attacks-"+this.userId),this.characterStatus=a.private("update-character-status-"+this.userId),this.characterRevive=a.private("character-revive-"+this.userId),this.characterAttackData=a.private("update-character-attack-"+this.userId),this.globalTimeOut=a.private("global-timeout-"+this.userId)}catch(a){throw new Error(a)}}listen(){this.listenToCharacterTopBar(),this.listenToCurrencyUpdates(),this.listenToAttackDataUpdates(),this.listenForCharacterStatusUpdates(),this.listenForCharacterRevive(),this.listenForCharacterAttackDataUpdates(),this.listenForGlobalUpdatesThatAffectTheCharacter()}listenToCharacterTopBar(){this.characterTopBar&&this.characterTopBar.listen("Game.Core.Events.UpdateTopBarBroadcastEvent",a=>{this.component&&this.component.setState({character:{...this.component.state.character,...a.characterSheet}},()=>{a.characterSheet.is_banned&&location.reload()})})}listenToCurrencyUpdates(){this.characterCurrencies&&this.characterCurrencies.listen("Game.Core.Events.UpdateCharacterCurrenciesBroadcastEvent",a=>{this.component&&this.component.setState({character:{...this.component.state.character,...a.currencies}})})}listenToAttackDataUpdates(){this.characterAttacks&&this.characterAttacks.listen("Game.Core.Events.UpdateCharacterAttacks",a=>{this.component&&this.component.setState({character:{...this.component.state.character,...a.characterAttacks}})})}listenForCharacterStatusUpdates(){this.characterStatus&&this.characterStatus.listen("Game.Battle.Events.UpdateCharacterStatus",a=>{this.component&&this.component.setState({character_status:a.characterStatuses,character:{...this.component.state.character,...a.characterStatuses}})})}listenForCharacterRevive(){this.characterRevive&&this.characterRevive.listen("Game.Battle.Events.CharacterRevive",a=>{if(!this.component)return;const e=JSON.parse(JSON.stringify(this.component.state.character));e.health=a.health,this.component.setState({character:e})})}listenForCharacterAttackDataUpdates(){this.characterAttackData&&this.characterAttackData.listen("Flare.Events.UpdateCharacterAttackBroadcastEvent",a=>{this.component&&this.component.setState({character:{...this.component.state.character,...a.attack}})})}listenForGlobalUpdatesThatAffectTheCharacter(){this.globalTimeOut&&this.globalTimeOut.listen("Game.Core.Events.GlobalTimeOut",a=>{this.component&&this.component.setState({show_global_timeout:a.showTimeOut})})}};ea=uu([Rt(),mu(0,Lt(wt))],ea);var pu=Object.defineProperty,_u=Object.getOwnPropertyDescriptor,gu=(a,e,s,i)=>{for(var n=i>1?void 0:i?_u(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&pu(e,s,n),n},fu=(a,e)=>(s,i)=>e(s,i,a);let ta=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a,this.userId=e}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.monsterUpdate=a.private("update-monsters-list-"+this.userId),this.raidMonsterUpdate=a.private("update-raid-monsters-list-"+this.userId)}catch(a){throw new Error(a)}}listen(){this.listenForMonsterUpdates(),this.listenForRaidMonsterUpdates()}listenForMonsterUpdates(){this.monsterUpdate&&this.monsterUpdate.listen("Game.Maps.Events.UpdateMonsterList",a=>{if(!this.component||this.component.state.action_data===null)return;const e=JSON.parse(JSON.stringify(this.component.state.action_data));e.monsters=a.monsters,this.component.setState({action_data:e})})}listenForRaidMonsterUpdates(){this.raidMonsterUpdate&&this.raidMonsterUpdate.listen("Game.Maps.Events.UpdateRaidMonsters",a=>{if(!this.component)return;const e=this;setTimeout(function(){if(!e.component||e.component.state.action_data===null)return;const s=JSON.parse(JSON.stringify(e.component.state.action_data));s.raid_monsters=a.raidMonsters,e.component.setState({action_data:s})},1e3)})}};ta=gu([Rt(),fu(0,Lt(wt))],ta);var xu=Object.defineProperty,bu=Object.getOwnPropertyDescriptor,yu=(a,e,s,i)=>{for(var n=i>1?void 0:i?bu(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&xu(e,s,n),n},ju=(a,e)=>(s,i)=>e(s,i,a);let sa=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a,this.userId=e}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.kingdomUpdates=a.private("update-kingdom-"+this.userId),this.kingdomLogUpdate=a.private("update-new-kingdom-logs-"+this.userId),this.kingdomsUpdate=a.private("add-kingdom-to-map-"+this.userId),this.npcKingdomsUpdate=a.join("npc-kingdoms-update"),this.globalMapUpdate=a.join("global-map-update")}catch(a){throw new Error(a)}}listen(){this.listenForKingdomLogUpdates(),this.listenToKingdomUpdates(),setTimeout(()=>{this.listenToPlayerKingdomUpdates()},1e3),setTimeout(()=>{this.listenForNPCKingdomUpdates()},1100),setTimeout(()=>{this.listenToGlobalKingdomUpdates()},1200)}listenForKingdomLogUpdates(){this.kingdomLogUpdate&&this.kingdomLogUpdate.listen("Game.Kingdoms.Events.UpdateKingdomLogs",a=>{this.component&&this.component.setState({kingdom_logs:a.logs},()=>{this.component&&this.component.updateLogIcon()})})}listenToKingdomUpdates(){this.kingdomUpdates&&this.kingdomUpdates.listen("Game.Kingdoms.Events.UpdateKingdom",a=>{if(!this.component)return;const e=a.kingdom;if(Array.isArray(e)){this.component.setState({kingdoms:e});return}let s=JSON.parse(JSON.stringify(this.component.state.kingdoms));const i=s.findIndex(n=>n.id===e.id);i>-1&&(s[i]=e),this.component.setState({kingdoms:s})})}listenToPlayerKingdomUpdates(){this.kingdomsUpdate&&this.kingdomsUpdate.listen("Game.Kingdoms.Events.AddKingdomToMap",a=>{if(!this.component)return;let e=JSON.parse(JSON.stringify(this.component.state.map_data));e.player_kingdoms=a.myKingdoms,this.component.setState({map_data:e})})}listenForNPCKingdomUpdates(){this.npcKingdomsUpdate&&this.npcKingdomsUpdate.listen("Game.Kingdoms.Events.UpdateNPCKingdoms",a=>{if(this.component&&this.component.state.map_data!==null&&this.component.state.map_data.map_name===a.mapName){let e=JSON.parse(JSON.stringify(this.component.state.map_data));e.npc_kingdoms=a.npcKingdoms,this.component.setState({map_data:e})}})}listenToGlobalKingdomUpdates(){this.globalMapUpdate&&this.globalMapUpdate.listen("Game.Kingdoms.Events.UpdateGlobalMap",a=>{if(!this.component||this.component.state.character===null)return;let e=JSON.parse(JSON.stringify(this.component.state.map_data));const s=e.player_kingdoms.filter(n=>{if(!a.npcKingdoms.some(r=>r.id===n.id))return n}),i=a.otherKingdoms.filter(n=>!this.component||this.component.state.character===null?!1:n.character_id!==this.component.state.character.id);e.enemy_kingdoms=i,e.npc_kingdoms=a.npcKingdoms,e.player_kingdoms=s,this.component.setState({map_data:e})})}};sa=yu([Rt(),ju(0,Lt(wt))],sa);var vu=Object.defineProperty,ku=Object.getOwnPropertyDescriptor,wu=(a,e,s,i)=>{for(var n=i>1?void 0:i?ku(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&vu(e,s,n),n},Su=(a,e)=>(s,i)=>e(s,i,a);let aa=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a,this.userId=e}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.unlockAlchemySkill=a.private("unlock-skill-"+this.userId)}catch(a){throw new Error(a)}}listen(){this.listenToAlchemySkill()}listenToAlchemySkill(){this.unlockAlchemySkill&&this.unlockAlchemySkill.listen("Game.Quests.Events.UnlockSkillEvent",()=>{if(!this.component)return;const a=JSON.parse(JSON.stringify(this.component.state.character));a.is_alchemy_locked=!1,this.component.setState({character:a})})}};aa=wu([Rt(),Su(0,Lt(wt))],aa);var Cu=Object.defineProperty,Nu=Object.getOwnPropertyDescriptor,Pu=(a,e,s,i)=>{for(var n=i>1?void 0:i?Nu(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&Cu(e,s,n),n},Tu=(a,e)=>(s,i)=>e(s,i,a);let ia=class{constructor(a){this.coreEventListener=a}initialize(a,e){this.component=a}register(){this.coreEventListener.initialize();try{const a=this.coreEventListener.getEcho();this.questUpdate=a.join("update-quests"),this.raidQuestUpdate=a.join("update-raid-quests")}catch(a){throw new Error(a)}}listen(){this.listenForQuestUpdates(),this.listenForRaidQuestUpdates()}listenForQuestUpdates(){this.questUpdate&&this.questUpdate.listen("Game.Quests.Events.UpdateQuests",a=>{if(!this.component)return;let e=JSON.parse(JSON.stringify(this.component.state.quests));e!==null&&(e.quests=a.quests,e.is_winter_event=a.isWinterEvent,this.component.setState({quests:e}))})}listenForRaidQuestUpdates(){this.raidQuestUpdate&&this.raidQuestUpdate.listen("Game.Quests.Events.UpdateRaidQuests",a=>{if(!this.component)return;let e=JSON.parse(JSON.stringify(this.component.state.quests));e!==null&&(e.raid_quests=a.raidQuests,this.component.setState({quests:e}))})}};ia=Pu([Rt(),Tu(0,Lt(wt))],ia);var Au=Object.defineProperty,Ru=Object.getOwnPropertyDescriptor,qu=(a,e,s,i)=>{for(var n=i>1?void 0:i?Ru(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&Au(e,s,n),n};let na=class{initialize(a,e){this.component=a,this.userId=e,this.mapListeners=dt().fetch(Zs),this.characterListeners=dt().fetch(ea),this.monsterListeners=dt().fetch(ta),this.kingdomListener=dt().fetch(sa),this.actionListeners=dt().fetch(aa),this.questListeners=dt().fetch(ia)}registerEvents(){if(!this.component||!this.userId)throw new Error("Need to call initialize on GameEventListeners first.");this.mapListeners&&(this.mapListeners.initialize(this.component,this.userId),this.mapListeners.register()),this.characterListeners&&(this.characterListeners.initialize(this.component,this.userId),this.characterListeners.register()),this.monsterListeners&&(this.monsterListeners.initialize(this.component,this.userId),this.monsterListeners.register()),this.kingdomListener&&(this.kingdomListener.initialize(this.component,this.userId),this.kingdomListener.register()),this.actionListeners&&(this.actionListeners.initialize(this.component,this.userId),this.actionListeners.register()),this.questListeners&&(this.questListeners.initialize(this.component,this.userId),this.questListeners.register())}listenToEvents(){this.mapListeners&&this.mapListeners.listen(),this.characterListeners&&this.characterListeners.listen(),this.monsterListeners&&this.monsterListeners.listen(),this.kingdomListener&&this.kingdomListener.listen(),this.actionListeners&&this.actionListeners.listen(),this.questListeners&&this.questListeners.listen()}};na=qu([lo()],na);function Du(a){a.register("GameListener",{useClass:Zs}),a.register("GameListener",{useClass:ea}),a.register("GameListener",{useClass:ta}),a.register("GameListener",{useClass:sa}),a.register("GameListener",{useClass:aa}),a.register("GameListener",{useClass:ia}),a.register("game-event-listeners",na)}var nt=(a=>(a[a.BUILDING_IN_QUEUE=0]="BUILDING_IN_QUEUE",a[a.UNIT_RECRUITMENT=1]="UNIT_RECRUITMENT",a[a.UNIT_MOVEMENT=2]="UNIT_MOVEMENT",a[a.BUILDING_EXPANSION=3]="BUILDING_EXPANSION",a))(nt||{}),Eu=Object.defineProperty,Iu=Object.getOwnPropertyDescriptor,Mu=(a,e,s,i)=>{for(var n=i>1?void 0:i?Iu(e,s):e,r=a.length-1,l;r>=0;r--)(l=a[r])&&(n=(i?l(e,s,n):l(n))||n);return i&&n&&Eu(e,s,n),n},Fu=(a,e)=>(s,i)=>e(s,i,a);let ra=class{constructor(a){this.ajax=a}doAjaxCall(a,e,s,i){const n=this.getRoute(e,s,i);this.ajax.setRoute(n).setParameters(this.getParameters(e,s)).doAjaxCall("post",r=>{a.setState({loading:!1,success_message:r.data.message})},r=>{a.setState({loading:!1}),typeof r.response<"u"&&a.setState({error_message:r.response.data.message})})}getRoute(a,e,s){switch(a){case nt.BUILDING_IN_QUEUE:return"kingdoms/building-upgrade/cancel";case nt.BUILDING_EXPANSION:return"kingdom/building-expansion/cancel-expand/"+e.id+"/"+s;case nt.UNIT_MOVEMENT:return"recall-units/"+e.id+"/"+s;case nt.UNIT_RECRUITMENT:return"kingdoms/recruit-units/cancel";default:throw Error("Cannot create route.")}}getParameters(a,e){switch(a){case nt.BUILDING_IN_QUEUE:return{queue_id:e.id};case nt.UNIT_RECRUITMENT:return{queue_id:e.id};default:return{}}}};ra=Mu([Rt(),Fu(0,Lt(g))],ra);function Ou(a){a.register("cancellation-ajax",{useClass:ra})}function Lu(a){Ou(a)}class Yt{constructor(){iu(this),Du(this),Lu(this)}static getInstance(){return Yt.instance||(Yt.instance=new Yt),Yt.instance}fetch(e){return Ra.resolve(e)}register(e,s){Ra.register(e,{useValue:s})}}let Aa;const dt=()=>(Aa||(Aa=new Yt),Aa);var zt=(a=>(a.BUILDING_QUEUES="building_queues",a.UNIT_RECRUITMENT_QUEUES="unit_recruitment_queues",a.UNIT_MOVEMENT_QUEUES="unit_movement_queues",a.BUILDING_EXPANSION_QUEUES="building_expansion_queues",a))(zt||{});const $u=a=>{if(a.is_moving)return t.jsx("i",{className:"ra ra-heavy-shield text-blue-500 dark:text-blue-400"});if(a.is_attacking)return t.jsx("i",{className:"ra ra-axe text-red-500 dark:text-red-400"});if(a.is_recalled||a.is_returning)return t.jsx("i",{className:"fas fa-exchange-alt text-orange-500 dark:text-orange-300"})};class Bu extends c.Component{constructor(e){super(e),this.state={loading:!0,error_message:null,success_message:null,queues:null},this.gameEventListener=dt().fetch(wt),this.cancellationAjax=dt().fetch(ra),this.gameEventListener.initialize(),this.updateKingdomQueues=this.gameEventListener.getEcho().private("refresh-kingdom-queues-"+this.props.user_id)}componentDidMount(){new g().setRoute("kingdom/queues/"+this.props.kingdom_id+"/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({loading:!1,queues:e.data.queues})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}}),this.updateKingdomQueues.listen("Game.Kingdoms.Events.UpdateKingdomQueues",e=>{this.props.kingdom_id===e.kingdomId&&this.setState({queues:e.kingdomQueues})})}cancelQueue(e,s,i){this.state.queues!==null&&this.cancellationAjax.doAjaxCall(this,e,this.state.queues[i][s],this.props.character_id)}renderBuildingQueues(){return this.state.queues===null?null:this.state.queues.building_queues.map((s,i)=>{if(s.type==="upgrading")return t.jsxs(_e,{additionalClasses:"my-2",children:[t.jsxs("div",{className:"bold my-4 text-gray-800 dark:text-gray-300",children:["Upgrading ",s.name]}),t.jsx(De,{time_out_label:"From Level: "+s.from_level+" To Level: "+s.to_level,time_remaining:s.time_remaining}),t.jsx(Pt,{button_label:"Cancel",on_click:()=>{this.cancelQueue(nt.BUILDING_IN_QUEUE,i,zt.BUILDING_QUEUES)},additional_css:"my-2"})]});if(s.type==="repairing")return t.jsxs(_e,{additionalClasses:"my-2",children:[t.jsxs("div",{className:"bold my-2",children:["Repairing ",s.name]}),t.jsx(De,{time_out_label:"Repairing",time_remaining:s.time_remaining}),t.jsx(Pt,{button_label:"Cancel",on_click:()=>{this.cancelQueue(nt.BUILDING_IN_QUEUE,i,zt.BUILDING_QUEUES)},additional_css:"my-2"})]})}).filter(s=>typeof s<"u")}renderUnitRecruitmentQueues(){return this.state.queues===null?null:this.state.queues.unit_recruitment_queues.map((e,s)=>t.jsxs(_e,{additionalClasses:"my-2",children:[t.jsxs("div",{className:"bold my-2",children:["Recruiting ",e.name]}),t.jsx(De,{time_out_label:"Rectuiting: "+e.recruit_amount,time_remaining:e.time_remaining}),t.jsx(Pt,{button_label:"Cancel",on_click:()=>{this.cancelQueue(nt.UNIT_RECRUITMENT,s,zt.UNIT_RECRUITMENT_QUEUES)},additional_css:"my-2"})]}))}renderUnitMovementQueues(){return this.state.queues===null?null:this.state.queues.unit_movement_queues.map((e,s)=>{let i=!0;return e.reason==="Currently attacking"&&(i=this.props.kingdoms.filter(r=>r.name===e.from_kingdom_name).length>0),t.jsxs(_e,{additionalClasses:"my-2",children:[t.jsx("div",{className:"bold my-2",children:"Units Are on the move!"}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Why"}),t.jsxs("dd",{children:[$u(e)," ",e.reason]}),t.jsx("dt",{children:"From:"}),t.jsxs("dd",{children:[e.from_kingdom_name," (X/Y: ",e.from_x,"/",e.from_y,")"]}),t.jsx("dt",{children:"To:"}),t.jsxs("dd",{children:[e.to_kingdom_name," (X/Y: ",e.moving_to_y,"/",e.moving_to_y,")"]})]}),t.jsx(De,{time_out_label:"Units are in movement",time_remaining:e.time_left}),t.jsx(Pt,{button_label:"Cancel",on_click:()=>{this.cancelQueue(nt.UNIT_MOVEMENT,s,zt.UNIT_MOVEMENT_QUEUES)},additional_css:"my-2",disabled:(!i||!!0)&&e.reason==="Returning from attack"||e.reason==="Recalled units"})]})})}renderBuildingExpansionQueues(){return this.state.queues===null?null:this.state.queues.building_expansion_queues.map((e,s)=>t.jsxs(_e,{additionalClasses:"my-2",children:[t.jsxs("div",{className:"bold my-2",children:[e.name," Is expanding production"]}),t.jsx(De,{time_out_label:"From slot: "+e.from_slot+" to slot: "+e.to_slot,time_remaining:e.time_remaining}),t.jsx(Pt,{button_label:"Cancel",on_click:()=>{this.cancelQueue(nt.BUILDING_EXPANSION,s,zt.BUILDING_EXPANSION_QUEUES)},additional_css:"my-2"})]}))}render(){return t.jsxs("div",{children:[t.jsx("p",{className:"my-2",children:"Below you will find the various queues. This could be building expansions, repairs, upgrades, unit recruitment and movement."}),t.jsx("div",{className:"border-b-2 border-b-gray-200 dark:border-b-gray-600 my-3"}),this.state.loading?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{children:this.state.error_message}):null,this.state.success_message!==null?t.jsx(je,{children:this.state.success_message}):null,t.jsxs("div",{className:"w-[90%] mr-auto ml-auto max-h-[600px] overflow-y-auto",children:[this.renderBuildingQueues(),this.renderBuildingExpansionQueues(),this.renderUnitRecruitmentQueues(),this.renderUnitMovementQueues()]})]})}}class Gu extends c.Component{constructor(e){super(e),this.tabs=[{key:"buildings",name:"Buildings"},{key:"units",name:"Units"},{name:"Queues",key:"current-queue"}]}render(){return t.jsx(_e,{children:t.jsxs(Be,{tabs:this.tabs,full_width:!0,children:[t.jsx(H,{children:t.jsx(rr,{buildings:this.props.kingdom.buildings,dark_tables:this.props.dark_tables,buildings_in_queue:this.props.kingdom.building_queue,view_building:this.props.manage_view_building,view_port:this.props.view_port})},"buildings"),t.jsx(H,{children:t.jsx(or,{units:this.props.kingdom.units,buildings:this.props.kingdom.buildings,dark_tables:this.props.dark_tables,view_unit:this.props.manage_view_unit,units_in_queue:this.props.kingdom.unit_queue,current_units:this.props.kingdom.current_units})},"units"),t.jsx(H,{children:t.jsx(Bu,{user_id:this.props.user_id,kingdom_id:this.props.kingdom.id,character_id:this.props.kingdom.character_id,kingdoms:this.props.kingdoms})},"current-queue")]})})}}class lr extends c.Component{constructor(e){super(e)}buildSeconds(e){return this.props.is_in_seconds?e:e*60}buildMinutes(e){return this.props.is_in_minutes?e:e/60}buildHours(e){return this.props.is_in_minutes?e/60:this.buildMinutes(e)/60}buildDays(e){return this.buildHours(e)/24}render(){return t.jsx(rs,{is_open:!0,manage_modal:this.props.manage_modal,title:"Time Break Down",no_scrolling:!0,children:t.jsxs("div",{children:[t.jsx(Ce,{additional_css:"my-4",children:t.jsxs("p",{children:["The following will show: How many days"," ",t.jsx("strong",{children:"or"})," how many hours"," ",t.jsx("strong",{children:"or"})," how many minutes"," ",t.jsx("strong",{children:"or"})," how many seconds."]})}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Days"}),t.jsx("dd",{children:u(this.buildDays(this.props.time))}),t.jsx("dt",{children:"Hours"}),t.jsx("dd",{children:u(this.buildHours(this.props.time))}),t.jsx("dt",{children:"Minutes"}),t.jsx("dd",{children:u(this.buildMinutes(this.props.time))}),t.jsx("dt",{children:"Seconds"}),t.jsx("dd",{children:u(this.buildSeconds(this.props.time))})]})]})})}}class Uu extends c.Component{constructor(e){super(e),this.state={success_message:null,error_message:null,loading:!1}}upgradeBuilding(){this.setState({error_message:null,success_message:null,loading:!0},()=>{new g().setRoute("kingdoms/"+this.props.character_id+"/upgrade-building/"+this.props.building.id).setParameters({to_level:1,paying_with_gold:!1}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({loading:!1,error_message:s.data.message})}})})}renderFutureResourceValues(){return["future_clay_increase","future_defence_increase","future_durability_increase","future_iron_increase","future_population_increase","future_stone_increase","future_wood_increase"].map(s=>{const i=this.props.building[s];if(i!==null&&typeof i=="number"&&i>0)return t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:de.upperFirst(s.replace("future_","").replace("_"," "))}),t.jsx("dd",{children:u(i)})]})}).filter(s=>typeof s<"u")}render(){return t.jsxs(o.Fragment,{children:[this.state.success_message!==null?t.jsx(je,{additional_css:"mb-5",children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mb-5",children:this.state.error_message}):null,t.jsx("h3",{children:"After Level Up"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("dl",{className:"mb-5",children:this.renderFutureResourceValues()}),this.state.loading?t.jsx(D,{}):null,t.jsx(Y,{button_label:"Upgrade",additional_css:"mr-2",on_click:this.upgradeBuilding.bind(this),disabled:this.state.loading||this.props.is_in_queue}),t.jsx(ce,{button_label:"Cancel",on_click:this.props.remove_section.bind(this),disabled:this.state.loading})]})}}class Hu{convertToHours(e){return e/60}isHours(e){return e/60>1}calculateViewTime(e,s,i){return this.calculateTimeNeeded(e,s,i,1)}calculateRebuildTime(e,s){return e.rebuild_time-e.rebuild_time*s}calculateTimeNeeded(e,s,i,n){const p=e.level+(typeof n<"u"?n:s),m=e.raw_time_to_build;let y;return y=p+m,y=y+y*e.raw_time_increase,Math.floor(y-y*i)}}class Ku extends c.Component{constructor(e){super(e),this.state={loading:!0,expanding:!1,error_message:null,success_message:null,time_remaining_for_expansion:0,expansion_details:null},this.gameEventListener=dt().fetch(wt),this.gameEventListener.initialize(),this.updateExpansionDetails=this.gameEventListener.getEcho().private("update-building-expansion-details-"+this.props.user_id)}componentDidMount(){new g().setRoute("kingdom/building-expansion/details/"+this.props.building.id+"/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({loading:!1,expansion_details:e.data.expansion_details,time_remaining_for_expansion:e.data.time_left})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}}),this.updateExpansionDetails.listen("Game.Kingdoms.Events.UpdateBuildingExpansion",e=>{this.setState({expansion_details:e.kingdomBuildingExpansion,time_remaining_for_expansion:e.timeLeft})})}canNotExpand(e){return!e.is_maxed||this.props.building_needs_to_be_repaired||this.state.loading||this.state.expansion_details!==null&&this.state.expansion_details.expansions_left<=0||this.state.time_remaining_for_expansion>0?!0:this.state.expanding}expandBuilding(){this.setState({error_message:null,success_message:null,expanding:!0},()=>{new g().setRoute("kingdom/building-expansion/expand/"+this.props.building.id+"/"+this.props.character_id).doAjaxCall("post",e=>{this.setState({expanding:!1,success_message:e.data.message,time_remaining_for_expansion:e.data.time_left})},e=>{if(this.setState({expanding:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})})}getResourceType(){return this.props.building.wood_increase>0?"wood":this.props.building.iron_increase>0?"iron":this.props.building.clay_increase>0?"clay":this.props.building.stone_increase>0?"stone":this.props.building.is_farm?"population":"UNKNOWN"}render(){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("h3",{children:"Expand"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("p",{className:"my-2",children:"Once a building reaches it max level and does not need to be repaired, one can expand its production to produce more resources allowing you to recruit more units."}),t.jsx("p",{className:"my-2",children:t.jsxs("a",{href:"/information/kingdom-resource-expansion",target:"_blank",children:["Learn more about expanding resource buildings ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),this.state.loading?t.jsx(D,{}):null,this.state.expansion_details!==null?this.state.expansion_details.expansions_left===0?t.jsx("p",{className:"my-4 text-green-700 dark:text-green-500",children:"This building cannot be expanded anymore."}):t.jsxs(t.Fragment,{children:[t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Current expansions"}),t.jsx("dd",{children:this.state.expansion_details.expansion_count}),t.jsx("dt",{children:"Expansions left"}),t.jsx("dd",{children:this.state.expansion_details.expansions_left}),t.jsx("dt",{children:"Time required (Minutes)"}),t.jsx("dd",{children:this.state.expansion_details.minutes_until_next_expansion}),t.jsxs("dt",{children:["Will gain additional: ",this.getResourceType()," per expansion"]}),t.jsx("dd",{children:u(this.state.expansion_details.resource_increases)})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsx("h3",{children:"Cost for next expansion"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Stone cost"}),t.jsx("dd",{children:u(this.state.expansion_details.resource_costs.stone)}),t.jsx("dt",{children:"Clay cost"}),t.jsx("dd",{children:u(this.state.expansion_details.resource_costs.clay)}),t.jsx("dt",{children:"Iron cost"}),t.jsx("dd",{children:u(this.state.expansion_details.resource_costs.iron)}),t.jsx("dt",{children:"Steel cost"}),t.jsx("dd",{children:u(this.state.expansion_details.resource_costs.steel)}),t.jsx("dt",{children:"Population cost"}),t.jsx("dd",{children:u(this.state.expansion_details.resource_costs.population)}),t.jsx("dt",{children:"Gold bars cost"}),t.jsx("dd",{children:u(this.state.expansion_details.gold_bars_cost)})]})]}):null,t.jsx(z,{additional_css:$({hidden:this.state.error_message===null,"my-4":this.state.error_message!==null}),children:this.state.error_message}),t.jsx(je,{additional_css:$({hidden:this.state.success_message===null,"my-4":this.state.error_message!==null}),children:this.state.success_message}),this.state.expanding?t.jsx(D,{}):null,t.jsx(He,{button_label:"Expand Production",on_click:this.expandBuilding.bind(this),disabled:this.canNotExpand(this.props.building),additional_css:"my-2"}),t.jsx(De,{time_remaining:this.state.time_remaining_for_expansion,time_out_label:"Expanding"})]})}}class cr extends c.Component{constructor(e){super(e),this.state={upgrade_section:null,success_message:"",error_message:"",loading:!1},this.buildingTimeCalculation=new Hu}componentDidMount(){this.props.building.current_durability<this.props.building.max_durability&&this.setState({upgrade_section:"repair-building"})}componentDidUpdate(){this.props.building.current_durability<this.props.building.max_durability&&this.state.upgrade_section!=="repair-building"&&this.setState({upgrade_section:"repair-building"})}showSelectedForm(e){this.setState({upgrade_section:e})}manageHelpDialogue(){this.setState({show_time_help:!this.state.show_time_help})}removeSelection(){this.setState({upgrade_section:null})}buildingNeedsToBeRepaired(){return this.props.building.current_durability<this.props.building.max_durability}repairBuilding(){this.setState({loading:!0,success_message:"",error_message:""},()=>{new g().setRoute("kingdoms/"+this.props.character_id+"/rebuild-building/"+this.props.building.id).doAjaxCall("post",e=>{this.setState({success_message:e.data.message,loading:!1})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}console.error(e)})})}calculateResourceCostWithReductions(e,s,i){return typeof this.props.kingdom_building_cost_reduction>"u"?(console.error("this.props.kingdom_building_cost_reduction is undefined."),"ERROR"):i?u((e-e*(this.props.kingdom_building_cost_reduction+this.props.kingdom_iron_cost_reduction)).toFixed(0)):s?u((e-e*this.props.kingdom_population_cost_reduction).toFixed(0)):u((e-e*this.props.kingdom_building_cost_reduction).toFixed(0))}renderSelectedSection(){switch(this.state.upgrade_section){case"upgrade":return t.jsx(Uu,{character_id:this.props.character_id,building:this.props.building,remove_section:this.removeSelection.bind(this),is_in_queue:this.props.is_in_queue});case"repair-building":return t.jsx(o.Fragment,{children:this.buildingNeedsToBeRepaired()?t.jsxs(o.Fragment,{children:[t.jsx(Y,{button_label:"Repair",on_click:this.repairBuilding.bind(this),additional_css:"mr-2"}),t.jsx(ce,{button_label:"Close section",disabled:this.buildingNeedsToBeRepaired(),on_click:this.removeSelection.bind(this)}),this.state.loading?t.jsx(D,{}):null]}):t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-2",children:"Building does not need tro be Repaired"}),t.jsx(ce,{button_label:"Close section",on_click:this.removeSelection.bind(this)})]})});default:return null}}getRebuildTime(){let e=this.buildingTimeCalculation.calculateRebuildTime(this.props.building,this.props.kingdom_building_time_reduction);return e>60?(e=e/60,e.toFixed(0)+" Hours"):e.toFixed(0)+" Minutes"}renderCosts(){return t.jsxs("dl",{className:"mb-5",children:[t.jsx("dt",{children:"Stone Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.stone_cost,!1,!1)}),t.jsx("dt",{children:"Clay Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.clay_cost,!1,!1)}),t.jsx("dt",{children:"Wood Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.wood_cost,!1,!1)}),t.jsx("dt",{children:"Iron Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.iron_cost,!1,!0)}),t.jsx("dt",{children:"Steel Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.steel_cost,!1,!1)}),t.jsx("dt",{children:"Population Cost:"}),t.jsx("dd",{children:this.calculateResourceCostWithReductions(this.props.building.population_required,!0,!1)}),t.jsx("dt",{children:"Time till next level:"}),t.jsx("dd",{children:this.state.upgrade_section!=="repair-building"?u(this.buildingTimeCalculation.calculateViewTime(this.props.building,this.state.to_level,this.props.kingdom_building_time_reduction).toFixed(2)):this.getRebuildTime()})]})}render(){return t.jsxs(o.Fragment,{children:[t.jsxs(_e,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:()=>this.props.close(),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),this.props.building.is_locked?t.jsx(z,{children:"You must train the appropriate Kingdom Passive skill to unlock this building. The skill name is the same as this building name."}):null,this.state.success_message!==""?t.jsx(je,{children:this.state.success_message}):null,this.state.error_message!==""?t.jsx(z,{children:this.state.error_message}):null,t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4 mt-4",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Basic Info"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Level:"}),t.jsxs("dd",{children:[this.props.building.level,"/",this.props.building.max_level]}),t.jsx("dt",{children:"Durability:"}),t.jsxs("dd",{children:[u(this.props.building.current_durability),"/",u(this.props.building.max_durability)]}),t.jsx("dt",{children:"Defence:"}),t.jsx("dd",{children:u(this.props.building.current_defence)}),t.jsx("dt",{children:"Morale Loss (per hour):"}),t.jsxs("dd",{children:[(this.props.building.morale_decrease*100).toFixed(2),"%"]}),t.jsx("dt",{children:"Morale Gain (per hour):"}),t.jsxs("dd",{children:[(this.props.building.morale_increase*100).toFixed(2),"%"]})]}),this.props.building.is_resource_building?t.jsx(Ku,{building:this.props.building,building_needs_to_be_repaired:this.buildingNeedsToBeRepaired(),character_id:this.props.character_id,user_id:this.props.user_id}):null]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:this.state.upgrade_section==="repair-building"?"Repair Costs":"Upgrade Costs (For 1 Level)"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),this.props.building.is_maxed&&!this.buildingNeedsToBeRepaired()?t.jsx("p",{children:"Building is already max level."}):this.props.is_in_queue?t.jsx("p",{children:"Building is currently in queue"}):t.jsxs(o.Fragment,{children:[this.renderCosts(),this.state.upgrade_section!==null?this.renderSelectedSection():!this.props.is_in_queue&&!this.props.building.is_locked?t.jsxs(o.Fragment,{children:[t.jsx(Y,{button_label:"Upgrade",on_click:()=>this.showSelectedForm("upgrade"),additional_css:"mr-2"}),t.jsx(Y,{button_label:"Repair",on_click:()=>this.showSelectedForm("repair-building")}),this.props.building.is_special?t.jsx("p",{className:"my-4 text-sm",children:"This building cannot be upgraded with gold."}):null]}):null]})]})]})]}),this.state.show_time_help?t.jsx(lr,{is_in_minutes:!0,is_in_seconds:!1,manage_modal:this.manageHelpDialogue.bind(this),time:this.state.time_needed}):null]})}}class zu extends c.Component{constructor(e){super(e),this.state={success_message:null,error_message:null,amount_to_recruit:"",loading:!1,show_time_help:!1,cost_in_gold:0}}recruitUnits(){this.setState({error_message:null,success_message:null,loading:!0},()=>{new g().setRoute("kingdoms/"+this.props.kingdom_id+"/recruit-units/"+this.props.unit.id).setParameters({amount:this.state.amount_to_recruit===""?1:this.state.amount_to_recruit,recruitment_type:"resources"}).doAjaxCall("post",e=>{this.setState({loading:!1,success_message:e.data.message,amount_to_recruit:"",show_time_help:!1,cost_in_gold:0,time_needed:0})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({loading:!1,error_message:s.data.message})}})})}setResourceAmount(e){if(typeof this.props.unit_cost_reduction>"u"){this.setState({error_message:"Cannot determine cost. Unit Cost Reduction Is Undefined."});return}const s=de.parseInt(e.target.value)||0;if(s===0)return this.setState({amount_to_recruit:""});const i=this.getAmountToRecruit(s);if(i===0){this.props.set_resource_amount(0,0);return}let n=this.props.unit.time_to_recruit*i;n=n-n*this.props.kingdom_unit_time_reduction,this.props.set_resource_amount(i,n),this.setState({amount_to_recruit:i})}getAmountToRecruit(e){if(e===0)return 0;e=Math.abs(e);const s=this.props.unit.max_amount;return e>s&&(e=s),e}getAmount(){return de.parseInt(this.state.amount_to_recruit)||1}render(){return t.jsxs(o.Fragment,{children:[this.state.success_message!==null?t.jsx(je,{additional_css:"mb-5",children:this.state.success_message}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mb-5",children:this.state.error_message}):null,t.jsxs("div",{className:"flex items-center mb-5",children:[t.jsx("label",{className:"w-[50px] mr-4",children:"Amount"}),t.jsx("div",{className:"w-2/3",children:t.jsx("input",{type:"text",value:this.state.amount_to_recruit,onChange:this.setResourceAmount.bind(this),className:"form-control",disabled:this.state.loading})})]}),this.state.loading?t.jsx(D,{}):null,t.jsx(Y,{button_label:"Recruit Units",additional_css:"mr-2",on_click:this.recruitUnits.bind(this),disabled:this.state.amount_to_recruit<=0||this.state.loading}),t.jsx(ce,{button_label:"Cancel",on_click:this.props.remove_selection.bind(this),disabled:this.state.loading})]})}}class dr extends c.Component{constructor(e){super(e),this.state={upgrade_section:null,success_message:null,error_message:null,amount_to_recruit:"",loading:!1,show_time_help:!1,cost_in_gold:0,time_needed:0}}calculateCostsForUnit(e,s,i){if(typeof this.props.unit_cost_reduction>"u")return console.error("unit_cost_reduction is undefined (prop)"),"ERROR";let n=e*s;return i&&n>1?n-n*this.props.kingdom_iron_cost_reduction:n}setResourceAmount(e,s){this.setState({amount_to_recruit:e,time_needed:de.parseInt(s.toFixed(0))||0})}getAmount(){return de.parseInt(this.state.amount_to_recruit)||1}showSelectedForm(e){this.setState({upgrade_section:e})}removeSelection(){this.setState({upgrade_section:null,success_message:null,error_message:null,amount_to_recruit:"",loading:!1,cost_in_gold:0,time_needed:0})}manageHelpDialogue(e){this.setState({show_time_help:!this.state.show_time_help,time_needed:typeof e<"u"?e:this.state.time_needed})}cannotBeRecruited(e){const s=this.props.buildings.filter(n=>n.game_building_id===e.recruited_from.game_building_id);if(s.length===0)return!1;const i=s[0];return i.level<e.required_building_level||i.is_locked}renderSelectedSection(){return this.state.upgrade_section==="resources"?t.jsx(zu,{kingdom_id:this.props.kingdom_id,character_id:this.props.character_id,unit:this.props.unit,unit_cost_reduction:this.props.unit_cost_reduction,kingdom_unit_time_reduction:this.props.kingdom_unit_time_reduction,manage_help_dialogue:this.manageHelpDialogue.bind(this),remove_selection:this.removeSelection.bind(this),set_resource_amount:this.setResourceAmount.bind(this)}):null}render(){return t.jsxs(o.Fragment,{children:[t.jsxs(_e,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:()=>this.props.close(),children:t.jsx("i",{className:"fas fa-minus-circle"})})}),this.cannotBeRecruited(this.props.unit)?t.jsx("div",{className:"mt-4 mb-4",children:t.jsxs(z,{children:["You must Train:"," ",this.props.unit.recruited_from.building_name," ","to level:"," ",this.props.unit.required_building_level," before you can recruit these units. Check the buildings tab. If the building is red, you must unlock the building before leveling it."]})}):null,t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4 mt-4",children:[t.jsxs("div",{children:[t.jsx("h3",{children:"Basic Info"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Name"}),t.jsx("dd",{children:this.props.unit.name}),t.jsx("dt",{children:"Attack"}),t.jsx("dd",{children:this.props.unit.attack}),t.jsx("dt",{children:"Defence"}),t.jsx("dd",{children:this.props.unit.defence}),t.jsx("dt",{children:"Heal % (For one unit. Stacks.)"}),t.jsxs("dd",{children:[this.props.unit.heal_percentage!==null?(this.props.unit.heal_percentage*100).toFixed(0):0,"%"]}),t.jsx("dt",{children:"Good for attacking?"}),t.jsx("dd",{children:this.props.unit.attacker?"Yes":"No"}),t.jsx("dt",{children:"Good for defending?"}),t.jsx("dd",{children:this.props.unit.defender?"Yes":"No"})]})]}),t.jsx("div",{className:"border-b-2 block md:hidden border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("div",{children:[t.jsx("h3",{children:"Upgrade Costs (For 1 Unit)"}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-6"}),t.jsxs("dl",{className:"mb-5",children:[t.jsx("dt",{children:"Stone Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.stone_cost,this.getAmount(),!1))}),t.jsx("dt",{children:"Clay Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.clay_cost,this.getAmount(),!1))}),t.jsx("dt",{children:"Wood Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.wood_cost,this.getAmount(),!1))}),t.jsx("dt",{children:"Iron Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.iron_cost,this.getAmount(),!0))}),t.jsx("dt",{children:"Steel Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.steel_cost,this.getAmount(),!1))}),t.jsx("dt",{children:"Population Cost:"}),t.jsx("dd",{children:u(this.calculateCostsForUnit(this.props.unit.required_population,this.getAmount(),!1))}),t.jsx("dt",{children:"Base Time For One (Seconds):"}),t.jsx("dd",{children:u(this.props.unit.time_to_recruit)}),this.state.upgrade_section==="resources"?t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Time Required (Seconds):"}),t.jsxs("dd",{className:"flex items-center",children:[t.jsx("span",{children:u(this.state.time_needed)}),t.jsx("div",{children:t.jsx("div",{className:"ml-2",children:t.jsxs("button",{type:"button",onClick:()=>this.manageHelpDialogue(),className:"text-blue-500 dark:text-blue-300",children:[t.jsx("i",{className:"fas fa-info-circle"})," ","Help"]})})})]})]}):null]}),this.cannotBeRecruited(this.props.unit)?null:this.props.is_in_queue?t.jsx("p",{className:"mb-5 mt-5",children:"You must wait for the units recruitment to end."}):this.props.kingdom_current_population===0?t.jsx("p",{className:"mb-5 mt-5",children:"You have no population to recruit units with."}):this.state.upgrade_section!==null?this.renderSelectedSection():t.jsx(o.Fragment,{children:t.jsx(He,{button_label:"Recruit Units",on_click:()=>this.showSelectedForm("resources")})})]})]})]}),this.state.show_time_help?t.jsx(lr,{is_in_minutes:!1,is_in_seconds:!0,manage_modal:this.manageHelpDialogue.bind(this),time:this.state.time_needed}):null]})}}class Wu extends c.Component{constructor(e){super(e)}render(){return this.props.sections.building_to_view!==null?t.jsx(cr,{building:this.props.sections.building_to_view,close:this.props.close,kingdom_building_time_reduction:this.props.cost_reduction.kingdom_building_time_reduction,kingdom_building_cost_reduction:this.props.cost_reduction.kingdom_building_cost_reduction,kingdom_iron_cost_reduction:this.props.cost_reduction.kingdom_iron_cost_reduction,kingdom_population_cost_reduction:this.props.cost_reduction.kingdom_population_cost_reduction,kingdom_current_population:this.props.cost_reduction.kingdom_current_population,character_id:this.props.character_id,user_id:this.props.user_id,is_in_queue:this.props.queue.is_building_in_queue,character_gold:this.props.character_gold}):this.props.sections.unit_to_view!==null?t.jsx(dr,{unit:this.props.sections.unit_to_view,close:this.props.close,kingdom_unit_time_reduction:this.props.cost_reduction.kingdom_unit_time_reduction,kingdom_building_cost_reduction:this.props.cost_reduction.kingdom_building_cost_reduction,kingdom_iron_cost_reduction:this.props.cost_reduction.kingdom_iron_cost_reduction,kingdom_population_cost_reduction:this.props.cost_reduction.kingdom_unit_cost_reduction,kingdom_current_population:this.props.cost_reduction.kingdom_current_population,unit_cost_reduction:this.props.cost_reduction.kingdom_unit_cost_reduction,character_id:this.props.character_id,is_in_queue:this.props.queue.is_unit_in_queue,kingdom_id:this.props.kingdom_id,buildings:this.props.buildings,character_gold:this.props.character_gold}):null}}class Yu extends c.Component{constructor(e){super(e),this.state={building_to_view:null,unit_to_view:null}}manageViewBuilding(e){this.setState({building_to_view:typeof e<"u"?e:null})}manageViewUnit(e){this.setState({unit_to_view:typeof e<"u"?e:null})}closeSection(){this.setState({building_to_view:null,unit_to_view:null})}isInQueue(){return this.state.building_to_view===null||this.props.kingdom.building_queue.length===0?!1:this.props.kingdom.building_queue.filter(e=>e.building_id===this.state.building_to_view.id).length>0}isUnitInQueue(){return this.state.unit_to_view===null||this.props.kingdom.unit_queue.length===0?!1:this.props.kingdom.unit_queue.filter(e=>e.game_unit_id===this.state.unit_to_view.id).length>0}render(){return t.jsxs(o.Fragment,{children:[this.props.kingdom.is_protected?t.jsxs(Ce,{additional_css:"mt-4 mb-4",children:["Your kingdom is under protection from attacks for the next: ",this.props.kingdom.protected_days_left," day(s). This value does not include today."]}):null,t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs(_e,{additionalClasses:"max-h-[700px]",children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:this.props.close_details,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsx(nr,{kingdom:this.props.kingdom,character_gold:this.props.character_gold,close_details:this.props.close_details})]}),t.jsx("div",{children:this.state.building_to_view!==null||this.state.unit_to_view!==null?t.jsx(Wu,{sections:{unit_to_view:this.state.unit_to_view,building_to_view:this.state.building_to_view},close:this.closeSection.bind(this),cost_reduction:{kingdom_building_time_reduction:this.props.kingdom.building_time_reduction,kingdom_building_cost_reduction:this.props.kingdom.building_cost_reduction,kingdom_iron_cost_reduction:this.props.kingdom.iron_cost_reduction,kingdom_population_cost_reduction:this.props.kingdom.population_cost_reduction,kingdom_current_population:this.props.kingdom.current_population,kingdom_unit_cost_reduction:this.props.kingdom.unit_cost_reduction,kingdom_unit_time_reduction:this.props.kingdom.unit_time_reduction},buildings:this.props.kingdom.buildings,queue:{is_building_in_queue:this.isInQueue(),is_unit_in_queue:this.isUnitInQueue()},character_id:this.props.kingdom.character_id,kingdom_id:this.props.kingdom.id,character_gold:this.props.character_gold,user_id:this.props.user_id}):t.jsx(Gu,{kingdom:this.props.kingdom,kingdoms:this.props.kingdoms,dark_tables:this.props.dark_tables,manage_view_building:this.manageViewBuilding.bind(this),manage_view_unit:this.manageViewUnit.bind(this),view_port:this.props.view_port,user_id:this.props.user_id})})]})]})}}class Qu extends c.Component{constructor(e){super(e),this.state={view_building:null}}viewSelectedBuilding(e){this.setState({view_building:typeof e<"u"?e:null})}isInQueue(){if(this.state.view_building===null||this.props.kingdom.building_queue.length===0)return!1;const e=this;return this.props.kingdom.building_queue.filter(s=>{if(e.state.view_building!==null)return s.building_id===e.state.view_building.id}).length>0}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"text-right cursor-pointer  text-red-500 mb-4",children:t.jsx("button",{onClick:this.props.close_selected,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),this.state.view_building!==null?t.jsx(cr,{building:this.state.view_building,close:this.viewSelectedBuilding.bind(this),kingdom_building_time_reduction:this.props.kingdom.building_time_reduction,kingdom_building_cost_reduction:this.props.kingdom.building_cost_reduction,kingdom_iron_cost_reduction:this.props.kingdom.iron_cost_reduction,kingdom_population_cost_reduction:this.props.kingdom.population_cost_reduction,kingdom_current_population:this.props.kingdom.current_population,character_id:this.props.kingdom.character_id,is_in_queue:this.isInQueue(),character_gold:this.props.character_gold,user_id:this.props.user_id}):t.jsx(_e,{children:t.jsx(rr,{buildings:this.props.kingdom.buildings,dark_tables:this.props.dark_tables,view_building:this.viewSelectedBuilding.bind(this),buildings_in_queue:this.props.kingdom.building_queue,view_port:this.props.view_port})})]})}}class Vu extends c.Component{constructor(e){super(e),this.state={unit_to_view:null}}closeSection(){this.setState({unit_to_view:null})}viewSelectedBuilding(e){this.setState({unit_to_view:typeof e<"u"?e:null})}isUnitInQueue(){return this.state.unit_to_view===null||this.props.kingdom.unit_queue.length===0?!1:this.props.kingdom.unit_queue.filter(e=>{if(this.state.unit_to_view!==null)return e.game_unit_id===this.state.unit_to_view.id}).length>0}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"text-right cursor-pointer  text-red-500 mb-4",children:t.jsx("button",{onClick:this.props.close_selected,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),this.state.unit_to_view!==null?t.jsx(dr,{unit:this.state.unit_to_view,close:this.closeSection.bind(this),kingdom_building_cost_reduction:this.props.kingdom.building_cost_reduction,kingdom_iron_cost_reduction:this.props.kingdom.iron_cost_reduction,kingdom_population_cost_reduction:this.props.kingdom.population_cost_reduction,kingdom_current_population:this.props.kingdom.current_population,kingdom_unit_time_reduction:this.props.kingdom.unit_time_reduction,unit_cost_reduction:this.props.kingdom.unit_cost_reduction,character_id:this.props.kingdom.character_id,is_in_queue:this.isUnitInQueue(),kingdom_id:this.props.kingdom.id,buildings:this.props.kingdom.buildings,character_gold:this.props.character_gold}):t.jsx(_e,{children:t.jsx(or,{units:this.props.kingdom.units,buildings:this.props.kingdom.buildings,dark_tables:this.props.dark_tables,view_unit:this.viewSelectedBuilding.bind(this),units_in_queue:this.props.kingdom.unit_queue,current_units:this.props.kingdom.current_units})})]})}}class Xu extends c.Component{constructor(e){super(e),this.state={show_kingdom_details:!1,which_selected:null}}manageKingdomDetails(){this.setState({show_kingdom_details:!this.state.show_kingdom_details})}showSelected(e){this.setState({which_selected:e.value})}closeSelected(){this.setState({which_selected:null})}renderSelected(){switch(this.state.which_selected){case"buildings":return t.jsx(Qu,{kingdom:this.props.kingdom,dark_tables:this.props.dark_tables,close_selected:this.closeSelected.bind(this),character_gold:this.props.character_gold,view_port:this.props.view_port,user_id:this.props.user_id});case"units":return t.jsx(Vu,{kingdom:this.props.kingdom,dark_tables:this.props.dark_tables,close_selected:this.closeSelected.bind(this),character_gold:this.props.character_gold});default:return null}}render(){return t.jsxs(o.Fragment,{children:[t.jsx(_e,{children:this.state.show_kingdom_details?t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 mb-5",children:[t.jsx("span",{children:t.jsx("strong",{children:"Kingdom  Details"})}),t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:this.manageKingdomDetails.bind(this),children:t.jsx("i",{className:"fas fa-minus-circle"})})})]}),t.jsx(nr,{kingdom:this.props.kingdom,character_gold:this.props.character_gold,close_details:this.props.close_details})]}):t.jsxs("div",{className:"grid grid-cols-2",children:[t.jsx("span",{children:t.jsx("strong",{children:"Kingdom  Details"})}),t.jsx("div",{className:"text-right cursor-pointer text-blue-500",children:t.jsx("button",{onClick:this.manageKingdomDetails.bind(this),children:t.jsx("i",{className:"fas fa-plus-circle"})})})]})}),t.jsx("div",{className:"mt-4",children:this.state.which_selected!==null?this.renderSelected():t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.showSelected.bind(this),options:[{label:"Building Management",value:"buildings"},{label:"Unit Management",value:"units"}],menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:"Please Select Section",value:""}]}),t.jsx("div",{className:"grid gap-3",children:t.jsx(ce,{button_label:"Close",on_click:this.props.close_details,additional_css:"mt-4"})})]})})]})}}const Ju=(a,e)=>[{name:"Title",selector:s=>s.status,cell:s=>t.jsx("button",{className:"text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-500",onClick:()=>a(s),children:s.status})},{name:"Read",cell:s=>t.jsx("span",{children:s.opened?t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"far fa-envelope-open mr-2"})," Read"]}):t.jsxs(o.Fragment,{children:[t.jsx("i",{className:"far fa-envelope mr-2"})," Not Read"]})})},{name:"Kingdom Attacked",selector:s=>s.to_kingdom_name},{name:"Attacked From",selector:s=>s.from_kingdom_name===null?"N/A":s.from_kingdom_name},{name:"Created At",selector:s=>s.created_at},{name:"Actions",selector:s=>s.status,cell:s=>t.jsx(ce,{button_label:"Delete Log",on_click:()=>e(s)})}];class Zu extends c.Component{constructor(e){super(e)}renderBuildingChanges(){const e=[];return this.props.log.old_buildings.forEach(s=>{let i=this.props.log.new_buildings.filter(n=>n.name===s.name);if(i.length>0){const n=i[0];n.durability===s.durability?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{children:["0% Lost",this.props.log.is_mine?", New Durability: "+u(n.durability):null]})]})):n.durability===0?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:["100% Lost",this.props.log.is_mine?", New Durability: "+u(n.durability):null]})]})):e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:[((s.durability-n.durability)/s.durability*100).toFixed(0),"% Lost",this.props.log.is_mine?", New Durability: "+u(n.durability):null]})]}))}}),e}renderUnitChanges(){const e=[];return this.props.log.old_units.forEach(s=>{let i=this.props.log.new_units.filter(n=>n.name===s.name);if(i.length>0){const n=i[0];n.amount===s.amount?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{children:["0% Lost",this.props.log.is_mine?", Amount Left: "+u(n.amount):null]})]})):n.amount===0?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:["100% Lost",this.props.log.is_mine?", Amount Left: "+u(n.amount):null]})]})):e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:[((s.amount-n.amount)/s.amount*100).toFixed(2),"% Lost",this.props.log.is_mine?", Amount Left: "+u(n.amount):null]})]}))}}),e}renderUnitsSentChange(){const e=[];return this.props.log.units_sent.forEach(s=>{let i=this.props.log.units_survived.filter(n=>n.name===s.name);if(i.length>0){const n=i[0];n.amount===s.amount?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{children:["0% Lost",this.props.log.is_mine?null:", Amount Left: "+u(n.amount)]})]})):n.amount===0?e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:["100% Lost",this.props.log.is_mine?null:", Amount Left: "+u(n.amount)]})]})):e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:s.name}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400",children:[((s.amount-n.amount)/s.amount*100).toFixed(0),"% Lost",this.props.log.is_mine?null:", Amount Left: "+u(n.amount)]})]}))}}),e}shouldShowUnitSentChanges(){return this.props.log.units_sent.length>0&&this.props.log.units_survived.length>0}render(){return this.props.log.status==="Kingdom has not been walked"?t.jsxs(_e,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:this.props.close_details,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"mb-4",children:this.props.log.status}),t.jsx("p",{className:"my-4 text-red-600 dark:text-red-500",children:"You have not visited your kingdom in the last 90 days. So it was handed to The Old Man and made into an NPC Kingdom."}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Kingdom Name"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.name}),t.jsx("dt",{children:"Kingdom Location"}),t.jsxs("dd",{children:["(X/Y) ",this.props.log.additional_details.kingdom_data.x," / ",this.props.log.additional_details.kingdom_data.y]}),t.jsx("dt",{children:"On Map"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.game_map_name}),t.jsx("dt",{children:"Reason"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.reason})]}),t.jsxs(Ce,{additional_css:"my-4",children:[t.jsx("h4",{children:"Walking your kingdoms"}),t.jsx("p",{className:"my-4",children:'Kingdoms have to be walked at least once in a 90 day period or they get handed over to The Old Man. What it means to walk a kingdom is to physically visit the kingdom to consider it "walked".'})]})]})]}):this.props.log.status==="Kingdom was overpopulated"?t.jsxs(_e,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:this.props.close_details,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"mb-4",children:this.props.log.status}),t.jsx("p",{className:"my-4 text-red-600 dark:text-red-500",children:"You kingdom was overpopulated. The Old Man took it and demolished it."}),t.jsxs("dl",{className:"my-4",children:[t.jsx("dt",{children:"Kingdom Name"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.name}),t.jsx("dt",{children:"Kingdom Location"}),t.jsxs("dd",{children:["(X/Y) ",this.props.log.additional_details.kingdom_data.x," / ",this.props.log.additional_details.kingdom_data.y]}),t.jsx("dt",{children:"On Map"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.game_map_name}),t.jsx("dt",{children:"Reason"}),t.jsx("dd",{children:this.props.log.additional_details.kingdom_data.reason})]}),t.jsxs(Ce,{additional_css:"my-4",children:[t.jsx("h4",{children:"Over Population"}),t.jsx("p",{className:"my-4",children:"Kingdoms can purchase additional population for recruiting large amount of units, but one should becarfeul because if you have more then your max at the hourly reset The Old Man will stomp around. he will attempt to:"}),t.jsxs("ul",{className:"my-4 list-disc",children:[t.jsx("li",{className:"ml-4",children:"Take the cost our of your gold bars"}),t.jsx("li",{className:"ml-4",children:"If you have none, he will take it from your treasury."}),t.jsx("li",{className:"ml-4",children:"If you have none, he will take it from your own gold."}),t.jsx("li",{className:"ml-4",children:"If you have none, he will destroy the kingdom."})]})]})]})]}):t.jsxs(_e,{children:[t.jsx("div",{className:"text-right cursor-pointer text-red-500",children:t.jsx("button",{onClick:this.props.close_details,children:t.jsx("i",{className:"fas fa-minus-circle"})})}),t.jsxs("div",{className:"my-4",children:[t.jsx("h3",{className:"mb-4",children:this.props.log.status}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Kingdom Attacked (X/Y)"}),t.jsxs("dd",{className:$({"text-green-600 dark:text-green-400":!this.props.log.is_mine,"text-red-600 dark:text-red-400":this.props.log.is_mine}),children:[this.props.log.to_kingdom_name," ",this.props.log.to_x," / ",this.props.log.to_y]}),t.jsx("dt",{children:"Attacked From (X/Y)"}),t.jsx("dd",{className:$({"text-green-600 dark:text-green-400":this.props.log.is_mine,"text-red-600 dark:text-red-400":!this.props.log.is_mine}),children:this.props.log.from_kingdom_name!==null?this.props.log.from_kingdom_name+" "+this.props.log.from_x+"/"+this.props.log.from_y:"N/A"}),t.jsx("dt",{className:this.props.log.took_kingdom?"hidden":"",children:"Kingdom Attacked Morale Loss"}),t.jsxs("dd",{className:"text-red-600 dark:text-red-400 "+this.props.log.took_kingdom?"hidden":"",children:[(this.props.log.morale_loss*100).toFixed(2)," %"]})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3 "+(this.props.log.took_kingdom?"":"hidden")}),t.jsx("p",{className:this.props.log.took_kingdom?"":"hidden",children:"You now own this kingdom. You took it from the defender. Check your kingdoms list. Any surviving units are now held up here."})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3 "+this.props.log.took_kingdom?"hidden":""}),t.jsx("div",{className:this.props.log.took_kingdom?"hidden":"",children:t.jsxs("div",{className:"grid md:grid-cols-"+(this.shouldShowUnitSentChanges()?"3":"2")+" gap-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"mb-4",children:"Building Changes"}),t.jsx("dl",{children:this.renderBuildingChanges()})]}),this.props.log.old_units.length===0&&this.props.log.new_units.length===0?t.jsxs("div",{children:[t.jsx("h3",{className:"mb-4",children:"Unit Changes"}),t.jsx("p",{children:"There were no changes in kingdom units."})]}):t.jsxs("div",{children:[t.jsx("h3",{className:"mb-4",children:"Unit Changes"}),t.jsx("dl",{children:this.renderUnitChanges()})]}),this.shouldShowUnitSentChanges()?t.jsxs("div",{children:[t.jsx("h3",{className:"mb-4",children:"Attacking Unit Changes"}),t.jsx("dl",{children:this.renderUnitsSentChange()})]}):null]})})]})}}class em extends c.Component{constructor(e){super(e),this.tabs=[{name:"Kingdoms",key:"kingdoms"},{name:"Logs",key:"kingdom-logs",has_logs:!1}],this.state={loading:!0,dark_tables:!1,selected_kingdom:null,selected_log:null}}componentDidMount(){ca(this);const e=this;setTimeout(function(){e.setState({loading:!1})},500),this.updateIcon()}componentDidUpdate(){const e=this.props.my_kingdoms.filter(s=>{if(this.state.selected_kingdom!==null)return s.id===this.state.selected_kingdom.id});if(e.length>0){const s=e[0];de.isEqual(s,this.state.selected_kingdom)||this.setState({selected_kingdom:s})}this.updateIcon()}updateIcon(){this.props.logs.length>0&&(this.props.logs.filter(s=>!s.opened).length>0?this.tabs[this.tabs.length-1].has_logs=!0:this.tabs[this.tabs.length-1].has_logs=!1)}viewKingdomDetails(e){this.setState({selected_kingdom:e})}viewLogs(e){e.opened?this.setState({selected_log:e}):new g().setRoute("kingdom/opened-log/"+e.character_id+"/"+e.id).doAjaxCall("post",s=>{this.setState({selected_log:e})},s=>{console.error(s)})}deleteLog(e){new g().setRoute("kingdom/delete-log/"+e.character_id+"/"+e.id).doAjaxCall("post",s=>{},s=>{console.error(s)})}closeKingdomDetails(){this.setState({selected_kingdom:null})}closeLogDetails(){this.setState({selected_log:null})}render(){return this.state.loading?t.jsx(D,{}):t.jsx(o.Fragment,{children:this.state.selected_kingdom!==null?this.props.view_port<1600?t.jsx(Xu,{close_details:this.closeKingdomDetails.bind(this),kingdom:this.state.selected_kingdom,dark_tables:this.state.dark_tables,character_gold:this.props.character_gold,view_port:this.props.view_port,user_id:this.props.user_id,kingdoms:this.props.my_kingdoms}):t.jsx(Yu,{close_details:this.closeKingdomDetails.bind(this),kingdom:this.state.selected_kingdom,kingdoms:this.props.my_kingdoms,dark_tables:this.state.dark_tables,character_gold:this.props.character_gold,view_port:this.props.view_port,user_id:this.props.user_id}):this.state.selected_log!==null?t.jsx(Zu,{close_details:this.closeLogDetails.bind(this),log:this.state.selected_log}):t.jsx(_e,{additionalClasses:"overflow-x-auto",children:t.jsxs(Be,{tabs:this.tabs,icon_key:"has_logs",children:[t.jsx(H,{children:this.props.my_kingdoms.length>0?t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.props.my_kingdoms,columns:Uh(this.viewKingdomDetails.bind(this)),dark_table:this.state.dark_tables})}):t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-4 text-center",children:"No Settled Kingdoms."}),t.jsx("p",{className:"text-center",children:t.jsxs("a",{href:"/information/kingdoms",target:"_blank",children:["What are and how to get kingdoms. ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})},"kingdoms"),t.jsx(H,{children:this.props.logs.length>0?t.jsx("div",{className:"max-w-[290px] sm:max-w-[100%] overflow-x-hidden",children:t.jsx(Ie,{data:this.props.logs,columns:Ju(this.viewLogs.bind(this),this.deleteLog.bind(this)),dark_table:this.state.dark_tables})}):t.jsx("p",{className:"my-4 text-center",children:"No Logs."})},"kingdom-logs")]})})})}}class tm extends c.Component{constructor(e){super(e)}render(){return t.jsxs(ee,{is_open:!0,title:"You're in timeout!",children:[t.jsx("p",{className:"my-4",children:"Child! You need to slow down. You have been so busy you spun your self into a dizzying fit of madness. Take a moment child and rest."}),t.jsx("p",{className:"my-4 text-red-600 dark:text-red-400",children:"You have been timed out for two minutes. Refresh and your timer restarts. Try and get around this and you'll be banned. Accept your punishment child and slow down."}),t.jsx(De,{time_remaining:120,time_out_label:"Timeout time remaining.",update_time_remaining:()=>{}})]})}}class sm extends c.Component{constructor(e){super(e),this.state={loading:!0,eventGoal:null},this.eventGoalsUpdate=Echo.join("update-event-goal-progress")}componentDidMount(){new g().setRoute("global-event-goals/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({loading:!1,eventGoal:e.data.event_goals})},e=>{console.error(e)}),this.eventGoalsUpdate.listen("Game.Events.Events.UpdateEventGoalProgress",e=>{this.setState({eventGoal:e.eventGoalData.event_goals})})}buildProgressBars(){const e=[];if(this.state.eventGoal===null)return e;let s=this.state.eventGoal.reward_every,i=1;for(;s<=this.state.eventGoal.max_kills;){const n=Math.min(s,this.state.eventGoal.total_kills);e.push(t.jsx("div",{className:"mb-4 relative top-[-15px]",children:t.jsx(Ys,{primary_label:"Phase: "+i,secondary_label:u(n)+"/"+u(s),percentage_filled:n/s*100,height_override_class:"h-2",text_override_class:"text-md",push_down:!0},s)})),s+=this.state.eventGoal.reward_every,i++}return e}render(){var e,s;return this.state.loading?t.jsx(D,{}):this.state.eventGoal===null?t.jsx(D,{}):t.jsxs("div",{children:[t.jsx("div",{className:"relative top-[-30px]",children:t.jsx(Ys,{primary_label:"Event Goal - Creature Kill",secondary_label:u(this.state.eventGoal.total_kills)+"/"+u(this.state.eventGoal.max_kills),percentage_filled:((e=this.state.eventGoal)==null?void 0:e.total_kills)/((s=this.state.eventGoal)==null?void 0:s.max_kills)*100,height_override_class:"h-3",text_override_class:"text-md",push_down:!0})}),t.jsxs("div",{className:"my-4 relative top-2",children:[t.jsx("p",{className:"my-2",children:"Each phase is an objective that when completed will reward all players who participated with a piece of new gear in relation to the event goal."}),t.jsx("p",{className:"my-2",children:"Goals are created such that the more players, the faster you get the reward."}),t.jsxs("dl",{className:"my-2",children:[t.jsx("dt",{children:"Gear Set Name"}),t.jsx("dd",{children:t.jsxs("a",{href:"/information/corrupted-ice",target:"_blank",children:["Corrupted Ice ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),t.jsx("dt",{children:"With Legendary Unique Attached?"}),t.jsx("dd",{children:"Yes"}),t.jsx("dt",{children:"With Mythic Attached?"}),t.jsx("dd",{children:"No"})]}),t.jsxs("p",{className:"my-2 font-bold",children:[t.jsx("span",{className:"text-orange-500 dark:text-orange-300",children:"Amount of kills required to gain phase reward:"})," ",u(this.state.eventGoal.kills_needed_for_reward)]}),t.jsxs("p",{className:"my-2 font-bold",children:[t.jsx("span",{className:"text-orange-500 dark:text-orange-300",children:"Your Current Kills For Event Goal:"})," ",u(this.state.eventGoal.current_kills)]})]}),t.jsx("div",{className:"max-h-[200px] overflow-y-scroll px-2 relative top-[-10px]",children:this.buildProgressBars()})]})}}class am extends c.Component{constructor(e){super(e),this.tabs=[{key:"map",name:"Map"},{key:"event-goals",name:"Event Goals"}]}render(){return this.props.use_tabs?t.jsxs(Be,{tabs:this.tabs,disabled:!1,children:[t.jsx(H,{children:this.props.children},"map"),t.jsx(H,{children:t.jsx(sm,{character_id:this.props.character_id})},"event-goals")]}):this.props.children}}class im{constructor(e){this.component=e}initialFetch(){const e=this.component.props;new g().setRoute("map-actions/"+e.character.id).doAjaxCall("get",s=>{this.component.setState({monsters:s.data.monsters,attack_time_out:e.character.can_attack_again_at!==null?this.calculateTimeLeft(e.character.can_attack_again_at):0,crafting_time_out:e.character.can_craft_again_at!==null?this.calculateTimeLeft(e.character.can_craft_again_at):0,automation_time_out:e.character.automation_completed_at!==null?e.character.automation_completed_at:0,celestial_time_out:e.character.can_engage_celestials_again_at!==null?e.character.can_engage_celestials_again_at:0,loading:!1})},s=>{console.error(s)})}setCharactersForDueling(e){let s=[];const i=this.component.props;if(e.length!==0&&i.character_position!==null){if(s=e.filter(n=>{if(i.character_position!==null&&n.id!==i.character.id)return n}),s.length===0)return;this.component.setState({characters_for_dueling:s})}}calculateTimeLeft(e){const s=Ye.fromISO(e),i=Ye.now(),r=s.diff(i,["seconds"]).toObject();return typeof r.seconds>"u"?0:parseInt(r.seconds.toFixed(0))}setSelectedAction(e){this.component.setState({selected_action:e.value},()=>{e.value==="pvp-fight"&&this.component.setState({show_duel_fight:!0})})}setDuelCharacters(){const e=this.component.state,s=this.component.props;if(typeof e.characters_for_dueling<"u"){const i=e.characters_for_dueling.filter(n=>{var r,l,p;return n.character_position_x===((r=s.character_position)==null?void 0:r.x)&&n.character_position_y===((l=s.character_position)==null?void 0:l.y)&&n.game_map_id===((p=s.character_position)==null?void 0:p.game_map_id)&&n.name!==s.character.name});this.component.setState({characters_for_dueling:i})}}buildOptions(){const e=this.component.props,s=this.component.state,i=[{label:"Exploration",value:"explore"},{label:"Craft",value:"craft"}];return e.character.is_automation_running||i.unshift({label:"Fight",value:"fight"}),i.push({label:"Slots",value:"slots"}),i.push({label:"Map Movement",value:"map-movement"}),s.characters_for_dueling.length>0&&!e.character.killed_in_pvp&&i.push({label:"Pvp Fight",value:"pvp-fight"}),e.celestial_id!==0&&e.celestial_id!==null&&e.character.can_engage_celestials&&i.push({label:"Celestial Fight",value:"celestial-fight"}),e.character.can_register_for_pvp&&i.push({label:"Join Monthly PVP",value:"join-monthly-pvp"}),e.character.can_access_hell_forged&&i.push({label:"Hell Forged Gear",value:"hell-forged-gear"}),e.character.can_access_purgatory_chains&&i.push({label:"Purgatory Chains Gear",value:"purgatory-chains-gear"}),i}defaultSelectedAction(){const e=this.component.state;return typeof e.selected_action<"u"&&e.selected_action!==null?[{label:de.capitalize(e.selected_action),value:e.selected_action}]:[{label:"Please Select Action",value:""}]}}let hr=class extends c.Component{constructor(e){super(e)}render(){return t.jsx("div",{className:"mt-4 lg:mt-2 lg:ml-[120px]",children:t.jsxs("div",{className:"lg:grid lg:grid-cols-3 lg:gap-2",children:[t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:t.jsx(B,{onChange:this.props.set_monster_to_fight,options:this.props.monsters,menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.props.default_monster})}),t.jsxs("div",{className:"text-center mt-4 lg:mt-0 lg:text-left lg:cols-start-3 lg:cols-end-3",children:[t.jsx(Y,{button_label:"Attack",on_click:this.props.attack,disabled:this.props.is_attack_disabled}),typeof this.props.close_monster_section<"u"?t.jsx(ce,{button_label:"Close",on_click:this.props.close_monster_section,additional_css:"ml-4"}):null]})]})})}};class nm extends c.Component{constructor(e){super(e),this.state={monster_to_fight:null,monsters:[]}}componentDidMount(){this.setState({monsters:this.props.monsters})}componentDidUpdate(){de.isEqual(this.state.monsters,this.props.monsters)||this.setState({monster_to_fight:null,monsters:this.props.monsters})}setMonsterToFight(e){const s=this.findMonster(e.value);s!==null&&this.setState({monster_to_fight:s})}buildMonsters(){return this.props.monsters===null?[{label:"",value:0}]:this.props.monsters.map(e=>({label:e.name,value:e.id}))}defaultMonster(){if(this.state.monster_to_fight!==null){const e=this.findMonster(this.state.monster_to_fight.id);if(e!==null)return[{label:e.name,value:e.id}]}return[{label:"Please select a monster",value:0}]}findMonster(e){const s=this.props.monsters.filter(i=>i.id===e);return s.length>0?s[0]:null}isAttackDisabled(){return this.props.character===null?!1:this.props.character.is_dead||this.props.character.is_automation_running||!this.props.character.can_attack||this.state.monster_to_fight===null}attack(){this.props.update_monster_to_fight(this.state.monster_to_fight)}render(){return t.jsx(hr,{set_monster_to_fight:this.setMonsterToFight.bind(this),monsters:this.buildMonsters(),default_monster:this.defaultMonster(),attack:this.attack.bind(this),is_attack_disabled:this.isAttackDisabled(),close_monster_section:this.props.close_monster_section})}}class Xe extends c.Component{constructor(e){super(e)}render(){return t.jsx("button",{type:"button",className:"w-10 h-10 mx-2 "+this.props.additional_css,onClick:this.props.on_click,disabled:this.props.disabled,children:t.jsx("i",{className:this.props.icon_class})})}}class is extends c.Component{constructor(e){super(e)}abbreviateNumber(e){if(typeof e>"u")return 0;let s=e;const i=["","k","M","B","T","Quad.","Qunit."];var n=Math.log10(Math.abs(s))/3|0;if(n==0)return s;var r=i[n],l=Math.pow(10,n*3),p=s/l;return p.toFixed(0)+r}healthPercent(){if(typeof this.props.current_health>"u"||typeof this.props.max_health>"u")return 0;const e=this.props.current_health/this.props.max_health;return e>1?1:e}render(){return t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:$("font-medium dark:text-white text-xs",{"text-red-600 dark:text-red-400":this.props.is_enemy},{"text-green-700 dark:text-green-500":!this.props.is_enemy}),children:this.props.name}),t.jsxs("span",{className:$("font-medium dark:text-white text-xs",{"text-red-600 dark:text-red-400":this.props.is_enemy},{"text-green-700 dark:text-green-500":!this.props.is_enemy}),children:[this.abbreviateNumber(this.props.current_health)," / ",this.abbreviateNumber(this.props.max_health)]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700",children:t.jsx("div",{className:$("h-1.5 rounded-full",{"bg-red-600":this.props.is_enemy},{"bg-green-600":!this.props.is_enemy}),style:{width:this.healthPercent()*100+"%"}})})]})}}class _a extends c.Component{constructor(e){super(e)}typeCheck(e,s){return e===s}render(){return this.props.battle_messages.map(e=>t.jsx("p",{className:$({"text-green-700 dark:text-green-400":this.typeCheck(e.type,"player-action")},{"text-red-500 dark:text-red-400":this.typeCheck(e.type,"enemy-action")},{"text-blue-500 dark:text-blue-400":this.typeCheck(e.type,"regular")}),children:e.message}))}}class ur extends c.Component{constructor(e){super(e)}rnderHighestElementCheck(e){return this.props.highest_element===e?t.jsx("i",{className:"fas fa-check text-green-600 dark:text-green-400"}):null}renderAtonementData(){const e=[];for(const s in this.props.element_atonements){const i=this.props.element_atonements[s];e.push(t.jsxs(t.Fragment,{children:[t.jsxs("dd",{children:[de.startCase(s)," ",this.rnderHighestElementCheck(s),":"]}),t.jsxs("dt",{children:[i*100,"%"]})]}))}return e}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:this.props.monster_name+" Elemental Atonement",children:[t.jsxs("p",{className:"my-4",children:["Below you will find elemental atonement info about the monster in question. Matching your elemental atonement through the use of ",t.jsxs("a",{href:"/information/gems",target:"_blank",children:["Gems ",t.jsx("i",{className:"fas fa-external-link-alt"})]}),"."]}),t.jsx("p",{className:"my-4",children:"When an enemy attacks, they will do a % of their weapon damage as that elements damage towards you. For example if there attack is 500, and the enemies highest element is 15% in water they will do 15% of 500 towards you as water damage. If your element is Fire, they will do double that damage. If your element is Ice, they will do half damage to you."}),t.jsx("p",{className:"my-4",children:"The green Checkmark beside the element name, means this is the core attacking element and you will want the oppisite element to do the most damage. For example if the enemy is Fire based, you want Water. If the element is Water you want Ice."}),t.jsx("dl",{className:"my-4",children:this.renderAtonementData()})]})}}class rm extends c.Component{constructor(e){super(e),this.state={battle_messages:[],character_current_health:0,character_max_health:0,monster_current_health:0,monster_max_health:0,monster_to_fight_id:0,is_character_voided:!1,is_monster_voided:!1,monster_to_fight:null,processing_rank_battle:!1,setting_up_rank_fight:!1,setting_up_regular_fight:!1,processing_regular_fight:!1,show_clear_message:!0,open_elemental_atonement:!1,error_message:""}}componentDidMount(){if(this.props.is_rank_fight){this.props.setup_rank_fight(this);return}this.setUpBattle()}componentDidUpdate(){var e,s;if(this.props.is_rank_fight){if(this.state.setting_up_rank_fight)return;this.props.is_same_monster&&this.setState({battle_messages:[],setting_up_rank_fight:!0},()=>{this.props.setup_rank_fight(this)}),this.props.monster_to_fight.id!==this.state.monster_to_fight_id&&this.state.monster_to_fight_id!==0&&this.setState({battle_messages:[],setting_up_rank_fight:!0},()=>{this.props.setup_rank_fight(this)});return}this.props.monster_to_fight.id!==this.state.monster_to_fight_id&&this.state.monster_to_fight_id!==0&&(this.setState({monster_to_fight_id:this.props.monster_to_fight.id}),this.setUpBattle()),this.props.is_same_monster&&(this.setState({battle_messages:[]}),this.setUpBattle(),this.props.reset_same_monster()),this.props.character_revived&&this.setState({character_current_health:(e=this.props.character)==null?void 0:e.health,character_max_health:(s=this.props.character)==null?void 0:s.health,battle_messages:[]},()=>{this.props.reset_revived()})}setUpBattle(){this.props.character!=null&&this.setState({setting_up_regular_fight:!0,show_clear_message:!0,error_message:""},()=>{new g().setRoute("setup-monster-fight/"+this.props.character.id+"/"+this.props.monster_to_fight.id).setParameters({attack_type:"attack"}).doAjaxCall("get",e=>{this.setState({battle_messages:e.data.opening_messages,character_current_health:e.data.health.current_character_health,character_max_health:e.data.health.max_character_health,monster_current_health:e.data.health.current_monster_health,monster_max_health:e.data.health.max_monster_health,monster_to_fight_id:e.data.monster.id,setting_up_regular_fight:!1,monster_to_fight:e.data.monster})},e=>{console.error(e)})})}attack(e){if(this.props.is_rank_fight)return this.props.process_rank_fight(this,e);this.setState({processing_regular_fight:!0,error_message:""},()=>{new g().setRoute("monster-fight/"+this.props.character.id).setParameters({attack_type:e}).doAjaxCall("post",s=>{this.setState({battle_messages:s.data.messages,character_current_health:s.data.health.current_character_health<0?0:s.data.health.current_character_health,monster_current_health:s.data.health.current_monster_health<0?0:s.data.health.current_monster_health,processing_regular_fight:!1})},s=>{if(typeof s.response<"u"){const i=s.response;this.setState({error_message:i.data.message,processing_regular_fight:!1})}})})}attackButtonDisabled(){var e,s,i,n;return this.props.is_rank_fight?!!((e=this.props.character)!=null&&e.is_dead||!((s=this.props.character)!=null&&s.can_attack)||this.state.monster_current_health<=0):typeof this.state.character_current_health>"u"?!0:this.state.monster_current_health<=0||this.state.character_current_health<=0||((i=this.props.character)==null?void 0:i.is_dead)||!((n=this.props.character)!=null&&n.can_attack)}clearBattleMessages(){this.setState({battle_messages:[],monster_max_health:this.state.monster_current_health<=0?0:this.state.monster_max_health,show_clear_message:!(this.state.monster_current_health<=0)})}manageElementalAtonement(){this.setState({open_elemental_atonement:!this.state.open_elemental_atonement})}render(){var e;return this.state.setting_up_regular_fight?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(D,{})}):this.state.error_message!==""?t.jsx("div",{className:"ml-auto mr-auto my-4 md:max-w-[75%]",children:t.jsx(z,{children:this.state.error_message})}):t.jsxs("div",{className:$({"ml-[-100px]":!this.props.is_small}),children:[((e=this.state.monster_to_fight)==null?void 0:e.highest_element)!=="UNKNOWN"?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:" mt-4 mb-4 text-center",children:t.jsx(ei,{button_label:"Elemental Atonement Info",on_click:this.manageElementalAtonement.bind(this)})})}):null,t.jsxs("div",{className:$("mt-4 mb-4 text-xs text-center",{hidden:this.attackButtonDisabled(),"ml-[50px]":!this.props.is_small&&!this.props.is_rank_fight}),children:[t.jsx(Xe,{is_small:this.props.is_small,type:"Atk",additional_css:"btn-attack",icon_class:"ra ra-sword",on_click:()=>this.attack("attack"),disabled:this.attackButtonDisabled()}),t.jsx(Xe,{is_small:this.props.is_small,type:"Cast",additional_css:"btn-cast",icon_class:"ra ra-burning-book",on_click:()=>this.attack("cast"),disabled:this.attackButtonDisabled()}),t.jsx(Xe,{is_small:this.props.is_small,type:"Cast & Atk",additional_css:"btn-cast-attack",icon_class:"ra ra-lightning-sword",on_click:()=>this.attack("cast_and_attack"),disabled:this.attackButtonDisabled()}),t.jsx(Xe,{is_small:this.props.is_small,type:"Atk & Cast",additional_css:"btn-attack-cast",icon_class:"ra ra-lightning-sword",on_click:()=>this.attack("attack_and_cast"),disabled:this.attackButtonDisabled()}),t.jsx(Xe,{is_small:this.props.is_small,type:"Defend",additional_css:"btn-defend",icon_class:"ra ra-round-shield",on_click:()=>this.attack("defend"),disabled:this.attackButtonDisabled()}),this.props.is_rank_fight?null:t.jsxs("a",{href:"/information/combat",target:"_blank",className:"ml-2 mt-4 mb-4 hidden lg:block",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsxs("div",{className:$("mt-1 text-xs text-center",{hidden:this.attackButtonDisabled()}),children:[t.jsx("span",{className:"w-10 mr-4 ml-4",children:"Atk"}),t.jsx("span",{className:"w-10 ml-6",children:"Cast"}),t.jsx("span",{className:"w-10 ml-4",children:"Cast & Atk"}),t.jsx("span",{className:"w-10 ml-2",children:"Atk & Cast"}),t.jsx("span",{className:"w-10 ml-2",children:"Defend"})]}),this.props.is_rank_fight?null:t.jsx("div",{className:"text-center my-4",children:t.jsxs("a",{href:"/information/combat",target:"_blank",className:"block lg:hidden",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),this.state.processing_rank_battle||this.state.processing_regular_fight?t.jsx("div",{className:"w-1/2 mx-auto",children:t.jsx(D,{})}):null,this.attackButtonDisabled()&&this.state.show_clear_message?t.jsx("div",{className:"text-center mt-4",children:t.jsx("button",{onClick:this.clearBattleMessages.bind(this),className:"text-red-500 dark:text-red-400 underline hover:text-red-600 dark:hover:text-red-500",children:"Clear"})}):null,this.state.monster_max_health>0&&this.props.character!==null?t.jsxs("div",{className:$("mb-4 max-w-md m-auto mt-4"),children:[t.jsx(is,{is_enemy:!0,name:this.props.monster_to_fight.name,current_health:this.state.monster_current_health,max_health:this.state.monster_max_health}),t.jsx(is,{is_enemy:!1,name:this.props.character.name,current_health:this.state.character_current_health,max_health:this.state.character_max_health})]}):null,this.state.open_elemental_atonement&&this.state.monster_to_fight!==null?t.jsx(ur,{element_atonements:this.state.monster_to_fight.elemental_atonement,highest_element:this.state.monster_to_fight.highest_element,monster_name:this.state.monster_to_fight.name,is_open:this.state.open_elemental_atonement,manage_modal:this.manageElementalAtonement.bind(this)}):null,t.jsx("div",{className:"italic text-center",children:t.jsx(_a,{battle_messages:this.state.battle_messages,is_small:this.props.is_small})})]})}}class Qt extends c.Component{constructor(e){super(e),this.monster=new mr(this)}revive(){typeof this.props.revive_call_back<"u"?this.monster.revive(this.props.character_id,this.props.revive_call_back):this.monster.revive(this.props.character_id)}render(){if(this.props.is_character_dead)return t.jsxs("div",{className:"text-center my-4 lg:ml-[-140px]",children:[t.jsx(Y,{button_label:"Revive",on_click:this.revive.bind(this),additional_css:"mb-4",disabled:!this.props.can_attack}),t.jsx("p",{children:"You are dead. Please Revive."})]})}}class mr{constructor(e){this.component=e}setSelectedMonster(e){var i;if(this.component instanceof Qt)return;let s=!1;e!==null&&(e.id===((i=this.component.state.monster_to_fight)==null?void 0:i.id)&&(s=!0),this.component.setState({monster_to_fight:e,is_same_monster:s}))}resetSameMonster(){this.component instanceof Qt||this.component.setState({is_same_monster:!1})}setAttackTimeOut(e){this.component instanceof Qt||this.component.setState({attack_time_out:e})}revive(e,s){new g().setRoute("battle-revive/"+e).doAjaxCall("post",i=>{typeof s<"u"&&s()},i=>{console.error(i)})}resetRevived(){this.component instanceof Qt||this.component.setState({character_revived:!1})}}class pr extends c.Component{constructor(e){super(e),this.monsterActionManager=new mr(this),this.state={monsters:[],monster_to_fight:null,is_same_monster:!1,character_revived:!1,attack_time_out:0,rank_selected:1}}componentDidMount(){this.setState({monsters:this.props.monsters})}setupRankFight(e){e.setState({processing_rank_battle:!0},()=>{if(this.state.monster_to_fight===null){e.setState({processing_rank_battle:!1});return}new g().setRoute("set-up-rank-fight/"+this.props.character.id+"/"+this.state.monster_to_fight.id).setParameters({rank:this.state.rank_selected}).doAjaxCall("post",s=>{this.setState({is_same_monster:!1},()=>{e.setState({processing_rank_battle:!1,battle_messages:s.data.messages,character_current_health:s.data.health.character_health,character_max_health:s.data.health.max_character_health,monster_current_health:s.data.health.monster_health,monster_max_health:s.data.health.max_monster_health,setting_up_rank_fight:!1,monster_to_fight_id:s.data.monster_id})})},s=>{e.setState({processing_rank_battle:!1}),console.error(s)})})}processRankFight(e,s){e.setState({processing_rank_battle:!0},()=>{if(this.state.monster_to_fight===null){e.setState({processing_rank_battle:!1});return}new g().setRoute("fight-ranked-monster/"+this.props.character.id).setParameters({rank:this.state.rank_selected,monster_id:this.state.monster_to_fight.id,attack_type:s}).doAjaxCall("post",i=>{e.setState({processing_rank_battle:!1,battle_messages:[...e.state.battle_messages,...i.data.messages],character_current_health:i.data.health.character_health,monster_current_health:i.data.health.monster_health})},i=>{console.error(i)})})}setSelectedMonster(e){this.monsterActionManager.setSelectedMonster(e)}resetSameMonster(){this.monsterActionManager.resetSameMonster()}setAttackTimeOut(e){this.monsterActionManager.setAttackTimeOut(e)}resetRevived(){this.monsterActionManager.resetRevived()}setRank(e){this.setState({rank_selected:e.value})}optionsForRanks(){const e=[];for(let s=1;s<=this.props.total_ranks;s++)e.push({label:"Rank "+s,value:s});return e}renderRankSelection(){return t.jsx("div",{className:"mt-2 md:ml-[120px]",children:t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx("div",{className:"cols-start-1 col-span-2",children:t.jsx(B,{onChange:this.setRank.bind(this),options:this.optionsForRanks(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:"Rank "+this.state.rank_selected,value:this.state.rank_selected}]})}),t.jsx("div",{className:"cols-start-3 cols-end-3",children:t.jsxs("a",{href:"/information/ranked-fights",target:"_blank",className:"ml-2 relative top-[5px]",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})})}render(){return t.jsxs("div",{className:"relative",children:[this.props.is_rank_fights?this.renderRankSelection():null,t.jsx(nm,{monsters:this.props.monsters,update_monster_to_fight:this.setSelectedMonster.bind(this),character:this.props.character,close_monster_section:this.props.close_monster_section}),t.jsx(Qt,{can_attack:this.props.character_statuses.can_attack,is_character_dead:this.props.character.is_dead,character_id:this.props.character.id,revive_call_back:()=>{this.setState({character_revived:!0})}}),this.props.children,this.state.monster_to_fight!==null?t.jsx(rm,{set_attack_time_out:this.setAttackTimeOut.bind(this),monster_to_fight:this.state.monster_to_fight,character:this.props.character,is_same_monster:this.state.is_same_monster,reset_same_monster:this.resetSameMonster.bind(this),character_revived:this.state.character_revived,reset_revived:this.resetRevived.bind(this),is_small:this.props.is_small,is_rank_fight:this.props.is_rank_fights,process_rank_fight:this.processRankFight.bind(this),setup_rank_fight:this.setupRankFight.bind(this)}):null]})}}class _r extends c.Component{constructor(e){super(e)}render(){return t.jsx("div",{className:"relative top-[24px]",children:t.jsxs("div",{className:$("grid gap-2",{"md:grid-cols-2":this.props.attack_time_out!==0&&this.props.crafting_time_out!==0}),children:[t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.attack_time_out,time_out_label:"Attack Timeout",update_time_remaining:this.props.update_attack_timer.bind(this)})}),t.jsx("div",{children:t.jsx(De,{time_remaining:this.props.crafting_time_out,time_out_label:"Crafting Timeout",update_time_remaining:this.props.update_crafting_timer.bind(this)})})]})})}}class om{constructor(e){this.component=e}cannotCraft(){const e=this.component.props;return e.crafting_time_out>0||!e.character_status.can_craft||e.character_status.is_dead}getSelectedCraftingOption(){return this.component.state.crafting_type!==null?de.capitalize(this.component.state.crafting_type):""}smallCraftingList(){const e=[{label:"Craft",value:"craft"},{label:"Enchant",value:"enchant"},{label:"Trinketry",value:"trinketry"},{label:"Gem Crafting",value:"gem-crafting"}];return this.component.props.character.is_alchemy_locked||e.splice(2,0,{label:"Alchemy",value:"alchemy"}),this.component.props.character.can_use_work_bench&&(typeof e[2]<"u"?e.splice(3,0,{label:"Workbench",value:"workbench"}):e.splice(2,0,{label:"Workbench",value:"workbench"})),this.component.props.character.can_access_queen&&(typeof e[2]<"u"?e.splice(3,0,{label:"Queen of hearts",value:"queen"}):e.splice(2,0,{label:"Queen of hearts",value:"queen"})),e}setCraftingTypeForSmallerActionsList(e){this.component.setState({crafting_type:e.value})}getSelectedCraftingTypeForSmallerActionsList(){return this.component.state.crafting_type===null?[{label:"Please select type",value:""}]:this.smallCraftingList().filter(i=>i.value===this.component.state.crafting_type)}buildCraftingList(e){const s=[{name:"Craft",icon_class:"ra ra-hammer",on_click:()=>e("craft")},{name:"Enchant",icon_class:"ra ra-burning-embers",on_click:()=>e("enchant")},{name:"Trinketry",icon_class:"ra ra-anvil",on_click:()=>e("trinketry")}];return this.component.props.character.is_alchemy_locked||s.splice(2,0,{name:"Alchemy",icon_class:"ra ra-potion",on_click:()=>e("alchemy")}),this.component.props.character.can_use_work_bench&&(typeof s[2]<"u"?s.splice(3,0,{name:"Workbench",icon_class:"ra ra-brandy-bottle",on_click:()=>e("workbench")}):s.splice(2,0,{name:"Workbench",icon_class:"ra ra-brandy-bottle",on_click:()=>e("workbench")})),this.component.props.character.can_access_queen&&(typeof s[2]<"u"?s.splice(3,0,{name:"Queen of Hearts",icon_class:"ra  ra-hearts",on_click:()=>e("queen")}):s.splice(2,0,{name:"Queen of Hearts",icon_class:"ra ra-hearts",on_click:()=>e("queen")})),s}}const Cs=(a,e)=>{if(a===null)return"";switch(a){case"craft":return"crafting/"+e;case"enchant":return"enchanting/"+e;case"alchemy":return"alchemy/"+e;case"trinketry":return"trinket-crafting/"+e;case"workbench":return"character/"+e+"/inventory/smiths-workbench";default:return""}},Ns=(a,e)=>{if(a===null)return"";switch(a){case"craft":return"craft/"+e;case"enchant":return"enchant/"+e;case"alchemy":return"transmute/"+e;case"trinketry":return"trinket-craft/"+e;case"workbench":return"character/"+e+"/smithy-workbench/apply";default:return""}},lm=a=>["body","shield","leggings","feet","sleeves","helmet","gloves"].includes(a)?"armour":a==="spell-damage"||a==="spell-healing"?"spell":a;class Ps extends c.Component{constructor(e){super(e)}getXpPercentage(){const e=this.props.skill_xp.next_level_xp;return this.props.skill_xp.current_xp/e*100}render(){return t.jsxs("div",{className:"my-2",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{className:"font-medium text-orange-700 dark:text-white text-xs",children:[" ",this.props.skill_xp.skill_name," Skill XP (LV: ",this.props.skill_xp.level,")"]}),t.jsxs("span",{className:"text-xs font-medium text-orange-700 dark:text-white",children:[u(this.props.skill_xp.current_xp),"/",u(this.props.skill_xp.next_level_xp)]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700",children:t.jsx("div",{className:"bg-orange-600 h-1.5 rounded-full",style:{width:this.getXpPercentage()+"%"}})})]})}}class cm extends c.Component{constructor(e){super(e),this.selectableTypes=[{label:"General Weapons",value:"weapon"},{label:"Staves",value:"stave"},{label:"Hammers",value:"hammer"},{label:"Bows",value:"bow"},{label:"Guns",value:"gun"},{label:"Fans",value:"fan"},{label:"Maces",value:"mace"},{label:"Scratch Awls",value:"scratch-awl"},{label:"Armour",value:"armour"},{label:"Rings",value:"ring"},{label:"Spells",value:"spell"}]}defaultCraftingType(){return{label:"Please select type to craft",value:""}}render(){return t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.props.select_type_to_craft.bind(this),options:this.selectableTypes,menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultCraftingType()}),t.jsx("p",{className:"mt-3 text-sm",children:'When it comes to weapons there are general "weapons" that any one can use, then there are specialty weapons: Hammers, Staves, Bows, Guns, Fans, Maces and Scratch Awls for Weapon Crafting. You can craft ANY of these types to gain levels.'})]})}}class ln extends c.Component{constructor(e){super(e)}render(){return t.jsxs(o.Fragment,{children:[t.jsx(Y,{additional_css:"mb-2",button_label:"Craft",on_click:()=>this.props.craft(!1),disabled:this.props.can_craft}),this.props.show_craft_for_npc?t.jsx(da,{additional_css:"lg:ml-2 mb-2",button_label:"Craft for NPC",on_click:()=>this.props.craft(!0),disabled:this.props.can_craft}):null,t.jsx(Y,{button_label:"Change Type",on_click:this.props.change_type,disabled:this.props.can_change_type,additional_css:"lg:ml-2 mb-2"}),t.jsx(ce,{button_label:"Close",on_click:this.props.clear_crafting,additional_css:"lg:ml-2",disabled:this.props.can_close}),t.jsxs("a",{href:"/information/crafting",target:"_blank",className:"relative top-[20px] md:top-[0px] ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})}}class dm extends c.Component{constructor(e){super(e),this.selectableTypes=[{label:"Helmet",value:"helmet"},{label:"Body",value:"body"},{label:"Sleeves",value:"sleeves"},{label:"Gloves",value:"gloves"},{label:"Shields",value:"shield"},{label:"Leggings",value:"leggings"},{label:"Feet",value:"feet"}]}defaultCraftingType(){return{label:"Please select armour type to craft",value:""}}render(){return t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.props.select_armour_type_to_craft.bind(this),options:this.selectableTypes,menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultCraftingType()}),t.jsx("p",{className:"mt-3 text-sm",children:"Selecting any armour type will count towards Armour Crafting skill."})]})}}class cn extends c.Component{constructor(e){super(e)}render(){return t.jsx(B,{onChange:this.props.set_item_to_craft,options:this.props.items,menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.props.default_item})}}class hm extends c.Component{constructor(e){super(e),this.state={selected_item:null,selected_type:null,armour_craft_type:null,loading:!1,craftable_items:[],sorted_armour:[],selected_armour_type:null,skill_xp:{curent_xp:0,next_level_xp:0,skill_name:"Unknown",level:1}}}showCraftForNpc(){return!this.state.selected_type||!this.state.selected_item||!this.props.fame_tasks?!1:this.props.fame_tasks.filter(e=>e.item_id===this.state.selected_item.id).length>0}setItemToCraft(e){const s=this.state.craftable_items.filter(i=>i.id===parseInt(e.value));s.length>0&&this.setState({selected_item:s[0]})}setTypeToCraft(e){this.setState({selected_type:e.value,loading:!0},()=>{if(this.state.selected_type!==null&&this.state.selected_type!==""){const s=Cs("craft",this.props.character_id);new g().setRoute(s).setParameters({crafting_type:this.state.selected_type}).doAjaxCall("get",i=>{this.setState({loading:!1,craftable_items:i.data.items,skill_xp:i.data.xp})},i=>{})}})}changeType(){this.state.sorted_armour.length>0&&this.state.armour_craft_type!==null?this.setState({sorted_armour:[],selected_item:null}):this.state.sorted_armour.length===0&&this.state.armour_craft_type!==null?this.setState({sorted_armour:[],armour_craft_type:null,selected_type:null,selected_item:null,craftable_items:[]}):this.setState({selected_type:null,selected_item:null,craftable_items:[]})}buildItems(){return this.state.sorted_armour.length>0?this.state.sorted_armour.map(e=>({label:e.name+" Gold Cost: "+u(e.cost),value:e.id})):this.state.craftable_items.map(e=>({label:e.name+" Gold Cost: "+u(e.cost),value:e.id}))}defaultItem(){return this.state.selected_item!==null?{label:this.state.selected_item.name+" Gold Cost: "+u(this.state.selected_item.cost),value:this.state.selected_item.id}:{label:"Please select item to craft",value:0}}craft(e){this.setState({loading:!0},()=>{const s=Ns("craft",this.props.character_id);new g().setRoute(s).setParameters({item_to_craft:this.state.selected_item.id,type:lm(this.state.selected_item.type),craft_for_npc:e}).doAjaxCall("post",i=>{const n=JSON.parse(JSON.stringify(this.state.craftable_items));this.setState({loading:!1,craftable_items:i.data.items,skill_xp:i.data.xp},()=>{de.isEqual(n,i.data.items)||(this.updateSortedArmour(),ft("new_items","You have new items to craft. Check the list!"))})},i=>{})})}updateSortedArmour(){if(this.state.armour_craft_type!=null){const e=this.state.craftable_items.filter(s=>s.type===this.state.armour_craft_type);this.setState({sorted_armour:e})}}clearCrafting(){this.props.remove_crafting()}canCraft(){return this.state.loading||this.state.selected_item===null||this.props.cannot_craft}canClose(){return this.state.loading||this.props.cannot_craft}canChangeType(){return this.state.loading}selectedArmourType(e){const s=this.state.craftable_items.filter(i=>i.type===e.value);this.setState({sorted_armour:s,armour_craft_type:e.value})}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsxs("div",{className:"lg:cols-start-1 lg:col-span-2",children:[this.state.selected_type===null?t.jsx(cm,{select_type_to_craft:this.setTypeToCraft.bind(this)}):this.state.selected_type==="armour"?this.state.sorted_armour.length>0?t.jsx(cn,{set_item_to_craft:this.setItemToCraft.bind(this),items:this.buildItems(),default_item:this.defaultItem()}):t.jsx(dm,{select_armour_type_to_craft:this.selectedArmourType.bind(this)}):t.jsx(cn,{set_item_to_craft:this.setItemToCraft.bind(this),items:this.buildItems(),default_item:this.defaultItem()}),this.state.loading?t.jsx(D,{}):null,this.state.craftable_items.length>0?t.jsx(Ps,{skill_xp:this.state.skill_xp}):null]})}),this.props.is_small?t.jsx("div",{className:"mt-3 mb-3 grid text-center",children:t.jsx(ln,{can_craft:this.canCraft(),can_close:this.canClose(),can_change_type:this.canChangeType(),craft:this.craft.bind(this),change_type:this.changeType.bind(this),clear_crafting:this.clearCrafting.bind(this),show_craft_for_npc:this.showCraftForNpc()})}):t.jsx("div",{className:"text-center lg:ml-[-100px] mt-3 mb-3",children:t.jsx(ln,{can_craft:this.canCraft(),can_close:this.canClose(),can_change_type:this.canChangeType(),craft:this.craft.bind(this),change_type:this.changeType.bind(this),clear_crafting:this.clearCrafting.bind(this),show_craft_for_npc:this.showCraftForNpc()})})]})}}class Ls extends c.Component{constructor(e){super(e)}render(){return t.jsx("button",{className:"hover:text-red-500 text-red-700 dark:text-red-500 dark:hover:text-red-400 disabled:text-red-400 dark:disabled:bg-red-400 disabled:line-through focus:outline-none focus-visible:ring-2 focus-visible:ring-red-200 dark:focus-visible:ring-white focus-visible:ring-opacity-75 "+this.props.additional_css,onClick:this.props.on_click,disabled:this.props.disabled,children:this.props.button_label})}}class um extends c.Component{constructor(e){super(e),this.state={loading:!0,selected_item:null,selected_prefix:null,selected_suffix:null,enchantable_items:[],enchantments:[],skill_xp:{current_xp:0,next_level_xp:0,skill_name:"Unknown",level:1}}}componentDidMount(){const e=Cs("enchant",this.props.character_id);new g().setRoute(e).doAjaxCall("get",s=>{this.setState({loading:!1,enchantable_items:s.data.affixes.character_inventory,enchantments:s.data.affixes.affixes,skill_xp:s.data.skill_xp})})}clearCrafting(){this.props.remove_crafting()}enchant(){this.setState({loading:!0},()=>{const e=Ns("enchant",this.props.character_id);new g().setRoute(e).setParameters({slot_id:this.state.selected_item,affix_ids:[this.state.selected_prefix,this.state.selected_suffix]}).doAjaxCall("post",s=>{const i=JSON.parse(JSON.stringify(this.state.enchantments));this.setState({loading:!1,enchantable_items:s.data.affixes.character_inventory,enchantments:s.data.affixes.affixes,skill_xp:s.data.skill_xp},()=>{de.isEqual(i,s.data.affixes.affixes)||ft("new_items","You have new enchantments. Check the list(s)!"),s.data.affixes.character_inventory.length>0&&this.setState({selected_item:s.data.affixes.character_inventory[0].slot_id})})},s=>{})})}setSelectedItem(e){this.setState({selected_item:parseInt(e.value)})}setPrefix(e){this.setState({selected_prefix:parseInt(e.value)})}setSuffix(e){this.setState({selected_suffix:parseInt(e.value)})}renderItemsToEnchantSelection(){return this.state.enchantable_items.map(e=>({label:e.item_name,value:e.slot_id}))}resetPrefixes(){this.setState({selected_prefix:null})}resetSuffixes(){this.setState({selected_suffix:null})}renderEnchantmentOptions(e){return this.state.enchantments.filter(i=>i.type===e).map(i=>({label:i.name+" Cost: "+u(i.cost),value:i.id}))}selectedItemToEnchant(){if(this.state.selected_item!==null){const e=this.state.enchantable_items.filter(s=>s.slot_id===this.state.selected_item);if(e.length>0)return{label:e[0].item_name,value:this.state.selected_item}}return{label:"Please select item.",value:0}}selectedEnchantment(e){const s=this.state["selected_"+e];if(s!==null){const i=this.state.enchantments.filter(n=>n.id===s);if(i.length>0)return{label:i[0].name+" Cost: "+u(i[0].cost),value:s}}return{label:"Please select "+e+" enchantment.",value:0}}cannotCraft(){return this.state.loading||this.state.selected_item===null||this.props.cannot_craft||this.state.selected_prefix===null&&this.state.selected_suffix===null}render(){return t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"mt-2 grid lg:grid-cols-3 gap-2 lg:ml-[120px]",children:[t.jsx("div",{className:"col-start-1 col-span-2",children:t.jsx(B,{onChange:this.setSelectedItem.bind(this),options:this.renderItemsToEnchantSelection(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedItemToEnchant()})}),t.jsxs("div",{className:"col-start-1 col-span-2",children:[t.jsxs("div",{className:"lg:hidden grid grid-cols-3",children:[t.jsx("div",{className:"col-start-1 col-span-2",children:t.jsx(B,{onChange:this.setPrefix.bind(this),options:this.renderEnchantmentOptions("prefix"),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedEnchantment("prefix")})}),t.jsx("div",{className:"cols-start-3 cols-end-3 mt-2 ml-4",children:t.jsx(Ls,{button_label:"Clear",on_click:this.resetPrefixes.bind(this)})})]}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(B,{onChange:this.setPrefix.bind(this),options:this.renderEnchantmentOptions("prefix"),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedEnchantment("prefix")})})]}),t.jsx("div",{className:"hidden lg:block cols-start-3 cols-end-3 mt-2",children:t.jsx(Ls,{button_label:"Clear",on_click:this.resetPrefixes.bind(this)})}),t.jsxs("div",{className:"col-start-1 col-span-2",children:[t.jsxs("div",{className:"lg:hidden grid grid-cols-3",children:[t.jsx("div",{className:"col-start-1 col-span-2",children:t.jsx(B,{onChange:this.setSuffix.bind(this),options:this.renderEnchantmentOptions("suffix"),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedEnchantment("suffix")})}),t.jsx("div",{className:"cols-start-3 cols-end-3 mt-2 ml-4",children:t.jsx(Ls,{button_label:"Clear",on_click:this.resetSuffixes.bind(this)})})]}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(B,{onChange:this.setSuffix.bind(this),options:this.renderEnchantmentOptions("suffix"),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedEnchantment("suffix")})})]}),t.jsx("div",{className:"hidden lg:block cols-start-3 cols-end-3 mt-2",children:t.jsx(Ls,{button_label:"Clear",on_click:this.resetSuffixes.bind(this)})})]}),t.jsxs("div",{className:"m-auto lg:w-1/2 relative lg:left-[-60px]",children:[this.state.loading?t.jsx(D,{}):null,this.state.enchantments.length>0?t.jsx("div",{className:"ml-[25px] lg:ml-0 mb-2 lg:mb-0",children:t.jsx(Ps,{skill_xp:this.state.skill_xp})}):null]}),t.jsxs("div",{className:"text-center md:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Enchant",on_click:this.enchant.bind(this),disabled:this.cannotCraft()}),t.jsx(ce,{button_label:"Close",on_click:this.clearCrafting.bind(this),additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft}),t.jsxs("a",{href:"/information/enchanting",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class mm extends c.Component{constructor(e){super(e),this.state={selected_item:null,loading:!1,craftable_items:[],skill_xp:{curent_xp:0,next_level_xp:0,skill_name:"Unknown",level:1}}}componentDidMount(){const e=Cs("alchemy",this.props.character_id);new g().setRoute(e).doAjaxCall("get",s=>{this.setState({loading:!1,craftable_items:s.data.items,skill_xp:s.data.skill_xp})},s=>{})}setItemToCraft(e){const s=this.state.craftable_items.filter(i=>i.id===parseInt(e.value));s.length>0&&this.setState({selected_item:s[0]})}buildItems(){return this.state.craftable_items.map(e=>({label:e.name+", Gold Dust Cost: "+u(e.gold_dust_cost)+" Shards Cost: "+u(e.shards_cost),value:e.id}))}defaultItem(){if(this.state.selected_item!==null){const e=this.state.selected_item;return{label:e.name+", Gold Dust Cost: "+u(e.gold_dust_cost)+" Shards Cost: "+u(e.shards_cost),value:e.id}}return{label:"Please select item to craft",value:0}}craft(){this.setState({loading:!0},()=>{const e=Ns("alchemy",this.props.character_id);new g().setRoute(e).setParameters({item_to_craft:this.state.selected_item.id}).doAjaxCall("post",s=>{const i=JSON.parse(JSON.stringify(this.state.craftable_items));this.setState({loading:!1,craftable_items:s.data.items,skill_xp:s.data.skill_xp},()=>{de.isEqual(i,s.data.items)||ft("new_items","You have new Alchemy items to craft. Check the list!")})},s=>{})})}clearCrafting(){this.props.remove_crafting()}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:t.jsxs("div",{className:"cols-start-1 col-span-2",children:[t.jsx(B,{onChange:this.setItemToCraft.bind(this),options:this.buildItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultItem()}),this.state.loading?t.jsx(D,{}):null,this.state.craftable_items.length>0?t.jsx(Ps,{skill_xp:this.state.skill_xp}):null]})}),t.jsxs("div",{className:"text-center md:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Transmute",on_click:this.craft.bind(this),disabled:this.state.loading||this.state.selected_item===null||this.props.cannot_craft}),t.jsx(ce,{button_label:"Close",on_click:this.clearCrafting.bind(this),additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft}),t.jsxs("a",{href:"/information/alchemy",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class pm extends c.Component{constructor(e){super(e),this.state={loading:!0,applying_oil:!1,selected_item:null,selected_alchemy_item:null,selected_item_name:null,inventory_items:[],alchemy_items:[],max_holy_stacks:0,applied_holy_stacks:0,error_message:null,cost:0}}componentDidMount(){const e=Cs("workbench",this.props.character_id);new g().setRoute(e).doAjaxCall("get",s=>{this.setState({loading:!1,inventory_items:s.data.items,alchemy_items:s.data.alchemy_items})},s=>{this.setState({loading:!1})})}applyHolyOil(){const e=Ns("workbench",this.props.character_id);this.setState({applying_oil:!0,error_message:null},()=>{new g().setRoute(e).setParameters({item_id:this.state.selected_item,alchemy_item_id:this.state.selected_alchemy_item}).doAjaxCall("post",s=>{this.setState({applying_oil:!1,inventory_items:s.data.items,alchemy_items:s.data.alchemy_items},()=>{const i=this.state.inventory_items.filter(n=>n.item.affix_name===this.state.selected_item_name);i.length>0?this.setState({selected_item:i[0].item.id,max_holy_stacks:i[0].item.holy_stacks,applied_holy_stacks:i[0].item.holy_stacks_applied}):this.setState({applied_holy_stacks:0,max_holy_stacks:0,selected_item:null})})},s=>{this.setState({applying_oil:!1}),s.response&&this.setState({error_message:s.response.data.message})})})}setItem(e){this.setState({selected_item:parseInt(e.value)},()=>{const s=this.state.inventory_items.filter(i=>i.item.id===parseInt(e.value));s.length>0&&this.setState({selected_item_name:s[0].item.affix_name,max_holy_stacks:s[0].item.holy_stacks,applied_holy_stacks:s[0].item.holy_stacks_applied})})}setAlchemyItem(e){const s=this.state.alchemy_items.filter(m=>m.item.id===e.value),i=this.state.inventory_items.filter(m=>m.item.id===this.state.selected_item);if(s.length===0&&i.length===0)return;const n=s[0].item,p=i[0].item.holy_stacks*100*n.holy_level;this.setState({selected_alchemy_item:parseInt(e.value),cost:p})}buildItems(){return this.state.inventory_items.filter(e=>e.item.type!=="alchemy").map(e=>({label:e.item.affix_name,value:e.item.id}))}selectedItem(){if(this.state.selected_item!==null){const e=this.state.inventory_items.filter(s=>s.item.id===this.state.selected_item);if(e.length>0)return{label:e[0].item.affix_name,value:this.state.selected_item}}return{label:"Please Select an Item",value:0}}buildAlchemicalItems(){return this.state.alchemy_items.map(e=>({label:e.item.name,value:e.item.id}))}selectedAlchemyItem(){if(this.state.selected_alchemy_item!==null){const e=this.state.alchemy_items.filter(s=>s.item.id===this.state.selected_alchemy_item);if(e.length>0)return{label:e[0].item.name,value:this.state.selected_alchemy_item}}return{label:"Please Selected an Alchemical Item",value:0}}clearCrafting(){this.props.remove_crafting()}isApplyButtonDisabled(){return this.state.loading||this.state.selected_item===null||this.state.selected_alchemical_item===null||this.props.cannot_craft}render(){return this.state.loading?t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:t.jsx("div",{className:"col-start-1 col-span-2",children:t.jsx(D,{})})}):t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:[t.jsx("div",{className:"col-start-1 col-span-2",children:this.state.inventory_items.length>0?t.jsx(B,{onChange:this.setItem.bind(this),options:this.buildItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedItem()}):t.jsx("p",{className:"mt-2 text-red-400 text-red-500 text-center",children:"No valid items in your inventory to apply oils to."})}),t.jsx("div",{className:"col-start-1 col-span-2",children:this.state.selected_item!==null&&this.state.alchemy_items.length>0?t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setAlchemyItem.bind(this),options:this.buildAlchemicalItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedAlchemyItem()}),this.state.selected_alchemy_item!==null?t.jsx("div",{className:"my-2",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold Dust Cost:"}),t.jsx("dd",{children:u(this.state.cost)}),t.jsx("dt",{children:"Applied Holy Stacks"}),t.jsx("dd",{children:this.state.applied_holy_stacks}),t.jsx("dt",{children:"Max Holy Stacks"}),t.jsx("dd",{children:this.state.max_holy_stacks})]})}):null]}):this.state.selected_item!==null&&this.state.alchemy_items.length===0?t.jsx("p",{className:"mt-2 text-red-400 text-red-500 text-center",children:"No Holy oils to apply. Craft some using alchemy!"}):null})]}),t.jsxs("div",{className:"m-auto w-1/2 md:relative left-[-20px]",children:[this.state.applying_oil?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null]}),t.jsxs("div",{className:"text-center md:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Apply Oil",on_click:this.applyHolyOil.bind(this),disabled:this.isApplyButtonDisabled()}),t.jsx(ce,{button_label:"Remove",on_click:this.clearCrafting.bind(this),additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft}),t.jsxs("a",{href:"/information/holy-items",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class _m extends c.Component{constructor(e){super(e),this.state={selected_item:null,craftable_items:[],skill_xp:{curent_xp:0,next_level_xp:0,skill_name:"Unknown",level:1}}}componentDidMount(){const e=Cs("trinketry",this.props.character_id);new g().setRoute(e).doAjaxCall("get",s=>{this.setState({loading:!1,craftable_items:s.data.items,skill_xp:s.data.skill_xp})},s=>{})}setItemToCraft(e){const s=this.state.craftable_items.filter(i=>i.id===parseInt(e.value));s.length>0&&this.setState({selected_item:s[0]})}buildItems(){return this.state.craftable_items.map(e=>({label:e.name+", Gold Dust Cost: "+u(e.gold_dust_cost)+" Copper Coin Cost: "+u(e.copper_coin_cost),value:e.id}))}defaultItem(){if(this.state.selected_item!==null){const e=this.state.selected_item;return{label:e.name+", Gold Dust Cost: "+u(e.gold_dust_cost)+" Copper Coins Cost: "+u(e.copper_coin_cost),value:e.id}}return{label:"Please select trinket to craft",value:0}}craft(){this.setState({loading:!0},()=>{const e=Ns("trinketry",this.props.character_id);new g().setRoute(e).setParameters({item_to_craft:this.state.selected_item.id}).doAjaxCall("post",s=>{const i=JSON.parse(JSON.stringify(this.state.craftable_items));this.setState({loading:!1,craftable_items:s.data.items,skill_xp:s.data.skill_xp},()=>{de.isEqual(i,s.data.items)||ft("new_items","You have new Trinkets to craft. Check the list!")})},s=>{})})}clearCrafting(){this.props.remove_crafting()}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:t.jsxs("div",{className:"cols-start-1 col-span-2",children:[t.jsx(B,{onChange:this.setItemToCraft.bind(this),options:this.buildItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultItem()}),this.state.loading?t.jsx(D,{}):null,this.state.craftable_items.length>0?t.jsx(Ps,{skill_xp:this.state.skill_xp}):null]})}),t.jsxs("div",{className:"text-center md:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Craft",on_click:this.craft.bind(this),disabled:this.state.loading||this.state.selected_item===null||this.props.cannot_craft}),t.jsx(ce,{button_label:"Close",on_click:this.clearCrafting.bind(this),additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft}),t.jsxs("a",{href:"/information/trinketry",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class gm extends c.Component{constructor(e){super(e),this.state={initial_action:null,buy_option:null,reroll_options:{item_selected:null,reroll_option:null,attribute:null},move_options:{unique_id:null,item_to_move_to_id:null,affix_to_move:null},preforming_action:!1,character_uniques:[],character_non_uniques:[],reroll_cost:{gold_dust_dust:0,shards:0},movement_cost:{gold_dust_dust:0,shards:0},loading:!0,error_message:null},this.queenOfHearts=Echo.private("update-queen-of-hearts-panel-"+this.props.user_id)}componentDidMount(){new g().setRoute("character/"+this.props.character_id+"/inventory/uniques").doAjaxCall("get",e=>{this.setState({loading:!1,character_uniques:e.data.unique_slots,character_non_uniques:e.data.non_unique_slots})},e=>{console.error(e)}),this.queenOfHearts.listen("Game.NpcActions.QueenOfHearts.Events.UpdateQueenOfHeartsPanel",e=>{this.setState({character_uniques:e.panelData.unique_slots,character_non_uniques:e.panelData.non_unique_slots})})}setInitialOption(e){this.setState({initial_action:e.value})}setBuyOption(e){this.setState({buy_option:e.value})}setReRollOption(e){this.setState({reroll_options:{...this.state.reroll_options,reroll_option:e.value}},()=>this.calculateCost())}setItemForReRoll(e){this.setState({reroll_options:{...this.state.reroll_options,item_selected:e.value}})}setAttributeToReRoll(e){this.setState({reroll_options:{...this.state.reroll_options,attribute:e.value}},()=>this.calculateCost())}setSelectedItemToMove(e){this.setState({move_options:{...this.state.move_options,unique_id:e.value}})}setAffixTypeToMove(e){this.setState({move_options:{...this.state.move_options,affix_to_move:e.value}},()=>{this.calculateMovementCost()})}setItemToMove(e){this.setState({move_options:{...this.state.move_options,item_to_move_to_id:e.value}})}initialOptions(){return[{label:"Buy Item",value:"buy-item"},{label:"Re-Roll Item",value:"re-roll-item"},{label:"Move Enchants",value:"move-enchants"}]}buyItemOptions(){return[{label:"10 Billion (Gold Cost) - Basic",value:"basic"},{label:"50 Billion (Gold Cost) - Medium",value:"medium"},{label:"100 Billion (Gold Cost) - Legendary",value:"legendary"}]}getSelectedBuyValue(){const e=this.buyItemOptions().filter(s=>s.value===this.state.buy_option);return e.length>0?{label:e[0].label,value:e[0].value}:{label:"Please select item to purchase",value:null}}reRollOptions(){return[{label:"Prefix",value:"prefix"},{label:"Suffix",value:"suffix"},{label:"Both",value:"all-enchantments"}]}moveEnchantOptions(){let e=this.state.character_uniques.filter(i=>i.id===this.state.move_options.unique_id);if(e.length===0)return[];e=e[0];const s=[];return e.item.item_prefix!==null&&s.push({label:"Prefix",value:"prefix"}),e.item.item_suffix!==null&&s.push({label:"Suffix",value:"suffix"}),e.item.affix_count>1&&s.push({label:"Both",value:"all-enchantments"}),s}getSelectedReRollOption(){const e=this.reRollOptions().filter(s=>s.value===this.state.reroll_options.reroll_option);return e.length>0?{label:e[0].label,value:e[0].value}:{label:"Please select what to re-roll",value:null}}getAffixToMove(){const e=this.moveEnchantOptions().filter(s=>s.value===this.state.move_options.affix_to_move);return e.length>0?{label:e[0].label,value:e[0].value}:{label:"Please select what to move",value:null}}itemsForReRoll(){return this.state.character_uniques.map(e=>({label:e.item.affix_name,value:e.id}))}getSelectedItem(){const e=this.state.character_uniques.filter(s=>s.id===this.state.reroll_options.item_selected);return e.length>0?{label:e[0].item.affix_name,value:e[0].id}:{label:"Please select item to re-roll",value:null}}getAttributesForReRoll(){return[{label:"Base Details",value:"base"},{label:"Core Stats",value:"stats"},{label:"Skill Modifiers",value:"skills"},{label:"Damage Modifiers",value:"damage"},{label:"Resistances",value:"resistances"},{label:"All of it",value:"everything"}]}getSelectedAttributeOption(){const e=this.getAttributesForReRoll().filter(s=>s.value===this.state.reroll_options.attribute);return e.length>0?{label:e[0].label,value:e[0].value}:{label:"Please select what attributes to re-roll",value:null}}getSelectedUnique(){const e=this.state.character_uniques.filter(s=>s.id===this.state.move_options.unique_id);return e.length>0?{label:e[0].item.affix_name,value:e[0].id}:{label:"Please select unique",value:""}}itemsToMoveTo(){return[...this.state.character_uniques,...this.state.character_non_uniques].map(s=>({label:s.item.affix_name,value:s.id})).filter(s=>s.value!==this.state.move_options.unique_id)}getSelectedItemToMove(){const s=[...this.state.character_uniques,...this.state.character_non_uniques].filter(i=>i.id===this.state.move_options.item_to_move_to_id);return s.length>0?{label:s[0].item.affix_name,value:s[0].id}:{label:"Please select item",value:""}}uniquesToMove(){return this.state.character_uniques.map(e=>({label:e.item.affix_name,value:e.id}))}buyItem(){this.setState({preforming_action:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/random-enchant/purchase").setParameters({type:this.state.buy_option}).doAjaxCall("post",e=>{this.setState({preforming_action:!1})},e=>{if(typeof e.response<"u"){this.setState({preforming_action:!1});const s=e.response;this.setState({error_message:s.data.message})}})})}calculateCost(){let e=1e4,s=100;this.state.reroll_options.reroll_option==="all-enchantments"&&(e*=2,s*=2),this.state.reroll_options.attribute==="everything"?(e+=500,s+=250):(e+=100,s+=100),this.setState({reroll_cost:{gold_dust_dust:e,shards:s}})}calculateMovementCost(){let e=0,s=0;if(this.state.move_options.unique_id!==null&&this.state.move_options.affix_to_move!==null){let i=this.state.character_uniques.filter(n=>n.id===this.state.move_options.unique_id);i.length>0&&(i=i[0]),this.state.move_options.affix_to_move==="all-enchantments"?(i.item.item_prefix!==null&&(e+=i.item.item_prefix.cost),i.item.item_prefix!==null&&(e+=i.item.item_suffix.cost)):e+=i.item["item_"+this.state.move_options.affix_to_move].cost}e>0&&(e=e/1e6,s=parseInt(de.ceil(e*.005).toFixed(0))),this.setState({movement_cost:{gold_dust_dust:e,shards:s}})}reRoll(){this.setState({preforming_action:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/random-enchant/reroll").setParameters({selected_slot_id:this.state.reroll_options.item_selected,selected_affix:this.state.reroll_options.reroll_option,selected_reroll_type:this.state.reroll_options.attribute}).doAjaxCall("post",e=>{this.setState({preforming_action:!1,character_uniques:e.data.unique_slots,character_non_uniques:e.data.non_unique_slots})},e=>{if(typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message,preforming_action:!1})}})})}moveAffixes(){this.setState({preforming_action:!0},()=>{new g().setRoute("character/"+this.props.character_id+"/random-enchant/move").setParameters({selected_slot_id:this.state.move_options.unique_id,selected_secondary_slot_id:this.state.move_options.item_to_move_to_id,selected_affix:this.state.move_options.affix_to_move}).doAjaxCall("post",e=>{this.setState({preforming_action:!1,character_uniques:e.data.unique_slots,character_non_uniques:e.data.non_unique_slots,move_options:{unique_id:null,item_to_move_to_id:null,affix_to_move:null}})},e=>{if(typeof e.response<"u"){const s=e.response;this.clearAll(),this.setState({error_message:s.data.message,preforming_action:!1})}})})}clearAll(){this.setState({buy_option:null,initial_action:null,reroll_options:{reroll_option:null,item_selected:null},reroll_cost:{gold_dust:0,shards:0},move_options:{unique_id:null,item_to_move_to_id:null,affix_to_move:null}})}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:t.jsxs("div",{className:"cols-start-1 col-span-2",children:[this.state.loading?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mb-4 mt-2",children:this.state.error_message}):null,this.state.initial_action===null&&!this.state.loading?t.jsx(B,{onChange:this.setInitialOption.bind(this),options:this.initialOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:[{label:"Please select option",value:""}]}):null,this.state.initial_action==="buy-item"?t.jsx(o.Fragment,{children:t.jsx(B,{onChange:this.setBuyOption.bind(this),options:this.buyItemOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedBuyValue()})}):null,this.state.initial_action==="re-roll-item"?t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setItemForReRoll.bind(this),options:this.itemsForReRoll(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedItem()}),this.state.reroll_options.item_selected!==null?t.jsx("div",{className:"mt-2",children:t.jsx(B,{onChange:this.setReRollOption.bind(this),options:this.reRollOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedReRollOption()})}):null,this.state.reroll_options.item_selected!==null&&this.state.reroll_options.reroll_option!==null?t.jsxs("div",{className:"mt-2",children:[t.jsx(B,{onChange:this.setAttributeToReRoll.bind(this),options:this.getAttributesForReRoll(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedAttributeOption()}),this.state.reroll_options.reroll_option!==null?t.jsxs("p",{className:"mt-2 text-orange-600 dark:text-orange-500",children:[t.jsx("strong",{children:"Gold Dust Cost"}),":"," ",u(this.state.reroll_cost.gold_dust_dust),", ",t.jsx("strong",{children:"Shards Cost"}),":"," ",u(this.state.reroll_cost.shards)]}):null]}):null]}):null,this.state.initial_action==="move-enchants"?t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setSelectedItemToMove.bind(this),options:this.uniquesToMove(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedUnique()}),this.state.move_options.unique_id!==null&&this.state.move_options.unique_id!==""?t.jsx("div",{className:"mt-2",children:t.jsx(B,{onChange:this.setAffixTypeToMove.bind(this),options:this.moveEnchantOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getAffixToMove()})}):null,this.state.move_options.affix_to_move!==null&&this.state.move_options.affix_to_move!==""?t.jsx("div",{className:"mt-2",children:t.jsx(B,{onChange:this.setItemToMove.bind(this),options:this.itemsToMoveTo(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedItemToMove()})}):null,this.state.movement_cost.gold_dust!==0&&this.state.movement_cost.shards!==0?t.jsxs("p",{className:"mt-2 text-orange-600 dark:text-orange-500",children:[t.jsx("strong",{children:"Gold Dust Cost"}),":"," ",u(this.state.movement_cost.gold_dust_dust),", ",t.jsx("strong",{children:"Shards Cost"}),":"," ",u(this.state.movement_cost.shards)]}):null]}):null,this.state.preforming_action?t.jsx(D,{}):null]})}),t.jsxs("div",{className:"text-center lg:ml-[-100px] mt-3 mb-3",children:[this.state.initial_action==="buy-item"?t.jsx(Y,{button_label:"Purchase",on_click:this.buyItem.bind(this),disabled:this.state.buy_option===null||this.state.preforming_action}):null,this.state.initial_action==="re-roll-item"?t.jsx(Y,{button_label:"Re roll",on_click:this.reRoll.bind(this),disabled:!(this.state.reroll_options.item_selected!==null&&this.state.reroll_options.reroll_option!==null&&this.state.reroll_options.attribute!==null)||this.state.preforming_action}):null,this.state.initial_action==="move-enchants"?t.jsx(Y,{button_label:"Move Enchants",on_click:this.moveAffixes.bind(this),disabled:!(this.state.move_options.unique_id!==null&&this.state.move_options.item_to_move_to_id!==null&&this.state.move_options.affix_to_move!==null)||this.state.preforming_action}):null,this.state.initial_action!==null?t.jsx(Y,{button_label:"Change Action",on_click:this.clearAll.bind(this),disabled:this.state.preforming_action,additional_css:"ml-2"}):null,t.jsx(ce,{button_label:"Remove Queen",on_click:this.props.remove_crafting,disabled:this.state.preforming_action,additional_css:"ml-2"}),t.jsxs("a",{href:"/information/random-enchants",target:"_blank",className:"hidden lg:block ml-2 mt-4",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsx("div",{className:"text-center mt-4 block lg:hidden",children:t.jsxs("a",{href:"/information/random-enchants",target:"_blank",className:"block lg:hidden ml-2 mt-4",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]})}}class fm extends c.Component{constructor(e){super(e),this.state={tiersForCrafting:[],selectedTier:0,tierCost:{copper_coin_cost:0,shards_cost:0,gold_dust_cost:0},errorMessage:null,loading:!0,isCrafting:!1}}componentDidMount(){new g().setRoute("gem-crafting/craftable-tiers/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({tiersForCrafting:e.data.tiers,skill_xp:e.data.skill_xp,loading:!1})},e=>{console.error(e)})}craft(){if(this.state.selectedTier===0)return this.setState({error_message:"Please select a tier."});this.setState({isCrafting:!0,errorMessage:null},()=>{new g().setRoute("gem-crafting/craft/"+this.props.character_id).setParameters({tier:this.state.selectedTier}).doAjaxCall("post",e=>{this.setState({tiersForCrafting:e.data.tiers,skill_xp:e.data.skill_xp,isCrafting:!1})},e=>{this.setState({isCrafting:!1},()=>{if(typeof e.response<"u"){const s=e.response;this.setState({errorMessage:s.data.message})}})})})}setTierToCraft(e){if(e.value===0){this.setState({selectedTier:0,tierCost:{copper_coin_cost:0,shards_cost:0,gold_dust_cost:0}});return}this.setState({selectedTier:e.value},()=>{const s=this.state.tiersForCrafting[e.value-1],i={copper_coin_cost:s.cost.copper_coins,shards_cost:s.cost.shards,gold_dust_cost:s.cost.gold_dust};this.setState({tierCost:i})})}craftingTiers(){const e=this.state.tiersForCrafting.map((s,i)=>({label:"Gem Tier "+(i+1),value:i+1}));return e.splice(0,0,{label:"Please select tier",value:0}),e}craftingTierSelected(){return this.state.selectedTier===0?{label:"Please Select",value:0}:{label:"Gem Tier "+this.state.selectedTier,value:this.state.selectedTier}}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:this.state.loading?t.jsx(D,{}):t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setTierToCraft.bind(this),options:this.craftingTiers(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.craftingTierSelected()}),this.state.selectedTier!==0?t.jsx("div",{className:"mt-4 mb-2",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold Dust Cost"}),t.jsx("dl",{children:u(this.state.tierCost.gold_dust_cost)}),t.jsx("dt",{children:"Shards Cost"}),t.jsx("dl",{children:u(this.state.tierCost.shards_cost)}),t.jsx("dt",{children:"Copper Coin Cost"}),t.jsx("dl",{children:u(this.state.tierCost.copper_coin_cost)})]})}):null,this.state.isCrafting?t.jsx(D,{}):null,this.state.tiersForCrafting.length>0?t.jsx("div",{className:"my-4",children:t.jsx(Ps,{skill_xp:this.state.skill_xp})}):null]})})}),this.state.errorMessage!==null?t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:t.jsx(z,{children:this.state.errorMessage})})}):null,t.jsxs("div",{className:"text-center lg:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Craft",on_click:this.craft.bind(this),disabled:this.state.loading||this.state.selected_item===null||this.props.cannot_craft||this.state.isCrafting}),t.jsx(ce,{button_label:"Close",on_click:this.props.remove_crafting,additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft||this.state.isCrafting}),t.jsxs("a",{href:"/information/gem-crafting",target:"_blank",className:"relative top-[20px] md:top-[0px] ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class xm extends c.Component{constructor(e){super(e),this.state={selected_item_slot_id:0}}setSelectedItem(e){this.setState({selected_item_slot_id:e.value},()=>{this.props.update_parent(e.value,"item_selected")})}itemOptions(){let e=this.props.items.map(s=>({label:s.name,value:s.slot_id}));return e.unshift({label:"Please select an item",value:0}),e}selectedItem(){let e=this.props.items.filter(s=>s.slot_id===this.state.selected_item_slot_id);return e.length>0?{label:e[0].name,value:e[0].slot_id}:{label:"Please select an an item",value:0}}render(){return t.jsx(o.Fragment,{children:t.jsx(B,{onChange:this.setSelectedItem.bind(this),options:this.itemOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedItem()})})}}class bm extends c.Component{constructor(e){super(e)}doAction(){this.props.do_action("roll-sockets")}closeAction(){this.props.do_action("close-seer-action")}render(){return t.jsxs(o.Fragment,{children:[t.jsx(Y,{button_label:"Roll Sockets",on_click:this.doAction.bind(this),disabled:this.props.is_disabled||this.props.is_loading}),this.props.children,t.jsxs("a",{href:"/information/seer",target:"_blank",className:"relative top-[20px] md:top-[0px] ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})}}class ns{static handleInitialFetch(e){new g().setRoute("visit-seer-camp/"+e.props.character_id).doAjaxCall("get",s=>{e.setState({items:s.data.items,gems:s.data.gems,is_loading:!1})},s=>{console.error(s)})}static manageSocketsOnItem(e,s){new g().setRoute("seer-camp/add-sockets/"+e.props.character_id).setParameters({slot_id:s}).doAjaxCall("post",i=>{e.setState({items:i.data.items,gems:i.data.gems,trading_with_seer:!1,success_message:i.data.message})},i=>{e.setState({trading_with_seer:!1},()=>{if(typeof i.response<"u"){const n=i.response;e.setState({error_message:n.data.message})}})})}static attachGemToItem(e,s,i){new g().setRoute("seer-camp/add-gem/"+e.props.character_id).setParameters({slot_id:s,gem_slot_id:i}).doAjaxCall("post",n=>{e.setState({trading_with_seer:!1},()=>{e.props.update_parent(n.data.message,"success_message"),e.props.update_parent(n.data.items,"items"),e.props.update_parent(n.data.gems,"gems"),e.props.manage_model()})},n=>{e.setState({trading_with_seer:!1},()=>{if(typeof n.response<"u"){const r=n.response;e.setState({error_message:r.data.message})}})})}static replaceGemOnItem(e,s,i,n){new g().setRoute("seer-camp/replace-gem/"+e.props.character_id).setParameters({slot_id:s,gem_slot_id:i,gem_slot_to_replace:n}).doAjaxCall("post",r=>{e.setState({is_replacing:!1},()=>{e.props.update_parent(r.data.message,"success_message"),e.props.update_parent(r.data.items,"items"),e.props.update_parent(r.data.gems,"gems"),e.closeModals()})},r=>{e.setState({is_replacing:!1},()=>{if(typeof r.response<"u"){const l=r.response;e.setState({error_message:l.data.message})}})})}static removeGem(e,s,i){new g().setRoute("seer-camp/remove-gem/"+e.props.character_id).setParameters({slot_id:s,gem_id:i}).doAjaxCall("post",n=>{e.setState({is_removing:!1},()=>{e.props.update_parent(n.data.message,"success_message"),e.props.update_parent(n.data.items,"items"),e.props.update_parent(n.data.gems,"gems"),e.props.update_remomal_data(n.data.removal_data.items,"items"),e.props.update_remomal_data(n.data.removal_data.gems,"gems"),e.props.manage_modal()})},n=>{e.setState({is_removing:!1},()=>{if(typeof n.response<"u"){const r=n.response;e.setState({error_message:r.data.message})}})})}static removeAllGems(e,s){new g().setRoute("seer-camp/remove-all-gems/"+e.props.character_id+"/"+s).doAjaxCall("post",i=>{e.setState({is_removing:!1},()=>{e.props.update_parent(i.data.message,"success_message"),e.props.update_parent(i.data.items,"items"),e.props.update_parent(i.data.gems,"gems"),e.props.update_remomal_data(i.data.removal_data.items,"items"),e.props.update_remomal_data(i.data.removal_data.gems,"gems"),e.props.manage_modal()})},i=>{e.setState({is_removing:!1},()=>{if(typeof i.response<"u"){const n=i.response;e.setState({error_message:n.data.message})}})})}}class ym extends c.Component{constructor(e){super(e)}render(){return t.jsx("div",{className:"mt-4 mb-2",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold Bar Cost:"}),t.jsx("dd",{children:u(this.props.socket_cost)}),t.jsx("dt",{children:"Items Socket Amount:"}),t.jsx("dd",{children:this.props.get_item_info("socket_amount")})]})})}}class jm extends c.Component{constructor(e){super(e)}createItemsOptions(){if(this.props.items.length===0)return[{label:"Please select item",value:0}];const e=this.props.items.filter(s=>s.socket_amount>0).map(s=>({label:s.name,value:s.slot_id}));return e.unshift({label:"Please select item",value:0}),e}createGemOptions(){const e=this.props.gems.map(s=>({label:s.name+" (Amount: "+s.amount+", Tier: "+s.tier+")",value:s.slot_id}));return e.unshift({label:"Please select gem",value:0}),e}setItemToUse(e){this.props.update_parent(e.value,"item_selected")}setGemToUse(e){this.props.update_parent(e.value,"gem_selected")}defaultValueForItems(){const e=this.props.items.filter(s=>s.slot_id===this.props.item_selected);return e.length>0?{label:e[0].name,value:e[0].slot_id}:{label:"Please select item",value:0}}defaultValueForGems(){const e=this.props.gems.filter(s=>s.slot_id===this.props.gem_selected);return e.length>0?{label:e[0].name+" (Amount: "+e[0].amount+", Tier: "+e[0].tier+")",value:e[0].slot_id}:{label:"Please select gem",value:0}}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mb-3",children:t.jsx(B,{onChange:this.setItemToUse.bind(this),options:this.createItemsOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultValueForItems()})}),t.jsx(B,{onChange:this.setGemToUse.bind(this),options:this.createGemOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultValueForGems()})]})}}class vm extends c.Component{constructor(e){super(e)}viewGem(){this.props.do_action("view-gem")}compareGem(){this.props.do_action("compare-gem")}attachGem(){this.props.do_action("attach-gem")}closeAction(){this.props.do_action("close-seer-action")}render(){return t.jsxs(o.Fragment,{children:[t.jsx(Y,{button_label:"Attach Gem",on_click:this.attachGem.bind(this),disabled:this.props.is_disabled||this.props.is_loading,additional_css:"ml-2"}),this.props.children,t.jsxs("a",{href:"/information/seer",target:"_blank",className:"relative top-[20px] md:top-[0px] ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})}}class km extends c.Component{constructor(e){super(e)}canNotAddGemToItem(){return this.props.socket_data.item_sockets===this.props.socket_data.current_used_slots||this.props.action_disabled}render(){return this.props.gem_to_add===null?null:t.jsxs(_e,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2 my-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"my-4 text-lime-600 dark:text-lime-500",children:this.props.gem_to_add.name}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Tier"}),t.jsx("dd",{children:this.props.gem_to_add.tier}),t.jsx("dt",{children:this.props.gem_to_add.primary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(this.props.gem_to_add.primary_atonement_amount*100).toFixed(0),"%"]}),t.jsx("dt",{children:this.props.gem_to_add.secondary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(this.props.gem_to_add.secondary_atonement_amount*100).toFixed(0),"%"]}),t.jsx("dt",{children:this.props.gem_to_add.tertiary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(this.props.gem_to_add.tertiary_atonement_amount*100).toFixed(0),"%"]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"my-4",children:"Item Socket Data"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Item Name:"}),t.jsx("dd",{children:this.props.socket_data.item_name}),t.jsx("dt",{children:"Item Sockets:"}),t.jsx("dd",{children:this.props.socket_data.item_sockets}),t.jsx("dt",{children:"Sockets In use"}),t.jsx("dd",{children:this.props.socket_data.current_used_slots})]})]})]}),t.jsx("div",{className:"my-4",children:t.jsx(Y,{button_label:"Socket gem",on_click:()=>this.props.do_action("attach-gem"),disabled:this.canNotAddGemToItem()})})]})}}class wm extends c.Component{constructor(e){super(e)}render(){return t.jsxs("dl",{children:[t.jsx("dt",{children:"Tier"}),t.jsx("dd",{children:this.props.gem.tier}),t.jsx("dt",{children:this.props.gem.primary_atonement_type}),t.jsxs("dl",{className:$({"text-green-700 dark:text-green-500":this.props.gem.primary_atonement_amount>0,"text-red-700 dark:text-red-500":this.props.gem.primary_atonement_amount<0}),children:[this.props.gem.primary_atonement_amount>0?"+":"",(this.props.gem.primary_atonement_amount*100).toFixed(2),"%"]}),t.jsx("dt",{children:this.props.gem.secondary_atonement_type}),t.jsxs("dl",{className:$({"text-green-700 dark:text-green-500":this.props.gem.secondary_atonement_amount>0,"text-red-700 dark:text-red-500":this.props.gem.secondary_atonement_amount<0}),children:[this.props.gem.secondary_atonement_amount>0?"+":"",(this.props.gem.secondary_atonement_amount*100).toFixed(2),"%"]}),t.jsx("dt",{children:this.props.gem.tertiary_atonement_type}),t.jsxs("dl",{className:$({"text-green-700 dark:text-green-500":this.props.gem.tertiary_atonement_amount>0,"text-red-700 dark:text-red-500":this.props.gem.tertiary_atonement_amount<0}),children:[this.props.gem.tertiary_atonement_amount>0?"+":"",(this.props.gem.tertiary_atonement_amount*100).toFixed(2),"%"]})]})}}class gr extends c.Component{constructor(e){super(e)}renderDifference(e,s){return Object.keys(e).map(n=>{const r=this.findElementAtonement(s,n);return t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:n}),t.jsxs("dd",{className:$({"text-green-700 dark:text-green-500":e[n]>r,"text-red-700 dark:text-red-500":e[n]<r}),children:[(e[n]*100).toFixed(0),"%"]})]})})}findElementAtonement(e,s){const n=Object.keys(e).filter(r=>r===s);return n.length>0?e[n[0]]:0}render(){return t.jsxs(o.Fragment,{children:[t.jsx("h3",{className:"my-4",children:"Adjusted Atonement"}),t.jsx("dl",{children:this.renderDifference(this.props.atonement_for_comparison,this.props.original_atonement.atonements)})]})}}class Sm extends c.Component{constructor(e){super(e),this.state={is_replacing:!1,error_message:null}}closeModals(){this.props.manage_modal(),this.props.manage_parent_modal()}findAtonementsForReplacing(){return this.props.if_replacing.find(e=>e.name_to_replace===this.props.gem_name)}replaceGem(){this.setState({is_replacing:!0,error_message:null},()=>{const e=this.findAtonementsForReplacing();typeof e<"u"&&ns.replaceGemOnItem(this,this.props.selected_item,this.props.selected_gem,e.gem_id)})}render(){const e=this.findAtonementsForReplacing();return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:"Replacement details",primary_button_disabled:this.state.is_replacing,secondary_actions:{secondary_button_disabled:this.state.is_replacing,secondary_button_label:"Replace The Gem",handle_action:this.replaceGem.bind(this)},children:[t.jsx("p",{className:"my-4",children:"Below are your Atonement Adjustment Details. Each item can be atoned to a specific element."}),t.jsx("p",{className:"my-4",children:"Upon doing so, taking into account your overall gear and the items atonements, your element damage/resistances could change."}),this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,t.jsxs("div",{className:"my-4 grid lg:grid-cols-2 gap-2",children:[t.jsxs(_e,{children:[t.jsxs("h3",{className:"my-4",children:["With: ",t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:this.props.gem_name})]}),t.jsx(za,{title:"Original Atonement",original_atonement:this.props.original_atonement}),t.jsxs("div",{className:"my-4",children:[t.jsx("h4",{className:"mb-2",children:"Original Elemental Atonement"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Elemental Atonement"}),t.jsx("dd",{children:this.props.original_atonement.elemental_damage.name}),t.jsx("dt",{children:"Elemental Damage"}),t.jsxs("dd",{children:[(this.props.original_atonement.elemental_damage.amount*100).toFixed(2),"%"]})]})]})]}),t.jsx(_e,{children:typeof e<"u"?t.jsxs(o.Fragment,{children:[t.jsxs("h3",{className:"my-4",children:["When: ",t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:e.name_to_replace})," is replaced"]}),t.jsx(gr,{atonement_for_comparison:e.data.atonements,original_atonement:this.props.original_atonement}),t.jsxs("div",{className:"my-4",children:[t.jsx("h4",{className:"mb-2",children:"Adjusted Elemental Atonement"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Elemental Atonement"}),t.jsx("dd",{children:e.data.elemental_damage.name}),t.jsx("dt",{children:"Elemental Damage"}),t.jsxs("dd",{children:[(e.data.elemental_damage.amount*100).toFixed(2),"%"]})]})]})]}):t.jsx(z,{children:"Error with finding the atonement to replace."})})]}),this.state.is_replacing?t.jsx(D,{}):null]})}}class Cm extends c.Component{constructor(e){super(e),this.state={show_replacement_comparison:!1,gem_name_to_replace:null}}replaceGem(e){this.setState({show_replacement_comparison:!0,gem_name_to_replace:e})}displayCards(){return this.props.when_replacing.map(e=>{const s=this.props.gems_you_have.filter(i=>i.id===e.gem_you_have_id)[0];return t.jsxs(_e,{additionalClasses:"my-4",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"my-4",children:[t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:e.name})," (When Replacing)"]}),t.jsx(wm,{gem:e})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"my-4",children:[t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:s.name})," (Currently Socketed)"]}),t.jsx(o.Fragment,{children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Tier"}),t.jsx("dd",{children:s.tier}),t.jsx("dt",{children:s.primary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(s.primary_atonement_amount*100).toFixed(0),"%"]}),t.jsx("dt",{children:s.secondary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(s.secondary_atonement_amount*100).toFixed(0),"%"]}),t.jsx("dt",{children:s.tertiary_atonement_name+" Atonement: "}),t.jsxs("dd",{children:[(s.tertiary_atonement_amount*100).toFixed(0),"%"]})]})})]})]}),t.jsx("div",{className:"my-4",children:t.jsx(Y,{button_label:"Replace",on_click:()=>{this.replaceGem(s.name)},disabled:this.props.action_disabled})})]})})}render(){return t.jsxs("div",{children:[t.jsx("p",{className:"my-4",children:"Each card below will detail the comparison of replacing the gem at that slot. The cost is the same as attaching a gem to an empty slot."}),t.jsx("div",{className:$({"max-h-[350px] overflow-y-scroll":this.props.when_replacing.length>2}),children:this.displayCards()}),this.props.when_replacing.length<=0?t.jsx("div",{className:"text-center text-orange-t00 dark:text-orange-500 my-4",children:t.jsx("p",{children:"No gems socketed. Anything is better then nothing."})}):null,this.state.show_replacement_comparison&&this.state.gem_name_to_replace!==null?t.jsx(Sm,{is_open:!0,manage_modal:()=>{this.setState({show_replacement_comparison:!1,gem_name_to_replace:null})},trading_with_seer:!1,original_atonement:this.props.original_atonement,if_replacing:this.props.if_replacing,gem_name:this.state.gem_name_to_replace,update_parent:this.props.update_parent,selected_gem:this.props.selected_gem,selected_item:this.props.selected_item,manage_parent_modal:this.props.manage_parent_modal,character_id:this.props.character_id}):null]})}}class Nm extends c.Component{constructor(e){super(e),this.state={loading:!0,gem_to_attach:null,when_replacing:[],has_gems_on_item:!1,attached_gems:[],if_replacing_atonements:[],original_atonement:[],socket_data:{},tabs:[{key:"add-gem",name:"Add Gem"},{key:"replace_gem",name:"Replace Gem"}],trading_with_seer:!1,error_message:null}}componentDidMount(){new g().setRoute("gem-comparison/"+this.props.character_id).setParameters({slot_id:this.props.selected_item,gem_slot_id:this.props.selected_gem}).doAjaxCall("get",e=>{this.setState({loading:!1,attached_gems:e.data.attached_gems,gem_to_attach:e.data.gem_to_attach,when_replacing:e.data.when_replacing,has_gems_on_item:e.data.has_gem_on_item,socket_data:e.data.socket_data,if_replacing_atonements:e.data.if_replacing_atonements,original_atonement:e.data.original_atonement})},e=>{console.error(e)})}doAction(e){e==="attach-gem"&&this.setState({trading_with_seer:!0,error_message:null},()=>{ns.attachGemToItem(this,this.props.selected_item,this.props.selected_gem)})}render(){return t.jsx(ee,{is_open:this.props.is_open,handle_close:this.props.manage_model,title:"Seer Socketing Table",primary_button_disabled:this.state.trading_with_seer,children:this.state.loading?t.jsx(D,{}):t.jsxs(o.Fragment,{children:[t.jsx(Ce,{additional_css:"my-4",children:t.jsx("span",{className:"text-[18px]",children:t.jsxs("strong",{children:["The cost for Attaching or replacing is: ",u(this.props.cost)," Gold Bars."]})})}),this.state.trading_with_seer?t.jsx("div",{className:"my-4",children:t.jsx(D,{})}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):null,t.jsxs(Be,{tabs:this.state.tabs,disabled:!1,children:[t.jsx(H,{children:t.jsx(km,{gem_to_add:this.state.gem_to_attach,do_action:this.doAction.bind(this),action_disabled:this.state.trading_with_seer,socket_data:this.state.socket_data})},"add-gem"),t.jsx(H,{children:t.jsx(Cm,{when_replacing:this.state.when_replacing,gems_you_have:this.state.attached_gems,action_disabled:this.state.trading_with_seer,original_atonement:this.state.original_atonement,if_replacing:this.state.if_replacing_atonements,update_parent:this.props.update_parent,selected_gem:this.props.selected_gem,selected_item:this.props.selected_item,manage_parent_modal:this.props.manage_model,character_id:this.props.character_id})},"replace-gem")]})]})})}}class Pm extends c.Component{constructor(e){super(e),this.state={is_removing:!1,error_message:null}}findGemNameToRemove(e){const s=this.props.gems.find(i=>i.gem_id===e);return typeof s<"u"?s:null}removeGem(e){this.setState({is_removing:!0,error_message:null},()=>{ns.removeGem(this,this.props.selected_item,e)})}removeAllGems(){this.setState({is_removing:!0,error_message:null},()=>{ns.removeAllGems(this,this.props.selected_item)})}renderOutGemComparison(){return this.props.comparison_data.map(e=>{var n;const s=e.comparisons.atonements,i=e.comparisons.elemental_damage;return t.jsxs(_e,{additionalClasses:"my-4",children:[t.jsxs("h3",{className:"my-4",children:["When removing: ",t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:(n=this.findGemNameToRemove(e.gem_id_to_remove))==null?void 0:n.gem_name})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx(za,{original_atonement:this.props.original_atonement,title:"Original Atonement"}),t.jsxs("div",{className:"my-4",children:[t.jsx("h4",{className:"my-2",children:"Original Elemental Atonement"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Elemental Atonement"}),t.jsx("dd",{children:this.props.original_atonement.elemental_damage.name}),t.jsx("dt",{children:"Elemental Damage"}),t.jsxs("dd",{children:[(this.props.original_atonement.elemental_damage.amount*100).toFixed(2),"%"]})]})]})]}),t.jsxs("div",{children:[t.jsx(gr,{atonement_for_comparison:s,original_atonement:this.props.original_atonement}),t.jsxs("div",{className:"my-4",children:[t.jsx("h4",{className:"my-2",children:"Adjusted Elemental Atonement"}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Elemental Atonement"}),t.jsx("dd",{children:i.name}),t.jsx("dt",{children:"Elemental Damage"}),t.jsxs("dd",{children:[(i.amount*100).toFixed(2),"%"]})]})]})]})]}),t.jsx("div",{className:"my-4",children:t.jsx(Y,{button_label:"Remove Gem",on_click:()=>{this.removeGem(e.gem_id_to_remove)}})})]})})}render(){return t.jsxs(ee,{is_open:this.props.is_open,handle_close:this.props.manage_modal,title:"Remove Gem(s) on: "+this.props.item_name,primary_button_disabled:!1,secondary_actions:{secondary_button_label:"Remove All Gems",secondary_button_disabled:!1,handle_action:this.removeAllGems.bind(this)},children:[t.jsx(Ce,{children:t.jsx("strong",{children:"Removing gems costs 10 Gold bars per gem."})}),t.jsx("p",{className:"my-4",children:"Below is the original atonement of the item as well as the adjusted changes after removing each gem. You may of course choose to remove all gems, at the cost of 10 Gold Bars x The number of gems attached."}),t.jsx("div",{className:"max-h-[350px] overflow-y-scroll mb-4",children:this.renderOutGemComparison()}),this.state.is_removing?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{children:this.state.error_message}):null]})}}class Tm extends c.Component{constructor(e){super(e),this.state={fetching_data:!0,removing_gem:!1,selected_item:0,items:[],gems:[],selected_gem_data:null}}componentDidMount(){new g().setRoute("seer-camp/gems-to-remove/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({items:e.data.items,gems:e.data.gems,fetching_data:!1})})}selectedItems(e){if(e.value<=0)return;const s=this.state.gems.find(i=>i.slot_id===e.value);typeof s>"u"||this.setState({selected_item:e.value,selected_gem_data:s})}updateRemoveGemState(e,s){this.setState(i=>({...i,[s]:e}))}itemsToSelect(){const e=this.state.items.map(s=>({label:s.name,value:s.slot_id}));return e.unshift({label:"Please select item",value:0}),e}selectedItem(){if(this.state.selected_item===0)return{label:"Please select item",value:0};const e=this.state.items.find(s=>s.slot_id===this.state.selected_item);return typeof e>"u"?{label:"Please select item",value:0}:{label:e.name,value:e.slot_id}}getItemName(){const e=this.state.items.find(s=>s.slot_id===this.state.selected_item);return typeof e<"u"?e.name:null}render(){return this.state.fetching_data?t.jsx(D,{}):this.state.selected_gem_data===null?t.jsx(B,{onChange:this.selectedItems.bind(this),options:this.itemsToSelect(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedItem()}):t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.selectedItems.bind(this),options:this.itemsToSelect(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedItem()}),this.state.selected_item!==0?t.jsx(Pm,{comparison_data:this.state.selected_gem_data.comparison.atonement_changes,original_atonement:this.state.selected_gem_data.comparison.original_atonement,gems:this.state.selected_gem_data.gems,character_id:this.props.character_id,is_open:!0,item_name:this.getItemName(),selected_item:this.state.selected_item,update_parent:this.props.update_parent,update_remomal_data:this.updateRemoveGemState.bind(this),manage_modal:()=>this.setState({selected_item:0,selected_gem_data:null})}):null]})}}class Am extends c.Component{constructor(e){super(e),this.state={items:[],gems:[],seer_actions:[{label:"Please Select",value:"base"},{label:"Create/ReRoll Sockets",value:"manage-sockets"},{label:"Attach Gems",value:"attach-gem"},{label:"Remove Gem",value:"remove-gem"}],socket_cost:2e3,attach_gem:500,remove_gem:10,item_selected:0,gem_selected:0,is_loading:!0,trading_with_seer:!1,error_message:null,success_message:null,selected_seer_action:null,manage_gems_on_item:!1,manage_remove_gem:!1}}componentDidMount(){ns.handleInitialFetch(this)}doAction(e){e==="close-seer-action"&&this.setState({item_selected:0,gem_selected:0,error_message:null,success_message:null,selected_seer_action:null}),e==="roll-sockets"&&this.setState({error_message:null,success_message:null,trading_with_seer:!0},()=>{ns.manageSocketsOnItem(this,this.state.item_selected)}),e==="attach-gem"&&this.setState({manage_gems_on_item:!0}),e==="remove-gem"&&this.setState({manage_remove_gem:!0})}isManageSocketsDisabled(){return this.state.selected_seer_action===null||this.state.item_selected===0}isAddGemsDisabled(){return this.state.selected_seer_action==null||this.state.item_selected===0||this.state.gem_selected===0}isLoading(){return this.state.trading_with_seer}setSeerAction(e){if(e.value==="base"){this.setState({selected_seer_action:null});return}this.setState({selected_seer_action:e.value})}seerActions(){return this.state.seer_actions}seerAction(){return this.state.selected_seer_action===null?{label:"Please select action",value:"base"}:this.state.seer_actions.filter(e=>e.value===this.state.selected_seer_action)[0]}updateParent(e,s){this.setState(i=>({...i,[s]:e}))}getItemInfo(e){const s=this.state.items.filter(i=>i.slot_id===this.state.item_selected);if(s.length>0){const i=s[0][e];return i===null?0:i}return null}buildGemDialogueTitle(e){let s=this.state.gems.filter(i=>i.slot_id===e);if(s.length>0){const i=s[0];return t.jsx("span",{className:"text-lime-600 dark:text-lime-500",children:i.name})}return null}render(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:this.state.is_loading?t.jsx(D,{}):t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.setSeerAction.bind(this),options:this.seerActions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.seerAction()}),this.state.selected_seer_action==="manage-sockets"?t.jsx("div",{className:"mt-3 mb-2",children:t.jsx(xm,{items:this.state.items,update_parent:this.updateParent.bind(this)})}):null,this.state.selected_seer_action==="attach-gem"?t.jsx("div",{className:"mt-3 mb-2",children:t.jsx(jm,{items:this.state.items,gems:this.state.gems,update_parent:this.updateParent.bind(this),item_selected:this.state.item_selected,gem_selected:this.state.gem_selected})}):null,this.state.selected_seer_action==="remove-gem"?t.jsx("div",{className:"mt-3 mb-2",children:t.jsx(Tm,{character_id:this.props.character_id,update_parent:this.updateParent.bind(this)})}):null,this.state.item_selected!==0&&this.state.selected_seer_action==="manage-sockets"?t.jsx(ym,{socket_cost:this.state.socket_cost,get_item_info:this.getItemInfo.bind(this)}):null,this.state.trading_with_seer?t.jsx(D,{}):null,this.state.error_message!==null?t.jsx(z,{additional_css:"mt-4 mb-4",children:this.state.error_message}):null,this.state.success_message!==null?t.jsx(je,{additional_css:"mt-4 mb-4",children:this.state.success_message}):null]})})}),t.jsx("div",{children:t.jsxs("div",{className:"text-center lg:ml-[-100px] mt-3 mb-3",children:[this.state.selected_seer_action==="manage-sockets"?t.jsx(o.Fragment,{children:t.jsx(bm,{do_action:this.doAction.bind(this),is_disabled:this.isManageSocketsDisabled(),is_loading:this.state.trading_with_seer,children:t.jsx(ce,{button_label:"Leave Seer Camp",on_click:this.props.leave_seer_camp,additional_css:"ml-2",disabled:this.state.trading_with_seer})})}):null,this.state.selected_seer_action==="attach-gem"?t.jsx(o.Fragment,{children:t.jsx(vm,{do_action:this.doAction.bind(this),is_disabled:this.isAddGemsDisabled(),is_loading:this.state.trading_with_seer,children:t.jsx(ce,{button_label:"Leave Seer Camp",on_click:this.props.leave_seer_camp,additional_css:"ml-2",disabled:this.state.trading_with_seer})})}):null,this.state.selected_seer_action===null||this.state.selected_seer_action==="remove-gem"?t.jsx(ce,{button_label:"Leave Seer Camp",on_click:this.props.leave_seer_camp,additional_css:"ml-2",disabled:this.state.is_loading}):null]})}),this.state.manage_gems_on_item?t.jsx(Nm,{character_id:this.props.character_id,selected_item:this.state.item_selected,selected_gem:this.state.gem_selected,cost:this.state.attach_gem,manage_model:()=>this.setState({manage_gems_on_item:!1}),update_parent:this.updateParent.bind(this),is_open:!0}):null]})}}class Rm extends c.Component{constructor(e){super(e),this.state={loading:!0,transferring:!1,item_to_transfer_from:null,item_to_transfer_to:null,inventory:[],error_message:null,success_message:null},this.ajax=dt().fetch(g)}componentDidMount(){this.ajax.setRoute("character/"+this.props.character_id+"/labyrinth-oracle").doAjaxCall("get",e=>{this.setState({loading:!1,inventory:e.data.inventory})},e=>{this.setState({loading:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.message})})}transferItems(){return this.state.inventory.map(e=>({label:e.affix_name,value:`${e.id}`}))}setSelectedTransferFrom(e){e.value!==""&&this.setState({item_to_transfer_from:e.value})}setSelectedTransferTo(e){e.value!==""&&this.setState({item_to_transfer_to:e.value})}selectedTransfer(e){const s=e==="item_to_transfer_from";if(this.state[e]===null)return{label:"Please select transfer "+(s?"from":"to"),value:""};const i=this.state.inventory.filter(n=>n.id===parseInt(this.state[e]));return i.length===0?{label:"Please select transfer "+(s?"from":"to"),value:""}:{label:i[0].affix_name,value:i[0].id}}transfer(){this.setState({success_message:null,error_message:null,transferring:!0},()=>{this.ajax.setRoute("character/"+this.props.character_id+"/transfer-attributes").setParameters({item_id_from:this.state.item_to_transfer_from,item_id_to:this.state.item_to_transfer_to}).doAjaxCall("post",e=>{this.setState({transferring:!1,inventory:e.data.inventory,success_message:e.data.message,item_to_transfer_from:null,item_to_transfer_to:null})},e=>{this.setState({transferring:!1}),typeof e.response<"u"&&this.setState({error_message:e.response.data.message})})})}render(){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:this.state.loading&&this.state.inventory.length===0?t.jsx(D,{}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"my-2",children:t.jsx(B,{onChange:this.setSelectedTransferFrom.bind(this),options:this.transferItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedTransfer("item_to_transfer_from")})}),t.jsx(B,{onChange:this.setSelectedTransferTo.bind(this),options:this.transferItems(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.selectedTransfer("item_to_transfer_to")}),this.state.item_to_transfer_from!==null&&this.state.item_to_transfer_to!==null?t.jsx("div",{className:"mt-4 mb-2",children:t.jsxs("dl",{children:[t.jsx("dt",{children:"Gold Cost"}),t.jsx("dl",{children:u(1e8)}),t.jsx("dt",{children:"Shards Cost"}),t.jsx("dl",{children:u(5e3)}),t.jsx("dt",{children:"Gold Dust Cost"}),t.jsx("dl",{children:u(2500)})]})}):null,this.state.transferring?t.jsx(D,{}):null]})})}),this.state.error_message!==null?t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:t.jsx(z,{children:this.state.error_message})})}):null,this.state.success_message!==null?t.jsx("div",{className:"mt-2 lg:grid lg:grid-cols-3 lg:gap-2 lg:ml-[120px]",children:t.jsx("div",{className:"lg:cols-start-1 lg:col-span-2",children:t.jsx(je,{children:this.state.success_message})})}):null,t.jsxs("div",{className:"text-center lg:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Transfer",on_click:this.transfer.bind(this),disabled:this.state.loading||this.state.item_to_transfer_from===null||this.state.item_to_transfer_to===null||this.props.cannot_craft||this.state.is_transfering}),t.jsx(ce,{button_label:"Close",on_click:this.props.remove_crafting,additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft||this.state.is_transfering}),t.jsxs("a",{href:"/information/labyrinth-oracle",target:"_blank",className:"relative top-[20px] md:top-[0px] ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})}}class Ua extends c.Component{constructor(e){super(e)}renderCraftingSection(){switch(this.props.type){case"craft":return t.jsx(hm,{is_small:this.props.is_small,character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft,fame_tasks:this.props.fame_tasks});case"enchant":return t.jsx(um,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});case"alchemy":return t.jsx(mm,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});case"workbench":return t.jsx(pm,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});case"trinketry":return t.jsx(_m,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});case"queen":return t.jsx(gm,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft,user_id:this.props.user_id});case"gem-crafting":return t.jsx(fm,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});case"seer-camp":return t.jsx(Am,{character_id:this.props.character_id,leave_seer_camp:this.props.remove_crafting});case"labyrinth-oracle":return t.jsx(Rm,{character_id:this.props.character_id,remove_crafting:this.props.remove_crafting,cannot_craft:this.props.cannot_craft});default:return null}}render(){return this.renderCraftingSection()}}class qm extends c.Component{constructor(e){super(e),this.craftingSectionManager=new om(this),this.state={crafting_type:null}}removeCraftingType(){this.setState({crafting_type:null})}setCraftingType(e){this.setState({crafting_type:e})}render(){return t.jsx("div",{className:"relative",children:this.state.crafting_type!==null?t.jsx(Ua,{remove_crafting:this.removeCraftingType.bind(this),type:this.state.crafting_type,character_id:this.props.character.id,user_id:this.props.character.user_id,cannot_craft:this.craftingSectionManager.cannotCraft(),is_small:!0}):t.jsxs("div",{className:"text-center my-4",children:[t.jsx(B,{onChange:e=>this.craftingSectionManager.setCraftingTypeForSmallerActionsList(e),options:this.craftingSectionManager.smallCraftingList(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.craftingSectionManager.getSelectedCraftingTypeForSmallerActionsList()}),t.jsx(ce,{button_label:"Close",on_click:this.props.close_crafting_section,additional_css:"my-4 w-full"})]})})}}class fr extends c.Component{constructor(e){super(e),this.state={monster_selected:null,time_selected:null,attack_type:null,move_down_monster_list:null,error_message:null}}setMonsterToFight(e){const s=this.props.monsters.filter(i=>i.id===parseInt(e.value));s.length>0?this.setState({monster_selected:s[0]}):this.setState({monster_selected:null})}monsterOptions(){let e=this.props.monsters.map(s=>({label:s.name,value:s.id}));return e.unshift({label:"Please Select",value:0}),e}defaultSelectedMonster(){return this.state.monster_selected!==null?{label:this.state.monster_selected.name,value:this.state.monster_selected.id}:{label:"Please Select Monster",value:""}}setLengthOfTime(e){this.setState({time_selected:e.value!==""?e.value:null})}setAttackType(e){this.setState({attack_type:e.value!==""?e.value:null})}setMoveDownList(e){this.setState({move_down_monster_list:e.value!==""?e.value:null})}timeOptions(){return[{label:"1 Hour(s)",value:1},{label:"2 Hour(s)",value:2},{label:"4 Hour(s)",value:4},{label:"6 Hour(s)",value:6},{label:"8 Hour(s)",value:8}]}attackTypes(){return[{label:"Attack",value:"attack"},{label:"Cast",value:"cast"},{label:"Attack and Cast",value:"attack_and_cast"},{label:"Cast and Attack",value:"cast_and_attack"},{label:"Defend",value:"defend"}]}moveDownTheListEvery(){return[{label:"5 Levels",value:5},{label:"10 Levels",value:10},{label:"20 Levels",value:20}]}defaultSelectedTime(){return this.state.time_selected!=null?[{label:this.state.time_selected+" Hour(s)",value:this.state.time_selected}]:[{label:"Please select length of time",value:""}]}defaultAttackType(){return this.state.attack_type!==null?{label:de.startCase(this.state.attack_type),value:this.state.attack_type}:{label:"Please select attack type",value:""}}defaultMoveDownList(){return this.state.move_down_monster_list!==null?{label:this.state.move_down_monster_list+" levels",value:this.state.move_down_monster_list}:{label:"Please select when to move down the list (optional)",value:""}}startExploration(){this.setState({loading:!0,error_message:null},()=>{new g().setRoute("exploration/"+this.props.character.id+"/start").setParameters({auto_attack_length:this.state.time_selected,move_down_the_list_every:this.state.move_down_monster_list,selected_monster_id:this.state.monster_selected.id,attack_type:this.state.attack_type}).doAjaxCall("post",e=>{this.setState({loading:!1})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})})}stopExploration(){this.setState({loading:!0,error_message:null},()=>{new g().setRoute("exploration/"+this.props.character.id+"/stop").doAjaxCall("post",e=>{this.setState({loading:!1})},e=>{})})}render(){return t.jsx(o.Fragment,{children:this.props.character.is_automation_running?t.jsxs(o.Fragment,{children:[t.jsxs("div",{className:"mb-4 lg:ml-[120px] text-center lg:text-left",children:["Automation is running. You can cancel it below. ",t.jsxs("a",{href:"/information/automation",target:"_blank",children:["See Exploration Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," for more details."]}),this.state.loading?t.jsx(D,{}):null,t.jsxs("div",{className:"text-center",children:[t.jsx(ce,{button_label:"Stop Exploration",on_click:this.stopExploration.bind(this),disabled:this.state.loading,additional_css:"mr-2 mb-4"}),t.jsx(Y,{button_label:"Close Exploration",on_click:this.props.manage_exploration,disabled:this.state.loading})]})]}):t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"mt-2 grid lg:grid-cols-3 gap-2 lg:ml-[120px]",children:t.jsxs("div",{className:"cols-start-1 col-span-2",children:[t.jsx("div",{className:"mb-3",children:t.jsx(B,{onChange:this.setMonsterToFight.bind(this),options:this.monsterOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultSelectedMonster()})}),t.jsx("div",{className:"mb-3",children:t.jsx(B,{onChange:this.setLengthOfTime.bind(this),options:this.timeOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultSelectedTime()})}),t.jsx("div",{className:"mb-3",children:t.jsx(B,{onChange:this.setMoveDownList.bind(this),options:this.moveDownTheListEvery(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultMoveDownList()})}),t.jsx("div",{children:t.jsx(B,{onChange:this.setAttackType.bind(this),options:this.attackTypes(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultAttackType()})})]})}),t.jsxs("div",{className:"lg:text-center lg:ml-[-100px] mt-3 mb-3",children:[t.jsx(Y,{button_label:"Explore",on_click:this.startExploration.bind(this),disabled:this.state.monster_selected===null||this.state.time_selected===null||this.state.attack_type===null||this.state.loading||this.props.character.is_dead||!this.props.character.can_attack,additional_css:"mr-2 mb-4"}),t.jsx(ce,{button_label:"Close",on_click:this.props.manage_exploration,disabled:this.state.loading}),this.state.loading?t.jsx("div",{className:"w-1/2 ml-auto mr-auto",children:t.jsx(D,{})}):null,this.state.error_message!==null?t.jsx("div",{className:"w-1/2 ml-auto mr-auto mt-4",children:t.jsx(z,{children:this.state.error_message})}):null,t.jsx("div",{className:"relative top-[24px] italic",children:t.jsxs("p",{children:["For more help please the ",t.jsxs("a",{href:"/information/exploration",target:"_blank",children:["Exploration ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," help docs."]})})]})]})})}}class Dm extends c.Component{constructor(e){super(e)}render(){return t.jsx(o.Fragment,{children:t.jsx(fr,{character:this.props.character,manage_exploration:this.props.close_exploration_section,monsters:this.props.monsters})})}}class xr extends c.Component{constructor(e){super(e),this.state={loading:!1,attack_type:null}}attackTypes(){return[{label:"Attack",value:"attack"},{label:"Cast",value:"cast"},{label:"Attack and Cast",value:"attack_and_cast"},{label:"Cast and Attack",value:"cast_and_attack"},{label:"Defend",value:"defend"}]}setAttackType(e){this.setState({attack_type:e.value!==""?e.value:null})}defaultAttackType(){return this.state.attack_type!==null?{label:de.startCase(this.state.attack_type),value:this.state.attack_type}:{label:"Please select attack type",value:""}}joinPvp(){this.setState({loading:!0},()=>{new g().setRoute("join-monthly-pvp/"+this.props.character_id).setParameters({attack_type:this.state.attack_type}).doAjaxCall("post",e=>{this.setState({loading:!1},()=>{this.props.manage_section()})},e=>{})})}render(){return t.jsx("div",{className:"mt-2 md:ml-[120px]",children:t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2",children:t.jsxs("div",{className:"md:cols-start-1 md:col-span-2",children:[t.jsxs("p",{className:"mb-4",children:["Here you can choose to join in the monthly PVP event. It is suggested you read this",t.jsxs("a",{href:"/information/monthly-pvp-event",target:"_blank",className:"ml-2",children:["Help Document ",t.jsx("i",{className:"fas fa-external-link-alt"})]})," before continuing."]}),t.jsx("div",{children:t.jsx(B,{onChange:this.setAttackType.bind(this),options:this.attackTypes(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultAttackType()})}),this.state.loading?t.jsx(D,{}):null,t.jsx(Y,{button_label:"Join Tonight's Event!",on_click:this.joinPvp.bind(this),additional_css:"mt-4",disabled:this.state.attack_type===null}),t.jsx(ce,{button_label:"Close Section",on_click:this.props.manage_section,additional_css:"mt-4 md:mt-0 md:mt-4 ml-4"})]})})})}}class br extends c.Component{constructor(e){super(e),this.state={character_id:0,defender_id:0,show_attack_section:!1,preforming_action:!1,attacker_max_health:0,attacker_health:0,defender_max_health:0,defender_health:0,battle_messages:[],error_message:null,defender_atonement:"N/A",attacker_atonement:"N/A"}}componentDidMount(){this.props.duel_data!==null&&this.setState({character_id:this.props.duel_data.attacker_id,attacker_max_health:this.props.duel_data.health_object.attacker_max_health,attacker_health:this.props.duel_data.health_object.attacker_health,defender_max_health:this.props.duel_data.health_object.defender_max_health,defender_health:this.props.duel_data.health_object.defender_health,defender_id:this.props.duel_data.defender_id,battle_messages:this.props.duel_data.messages,defender_atonement:this.props.duel_data.defender_atonement,attacker_atonement:this.props.duel_data.attacker_atonement},()=>{this.props.reset_duel_data()})}componentDidUpdate(){this.props.duel_data!==null&&this.setState({character_id:this.props.duel_data.attacker_id,attacker_max_health:this.props.duel_data.health_object.attacker_max_health,attacker_health:this.props.duel_data.health_object.attacker_health,defender_max_health:this.props.duel_data.health_object.defender_max_health,defender_health:this.props.duel_data.health_object.defender_health,defender_id:this.props.duel_data.defender_id,battle_messages:this.props.duel_data.messages,defender_atonement:this.props.duel_data.defender_atonement,attacker_atonement:this.props.duel_data.attacker_atonement},()=>{this.props.reset_duel_data()})}buildCharacters(){const e=this.props.character;return this.props.characters.filter(i=>i.id!==e.id).map(i=>({label:i.name,value:i.id}))}setCharacterToFight(e){this.setState({character_id:e.value!==""?e.value:0})}defaultCharacter(){const e=this.props.characters.filter(s=>s.id===this.state.character_id);return e.length>0?{label:e[0].name,value:e[0].id}:{label:"Please select target",value:""}}defenderName(){const e=this.props.characters.filter(s=>s.id===this.state.defender_id);return e.length===0?"Error...":e[0].name}fight(){this.setState({preforming_action:!0,error_message:null},()=>{new g().setRoute("attack-player/get-health/"+this.props.character.id).setParameters({defender_id:this.state.character_id}).doAjaxCall("get",e=>{this.setState({attacker_max_health:e.data.attacker_max_health,attacker_health:e.data.attacker_health,defender_max_health:e.data.defender_max_health,defender_health:e.data.defender_health,character_id:e.data.attacker_id,defender_id:e.data.defender_id,preforming_action:!1,attacker_atonement:e.data.attacker_atonement,defender_atonement:e.data.defender_atonement})})})}attackHidden(){return this.state.attacker_max_health===0||this.state.defender_max_health===0||this.props.characters.length===0}attack(e){this.setState({preforming_action:!0,error_message:null},()=>{new g().setRoute("attack-player/"+this.props.character.id).setParameters({defender_id:this.state.defender_id,attack_type:e}).doAjaxCall("post",s=>{this.setState({preforming_action:!1})},s=>{if(typeof s.response<"u"){const i=s.response.data;this.setState({error_message:i.message,preforming_action:!1})}})})}revive(){this.setState({preforming_action:!0},()=>{new g().setRoute("pvp/revive/"+this.props.character.id).doAjaxCall("post",e=>{this.setState({preforming_action:!1})},e=>{})})}render(){return t.jsxs("div",{className:"mt-2 md:ml-[120px]",children:[this.state.error_message!==null?t.jsx(z,{children:this.state.error_message}):null,t.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[t.jsx("div",{className:"cols-start-1 col-span-2",children:t.jsx(B,{onChange:this.setCharacterToFight.bind(this),options:this.buildCharacters(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultCharacter()})}),t.jsx("div",{className:"cols-start-3 cols-end-3",children:t.jsx(Y,{button_label:"Attack",on_click:this.fight.bind(this),disabled:this.props.character.is_automation_running||this.props.character.is_dead||this.state.character_id===0})})]}),this.props.characters.length===0?t.jsx("p",{className:"mt-4 text-sm text-center text-red-700 dark:text-red-500 w-2/3",children:"No one left to fight child. Best be on your way. Click: Leave Fight."}):null,t.jsxs("div",{className:"md:ml-[-160px]",children:[t.jsxs("div",{className:$("mt-4 mb-4 text-xs text-center",{hidden:this.attackHidden()}),children:[t.jsx(Xe,{additional_css:"btn-attack",icon_class:"ra ra-sword",on_click:()=>this.attack("attack"),disabled:this.props.character.is_dead}),t.jsx(Xe,{additional_css:"btn-cast",icon_class:"ra ra-burning-book",on_click:()=>this.attack("cast"),disabled:this.props.character.is_dead}),t.jsx(Xe,{additional_css:"btn-cast-attack",icon_class:"ra ra-lightning-sword",on_click:()=>this.attack("cast_and_attack"),disabled:this.props.character.is_dead}),t.jsx(Xe,{additional_css:"btn-attack-cast",icon_class:"ra ra-lightning-sword",on_click:()=>this.attack("attack_and_cast"),disabled:this.props.character.is_dead}),t.jsx(Xe,{additional_css:"btn-defend",icon_class:"ra ra-round-shield",on_click:()=>this.attack("defend"),disabled:this.props.character.is_dead}),t.jsxs("a",{href:"/information/combat",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsxs("div",{className:$("mt-1 text-xs text-center ml-[-50px]",{hidden:this.attackHidden()}),children:[t.jsx("span",{className:"w-10 mr-4 ml-4",children:"Atk"}),t.jsx("span",{className:"w-10 ml-6",children:"Cast"}),t.jsx("span",{className:"w-10 ml-4",children:"Cast & Atk"}),t.jsx("span",{className:"w-10 ml-2",children:"Atk & Cast"}),t.jsx("span",{className:"w-10 ml-2",children:"Defend"})]}),this.state.defender_max_health>0&&this.props.characters.length>0?t.jsxs("div",{className:$("mb-4 max-w-md m-auto",{"mt-4":this.attackHidden()}),children:[t.jsx(is,{is_enemy:!0,name:this.defenderName(),current_health:this.state.defender_health,max_health:this.state.defender_max_health}),t.jsx(is,{is_enemy:!1,name:this.props.character.name,current_health:this.state.attacker_health,max_health:this.state.attacker_max_health}),t.jsxs("div",{className:"my-2",children:[t.jsxs("p",{className:"text-red-500 dark:text-red-400 text-sm",children:[this.defenderName()," Elemental Atonement: ",this.state.defender_atonement]}),t.jsxs("p",{className:"text-green-700 dark:text-green-400 text-sm",children:["Your Elemental Atonement: ",this.state.attacker_atonement]})]})]}):null,this.state.preforming_action?t.jsx("div",{className:"w-1/2 ml-auto mr-auto",children:t.jsx(D,{})}):null,t.jsx("div",{className:"italic text-center my-4",children:t.jsx(_a,{is_small:this.props.is_small,battle_messages:this.state.battle_messages})}),t.jsxs("div",{className:"text-center",children:[t.jsx(ce,{button_label:"Leave Fight",on_click:this.props.manage_pvp,additional_css:"mr-4",disabled:this.props.character.is_dead}),this.props.character.is_dead?t.jsx(Y,{button_label:"Revive",on_click:this.revive.bind(this),disabled:!this.props.character.can_attack}):null]})]})]})}}class Em extends c.Component{constructor(e){super(e)}render(){return t.jsxs("div",{className:"relative",children:[t.jsx("button",{type:"button",onClick:this.props.close_map_section,className:"text-red-600 dark:text-red-500 absolute right-[-20px] top-[-20px]",children:t.jsx("i",{className:"fas fa-times-circle"})}),t.jsx(ps,{user_id:this.props.character.user_id,character_id:this.props.character.id,view_port:this.props.view_port,currencies:this.props.character_currencies,is_dead:this.props.character.is_dead,is_automaton_running:this.props.character.is_automation_running,automation_completed_at:this.props.character.automation_completed_at,show_celestial_fight_button:this.props.update_celestial,set_character_position:this.props.update_character_position,update_character_quests_plane:this.props.update_plane_quests,disable_bottom_timer:!0,can_engage_celestial:this.props.character.can_engage_celestials,can_engage_celestials_again_at:this.props.character.can_engage_celestials_again_at,map_data:this.props.map_data,set_map_data:this.props.set_map_data})]})}}class yr extends c.Component{constructor(e){super(e)}attackButtonDisabled(){return this.props.monster_health<=0||this.props.character_health<=0||this.props.is_dead||!this.props.can_attack||this.props.monster_id===0}render(){return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:$("mt-4 mb-4 text-xs text-center",{hidden:this.attackButtonDisabled()}),children:[t.jsx(Xe,{additional_css:"btn-attack",icon_class:"ra ra-sword",on_click:()=>this.props.attack("attack"),disabled:this.attackButtonDisabled()||this.props.preforming_action}),t.jsx(Xe,{additional_css:"btn-cast",icon_class:"ra ra-burning-book",on_click:()=>this.props.attack("cast"),disabled:this.attackButtonDisabled()||this.props.preforming_action}),t.jsx(Xe,{additional_css:"btn-cast-attack",icon_class:"ra ra-lightning-sword",on_click:()=>this.props.attack("cast_and_attack"),disabled:this.attackButtonDisabled()||this.props.preforming_action}),t.jsx(Xe,{additional_css:"btn-attack-cast",icon_class:"ra ra-lightning-sword",on_click:()=>this.props.attack("attack_and_cast"),disabled:this.attackButtonDisabled()||this.props.preforming_action}),t.jsx(Xe,{additional_css:"btn-defend",icon_class:"ra ra-round-shield",on_click:()=>this.props.attack("defend"),disabled:this.attackButtonDisabled()||this.props.preforming_action}),t.jsxs("a",{href:"/information/combat",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]}),t.jsxs("div",{className:$("mt-1 text-xs text-center ml-[-50px]",{hidden:this.attackButtonDisabled()}),children:[t.jsx("span",{className:"w-10 mr-4 ml-4",children:"Atk"}),t.jsx("span",{className:"w-10 ml-6",children:"Cast"}),t.jsx("span",{className:"w-10 ml-4",children:"Cast & Atk"}),t.jsx("span",{className:"w-10 ml-2",children:"Atk & Cast"}),t.jsx("span",{className:"w-10 ml-2",children:"Defend"})]}),this.props.monster_max_health>0?t.jsxs("div",{className:$("mb-4 max-w-md m-auto",{"mt-4":this.attackButtonDisabled()}),children:[t.jsx(is,{is_enemy:!0,name:this.props.monster_name,current_health:Math.floor(this.props.monster_health),max_health:Math.floor(this.props.monster_max_health)}),t.jsx(is,{is_enemy:!1,name:this.props.character_name,current_health:Math.floor(this.props.character_health),max_health:Math.floor(this.props.character_max_health)})]}):null,this.props.preforming_action?t.jsx("div",{className:"w-1/2 ml-auto mr-auto",children:t.jsx(D,{})}):null,t.jsx("div",{className:"italic text-center mb-4",children:this.props.children}),t.jsxs("div",{className:"text-center",children:[typeof this.props.manage_server_fight<"u"?t.jsx(ce,{button_label:"Leave Fight",on_click:this.props.manage_server_fight,additional_css:"mr-4",disabled:this.props.is_dead}):null,this.props.is_dead?t.jsx(Y,{button_label:"Revive",on_click:this.props.revive.bind(this),disabled:!this.props.can_attack}):null]})]})}}class jr extends c.Component{constructor(e){super(e),this.state={monster_health:0,character_health:0,monster_max_health:0,character_max_health:0,monster_name:"",battle_messages:[],loading:!0,preforming_action:!1},this.celestialFight=Echo.join("celestial-fight-changes")}componentDidMount(){new g().setRoute("celestial-fight/"+this.props.character.id+"/"+this.props.celestial_id).doAjaxCall("get",e=>{this.setState({monster_health:e.data.fight.monster.current_health,character_health:e.data.fight.character.current_health,monster_max_health:e.data.fight.monster.max_health,character_max_health:e.data.fight.character.max_health,monster_name:e.data.fight.monster_name,loading:!1})},e=>{console.error(e)}),this.celestialFight.listen("Game.Battle.Events.UpdateCelestialFight",e=>{this.props.update_celestial(0),this.setState({monster_health:e.data.celestial_fight_over?0:e.data.monster_current_health,battle_messages:[e.data.who_killed]})})}attackButtonDisabled(){return this.state.monster_health<=0||this.state.character_health<=0||this.props.character.is_dead||!this.props.character.can_attack||this.props.celestial_id===0}attack(e){this.setState({preforming_action:!0},()=>{new g().setRoute("attack-celestial/"+this.props.character.id+"/"+this.props.celestial_id).setParameters({attack_type:e}).doAjaxCall("post",s=>{this.setState({preforming_action:!1,battle_messages:s.data.logs,character_health:s.data.health.current_character_health,monster_health:s.data.health.current_monster_health})},s=>{console.error(s)})})}revive(){this.setState({preforming_action:!0},()=>{new g().setRoute("celestial-revive/"+this.props.character.id).doAjaxCall("post",e=>{this.setState({monster_health:e.data.fight.monster.current_health,character_health:e.data.fight.character.current_health,monster_max_health:e.data.fight.monster.max_health,character_max_health:e.data.fight.character.max_health,preforming_action:!1})},e=>{console.error(e)})})}render(){return this.state.loading?t.jsx(Fe,{}):t.jsx(yr,{monster_health:this.state.monster_health,character_health:this.state.character_health,monster_max_health:this.state.monster_max_health,character_max_health:this.state.character_max_health,monster_name:this.state.monster_name,preforming_action:this.state.preforming_action,character_name:this.props.character.name,is_dead:this.props.character.is_dead,can_attack:this.props.character.can_attack,monster_id:this.props.celestial_id,attack:this.attack.bind(this),manage_server_fight:this.props.manage_celestial_fight,revive:this.revive.bind(this),children:t.jsx(_a,{is_small:this.props.is_small,battle_messages:this.state.battle_messages})})}}class Ha extends c.Component{constructor(e){super(e),this.state={fetching:!0,loading:!1,item_selected:null,error_message:"",items:[],gold_dust_cost:0,gold_cost:0,copper_coin_cost:0,shards_cost:0}}componentDidMount(){new g().setRoute("specialty-shop/"+this.props.character_id).setParameters({type:this.props.type}).doAjaxCall("get",e=>{this.setState({fetching:!1,items:e.data.items})},e=>{if(this.setState({fetching:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})}closeSection(){this.props.type==="Hell Forged"&&this.props.close_hell_forged(),this.props.type==="Purgatory Chains"&&this.props.close_purgatory_chains()}setItemToBuy(e){let s=this.state.items.filter(i=>i.id===e.value);s.length!==0&&(s=s[0],this.setState({item_selected:s.id,gold_dust_cost:s.gold_dust_cost!==null?s.gold_dust_cost:0,gold_cost:s.cost!==null?s.cost:0,copper_coin_cost:s.copper_coin_cost!==null?s.copper_coin_cost:0,shards_cost:s.shards_cost!==null?s.shards_cost:0}))}getItemsToSelect(){return this.state.items.map(e=>({label:e.name+" ("+e.type+")",value:e.id}))}defaultValue(){if(this.state.item_selected!==null){let e=this.state.items.filter(s=>s.id===this.state.item_selected);if(e.length!==0)return e=e[0],{label:e.name+" ("+e.type+")",value:e.id}}return{label:"Please select",value:0}}purchase(){this.setState({loading:!0,error_message:""},()=>{new g().setRoute("specialty-shop/purchase/"+this.props.character_id).setParameters({type:this.props.type,item_id:this.state.item_selected}).doAjaxCall("post",e=>{this.setState({loading:!1})},e=>{if(this.setState({loading:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})})}renderCost(){const e=[];return this.state.gold_cost!==0&&e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Cost"}),t.jsx("dd",{children:u(this.state.gold_cost)})]})),this.state.shards_cost!==0&&e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Shards Cost"}),t.jsx("dd",{children:u(this.state.shards_cost)})]})),this.state.gold_dust_cost!==0&&e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Gold Dust Cost"}),t.jsx("dd",{children:u(this.state.gold_dust_cost)})]})),this.state.copper_coin_cost!==0&&e.push(t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Copper Coin Cost"}),t.jsx("dd",{children:u(this.state.copper_coin_cost)})]})),e}render(){return t.jsx("div",{className:"mt-2 grid md:grid-cols-3 gap-2 md:ml-[120px]",children:t.jsx("div",{className:"cols-start-1 col-span-2",children:this.state.fetching?t.jsx(D,{}):t.jsx(o.Fragment,{children:t.jsxs("div",{children:[t.jsx(B,{onChange:this.setItemToBuy.bind(this),options:this.getItemsToSelect(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.defaultValue()}),this.state.error_message!==""?t.jsx(z,{additional_css:"my-3",children:this.state.error_message}):null,this.state.item_selected!==null?t.jsx("dl",{className:"my-3",children:this.renderCost()}):null,this.state.loading?t.jsx(D,{}):null,t.jsxs("div",{className:"text-center md:ml-[-100px] my-3",children:[t.jsx(Y,{button_label:"Purchase Item",on_click:this.purchase.bind(this),disabled:this.state.loading||this.state.item_selected===null||this.props.is_dead}),t.jsx(ce,{button_label:"Close",on_click:this.closeSection.bind(this),additional_css:"ml-2",disabled:this.state.loading||this.props.cannot_craft}),t.jsxs("a",{href:"/information/gear-progression",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})]})]})})})})}}class Im extends c.Component{constructor(e){super(e)}render(){return t.jsx(Ha,{type:this.props.show_hell_forged_section?"Hell Forged":"Purgatory Chains",character_id:this.props.character.id,close_hell_forged:this.props.manage_hell_forged_shop.bind(this),close_purgatory_chains:this.props.manage_purgatory_chain_shop.bind(this)})}}const Xt=(a,e)=>{const s=e[a];return t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("i",{className:s.icon+" text-7xl",style:{color:s.color}}),t.jsx("p",{className:"text-lg mt-2",children:s.title})]})};class Mm extends c.Component{constructor(e){super(e)}renderIcons(e){const s=this.props.icons[e];return t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("i",{className:s.icon+" text-7xl",style:{color:s.color}}),t.jsx("p",{className:"text-lg mt-2",children:s.title})]})}render(){return t.jsxs("div",{className:$("max-w-[450px] m-auto lg:mr-auto",{"ml-[150px]":!this.props.is_small}),children:[t.jsx("div",{className:"max-h-[150px] overflow-hidden mt-4",children:t.jsxs("div",{className:"grid grid-cols-3",children:[t.jsx("div",{children:Xt(this.props.spinning_indexes[0],this.props.icons)}),t.jsx("div",{children:Xt(this.props.spinning_indexes[1],this.props.icons)}),t.jsx("div",{children:Xt(this.props.spinning_indexes[2],this.props.icons)})]})}),t.jsx("div",{className:"text-center",children:t.jsx(da,{button_label:"Spin",on_click:this.props.spin_action,disabled:!0})})]})}}class Fm extends c.Component{constructor(e){super(e)}render(){return t.jsx("div",{className:"max-h-[150px] overflow-hidden mt-4",children:t.jsxs("div",{className:"grid grid-cols-3",children:[t.jsx("div",{children:Xt(this.props.roll.length>0?this.props.roll[0]:0,this.props.icons)}),t.jsx("div",{children:Xt(this.props.roll.length>0?this.props.roll[1]:0,this.props.icons)}),t.jsx("div",{children:Xt(this.props.roll.length>0?this.props.roll[2]:0,this.props.icons)})]})})}}class Om extends c.Component{constructor(e){super(e)}render(){if(this.props.success_message!==null)return t.jsx("div",{className:"mb-4 italic text-center text-green-700 dark:text-green-500 text-lg",children:this.props.success_message})}}class Lm extends c.Component{constructor(e){super(e)}render(){if(this.props.error_message!==null)return t.jsx("div",{className:"mb-4 italic text-center text-red-700 dark:text-red-500 text-lg",children:this.props.error_message})}}class vr extends c.Component{constructor(e){super(e),this.state={loading:!0,icons:[],spinning:!1,spinningIndexes:[],roll:[],roll_message:null,error_message:null,timeoutFor:0,cost:1e6},this.gamblingTimeOut=Echo.private("slot-timeout-"+this.props.character.user_id)}componentDidMount(){new g().setRoute("character/gambler").doAjaxCall("get",e=>{this.setState({loading:!1,icons:e.data.icons})},e=>{console.error(e)}),this.gamblingTimeOut.listen("Game.Gambler.Events.GamblerSlotTimeOut",e=>{this.setState({timeoutFor:e.timeoutFor})})}spin(){if(parseFloat(this.props.character.gold.replace(/,/g,""))<this.state.cost){this.setState({roll_message:null,error_message:"You do not have the required gold to take a spin child."});return}this.setState({spinning:!0,roll_message:null,error_message:null},()=>{this.spinning(),setTimeout(()=>{this.processRoll()},1e3)})}spinning(){if(this.state.spinning){const e=this.state.icons.length-1;let s=0;const i=this;for(;s<100;)(function(n){setTimeout(function(){i.setState({spinningIndexes:[de.random(0,e),de.random(0,e),de.random(0,e)]})},n*300)})(s++)}}processRoll(){new g().setRoute("character/gambler/"+this.props.character.id+"/slot-machine").doAjaxCall("post",e=>{this.setState({roll:e.data.rolls,roll_message:e.data.message,spinning:!1})},e=>{if(this.setState({spinning:!1}),typeof e.response<"u"){const s=e.response;this.setState({error_message:s.data.message})}})}renderIcons(e){const s=this.state.icons[e];return t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("i",{className:s.icon+" text-7xl",style:{color:s.color}}),t.jsx("p",{className:"text-lg mt-2",children:s.title})]})}render(){return this.state.loading?t.jsx(D,{}):this.state.spinning&&this.state.spinningIndexes.length>0?t.jsx(Mm,{icons:this.state.icons,is_small:this.props.is_small,spinning_indexes:this.state.spinningIndexes,spin_action:this.spin.bind(this)}):t.jsxs("div",{className:$("max-w-[450px] m-auto lg:mr-auto",{"ml-[150px]":!this.props.is_small}),children:[t.jsx(Fm,{roll:this.state.roll,icons:this.state.icons}),t.jsx(Om,{success_message:this.state.roll_message}),t.jsx(Lm,{error_message:this.state.error_message}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex justify-center mb-2",children:[t.jsx(da,{button_label:"Spin",on_click:this.spin.bind(this),disabled:!this.props.character.can_spin}),t.jsx(ce,{button_label:"close",on_click:this.props.close_gambling_section,additional_css:"ml-2"})]}),t.jsx("p",{className:"text-sm mb-4",children:"Cost Per Spin: 1,000,000 Gold"}),t.jsx("p",{children:t.jsxs("a",{href:"/information/slots",target:"_blank",className:"ml-2",children:["Help ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),this.state.timeoutFor!==0?t.jsx("div",{className:"ml-auto mr-auto",children:t.jsx(De,{time_remaining:this.state.timeoutFor,time_out_label:"Spin TimeOut"})}):null]})]})}}class $m extends c.Component{constructor(e){super(e),this.state={is_attacking:!1,battle_messages:[],character_current_health:0,monster_current_health:0,attacks_left:5,error_message:""},this.attacksLeftUpdate=Echo.private("update-raid-attacks-left-"+this.props.user_id)}componentDidMount(){this.setState({character_current_health:this.props.character_current_health,monster_current_health:this.props.monster_current_health,attacks_left:this.props.initial_attacks_left}),this.attacksLeftUpdate.listen("Game.Battle.Events.UpdateRaidAttacksLeft",e=>{this.setState({attacks_left:e.attacksLeft})})}componentDidUpdate(){this.state.character_current_health!==this.props.character_current_health&&this.props.revived&&this.setState({character_current_health:this.props.character_current_health},()=>{this.props.reset_revived()}),this.props.update_raid_fight&&this.setState({character_current_health:this.props.character_current_health,monster_current_health:this.props.monster_current_health,attacks_left:this.props.initial_attacks_left,battle_messages:[]},()=>{this.props.reset_update()})}attack(e){this.setState({is_attacking:!0},()=>{new g().setRoute("raid-fight/"+this.props.character_id+"/"+this.props.monster_id).setParameters({attack_type:e}).doAjaxCall("post",s=>{this.setState({character_current_health:s.data.character_current_health,monster_current_health:s.data.monster_current_health,battle_messages:s.data.messages,is_attacking:!1})},s=>{console.error(s);let i=null;typeof s.response<"u"&&(i=s.response),this.setState({is_attacking:!1,error_message:i!==null?i.data.message:"Unknown error occured!"})})})}canAttack(){return this.props.is_raid_boss&&this.state.attacks_left<=0&&!this.props.is_dead?!1:this.props.can_attack}render(){return t.jsxs(o.Fragment,{children:[this.props.is_raid_boss?t.jsx("div",{className:"flex items-center justify-center",children:t.jsxs("div",{className:"mt-4 text-center font-bold",children:["Attacks Left: ",this.state.attacks_left,"/5 ",this.state.attacks_left<=0?"[You can attack again tomorrow]":""]})}):null,this.state.error_message!==""?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"mt-4 text-center text-red-700 dark:text-red-500",children:this.state.error_message})}):null,t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:" mt-4 mb-4 text-center",children:t.jsx(ei,{button_label:"Elemental Atonement Info",on_click:this.props.manage_elemental_atonement_modal})})}),t.jsx(yr,{monster_health:this.state.monster_current_health,character_health:this.state.character_current_health,monster_max_health:this.props.monster_max_health,character_max_health:this.props.character_max_health,monster_name:this.props.monster_name,preforming_action:this.state.is_attacking,character_name:this.props.character_name,is_dead:this.props.is_dead,can_attack:this.canAttack(),monster_id:this.props.monster_id,attack:this.attack.bind(this),revive:this.props.revive,children:t.jsx(_a,{is_small:this.props.is_small,battle_messages:this.state.battle_messages})})]})}}class kr extends c.Component{constructor(e){super(e),this.state={is_loading:!1,is_fighting:!1,character_current_health:0,character_max_health:0,monster_current_health:0,monster_max_health:0,selected_raid_monster_id:0,monster_name:"",revived:!1,raid_boss_attacks_left:0,is_raid_boss:!1,open_elemental_atonement:!1,elemental_atonement:{},highest_element:null,update_raid_fight:!1},this.updateRaidBosshealth=Echo.join("update-raid-boss-health-attack"),this.characterRevive=Echo.private("character-revive-"+this.props.user_id)}componentDidMount(){this.updateRaidBosshealth.listen("Game.Battle.Events.UpdateRaidBossHealth",e=>{e.raidBossId===this.state.selected_raid_monster_id&&this.setState({monster_current_health:e.raidBossHealth})}),this.characterRevive.listen("Game.Battle.Events.CharacterRevive",e=>{this.setState({character_current_health:e.health})})}componentDidUpdate(e){this.props.raid_monsters.length!==e.raid_monsters.length&&this.state.monster_name!==""&&this.setState({monster_name:""})}buildRaidMonsterSelection(){if(this.props.raid_monsters.length===0)return[{label:"",value:0}];const e=this.props.raid_monsters.map(s=>({label:s.name,value:s.id}));return e.unshift({label:"Please select raid monster",value:0}),e}defaultMonsterSelected(){if(this.state.selected_raid_monster_id===0)return[{label:"Please select raid monster",value:0}];const e=this.props.raid_monsters.find(s=>{if(s.id===this.state.selected_raid_monster_id)return s});return typeof e>"u"?[{label:"Please select raid monster",value:0}]:[{label:e.name,value:e.id}]}setMonsterToFight(e){e.value!==0&&this.setState({selected_raid_monster_id:e.value})}initializeMonsterForAttack(){if(this.state.selected_raid_monster_id===0)return;const e=this;this.setState({is_loading:!0},()=>{new g().setRoute("raid-fight-participation/"+this.props.character_id+"/"+this.state.selected_raid_monster_id).doAjaxCall("get",s=>{this.setState({is_loading:!1,character_current_health:s.data.character_max_health,character_max_health:s.data.character_current_health,monster_max_health:s.data.monster_max_health,monster_current_health:s.data.monster_current_health,monster_name:e.fetchRaidMonsterName(),raid_boss_attacks_left:s.data.attacks_left,is_raid_boss:s.data.is_raid_boss,elemental_atonement:s.data.elemental_atonemnt,highest_element:s.data.highest_element,update_raid_fight:!0})},s=>{this.setState({is_loading:!1}),console.error(s)})})}resetUpdate(){this.setState({update_raid_fight:!1})}fetchRaidMonsterName(){if(this.props.raid_monsters.length<=0)return"ERROR.";const e=this.props.raid_monsters.find(s=>{if(s.id===this.state.selected_raid_monster_id)return s});return typeof e>"u"?"ERROR.":e.name}revive(){this.setState({is_fighting:!0},()=>{new g().setRoute("battle-revive/"+this.props.character_id).doAjaxCall("post",e=>{this.setState({is_fighting:!1,revived:!0})},e=>{this.setState({is_fighting:!1}),console.error(e)})})}resetRevived(){this.setState({revived:!1})}attackButtonDisabled(){return this.props.is_dead||!this.props.can_attack||this.state.selected_raid_monster_id===0}manageAtonementModal(){this.setState({open_elemental_atonement:!this.state.open_elemental_atonement})}render(){return t.jsxs(o.Fragment,{children:[t.jsx(hr,{set_monster_to_fight:this.setMonsterToFight.bind(this),monsters:this.buildRaidMonsterSelection(),default_monster:this.defaultMonsterSelected(),attack:this.initializeMonsterForAttack.bind(this),is_attack_disabled:this.attackButtonDisabled(),close_monster_section:this.props.close_monster_section}),this.state.is_loading||this.state.is_fighting?t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:"w-[50%]",children:t.jsx(D,{})})}):null,this.props.is_dead&&this.state.monster_name===""?t.jsx("div",{className:"text-center mr-4 mt-4",children:t.jsx(Y,{button_label:"Revive",on_click:this.revive.bind(this),disabled:!this.props.can_attack})}):null,this.props.children,this.state.monster_name!==""?t.jsx($m,{user_id:this.props.user_id,character_current_health:this.state.character_current_health,character_max_health:this.state.character_max_health,monster_current_health:this.state.monster_current_health,monster_max_health:this.state.monster_max_health,can_attack:this.props.can_attack,is_dead:this.props.is_dead,monster_name:this.state.monster_name,monster_id:this.state.selected_raid_monster_id,is_small:this.props.is_small,character_name:this.props.character_name,character_id:this.props.character_id,revive:this.revive.bind(this),reset_revived:this.resetRevived.bind(this),revived:this.state.revived,initial_attacks_left:this.state.raid_boss_attacks_left,is_raid_boss:this.state.is_raid_boss,manage_elemental_atonement_modal:this.manageAtonementModal.bind(this),update_raid_fight:this.state.update_raid_fight,reset_update:this.resetUpdate.bind(this)}):null,this.state.open_elemental_atonement?t.jsx(ur,{element_atonements:this.state.elemental_atonement,highest_element:this.state.highest_element,monster_name:this.state.monster_name,is_open:this.state.open_elemental_atonement,manage_modal:this.manageAtonementModal.bind(this)}):null]})}}class Bm extends c.Component{constructor(e){super(e),this.state={selected_action:null,monsters:[],raid_monsters:[],characters_for_dueling:[],pvp_characters_on_map:[],attack_time_out:0,crafting_time_out:0,automation_time_out:0,celestial_time_out:0,movement_time_left:0,crafting_type:null,duel_fight_info:null,loading:!0,show_exploration:!1,show_celestial_fight:!1,show_duel_fight:!1,show_join_pvp:!1,show_hell_forged_section:!1,show_purgatory_chains_section:!1,show_gambling_section:!1,show_rank_fight:!1,total_ranks:0},this.attackTimeOut=Echo.private("show-timeout-bar-"+this.props.character.user_id),this.craftingTimeOut=Echo.private("show-crafting-timeout-bar-"+this.props.character.user_id),this.mapTimeOut=Echo.private("show-timeout-move-"+this.props.character.user_id),this.explorationTimeOut=Echo.private("exploration-timeout-"+this.props.character.user_id),this.pvpUpdate=Echo.private("update-pvp-attack-"+this.props.character.user_id),this.celestialTimeout=Echo.private("update-character-celestial-timeout-"+this.props.character.user_id),this.manageRankFights=Echo.private("update-rank-fight-"+this.props.character.user_id),this.duelOptions=Echo.join("update-duel"),this.smallActionsManager=new im(this)}componentDidMount(){this.setState({...this.state,...this.props.action_data,loading:!1},()=>{Ws(this.props.character.id)}),this.attackTimeOut.listen("Game.Core.Events.ShowTimeOutEvent",e=>{this.setState({attack_time_out:e.forLength})}),this.craftingTimeOut.listen("Game.Core.Events.ShowCraftingTimeOutEvent",e=>{this.setState({crafting_time_out:e.timeout})}),this.manageRankFights.listen("Game.Maps.Events.UpdateRankFights",e=>{this.setState({show_rank_fight:e.showRankSelection,total_ranks:e.ranks})}),this.mapTimeOut.listen("Game.Maps.Events.ShowTimeOutEvent",e=>{this.setState({movement_time_left:e.forLength})}),this.celestialTimeout.listen("Game.Core.Events.UpdateCharacterCelestialTimeOut",e=>{this.setState({celestial_time_out:e.timeOut})}),this.duelOptions.listen("Game.Maps.Events.UpdateDuelAtPosition",e=>{this.setState({pvp_characters_on_map:e.characters,characters_for_dueling:[]},()=>{la(this.props.character.level)>=301&&this.smallActionsManager.setCharactersForDueling(e.characters)})}),this.pvpUpdate.listen("Game.Battle.Events.UpdateCharacterPvpAttack",e=>{this.setState({show_duel_fight:!0,duel_fight_info:e.data})}),this.explorationTimeOut.listen("Game.Exploration.Events.ExplorationTimeOut",e=>{this.setState({automation_time_out:e.forLength})})}componentDidUpdate(e,s,i){this.props.action_data!==null&&this.state.monsters.length===0&&this.setState({...this.state,...this.props.action_data,loading:!1},()=>{this.props.update_parent_state({monsters:this.state.monsters,raid_monsters:this.state.raid_monsters})}),this.props.action_data!==null&&(this.props.action_data.monsters!=this.state.monsters&&this.setState({monsters:this.props.action_data.monsters}),this.props.action_data.raid_monsters!=this.state.raid_monsters&&this.setState({raid_monsters:this.props.action_data.raid_monsters}))}componentWillUnmount(){this.props.update_parent_state({monsters:this.state.monsters,raid_monsters:this.state.raid_monsters})}setUpState(){if(this.props.action_data===null)return;let e=this.props.action_data;this.setState({...this.state,...e,loading:!1})}showAction(e){this.smallActionsManager.setSelectedAction(e)}updateAttackTimer(e){this.setState({attack_time_out:e})}updateCraftingTimer(e){this.setState({crafting_time_out:e})}closeMonsterSection(){this.setState({selected_action:null})}closeCraftingSection(){this.setState({selected_action:null})}closeMapSection(){this.setState({selected_action:null})}closeExplorationSection(){this.setState({selected_action:null})}closeFightCelestialSection(){this.setState({selected_action:null})}manageDuel(){this.setState({selected_action:null,show_duel_fight:!this.state.show_duel_fight})}manageJoinPvp(){this.setState({selected_action:null,show_join_pvp:!this.state.show_join_pvp})}manageHellForgedShop(){this.setState({selected_action:null})}managePurgatoryChainShop(){this.setState({selected_action:null})}removeSlots(){this.setState({selected_action:null})}resetDuelData(){this.setState({duel_fight_info:null})}createMonster(){return this.state.raid_monsters.length>0?t.jsx(kr,{raid_monsters:this.state.raid_monsters,character_id:this.props.character.id,can_attack:this.props.character.can_attack,is_dead:this.props.character.is_dead,is_small:!1,character_name:this.props.character.name,user_id:this.props.character.user_id,character_current_health:this.props.character.health}):t.jsx(pr,{monsters:this.state.monsters,character:this.props.character,is_rank_fights:this.state.show_rank_fight,total_ranks:this.state.total_ranks,close_monster_section:this.closeMonsterSection.bind(this),character_statuses:this.props.character_status,is_small:!0})}showCrafting(){return t.jsx(qm,{close_crafting_section:this.closeCraftingSection.bind(this),character:this.props.character,character_status:this.props.character_status,crafting_time_out:this.state.crafting_time_out})}renderExploration(){return t.jsx(Dm,{close_exploration_section:this.closeExplorationSection.bind(this),character:this.props.character,monsters:this.state.monsters})}showMapMovement(){return t.jsx(Em,{close_map_section:this.closeMapSection.bind(this),update_celestial:e=>{},view_port:this.props.view_port,character:this.props.character,character_currencies:this.props.character_currencies,update_plane_quests:this.props.update_plane_quests,update_character_position:this.props.update_character_position,map_data:this.props.map_data,set_map_data:this.props.set_map_data})}showCelestialFight(){return t.jsx(jr,{character:this.props.character,manage_celestial_fight:this.closeFightCelestialSection.bind(this),celestial_id:this.props.celestial_id,update_celestial:this.props.update_celestial})}showDuelFight(){return t.jsx(br,{characters:this.state.characters_for_dueling,duel_data:this.state.duel_fight_info,character:this.props.character,manage_pvp:this.manageDuel.bind(this),reset_duel_data:this.resetDuelData.bind(this),is_small:!0})}showSlots(){return t.jsx(vr,{character:this.props.character,close_gambling_section:this.removeSlots.bind(this),is_small:!0})}showJoinPVP(){return t.jsx(xr,{manage_section:this.manageJoinPvp.bind(this),character_id:this.props.character.id})}showSpecialtyShop(e){return t.jsx(Im,{show_hell_forged_section:e==="hell-forged-gear",character:this.props.character,manage_hell_forged_shop:this.manageHellForgedShop.bind(this),manage_purgatory_chain_shop:this.managePurgatoryChainShop.bind(this)})}buildSection(){switch(this.state.selected_action){case"fight":return this.createMonster();case"explore":return this.renderExploration();case"craft":return this.showCrafting();case"map-movement":return this.showMapMovement();case"celestial-fight":return this.showCelestialFight();case"pvp-fight":return this.showDuelFight();case"join-monthly-pvp":return this.showJoinPVP();case"hell-forged-gear":return this.showSpecialtyShop("hell-forged-gear");case"purgatory-chains-gear":return this.showSpecialtyShop("purgatory-chains-gear");case"slots":return this.showSlots();default:return null}}render(){return t.jsxs(o.Fragment,{children:[this.state.selected_action!==null?this.buildSection():t.jsxs(o.Fragment,{children:[t.jsx(B,{onChange:this.showAction.bind(this),options:this.smallActionsManager.buildOptions(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.smallActionsManager.defaultSelectedAction()}),t.jsx(Qt,{can_attack:this.props.character_status.can_attack,is_character_dead:this.props.character.is_dead,character_id:this.props.character.id})]}),t.jsx("div",{className:"pb-5",children:t.jsx(_r,{attack_time_out:this.state.attack_time_out,crafting_time_out:this.state.crafting_time_out,update_attack_timer:this.updateAttackTimer.bind(this),update_crafting_timer:this.updateCraftingTimer.bind(this)})}),t.jsx("div",{className:"mt-4",children:t.jsx(Nn,{time_left:this.state.movement_time_left,automation_time_out:this.state.automation_time_out,celestial_time_out:this.state.celestial_time_out})})]})}}class Gm{constructor(e){this.component=e}updateStateOnComponentUpdate(){this.setCraftingTypeOnUpdate(),this.setDuelingStateOnUpdate()}setCharactersForDueling(e){let s=[];const i=this.component.props;if(i.character_position!==null&&typeof i.character.base_position<"u"){if(s=e.filter(n=>{if(n.id!==i.character.id&&n.character_position_x===i.character.base_position.x&&n.character_position_y===i.character.base_position.y)return n}),s.length===0)return;this.component.setState({characters_for_dueling:s})}}calculateTimeLeft(e){const s=Ye.fromISO(e),i=Ye.now(),r=s.diff(i,["seconds"]).toObject();return typeof r.seconds>"u"?0:parseInt(r.seconds.toFixed(0))}setCraftingTypeOnUpdate(){var i;const e=this.component.state,s=this.component.props;e.crafting_type!==null&&(e.crafting_type==="queen"&&!s.character.can_access_queen&&this.component.setState({crafting_type:null}),e.crafting_type==="workbench"&&!s.character.can_use_work_bench&&this.component.setState({crafting_type:null}),e.crafting_type==="labyrinth-oracle"&&!((i=s.character)!=null&&i.can_access_labyrinth_oracle)&&this.component.setState({crafting_type:null}))}setDuelingStateOnUpdate(){const e=this.component.props,s=this.component.state;if(e.character_position!==null&&s.characters_for_dueling.length>0&&s.characters_for_dueling.length==0){if(typeof e.character_position.game_map_id>"u")return;const i=s.characters_for_dueling.filter(n=>{var r,l,p;return n.character_position_x===((r=e.character_position)==null?void 0:r.x)&&n.character_position_y===((l=e.character_position)==null?void 0:l.y)&&n.game_map_id===((p=e.character_position)==null?void 0:p.game_map_id)});if(i.length===0)return;this.component.setState({characters_for_dueling:i})}}setCraftingType(e){this.component.setState({crafting_type:e})}removeCraftingSection(){this.component.setState({crafting_type:null})}updateCraftingTimer(){this.component.setState({crafting_time_out:0})}getSelectedCraftingOption(){return this.component.state.crafting_type!==null?de.capitalize(this.component.state.crafting_type):""}cannotCraft(){const e=this.component.state,s=this.component.props;return e.crafting_time_out>0||!s.character_status.can_craft||s.character_status.is_dead}buildCraftingList(e){const s=[{name:"Craft",icon_class:"ra ra-hammer",on_click:()=>e("craft")},{name:"Enchant",icon_class:"ra ra-burning-embers",on_click:()=>e("enchant")},{name:"Trinketry",icon_class:"ra ra-anvil",on_click:()=>e("trinketry")},{name:"Gem Crafting",icon_class:"fas fa-gem",on_click:()=>e("gem-crafting")}];return this.component.props.character.is_alchemy_locked||s.splice(2,0,{name:"Alchemy",icon_class:"ra ra-potion",on_click:()=>e("alchemy")}),this.component.props.character.can_use_work_bench&&(typeof s[2]<"u"?s.splice(3,0,{name:"Workbench",icon_class:"ra ra-brandy-bottle",on_click:()=>e("workbench")}):s.splice(2,0,{name:"Workbench",icon_class:"ra ra-brandy-bottle",on_click:()=>e("workbench")})),this.component.props.character.can_access_purgatory_chains&&(typeof s[3]<"u"?s.splice(4,0,{name:"Seer Camp",icon_class:"fas fa-campground",on_click:()=>e("seer-camp")}):s.splice(3,0,{name:"Seer Camp",icon_class:"fas fa-campground",on_click:()=>e("seer-camp")})),this.component.props.character.can_access_labyrinth_oracle&&(typeof s[3]<"u"?s.splice(4,0,{name:"Labyrinth Oracle",icon_class:"ra ra-crystal-ball",on_click:()=>e("labyrinth-oracle")}):s.splice(4,0,{name:"Labyrinth Oracle",icon_class:"ra ra-crystal-ball",on_click:()=>e("labyrinth-oracle")})),this.component.props.character.can_access_queen&&(typeof s[2]<"u"?s.splice(3,0,{name:"Queen of Hearts",icon_class:"ra  ra-hearts",on_click:()=>e("queen")}):s.splice(2,0,{name:"Queen of Hearts",icon_class:"ra ra-hearts",on_click:()=>e("queen")})),s}}class Um extends c.Component{constructor(e){super(e),this.state={monsters:[],raid_monsters:[],characters_for_dueling:[],pvp_characters_on_map:[],attack_time_out:0,crafting_time_out:0,crafting_type:null,duel_fight_info:null,loading:!0,show_exploration:!1,show_celestial_fight:!1,show_duel_fight:!1,show_join_pvp:!1,show_hell_forged_section:!1,show_purgatory_chains_section:!1,show_gambling_section:!1,show_rank_fight:!1,total_ranks:0},this.actionsManager=new Gm(this),this.attackTimeOut=Echo.private("show-timeout-bar-"+this.props.character.user_id),this.craftingTimeOut=Echo.private("show-crafting-timeout-bar-"+this.props.character.user_id),this.pvpUpdate=Echo.private("update-pvp-attack-"+this.props.character.user_id),this.traverseUpdate=Echo.private("update-plane-"+this.props.character.user_id),this.manageRankFights=Echo.private("update-rank-fight-"+this.props.character.user_id),this.duelOptions=Echo.join("update-duel")}componentDidMount(){this.setUpState(),this.attackTimeOut.listen("Game.Core.Events.ShowTimeOutEvent",e=>{this.setState({attack_time_out:e.forLength})}),this.craftingTimeOut.listen("Game.Core.Events.ShowCraftingTimeOutEvent",e=>{this.setState({crafting_time_out:e.timeout})}),this.manageRankFights.listen("Game.Maps.Events.UpdateRankFights",e=>{this.setState({show_rank_fight:e.showRankSelection,total_ranks:e.ranks})}),this.duelOptions.listen("Game.Maps.Events.UpdateDuelAtPosition",e=>{this.setState({pvp_characters_on_map:e.characters,characters_for_dueling:[]},()=>{la(this.props.character.level)>=301&&this.actionsManager.setCharactersForDueling(e.characters)})}),this.pvpUpdate.listen("Game.Battle.Events.UpdateCharacterPvpAttack",e=>{this.setState({show_duel_fight:!0,duel_fight_info:e.data})}),this.traverseUpdate.listen("Game.Maps.Events.UpdateMap",e=>{let s=this.state.crafting_type;(s==="workbench"||s==="queen"||s==="labyrinth-oracle")&&(s=null),this.setState({crafting_type:s,show_hell_forged_section:!1,show_purgatory_chains_section:!1})})}componentDidUpdate(e,s){this.props.action_data!==null&&this.state.loading&&this.setState({...this.state,...this.props.action_data,loading:!1}),this.props.action_data!==null&&(this.props.action_data.monsters!=this.state.monsters&&this.setState({monsters:this.props.action_data.monsters}),this.props.action_data.raid_monsters!=this.state.raid_monsters&&this.setState({raid_monsters:this.props.action_data.raid_monsters}))}componentWillUnmount(){this.props.update_parent_state({monsters:this.state.monsters,raid_monsters:this.state.raid_monsters})}setUpState(){if(this.props.action_data===null)return;let e=this.props.action_data;this.setState({...this.state,...e,loading:!1},()=>{Ws(this.props.character.id),this.props.update_parent_state({monsters:this.state.monsters,raid_monsters:this.state.raid_monsters})})}openCrafting(e){this.setState({show_purgatory_chains_section:!1,show_hell_forged_section:!1},()=>{this.actionsManager.setCraftingType(e)})}manageExploration(){this.setState({show_exploration:!this.state.show_exploration})}manageHellForgedShop(){this.setState({crafting_type:null,show_exploration:!1,show_join_pvp:!1,show_duel_fight:!1,show_celestial_fight:!1,show_hell_forged_section:!this.state.show_hell_forged_section})}managedPurgatoryChainsShop(){this.setState({crafting_type:null,show_exploration:!1,show_join_pvp:!1,show_duel_fight:!1,show_celestial_fight:!1,show_purgatory_chains_section:!this.state.show_purgatory_chains_section})}manageDuel(){this.setState({show_duel_fight:!this.state.show_duel_fight})}manageJoinPvp(){this.setState({show_join_pvp:!this.state.show_join_pvp})}manageFightCelestial(){this.setState({show_celestial_fight:!this.state.show_celestial_fight})}manageGamblingSection(){this.setState({show_gambling_section:!this.state.show_gambling_section})}isLoading(){return this.state.loading||this.state.monsters.length===0}updateAttackTimer(e){this.setState({attack_time_out:e})}updateCraftingTimer(e){this.setState({crafting_time_out:e})}removeCraftingType(){this.actionsManager.removeCraftingSection()}resetDuelData(){this.setState({duel_fight_info:null})}render(){return this.isLoading()?t.jsx(Fe,{}):t.jsxs("div",{children:[t.jsxs("div",{className:"grid md:grid-cols-4",children:[t.jsxs("div",{className:"md:col-start-1 md:col-span-1",children:[!this.state.show_exploration&&!this.state.show_duel_fight&&!this.state.show_join_pvp&&!this.state.show_celestial_fight&&this.props.character!==null?t.jsx("div",{className:"max-w-[100px]",children:t.jsx(kt,{menu_items:this.actionsManager.buildCraftingList(this.openCrafting.bind(this)),button_title:"Craft/Enchant",disabled:this.actionsManager.cannotCraft(),selected_name:this.actionsManager.getSelectedCraftingOption()})}):null,!this.state.show_duel_fight&&!this.state.show_join_pvp&&!this.state.show_celestial_fight?t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Exploration",on_click:this.manageExploration.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead})}):null,this.props.character.can_access_hell_forged?t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Hell Forged Gear",on_click:this.manageHellForgedShop.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead})}):null,this.props.character.can_access_purgatory_chains?t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Purgatory Chains Gear",on_click:this.managedPurgatoryChainsShop.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead})}):null,t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Slots",on_click:this.manageGamblingSection.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead})}),this.props.celestial_id!==0&&!this.state.show_exploration&&!this.state.show_duel_fight&&!this.state.show_join_pvp?t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Fight Celestial!",on_click:this.manageFightCelestial.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead||this.props.character.is_automation_running||!this.props.can_engage_celestial})}):null,this.state.characters_for_dueling.length>0&&!this.state.show_exploration&&!this.state.show_join_pvp&&!this.state.show_celestial_fight?t.jsx("div",{className:"mb-4",children:t.jsx(Nt,{button_label:"Duel!",on_click:this.manageDuel.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead||this.props.character.is_automation_running||this.props.character.killed_in_pvp})}):null,this.props.character.can_register_for_pvp&&!this.state.show_duel_fight&&!this.state.show_exploration&&!this.state.show_celestial_fight?t.jsx("div",{className:"mb-4",children:t.jsx(Ga,{button_label:"Join PVP",on_click:this.manageJoinPvp.bind(this),additional_css:"w-1/2",disabled:this.props.character.is_dead})}):null]}),t.jsxs("div",{className:"md:col-start-2 md:col-span-3 mt-1",children:[!this.state.show_exploration&&!this.state.show_duel_fight&&!this.state.show_join_pvp&&!this.state.show_celestial_fight&&this.state.raid_monsters.length===0?t.jsxs(pr,{monsters:this.state.monsters,character:this.props.character,character_statuses:this.props.character_status,is_rank_fights:this.state.show_rank_fight,total_ranks:this.state.total_ranks,is_small:!1,children:[this.state.crafting_type!==null?t.jsx(Ua,{remove_crafting:this.removeCraftingType.bind(this),type:this.state.crafting_type,character_id:this.props.character.id,user_id:this.props.character.user_id,cannot_craft:this.actionsManager.cannotCraft(),fame_tasks:this.props.fame_tasks,is_small:!1}):null,this.state.show_hell_forged_section||this.state.show_purgatory_chains_section?t.jsx(Ha,{type:this.state.show_hell_forged_section?"Hell Forged":"Purgatory Chains",character_id:this.props.character.id,close_hell_forged:this.manageHellForgedShop.bind(this),close_purgatory_chains:this.managedPurgatoryChainsShop.bind(this)}):null]}):null,!this.state.show_exploration&&!this.state.show_duel_fight&&!this.state.show_join_pvp&&!this.state.show_celestial_fight&&this.state.raid_monsters.length>0?t.jsxs(kr,{raid_monsters:this.state.raid_monsters,character_id:this.props.character.id,can_attack:this.props.character.can_attack,is_dead:this.props.character.is_dead,is_small:!1,character_name:this.props.character.name,user_id:this.props.character.user_id,character_current_health:this.props.character.health,children:[this.state.crafting_type!==null?t.jsx(Ua,{remove_crafting:this.removeCraftingType.bind(this),type:this.state.crafting_type,character_id:this.props.character.id,user_id:this.props.character.user_id,cannot_craft:this.actionsManager.cannotCraft(),fame_tasks:this.props.fame_tasks}):null,this.state.show_hell_forged_section||this.state.show_purgatory_chains_section?t.jsx(Ha,{type:this.state.show_hell_forged_section?"Hell Forged":"Purgatory Chains",character_id:this.props.character.id,close_hell_forged:this.manageHellForgedShop.bind(this),close_purgatory_chains:this.managedPurgatoryChainsShop.bind(this)}):null]}):null,this.state.show_duel_fight?t.jsx(br,{characters:this.state.characters_for_dueling,duel_data:this.state.duel_fight_info,character:this.props.character,manage_pvp:this.manageDuel.bind(this),reset_duel_data:this.resetDuelData.bind(this),is_small:!1}):null,this.state.show_exploration?t.jsx(fr,{character:this.props.character,manage_exploration:this.manageExploration.bind(this),monsters:this.state.monsters}):null,this.state.show_celestial_fight?t.jsx(jr,{character:this.props.character,manage_celestial_fight:this.manageFightCelestial.bind(this),celestial_id:this.props.celestial_id,update_celestial:this.props.update_celestial}):null,this.state.show_join_pvp?t.jsx(xr,{manage_section:this.manageJoinPvp.bind(this),character_id:this.props.character.id}):null,this.state.show_gambling_section?t.jsx(vr,{character:this.props.character,close_gambling_section:this.manageGamblingSection.bind(this),is_small:!1}):null]})]}),t.jsx(_r,{attack_time_out:this.state.attack_time_out,crafting_time_out:this.state.crafting_time_out,update_attack_timer:this.updateAttackTimer.bind(this),update_crafting_timer:this.updateCraftingTimer.bind(this)})]})}}class Hm extends c.Component{constructor(e){super(e)}render(){return t.jsx(o.Fragment,{children:this.props.view_port<1600?t.jsx(Bm,{character:this.props.character,character_status:this.props.character_status,character_position:this.props.character_position,character_currencies:this.props.character_currencies,celestial_id:this.props.celestial_id,update_celestial:this.props.update_celestial,update_plane_quests:this.props.update_plane_quests,update_character_position:this.props.update_character_position,view_port:this.props.view_port,can_engage_celestial:this.props.character.can_engage_celestials,action_data:this.props.action_data,map_data:this.props.map_data,update_parent_state:this.props.update_parent_state,set_map_data:this.props.set_map_data,fame_tasks:this.props.fame_tasks}):t.jsx(Um,{character:this.props.character,character_status:this.props.character_status,character_position:this.props.character_position,celestial_id:this.props.celestial_id,update_celestial:this.props.update_celestial,can_engage_celestial:this.props.character.can_engage_celestials,action_data:this.props.action_data,update_parent_state:this.props.update_parent_state,fame_tasks:this.props.fame_tasks})})}}class Km extends c.Component{constructor(e){super(e)}render(){return t.jsxs(t.Fragment,{children:[t.jsx("h4",{children:"Rewards (when fame levels up)"}),t.jsxs("dl",{className:"my-2",children:[t.jsx("dt",{children:"XP"}),t.jsx("dd",{children:u(this.props.faction_loyalty_npc.current_level>0?this.props.faction_loyalty_npc.current_level*1e3:1e3)}),t.jsx("dt",{children:"Gold"}),t.jsx("dd",{children:u(this.props.faction_loyalty_npc.current_level>0?this.props.faction_loyalty_npc.current_level*1e6:1e6)}),t.jsx("dt",{children:"Gold Dust"}),t.jsx("dd",{children:u(this.props.faction_loyalty_npc.current_level>0?this.props.faction_loyalty_npc.current_level*1e3:1e3)}),t.jsx("dt",{children:"Shards"}),t.jsx("dd",{children:u(this.props.faction_loyalty_npc.current_level>0?this.props.faction_loyalty_npc.current_level*1e3:1e3)}),t.jsx("dt",{children:"Item Reward"}),t.jsx("dd",{children:t.jsxs("a",{href:"/information/random-enchants",target:"_blank",children:["Medium Unique Item ",t.jsx("i",{className:"fas fa-external-link-alt"})]})})]}),t.jsx("h4",{children:"Kingdom Item Defence Bonus"}),t.jsx("p",{className:"my-4",children:"Slowly accumulates as you level this NPC's fame."}),t.jsxs("dl",{children:[t.jsx("dt",{children:"Defence Bonus per level"}),t.jsxs("dd",{children:[(this.props.faction_loyalty_npc.kingdom_item_defence_bonus*100).toFixed(0),"%"]}),t.jsx("dt",{children:"Current Defence Bonus"}),t.jsxs("dd",{children:[(this.props.faction_loyalty_npc.current_kingdom_item_defence_bonus*100).toFixed(0),"%"]})]})]})}}class zm extends c.Component{constructor(e){super(e)}renderTasks(e,s){return e.filter(i=>s?i.type==="bounty":i.type!=="bounty").map(i=>t.jsxs(t.Fragment,{children:[t.jsx("dt",{children:s?i.monster_name:i.item_name+" ["+i.type+"]"}),t.jsxs("dd",{children:[i.current_amount," / ",i.required_amount]})]}))}render(){return t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx(Ys,{primary_label:this.props.faction_loyalty_npc.npc.real_name+" Fame LV: "+this.props.faction_loyalty_npc.current_level+"/"+this.props.faction_loyalty_npc.max_level,secondary_label:this.props.faction_loyalty_npc.current_fame+"/"+this.props.faction_loyalty_npc.next_level_fame+" Fame",percentage_filled:this.props.faction_loyalty_npc.current_fame/this.props.faction_loyalty_npc.next_level_fame*100,push_down:!1})}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("h3",{className:"my-2",children:" Bounties "}),t.jsx("dl",{children:this.renderTasks(this.props.faction_loyalty_npc.faction_loyalty_npc_tasks.fame_tasks,!0)})]}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{children:[t.jsx("h3",{className:"my-2",children:" Crafting "}),t.jsx("dl",{children:this.renderTasks(this.props.faction_loyalty_npc.faction_loyalty_npc_tasks.fame_tasks,!1)})]})]}),t.jsx("p",{className:"my-4",children:"Bounties must be completed on the respective plane and manually. Automation will not work for this."})]})}}class Wm extends c.Component{constructor(e){super(e),this.state={is_loading:!0,is_processing:!1,selected_npc:null,error_message:null,success_message:null,npcs:[],game_map_name:null,faction_loyalty:null,selected_faction_loyalty_npc:null}}componentDidMount(){new g().setRoute("faction-loyalty/"+this.props.character_id).doAjaxCall("get",e=>{this.setState({is_loading:!1,npcs:e.data.npcs,game_map_name:e.data.map_name,faction_loyalty:e.data.faction_loyalty},()=>{this.setInitialSelectedFactionInfo(e.data.faction_loyalty,e.data.npcs)})},e=>{this.setState({is_loading:!1}),e.response&&this.setState({error_message:e.response.data.message})})}manageAssistingNpc(e){this.state.selected_faction_loyalty_npc&&this.setState({error_message:null,is_processing:!0},()=>{if(!this.state.selected_faction_loyalty_npc){this.setState({error_message:null,is_processing:!1});return}new g().setRoute("faction-loyalty/"+(e?"stop-assisting":"assist")+"/"+this.props.character_id+"/"+this.state.selected_faction_loyalty_npc.id).doAjaxCall("post",s=>{this.setState({is_processing:!1,success_message:s.data.message,faction_loyalty:s.data.faction_loyalty},()=>{this.setInitialSelectedFactionInfo(s.data.faction_loyalty,this.state.npcs)})})})}setInitialSelectedFactionInfo(e,s){let i=e.faction_loyalty_npcs.filter(r=>r.currently_helping);if(i.length===0){i=e.faction_loyalty_npcs.filter(r=>r.npc_id===s[0].id),this.setState({selected_npc:s[0],selected_faction_loyalty_npc:i[0]}),this.props.update_faction_action_tasks(null);return}const n=i[0];return this.setState({selected_npc:s.filter(r=>r.id===n.npc_id)[0],selected_faction_loyalty_npc:n}),this.props.update_faction_action_tasks(n.faction_loyalty_npc_tasks.fame_tasks.filter(r=>r.type!=="bounty")),i[0]}buildNpcList(e){return this.state.npcs.map(s=>({name:s.name,icon_class:"ra ra-aura",on_click:()=>e(s)}))}selectedNpc(){var e,s;return(s=(e=this.state.npcs)==null?void 0:e.find(i=>{var n;return i.name===((n=this.state.selected_npc)==null?void 0:n.name)}))==null?void 0:s.name}switchToNpc(e){this.state.faction_loyalty&&this.setState({selected_npc:e,selected_faction_loyalty_npc:this.state.faction_loyalty.faction_loyalty_npcs.filter(s=>s.npc_id===e.id)[0]})}isAssisting(){return this.state.selected_faction_loyalty_npc?this.state.selected_faction_loyalty_npc.currently_helping:!1}render(){return this.state.is_loading||this.state.faction_loyalty===null?t.jsx("div",{className:"w-1/2 m-auto",children:t.jsx(D,{})}):this.state.selected_faction_loyalty_npc?this.state.error_message!==null?t.jsx(z,{additional_css:"my-4",children:this.state.error_message}):t.jsxs("div",{className:"py-4",children:[t.jsxs("h2",{children:[this.state.game_map_name," Loyalty"]}),t.jsx("p",{className:"my-4",children:"Below you can select an NPC to assist. Each NPC will have it's own set of tasks to complete. Crafting tasks can be done any where, bounty tasks must be done manually and on the map of the NPC you are assisting."}),t.jsx("p",{className:"my-4",children:"In order to gain fame, you must assist the NPC and by completing their tasks you will level the fame and gain the rewards as indicated but multiplied by the level of the npc's fame. You may only assist one NPC at a time and can freely switch at anytime."}),t.jsx("p",{className:"my-4",children:t.jsxs("a",{href:"/information/faction-loyalty",target:"_blank",className:"my-2",children:["Learn more about Faction Loyalties ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}),t.jsx("div",{className:"my-4",children:this.state.success_message?t.jsx(je,{children:this.state.success_message}):null}),t.jsx("div",{className:"my-4",children:this.state.is_processing?t.jsx(D,{}):null}),t.jsx("div",{className:"border-b-2 border-b-gray-300 dark:border-b-gray-600 my-3"}),t.jsxs("div",{className:"my-4 flex flex-wrap md:flex-nowrap gap-2",children:[t.jsxs("div",{className:"flex-none mt-[-25px] md:w-1/2",children:[t.jsxs("div",{className:"w-full relative left-0 flex flex-wrap",children:[t.jsx("div",{children:t.jsx(kt,{menu_items:this.buildNpcList(this.switchToNpc.bind(this)),button_title:"NPCs",selected_name:this.selectedNpc()})}),t.jsx("div",{children:this.isAssisting()?t.jsx(Pt,{button_label:"Stop Assisting",on_click:()=>this.manageAssistingNpc(!0),additional_css:"mt-[34px] ml-4"}):t.jsx(He,{button_label:"Assist",on_click:()=>this.manageAssistingNpc(!1),additional_css:"mt-[34px] ml-4"})}),t.jsx("div",{children:t.jsx("div",{className:"mt-[38px] ml-4 font-bold",children:t.jsx("span",{children:this.selectedNpc()})})})]}),t.jsx(Km,{faction_loyalty_npc:this.state.selected_faction_loyalty_npc})]}),t.jsx("div",{className:"flex-none md:flex-auto w-full md:w-1/2",children:t.jsx(zm,{faction_loyalty_npc:this.state.selected_faction_loyalty_npc})})]})]}):t.jsx(z,{additional_css:"my-4",children:"Uh oh. We encountered an error here. Seems there is no Faction Loyalty info for this NPC. Not sure how that happened, but I would tell The Creator to investigate how the Faction Loyalty info is fetched for an NPC."})}}class Ym extends c.Component{constructor(e){super(e),this.tabs=[{key:"actions",name:"Actions"},{key:"faction-loyalty",name:"Faction Loyalty"}]}render(){return this.props.use_tabs?t.jsxs(Be,{tabs:this.tabs,disabled:!1,children:[t.jsx(H,{children:this.props.children},"actions"),t.jsx(H,{children:t.jsx(Wm,{character_id:this.props.character_id,update_faction_action_tasks:this.props.update_faction_action_tasks})},"faction-loyalty")]}):this.props.children}}class Qm extends c.Component{constructor(e){super(e),this.gameEventListener=dt().fetch(na),this.gameEventListener.initialize(this,this.props.userId),this.gameEventListener.registerEvents(),this.state={view_port:0,character_status:null,loading:!0,finished_loading:!1,character_currencies:null,secondary_loading_title:"Fetching character sheet ...",percentage_loaded:0,celestial_id:0,character:null,kingdoms:[],kingdom_logs:[],quests:null,position:null,disable_tabs:!1,show_global_timeout:!1,action_data:null,map_data:null,fame_action_tasks:null,tabs:[{key:"game",name:"Game"},{key:"character-sheet",name:"Character Sheet"},{key:"quests",name:"Quests"},{key:"kingdoms",name:"Kingdoms",has_logs:!1}]}}componentDidMount(){this.setState({view_port:window.innerWidth||document.documentElement.clientWidth}),window.addEventListener("resize",()=>{this.setState({view_port:window.innerWidth||document.documentElement.clientWidth})}),new ec(this).setUrls([{url:"character-sheet/"+this.props.characterId,name:"character-sheet"},{url:"quests/"+this.props.characterId,name:"quests"},{url:"map-actions/"+this.props.characterId,name:"actions"},{url:"player-kingdoms/"+this.props.characterId,name:"kingdoms"},{url:"map/"+this.props.characterId,name:"game-map"}]).doAjaxCalls(),this.gameEventListener&&this.gameEventListener.listenToEvents()}setStateFromData(e){const s=Va.buildChangeState(e,this);this.setState({map_data:s})}updateLogIcon(){const e=JSON.parse(JSON.stringify(this.state.tabs));this.state.kingdom_logs.length>0&&(this.state.kingdom_logs.filter(i=>!i.opened).length>0?e[e.length-1].has_logs=!0:e[e.length-1].has_logs=!1),this.setState({tabs:e})}updateDisabledTabs(){this.setState({disable_tabs:!this.state.disable_tabs})}updateCharacterStatus(e){this.setState({character_status:e})}updateCharacterCurrencies(e){this.setState({character_currencies:e})}setCharacterPosition(e){const s=JSON.parse(JSON.stringify(this.state.character));s.base_position=e,this.setState({position:e,character:s})}updateCharacterQuests(e){this.setState({quests:e})}updateQuestPlane(e){if(this.state.quests!==null){const s=JSON.parse(JSON.stringify(this.state.quests));s.player_plane=e,this.setState({quests:s})}}updateCelestial(e){this.setState({celestial_id:e!==null?e:0})}updateFinishedLoading(){this.setState({finished_loading:!0})}setActionState(e){this.setState({action_data:{...this.state.action_data,...e}})}setMapState(e){this.setState({map_data:e})}setCanSeeFactionLoyaltyTab(e,s){const i=JSON.parse(JSON.stringify(this.state.character));i.can_see_pledge_tab=e,i.pledged_to_faction_id=s,this.setState({character:i})}updateFactionActionTasks(e){this.setState({fame_action_tasks:e})}renderLoading(){return t.jsx("div",{className:"flex h-screen justify-center items-center max-w-md m-auto mt-[-150px]",children:t.jsx("div",{className:"w-full",children:t.jsx(to,{label:"Loading game ...",secondary_label:this.state.secondary_loading_title,percentage_left:this.state.percentage_loaded,show_loading_icon:!0})})})}render(){return this.state.loading?this.renderLoading():this.state.quests===null?this.renderLoading():this.state.character===null?this.renderLoading():this.state.character_currencies===null?this.renderLoading():this.state.character_status===null?this.renderLoading():t.jsxs(o.Fragment,{children:[t.jsx(Gh,{user_id:this.state.character.user_id}),t.jsxs(Be,{tabs:this.state.tabs,disabled:this.state.disable_tabs,additonal_css:$({"ml-[40px]":this.state.view_port>=1600}),icon_key:"has_logs",children:[t.jsx(H,{children:t.jsxs("div",{className:$("grid lg:grid-cols-3 gap-3",{"ml-[40px]":this.state.view_port>=1600}),children:[t.jsxs("div",{className:"w-full col-span-3 lg:col-span-2",children:[t.jsx(_e,{additionalClasses:"mb-10",children:t.jsx(vl,{character:this.state.character,view_port:this.state.view_port,update_character_status:this.updateCharacterStatus.bind(this),update_character_currencies:this.updateCharacterCurrencies.bind(this)})}),t.jsx(_e,{additionalClasses:$("min-h-60",{"ml-auto mr-auto":this.state.view_port<1600}),children:t.jsx(Ym,{use_tabs:this.state.character.can_see_pledge_tab,character_id:this.props.characterId,update_faction_action_tasks:this.updateFactionActionTasks.bind(this),children:t.jsx(Hm,{character:this.state.character,character_status:this.state.character_status,character_position:this.state.position,character_currencies:this.state.character_currencies,celestial_id:this.state.celestial_id,update_celestial:this.updateCelestial.bind(this),update_plane_quests:this.updateQuestPlane.bind(this),update_character_position:this.setCharacterPosition.bind(this),view_port:this.state.view_port,can_engage_celestial:this.state.character.can_engage_celestials,action_data:this.state.action_data,map_data:this.state.map_data,update_parent_state:this.setActionState.bind(this),set_map_data:this.setMapState.bind(this),fame_tasks:this.state.fame_action_tasks})})})]}),t.jsx(_e,{additionalClasses:$("hidden lg:block md:mt-0 lg:col-start-3 lg:col-end-3 max-h-[630px] max-w-[555px]",{"max-h-[700px]":this.state.character.can_use_event_goals_button,"max-h-[624px]":this.state.character.is_dead}),children:t.jsx(am,{use_tabs:this.state.character.can_use_event_goals_button,character_id:this.state.character.id,children:t.jsx(ps,{user_id:this.props.userId,character_id:this.props.characterId,view_port:this.state.view_port,currencies:this.state.character_currencies,is_dead:this.state.character.is_dead,is_automaton_running:this.state.character.is_automation_running,can_engage_celestial:this.state.character.can_engage_celestials,automation_completed_at:this.state.character.automation_completed_at,can_engage_celestials_again_at:this.state.character.can_engage_celestials_again_at,show_celestial_fight_button:this.updateCelestial.bind(this),set_character_position:this.setCharacterPosition.bind(this),update_character_quests_plane:this.updateQuestPlane.bind(this),disable_bottom_timer:!1,map_data:this.state.map_data,set_map_data:this.setMapState.bind(this)})})})]})},"game"),t.jsx(H,{children:t.jsx($h,{character:this.state.character,finished_loading:this.state.finished_loading,view_port:this.state.view_port,update_disable_tabs:this.updateDisabledTabs.bind(this),update_pledge_tab:this.setCanSeeFactionLoyaltyTab.bind(this),update_faction_action_tasks:this.updateFactionActionTasks.bind(this)})},"character-sheet"),t.jsx(H,{children:t.jsx(_e,{children:t.jsx(Zl,{quest_details:this.state.quests,character_id:this.props.characterId,update_quests:this.updateCharacterQuests.bind(this)})})},"quests"),t.jsx(H,{children:t.jsx(em,{my_kingdoms:this.state.kingdoms,logs:this.state.kingdom_logs,view_port:this.state.view_port,character_gold:la(this.state.character.gold),user_id:this.state.character.user_id})},"kingdoms")]}),t.jsx(so,{user_id:this.props.userId,character_id:this.state.character.id,is_silenced:this.state.character.is_silenced,can_talk_again_at:this.state.character.can_talk_again_at,is_automation_running:this.state.character.is_automation_running,is_admin:!1,view_port:this.state.view_port,update_finished_loading:this.updateFinishedLoading.bind(this)}),this.state.character.force_name_change?t.jsx(Bh,{character_id:this.state.character.id}):null,this.state.show_global_timeout?t.jsx(tm,{}):null]})}}const dn=document.getElementById("game");if(dn!==null){const a=document.head.querySelector('meta[name="player"]'),e=document.head.querySelector('meta[name="character"]'),s={userId:a===null?0:parseInt(a.content),characterId:e===null?0:parseInt(e.content)};oa(dn).render(t.jsx(Qm,{characterId:s.characterId,userId:s.userId}))}const Vm={getValue:a=>a.character_name},Xm=[{getValue:a=>a.rank,elementType:"line"}];class Jm extends c.Component{constructor(e){super(e)}createDataSet(e,s){const i=[];return e.forEach((n,r)=>{i.push({rank:n,character_name:s[r]})}),i}buildLink(e,s){return t.jsxs("a",{href:"/information/"+s,target:"_blank",children:[e," ",t.jsx("i",{className:"fas fa-external-link-alt"})]})}render(){const e=[{label:"Ranked Fights",data:this.createDataSet(this.props.data,this.props.labels)}];return this.props.data.length>0?t.jsx(ao,{height:350,children:t.jsx(io,{options:{data:e,primaryAxis:Vm,secondaryAxes:Xm}})}):t.jsxs(o.Fragment,{children:[t.jsx("p",{className:"my-4",children:"No one has completed any ranks yet (no chart to load). Completing a rank involves killing the the last critter in a ranks monster list. While not required, there are rewards for each rank, including being the first to the top of the current months rank."}),t.jsxs("p",{className:"mb-4",children:["Characters will need to make use of ",this.buildLink("Reincarnation","reincarnation"),",",this.buildLink("Class Ranks and Class Specials","class-ranks")," to truly make it down the Rank List."]})]})}}class Zm extends c.Component{constructor(e){super(e),this.state={loading:!0,chart_data:[],list_data:[],current_rank:0,rank_selected:0,fetching_rank:!1,dark_tables:!1}}componentDidMount(){no(this),new g().setRoute("ranked-fight-tops").doAjaxCall("get",e=>{this.setState({loading:!1,chart_data:e.data.character_tops_chart,current_rank:e.data.current_rank})},e=>{})}setRank(e){e.value!==0&&this.setState({fetching_rank:!0,rank_selected:e.value},()=>{new g().setRoute("rank-fight-tops-list").setParameters({rank:e.value}).doAjaxCall("get",s=>{this.setState({fetching_rank:!1,list_data:s.data.rank_data})},s=>{})})}options(){const e=[];for(let s=1;s<=this.state.current_rank;s++)e.push({label:"Rank "+s,value:s});return e}getSelectedRank(){return this.state.rank_selected===0?[{label:"Please select a rank",value:0}]:[{label:"Rank "+this.state.rank_selected,value:this.state.rank_selected}]}renderRankSelection(){return this.state.chart_data.data.length===0?null:t.jsx("div",{className:"my-4",children:t.jsx(B,{onChange:this.setRank.bind(this),options:this.options(),menuPosition:"absolute",menuPlacement:"bottom",styles:{menuPortal:e=>({...e,zIndex:9999,color:"#000000"})},menuPortalTarget:document.body,value:this.getSelectedRank()})})}renderList(){return this.state.list_data.length===0?null:this.state.list_data.map(e=>t.jsxs(o.Fragment,{children:[t.jsx("dt",{children:"Character Name:"}),t.jsx("dd",{children:e.character_name}),t.jsx("dt",{children:"Achieved At:"}),t.jsx("dd",{children:e.date})]}))}renderRankSection(){return t.jsxs(o.Fragment,{children:[t.jsx("div",{className:"my-4",children:t.jsx(Jm,{data:this.state.chart_data.data,labels:this.state.chart_data.labels})}),t.jsxs("div",{className:"mx-auto w-full md:w-1/2",children:[this.renderRankSelection(),this.state.fetching_rank?t.jsx("div",{className:"my-4",children:t.jsx(D,{})}):null]}),this.state.list_data.length>0?t.jsxs("div",{className:"mx-auto w-full md:w-1/2",children:[t.jsxs("h3",{className:"my-2",children:["Rank ",this.state.rank_selected]}),t.jsx("p",{className:"mb-2 text-sm",children:"Timezone is: GMT-6"}),t.jsx(Ie,{data:this.state.list_data,columns:[{name:"Character Name",selector:e=>e.character_name,cell:e=>t.jsx("a",{href:"/game/tops/"+e.character_id,children:e.character_name})},{name:"Date Achieved",selector:e=>e.date}],dark_table:this.props.dark_table})]}):null]})}render(){return t.jsx(_e,{children:this.state.loading?t.jsx("div",{className:"p-4 m-4 mx-auto w-full md:w-1/2",children:t.jsx(Fe,{})}):this.renderRankSection()})}}const hn=document.getElementById("rank-tops-info");hn!==null&&oa(hn).render(t.jsx(Zm,{}));class ep extends c.Component{constructor(e){super(e),this.state={events:[],loading:!0},this.updateScheduledEvents=Echo.join("update-event-schedule")}color(e){return e==="Weekly Celestials"?"#0891B2":e==="Weekly Currency Drops"?"#E11D48":e==="Monthly PVP"?"#2563EB":"#1976d2"}componentDidMount(){new g().setRoute("calendar/events").doAjaxCall("get",e=>{this.setState({events:e.data.events.map(s=>(s.start=new Date(s.start),s.end=new Date(s.end),s.color=s.currently_running?"#16a34a":this.color(s.title),s)),loading:!1})},e=>{console.error(e)}),this.updateScheduledEvents.listen("Flare.Events.UpdateScheduledEvents",e=>{this.setState({loading:!0},()=>{this.setState({events:e.eventData.map(s=>(s.start=new Date(s.start),s.end=new Date(s.end),s.color=s.currently_running?"#16a34a":this.color(s.title),s)),loading:!1})})})}render(){return this.state.loading?t.jsx(D,{}):t.jsx(ro,{events:this.state.events,view:"month",viewerExtraComponent:(e,s)=>t.jsx(oo,{event:s,deleting:!1}),can_edit:!1})}}const un=document.getElementById("player-event-calendar");un!==null&&oa(un).render(t.jsx(ep,{}));
